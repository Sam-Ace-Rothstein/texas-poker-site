<!DOCTYPE HTML>
<!--
	Helios by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Host a table and earn SOL</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="left-sidebar is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header">

					<!-- Inner -->
						<div class="inner">
							<header>
								<h1><a href="index.html" id="logo">‚ô§ ‚ô° ‚ôß ‚ô¢ $Texas Poker Bot ‚ô§ ‚ô° ‚ôß ‚ô¢</a></h1>
							</header>
						</div>

					<!-- Nav -->
					<nav id="nav">
						<ul>
							<li><a href="index.html">Play</a></li>
			<li><a href="left-sidebar.html">Earn</a></li>
						</ul>
					</nav>

			</div>

			<!-- Main -->
				<div class="wrapper style1">

					<div class="container">
						<div class="row gtr-200">
							<div class="col-4 col-12-mobile" id="sidebar">
								<hr class="first" />
								<section>
									<header>
										<h3><a href="#">Hello Boss</a></h3>
									</header>
									<p>You now earn SOL on every eligable hand. </p>

									 <p>Rules:</p>

										<p>The rake works like this... No Flop, No Drop. Only applies if the final pot meets the table‚Äôs minimum-pot threshold (20 tokens) up to a maximum rake of 3x the big blind (default cap). All collected rake is split between the house (50%), The table host/group admin (30%) and user buybacks (20%).</p>

											<p>Tokens are distributed automatically after every hand. You can withdraw the gameplay tokens you earn as a host back into SOL after you make one depost (min 0.1 SOL). You are then free to earn and checkout your tokens back into SOL anytime. </p>
										
												<p>Bring more players to the table and earn more SOL! üî•</p>

													<p>You're now the boss. </p>
									</p>
									<footer>
										<a href="#" class="button">@texas_holdem_dealer_bot</a>
									</footer>
								</section>								
							</div>
							<div class="col-8 col-12-mobile imp-mobile" id="content">
								<article id="main">
									<header>
										<h2><a href="#">Host a Table and Earn $SOL</a></h2>
										<p>
											Invite players to your table > Earn 30% of the rake üî• 
										</p>
									</header>
									<a href="#" class="image featured"><img src="images/createtable.gif" alt="" /></a>
								</article>
							</div>
						</div>
						<hr />
						<div class="row">
							<article class="col-4 col-12-mobile special">
								<a href="#" class="image featured"><img src="images/pic07.jpg" alt="" /></a>
								<header>
									<h3><a href="#">Build a Community</a></h3>
								</header>
								<p>
									Amet nullam fringilla nibh nulla convallis tique ante proin sociis accumsan lobortis. Auctor etiam
									porttitor phasellus tempus cubilia ultrices tempor sagittis. Nisl fermentum consequat integer interdum.
								</p>
							</article>
							<article class="col-4 col-12-mobile special">
								<a href="#" class="image featured"><img src="images/pic08.jpg" alt="" /></a>
								<header>
									<h3><a href="#">Sed quis rhoncus placerat</a></h3>
								</header>
								<p>
									Amet nullam fringilla nibh nulla convallis tique ante proin sociis accumsan lobortis. Auctor etiam
									porttitor phasellus tempus cubilia ultrices tempor sagittis. Nisl fermentum consequat integer interdum.
								</p>
							</article>
							<article class="col-4 col-12-mobile special">
								<a href="#" class="image featured"><img src="images/pic09.jpg" alt="" /></a>
								<header>
									<h3><a href="#">Magna laoreet et aliquam</a></h3>
								</header>
								<p>
									Amet nullam fringilla nibh nulla convallis tique ante proin sociis accumsan lobortis. Auctor etiam
									porttitor phasellus tempus cubilia ultrices tempor sagittis. Nisl fermentum consequat integer interdum.
								</p>
							</article>
						</div>
					</div>

				</div>

						<!-- Footer -->
						<div id="footer">
							<div class="container">
								<div class="row">
		
								</div>
								<hr />
								<div class="row">
									<div class="col-12">
		
										<!-- Contact -->
											<section class="contact">
												<p>‚ÄúPoker is a hard way to make an easy living.‚Äù</em> ‚Äî Doyle Brunson</p>
												<ul class="icons">
													<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
													<li><a href="#" class="icon brands fa-dribbble"><span class="label">Telegram</span></a></li>
												</ul>
											</section>
		
										<!-- Copyright -->
											<div class="copyright">
												<ul class="menu">
													<li>&copy; @texas_poker_dealer_bot. All rights reserved.</li>
												</ul>
											</div>
									</div>
								</div>
							</div>
						</div>
				</div>
				<!-- jQuery & Helios scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
		
		<!-- Telegram info loader -->
		<script>
		  const params     = new URLSearchParams(window.location.search);
		  const greetingEl = document.getElementById("greeting");
		  const walletUi   = document.getElementById("wallet-ui");
		  const handle     = params.get("handle");
		  const userId     = params.get("username");
		
		  if (userId) {
		  // logged-in view
		  greetingEl.innerHTML = `
			<h3 style="text-align:center; font-size:1.5rem; margin:0;">
			  Hello, <strong>${handle || 'Anonymous'}</strong> (TG ID: <strong>${userId}</strong>)
			</h3>
			<p style="text-align:center; margin-top:0.5rem; color:#eee; font-size:1.3rem; font-weight:300;">
			  Full casino rules Texas Hold‚Äôem gameplay directly in Telegram group chat.
			</p>
			<p style="text-align:center; margin-top:0.5rem; color:#eee; font-size:1.3rem; font-weight:300;">
			  Swap your Solana for gameplay tokens and take a seat at any public table.
			</p>
			<p style="text-align:center; margin-bottom:0.5rem; color:#eee; font-size:1.3rem; font-weight:300;">
			  Host a table and automatically earn 30% of the rake üî•
			</p>
			<p style="text-align:center; margin-bottom:0.5rem; color:#eee; font-size:1.3rem; font-weight:300;">
			  Create and manage your own tables (public or private) in any TG group you manage. 
			</p>
			<p style="text-align:center; color:#eee; font-size:1.3rem; font-weight:300;">
			  Trustless smart contract üß¨ on Solana.
			</p>
		  `;
		  walletUi.style.display = ""; // un-hide
		} else {
		  // public visitor view
		  greetingEl.innerHTML = `
			<h3 style="text-align:center; font-size:1.5rem; font-weight:600; margin:0;">
			  Welcome! ‚ô§ Shuffle Up Your Solana and Deal High Roller!
			</h3>
			<p style="text-align:center; margin-bottom:0.5rem; color:#eee; font-size:1.3rem; font-weight:300;">
			  Play Full Casino rules Texas Hold'em poker with <strong>$SOL</strong> in any TG group.
			</p>
			<p style="text-align:center; margin-bottom:0.5rem; color:#eee; font-size:1.3rem; font-weight:300;">
			  Swap Solana for Gameplay tokens via the trustless Smart Contract.
			</p>
			<p style="text-align:center; margin-bottom:0.5rem; color:#eee; font-size:1.3rem; font-weight:300;">
			  Host a table in a group you manage and automatically earn 30% of the rake üî•
			</p>
			<p style="text-align:center; color:#eee; font-size:1.3rem; font-weight:300;">
			  Trustless smart contract üß¨ on Solana.
			</p>
			<div style="display:flex; flex-direction:column; align-items:center; margin-top:0.75rem; font-size:1.5rem;">
		  Launch the Bot ‚Üí
		  <a
			href="https://t.me/texas_holdem_dealer_bot"
			target="_blank"
			rel="noopener"
			style="text-decoration:underline; font-weight:600;"
		  >@texas_holdem_dealer_bot</a>
		</div>
		  `;
		  walletUi.style.display = "none";  // ensure hidden
		}
		</script>
		
		<!-- Debug script to print out whatever is in those elements -->
		<script>
		  document.addEventListener('DOMContentLoaded', () => {
			console.log('[Debug] sol-balance text ‚Üí', 
			  document.querySelector('#sol-balance strong').textContent
			);
			console.log('[Debug] token-balance text ‚Üí', 
			  document.querySelector('#token-balance strong').textContent
			);
		  });
		</script>
		
			<!-- Fill in TG info & stats loader -->
			<script>
			// ‚Üê this was missing!
			const API_BASE = "https://texas-poker-production.up.railway.app";
			
			const ID_TO_PROP = {
			  "total-tables":        "totalTables",
			  "total-public-tables": "totalPublicTables",
			  "total-private-tables":"totalPrivateTables",
			  "total-players":       "totalPlayers",
			  "total-transfers-in":  "totalTransfersIn",
			  "total-on-table":      "totalOnTable",
			  "sum-wallets":         "sumWallets",
			  "house-balance":       "houseBalance",
			  "grand-total":         "grandTotal",
			  "avg-stack":           "avgStack",
			  "avg-pot":             "avgPot",
			  "total-hands-dealt":   "totalHandsDealt",
			  "total-all-in":        "totalAllIn",
			  "total-bets":          "totalBets",
			  "total-wins":          "totalWins"
			  // (and if you still want your mini-stats bar: 
			  //   "total-tokens": "totalTokens")
			};
			
			async function loadStats() {
			  try {
				const res  = await fetch(`${API_BASE}/api/stats`);
				const data = await res.json();
				console.log("stats‚Üí", data);          // ‚Üê sanity-check
				for (let [id, prop] of Object.entries(ID_TO_PROP)) {
				  // update *all* matching elements, not just first
				  document
					.querySelectorAll(`#${id}`)
					.forEach(el => {
					  el.textContent = data[prop] != null 
						? data[prop] 
						: "0";
					});
				}
			  } catch(e) {
				console.error("Couldn‚Äôt load poker stats:", e);
			  }
			}
			loadStats();
			setInterval(loadStats, 30_000);
		  </script>
				<!-- Point Vite to your Account.jsx entry -->
		<script type="module" src="/src/Account.jsx"></script>
		
		<!-- 1) load the UMD bundle so you get a global `solanaWeb3` -->
		<script src="https://unpkg.com/@solana/web3.js@1.78.0/lib/index.iife.min.js"></script>
		
		<!-- 2) fetch & display the vault‚Äôs SOL -->
		<script>
		document.addEventListener('DOMContentLoaded', async () => {
		  try {
			// ‚îÄ‚îÄ‚îÄ CONFIGURE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
			const RPC_ENDPOINT      = 'https://api.devnet.solana.com';
			const PROGRAM_ID        = '8yLj1vjS1JXYyekcBiRqM7rmrtf4a9dFuB6UZemYAH8L';  // your staking_vault_v2 program
			const VAULT_SEED        = 'vault_v2';                                 // seed used on-chain
		
			// ‚îÄ‚îÄ‚îÄ DERIVE PDA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
			const { Connection, PublicKey } = solanaWeb3;
			const programId  = new PublicKey(PROGRAM_ID);
			const seedBuf    = new TextEncoder().encode(VAULT_SEED);
			const [vaultPDA] = await PublicKey.findProgramAddress([seedBuf], programId);
		
			// ‚îÄ‚îÄ‚îÄ FETCH & FORMAT BALANCE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
			const conn      = new Connection(RPC_ENDPOINT, 'confirmed');
			const lamports  = await conn.getBalance(vaultPDA);
			const sol       = (lamports / 1e9).toFixed(4);
		
			// ‚îÄ‚îÄ‚îÄ WRITE OUT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
			document
			  .querySelectorAll('#vault-sol')
			  .forEach(el => { el.textContent = sol; });
		
		  } catch (err) {
			console.error('Failed to fetch vault balance:', err);
		  }
		});
		</script>
		
			</body>
		</html>