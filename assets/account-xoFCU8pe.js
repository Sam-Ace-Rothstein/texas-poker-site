const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DYOSq6fe.js","assets/noscript-B5JlcOPU.css","assets/index-Cs7sznY2.js","assets/secp256k1-Dr5XJ9nh.js","assets/secp256k1-B2lpO346.js","assets/basic-oEKE6nP4.js","assets/index-cNsw-A7n.js","assets/w3m-modal-SDsueuOS.js"])))=>i.map(i=>d[i]);
var Ej=Object.defineProperty;var _j=(t,e,r)=>e in t?Ej(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var br=(t,e,r)=>_j(t,typeof e!="symbol"?e+"":e,r);/* empty css                 */(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Dh(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var H2={exports:{}},E0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI;function Sj(){if(RI)return E0;RI=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:t,type:n,key:o,ref:i!==void 0?i:null,props:s}}return E0.Fragment=e,E0.jsx=r,E0.jsxs=r,E0}var DI;function Aj(){return DI||(DI=1,H2.exports=Sj()),H2.exports}var qr=Aj(),W2={exports:{}},Jt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $I;function Ij(){if($I)return Jt;$I=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function E(v){return v===null||typeof v!="object"?null:(v=p&&v[p]||v["@@iterator"],typeof v=="function"?v:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,I={};function $(v,O,x){this.props=v,this.context=O,this.refs=I,this.updater=x||S}$.prototype.isReactComponent={},$.prototype.setState=function(v,O){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,O,"setState")},$.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function L(){}L.prototype=$.prototype;function k(v,O,x){this.props=v,this.context=O,this.refs=I,this.updater=x||S}var U=k.prototype=new L;U.constructor=k,A(U,$.prototype),U.isPureReactComponent=!0;var q=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function V(v,O,x,N,H,Y){return x=Y.ref,{$$typeof:t,type:v,key:O,ref:x!==void 0?x:null,props:Y}}function G(v,O){return V(v.type,O,void 0,void 0,void 0,v.props)}function B(v){return typeof v=="object"&&v!==null&&v.$$typeof===t}function W(v){var O={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(x){return O[x]})}var D=/\/+/g;function _(v,O){return typeof v=="object"&&v!==null&&v.key!=null?W(""+v.key):O.toString(36)}function w(){}function g(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(w,w):(v.status="pending",v.then(function(O){v.status==="pending"&&(v.status="fulfilled",v.value=O)},function(O){v.status==="pending"&&(v.status="rejected",v.reason=O)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function b(v,O,x,N,H){var Y=typeof v;(Y==="undefined"||Y==="boolean")&&(v=null);var Q=!1;if(v===null)Q=!0;else switch(Y){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(v.$$typeof){case t:case e:Q=!0;break;case f:return Q=v._init,b(Q(v._payload),O,x,N,H)}}if(Q)return H=H(v),Q=N===""?"."+_(v,0):N,q(H)?(x="",Q!=null&&(x=Q.replace(D,"$&/")+"/"),b(H,O,x,"",function(oe){return oe})):H!=null&&(B(H)&&(H=G(H,x+(H.key==null||v&&v.key===H.key?"":(""+H.key).replace(D,"$&/")+"/")+Q)),O.push(H)),1;Q=0;var ee=N===""?".":N+":";if(q(v))for(var re=0;re<v.length;re++)N=v[re],Y=ee+_(N,re),Q+=b(N,O,x,Y,H);else if(re=E(v),typeof re=="function")for(v=re.call(v),re=0;!(N=v.next()).done;)N=N.value,Y=ee+_(N,re++),Q+=b(N,O,x,Y,H);else if(Y==="object"){if(typeof v.then=="function")return b(g(v),O,x,N,H);throw O=String(v),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.")}return Q}function m(v,O,x){if(v==null)return v;var N=[],H=0;return b(v,N,"","",function(Y){return O.call(x,Y,H++)}),N}function M(v){if(v._status===-1){var O=v._result;O=O(),O.then(function(x){(v._status===0||v._status===-1)&&(v._status=1,v._result=x)},function(x){(v._status===0||v._status===-1)&&(v._status=2,v._result=x)}),v._status===-1&&(v._status=0,v._result=O)}if(v._status===1)return v._result.default;throw v._result}var R=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var O=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(O))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)};function C(){}return Jt.Children={map:m,forEach:function(v,O,x){m(v,function(){O.apply(this,arguments)},x)},count:function(v){var O=0;return m(v,function(){O++}),O},toArray:function(v){return m(v,function(O){return O})||[]},only:function(v){if(!B(v))throw Error("React.Children.only expected to receive a single React element child.");return v}},Jt.Component=$,Jt.Fragment=r,Jt.Profiler=i,Jt.PureComponent=k,Jt.StrictMode=n,Jt.Suspense=u,Jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Jt.__COMPILER_RUNTIME={__proto__:null,c:function(v){return j.H.useMemoCache(v)}},Jt.cache=function(v){return function(){return v.apply(null,arguments)}},Jt.cloneElement=function(v,O,x){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var N=A({},v.props),H=v.key,Y=void 0;if(O!=null)for(Q in O.ref!==void 0&&(Y=void 0),O.key!==void 0&&(H=""+O.key),O)!z.call(O,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&O.ref===void 0||(N[Q]=O[Q]);var Q=arguments.length-2;if(Q===1)N.children=x;else if(1<Q){for(var ee=Array(Q),re=0;re<Q;re++)ee[re]=arguments[re+2];N.children=ee}return V(v.type,H,void 0,void 0,Y,N)},Jt.createContext=function(v){return v={$$typeof:o,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:s,_context:v},v},Jt.createElement=function(v,O,x){var N,H={},Y=null;if(O!=null)for(N in O.key!==void 0&&(Y=""+O.key),O)z.call(O,N)&&N!=="key"&&N!=="__self"&&N!=="__source"&&(H[N]=O[N]);var Q=arguments.length-2;if(Q===1)H.children=x;else if(1<Q){for(var ee=Array(Q),re=0;re<Q;re++)ee[re]=arguments[re+2];H.children=ee}if(v&&v.defaultProps)for(N in Q=v.defaultProps,Q)H[N]===void 0&&(H[N]=Q[N]);return V(v,Y,void 0,void 0,null,H)},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(v){return{$$typeof:c,render:v}},Jt.isValidElement=B,Jt.lazy=function(v){return{$$typeof:f,_payload:{_status:-1,_result:v},_init:M}},Jt.memo=function(v,O){return{$$typeof:h,type:v,compare:O===void 0?null:O}},Jt.startTransition=function(v){var O=j.T,x={};j.T=x;try{var N=v(),H=j.S;H!==null&&H(x,N),typeof N=="object"&&N!==null&&typeof N.then=="function"&&N.then(C,R)}catch(Y){R(Y)}finally{j.T=O}},Jt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Jt.use=function(v){return j.H.use(v)},Jt.useActionState=function(v,O,x){return j.H.useActionState(v,O,x)},Jt.useCallback=function(v,O){return j.H.useCallback(v,O)},Jt.useContext=function(v){return j.H.useContext(v)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(v,O){return j.H.useDeferredValue(v,O)},Jt.useEffect=function(v,O,x){var N=j.H;if(typeof x=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return N.useEffect(v,O)},Jt.useId=function(){return j.H.useId()},Jt.useImperativeHandle=function(v,O,x){return j.H.useImperativeHandle(v,O,x)},Jt.useInsertionEffect=function(v,O){return j.H.useInsertionEffect(v,O)},Jt.useLayoutEffect=function(v,O){return j.H.useLayoutEffect(v,O)},Jt.useMemo=function(v,O){return j.H.useMemo(v,O)},Jt.useOptimistic=function(v,O){return j.H.useOptimistic(v,O)},Jt.useReducer=function(v,O,x){return j.H.useReducer(v,O,x)},Jt.useRef=function(v){return j.H.useRef(v)},Jt.useState=function(v){return j.H.useState(v)},Jt.useSyncExternalStore=function(v,O,x){return j.H.useSyncExternalStore(v,O,x)},Jt.useTransition=function(){return j.H.useTransition()},Jt.version="19.1.0",Jt}var kI;function j4(){return kI||(kI=1,W2.exports=Ij()),W2.exports}var Ve=j4();const qe=yc(Ve);var K2={exports:{}},_0={},V2={exports:{}},G2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI;function xj(){return PI||(PI=1,function(t){function e(m,M){var R=m.length;m.push(M);e:for(;0<R;){var C=R-1>>>1,v=m[C];if(0<i(v,M))m[C]=M,m[R]=v,R=C;else break e}}function r(m){return m.length===0?null:m[0]}function n(m){if(m.length===0)return null;var M=m[0],R=m.pop();if(R!==M){m[0]=R;e:for(var C=0,v=m.length,O=v>>>1;C<O;){var x=2*(C+1)-1,N=m[x],H=x+1,Y=m[H];if(0>i(N,R))H<v&&0>i(Y,N)?(m[C]=Y,m[H]=R,C=H):(m[C]=N,m[x]=R,C=x);else if(H<v&&0>i(Y,R))m[C]=Y,m[H]=R,C=H;else break e}}return M}function i(m,M){var R=m.sortIndex-M.sortIndex;return R!==0?R:m.id-M.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],f=1,p=null,E=3,S=!1,A=!1,I=!1,$=!1,L=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function q(m){for(var M=r(h);M!==null;){if(M.callback===null)n(h);else if(M.startTime<=m)n(h),M.sortIndex=M.expirationTime,e(u,M);else break;M=r(h)}}function j(m){if(I=!1,q(m),!A)if(r(u)!==null)A=!0,z||(z=!0,_());else{var M=r(h);M!==null&&b(j,M.startTime-m)}}var z=!1,V=-1,G=5,B=-1;function W(){return $?!0:!(t.unstable_now()-B<G)}function D(){if($=!1,z){var m=t.unstable_now();B=m;var M=!0;try{e:{A=!1,I&&(I=!1,k(V),V=-1),S=!0;var R=E;try{t:{for(q(m),p=r(u);p!==null&&!(p.expirationTime>m&&W());){var C=p.callback;if(typeof C=="function"){p.callback=null,E=p.priorityLevel;var v=C(p.expirationTime<=m);if(m=t.unstable_now(),typeof v=="function"){p.callback=v,q(m),M=!0;break t}p===r(u)&&n(u),q(m)}else n(u);p=r(u)}if(p!==null)M=!0;else{var O=r(h);O!==null&&b(j,O.startTime-m),M=!1}}break e}finally{p=null,E=R,S=!1}M=void 0}}finally{M?_():z=!1}}}var _;if(typeof U=="function")_=function(){U(D)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,g=w.port2;w.port1.onmessage=D,_=function(){g.postMessage(null)}}else _=function(){L(D,0)};function b(m,M){V=L(function(){m(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(m){m.callback=null},t.unstable_forceFrameRate=function(m){0>m||125<m?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<m?Math.floor(1e3/m):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(m){switch(E){case 1:case 2:case 3:var M=3;break;default:M=E}var R=E;E=M;try{return m()}finally{E=R}},t.unstable_requestPaint=function(){$=!0},t.unstable_runWithPriority=function(m,M){switch(m){case 1:case 2:case 3:case 4:case 5:break;default:m=3}var R=E;E=m;try{return M()}finally{E=R}},t.unstable_scheduleCallback=function(m,M,R){var C=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?C+R:C):R=C,m){case 1:var v=-1;break;case 2:v=250;break;case 5:v=1073741823;break;case 4:v=1e4;break;default:v=5e3}return v=R+v,m={id:f++,callback:M,priorityLevel:m,startTime:R,expirationTime:v,sortIndex:-1},R>C?(m.sortIndex=R,e(h,m),r(u)===null&&m===r(h)&&(I?(k(V),V=-1):I=!0,b(j,R-C))):(m.sortIndex=v,e(u,m),A||S||(A=!0,z||(z=!0,_()))),m},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(m){var M=E;return function(){var R=E;E=M;try{return m.apply(this,arguments)}finally{E=R}}}}(G2)),G2}var BI;function Cj(){return BI||(BI=1,V2.exports=xj()),V2.exports}var Y2={exports:{}},gs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LI;function Tj(){if(LI)return gs;LI=1;var t=j4();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)h+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,h,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:h,implementation:f}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return gs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,gs.createPortal=function(u,h){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return s(u,h,null,f)},gs.flushSync=function(u){var h=o.T,f=n.p;try{if(o.T=null,n.p=2,u)return u()}finally{o.T=h,n.p=f,n.d.f()}},gs.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,n.d.C(u,h))},gs.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},gs.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var f=h.as,p=c(f,h.crossOrigin),E=typeof h.integrity=="string"?h.integrity:void 0,S=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;f==="style"?n.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:E,fetchPriority:S}):f==="script"&&n.d.X(u,{crossOrigin:p,integrity:E,fetchPriority:S,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},gs.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var f=c(h.as,h.crossOrigin);n.d.M(u,{crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&n.d.M(u)},gs.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var f=h.as,p=c(f,h.crossOrigin);n.d.L(u,f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},gs.preloadModule=function(u,h){if(typeof u=="string")if(h){var f=c(h.as,h.crossOrigin);n.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:f,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else n.d.m(u)},gs.requestFormReset=function(u){n.d.r(u)},gs.unstable_batchedUpdates=function(u,h){return u(h)},gs.useFormState=function(u,h,f){return o.H.useFormState(u,h,f)},gs.useFormStatus=function(){return o.H.useHostTransitionStatus()},gs.version="19.1.0",gs}var UI;function rR(){if(UI)return Y2.exports;UI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Y2.exports=Tj(),Y2.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jI;function Mj(){if(jI)return _0;jI=1;var t=Cj(),e=j4(),r=rR();function n(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var l=a,d=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(d=l.return),a=l.return;while(a)}return l.tag===3?d:null}function o(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function c(a){if(s(a)!==a)throw Error(n(188))}function u(a){var l=a.alternate;if(!l){if(l=s(a),l===null)throw Error(n(188));return l!==a?null:a}for(var d=a,y=l;;){var T=d.return;if(T===null)break;var P=T.alternate;if(P===null){if(y=T.return,y!==null){d=y;continue}break}if(T.child===P.child){for(P=T.child;P;){if(P===d)return c(T),a;if(P===y)return c(T),l;P=P.sibling}throw Error(n(188))}if(d.return!==y.return)d=T,y=P;else{for(var X=!1,te=T.child;te;){if(te===d){X=!0,d=T,y=P;break}if(te===y){X=!0,y=T,d=P;break}te=te.sibling}if(!X){for(te=P.child;te;){if(te===d){X=!0,d=P,y=T;break}if(te===y){X=!0,y=P,d=T;break}te=te.sibling}if(!X)throw Error(n(189))}}if(d.alternate!==y)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?a:l}function h(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=h(a),l!==null)return l;a=a.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),U=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function _(a){return a===null||typeof a!="object"?null:(a=D&&a[D]||a["@@iterator"],typeof a=="function"?a:null)}var w=Symbol.for("react.client.reference");function g(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===w?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case A:return"Fragment";case $:return"Profiler";case I:return"StrictMode";case j:return"Suspense";case z:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case S:return"Portal";case U:return(a.displayName||"Context")+".Provider";case k:return(a._context.displayName||"Context")+".Consumer";case q:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return l=a.displayName||null,l!==null?l:g(a.type)||"Memo";case G:l=a._payload,a=a._init;try{return g(a(l))}catch{}}return null}var b=Array.isArray,m=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},C=[],v=-1;function O(a){return{current:a}}function x(a){0>v||(a.current=C[v],C[v]=null,v--)}function N(a,l){v++,C[v]=a.current,a.current=l}var H=O(null),Y=O(null),Q=O(null),ee=O(null);function re(a,l){switch(N(Q,l),N(Y,a),N(H,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?oI(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=oI(l),a=aI(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}x(H),N(H,a)}function oe(){x(H),x(Y),x(Q)}function be(a){a.memoizedState!==null&&N(ee,a);var l=H.current,d=aI(l,a.type);l!==d&&(N(Y,a),N(H,d))}function Ce(a){Y.current===a&&(x(H),x(Y)),ee.current===a&&(x(ee),y0._currentValue=R)}var Se=Object.prototype.hasOwnProperty,xe=t.unstable_scheduleCallback,ze=t.unstable_cancelCallback,Be=t.unstable_shouldYield,tt=t.unstable_requestPaint,He=t.unstable_now,Je=t.unstable_getCurrentPriorityLevel,vt=t.unstable_ImmediatePriority,yt=t.unstable_UserBlockingPriority,et=t.unstable_NormalPriority,ht=t.unstable_LowPriority,Mt=t.unstable_IdlePriority,dt=t.log,Ee=t.unstable_setDisableYieldValue,Te=null,Z=null;function F(a){if(typeof dt=="function"&&Ee(a),Z&&typeof Z.setStrictMode=="function")try{Z.setStrictMode(Te,a)}catch{}}var K=Math.clz32?Math.clz32:ce,J=Math.log,ie=Math.LN2;function ce(a){return a>>>=0,a===0?32:31-(J(a)/ie|0)|0}var de=256,$e=4194304;function Ye(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Fe(a,l,d){var y=a.pendingLanes;if(y===0)return 0;var T=0,P=a.suspendedLanes,X=a.pingedLanes;a=a.warmLanes;var te=y&134217727;return te!==0?(y=te&~P,y!==0?T=Ye(y):(X&=te,X!==0?T=Ye(X):d||(d=te&~a,d!==0&&(T=Ye(d))))):(te=y&~P,te!==0?T=Ye(te):X!==0?T=Ye(X):d||(d=y&~a,d!==0&&(T=Ye(d)))),T===0?0:l!==0&&l!==T&&(l&P)===0&&(P=T&-T,d=l&-l,P>=d||P===32&&(d&4194048)!==0)?l:T}function We(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function at(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ft(){var a=de;return de<<=1,(de&4194048)===0&&(de=256),a}function Ut(){var a=$e;return $e<<=1,($e&62914560)===0&&($e=4194304),a}function Kt(a){for(var l=[],d=0;31>d;d++)l.push(a);return l}function pt(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Ft(a,l,d,y,T,P){var X=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var te=a.entanglements,ae=a.expirationTimes,we=a.hiddenUpdates;for(d=X&~d;0<d;){var Me=31-K(d),De=1<<Me;te[Me]=0,ae[Me]=-1;var _e=we[Me];if(_e!==null)for(we[Me]=null,Me=0;Me<_e.length;Me++){var Ie=_e[Me];Ie!==null&&(Ie.lane&=-536870913)}d&=~De}y!==0&&Vt(a,y,0),P!==0&&T===0&&a.tag!==0&&(a.suspendedLanes|=P&~(X&~l))}function Vt(a,l,d){a.pendingLanes|=l,a.suspendedLanes&=~l;var y=31-K(l);a.entangledLanes|=l,a.entanglements[y]=a.entanglements[y]|1073741824|d&4194090}function gt(a,l){var d=a.entangledLanes|=l;for(a=a.entanglements;d;){var y=31-K(d),T=1<<y;T&l|a[y]&l&&(a[y]|=l),d&=~T}}function Et(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Rt(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function rt(){var a=M.p;return a!==0?a:(a=window.event,a===void 0?32:xI(a.type))}function Nt(a,l){var d=M.p;try{return M.p=a,l()}finally{M.p=d}}var St=Math.random().toString(36).slice(2),it="__reactFiber$"+St,Ct="__reactProps$"+St,Dt="__reactContainer$"+St,bt="__reactEvents$"+St,tr="__reactListeners$"+St,Yt="__reactHandles$"+St,It="__reactResources$"+St,Xt="__reactMarker$"+St;function ar(a){delete a[it],delete a[Ct],delete a[bt],delete a[tr],delete a[Yt]}function xt(a){var l=a[it];if(l)return l;for(var d=a.parentNode;d;){if(l=d[Dt]||d[it]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(a=hI(a);a!==null;){if(d=a[it])return d;a=hI(a)}return l}a=d,d=a.parentNode}return null}function fr(a){if(a=a[it]||a[Dt]){var l=a.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return a}return null}function Zt(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(n(33))}function pr(a){var l=a[It];return l||(l=a[It]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Mr(a){a[Xt]=!0}var Hi=new Set,us={};function oi(a,l){Mn(a,l),Mn(a+"Capture",l)}function Mn(a,l){for(us[a]=l,a=0;a<l.length;a++)Hi.add(l[a])}var qs=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ts={},Fs={};function go(a){return Se.call(Fs,a)?!0:Se.call(Ts,a)?!1:qs.test(a)?Fs[a]=!0:(Ts[a]=!0,!1)}function gi(a,l,d){if(go(l))if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var y=l.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+d)}}function ai(a,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+d)}}function Qn(a,l,d,y){if(y===null)a.removeAttribute(d);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(l,d,""+y)}}var Ms,Xn;function xi(a){if(Ms===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);Ms=l&&l[1]||"",Xn=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ms+a+Xn}var Ns=!1;function Os(a,l){if(!a||Ns)return"";Ns=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(l){var De=function(){throw Error()};if(Object.defineProperty(De.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(De,[])}catch(Ie){var _e=Ie}Reflect.construct(a,[],De)}else{try{De.call()}catch(Ie){_e=Ie}a.call(De.prototype)}}else{try{throw Error()}catch(Ie){_e=Ie}(De=a())&&typeof De.catch=="function"&&De.catch(function(){})}}catch(Ie){if(Ie&&_e&&typeof Ie.stack=="string")return[Ie.stack,_e.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=y.DetermineComponentFrameRoot(),X=P[0],te=P[1];if(X&&te){var ae=X.split(`
`),we=te.split(`
`);for(T=y=0;y<ae.length&&!ae[y].includes("DetermineComponentFrameRoot");)y++;for(;T<we.length&&!we[T].includes("DetermineComponentFrameRoot");)T++;if(y===ae.length||T===we.length)for(y=ae.length-1,T=we.length-1;1<=y&&0<=T&&ae[y]!==we[T];)T--;for(;1<=y&&0<=T;y--,T--)if(ae[y]!==we[T]){if(y!==1||T!==1)do if(y--,T--,0>T||ae[y]!==we[T]){var Me=`
`+ae[y].replace(" at new "," at ");return a.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",a.displayName)),Me}while(1<=y&&0<=T);break}}}finally{Ns=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?xi(d):""}function vc(a){switch(a.tag){case 26:case 27:case 5:return xi(a.type);case 16:return xi("Lazy");case 13:return xi("Suspense");case 19:return xi("SuspenseList");case 0:case 15:return Os(a.type,!1);case 11:return Os(a.type.render,!1);case 1:return Os(a.type,!0);case 31:return xi("Activity");default:return""}}function Da(a){try{var l="";do l+=vc(a),a=a.return;while(a);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function hs(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function $a(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Mp(a){var l=$a(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),y=""+a[l];if(!a.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var T=d.get,P=d.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return T.call(this)},set:function(X){y=""+X,P.call(this,X)}}),Object.defineProperty(a,l,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(X){y=""+X},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function Hs(a){a._valueTracker||(a._valueTracker=Mp(a))}function vu(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var d=l.getValue(),y="";return a&&(y=$a(a)?a.checked?"true":"false":a.value),a=y,a!==d?(l.setValue(a),!0):!1}function Ec(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var lt=/[\n"\\]/g;function Oe(a){return a.replace(lt,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function pe(a,l,d,y,T,P,X,te){a.name="",X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?a.type=X:a.removeAttribute("type"),l!=null?X==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+hs(l)):a.value!==""+hs(l)&&(a.value=""+hs(l)):X!=="submit"&&X!=="reset"||a.removeAttribute("value"),l!=null?Pe(a,X,hs(l)):d!=null?Pe(a,X,hs(d)):y!=null&&a.removeAttribute("value"),T==null&&P!=null&&(a.defaultChecked=!!P),T!=null&&(a.checked=T&&typeof T!="function"&&typeof T!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?a.name=""+hs(te):a.removeAttribute("name")}function fe(a,l,d,y,T,P,X,te){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(a.type=P),l!=null||d!=null){if(!(P!=="submit"&&P!=="reset"||l!=null))return;d=d!=null?""+hs(d):"",l=l!=null?""+hs(l):d,te||l===a.value||(a.value=l),a.defaultValue=l}y=y??T,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=te?a.checked:!!y,a.defaultChecked=!!y,X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"&&(a.name=X)}function Pe(a,l,d){l==="number"&&Ec(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function ke(a,l,d,y){if(a=a.options,l){l={};for(var T=0;T<d.length;T++)l["$"+d[T]]=!0;for(d=0;d<a.length;d++)T=l.hasOwnProperty("$"+a[d].value),a[d].selected!==T&&(a[d].selected=T),T&&y&&(a[d].defaultSelected=!0)}else{for(d=""+hs(d),l=null,T=0;T<a.length;T++){if(a[T].value===d){a[T].selected=!0,y&&(a[T].defaultSelected=!0);return}l!==null||a[T].disabled||(l=a[T])}l!==null&&(l.selected=!0)}}function mt(a,l,d){if(l!=null&&(l=""+hs(l),l!==a.value&&(a.value=l),d==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=d!=null?""+hs(d):""}function $t(a,l,d,y){if(l==null){if(y!=null){if(d!=null)throw Error(n(92));if(b(y)){if(1<y.length)throw Error(n(93));y=y[0]}d=y}d==null&&(d=""),l=d}d=hs(l),a.defaultValue=d,y=a.textContent,y===d&&y!==""&&y!==null&&(a.value=y)}function Ur(a,l){if(l){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=l;return}}a.textContent=l}var wr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rs(a,l,d){var y=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?y?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":y?a.setProperty(l,d):typeof d!="number"||d===0||wr.has(l)?l==="float"?a.cssFloat=d:a[l]=(""+d).trim():a[l]=d+"px"}function ka(a,l,d){if(l!=null&&typeof l!="object")throw Error(n(62));if(a=a.style,d!=null){for(var y in d)!d.hasOwnProperty(y)||l!=null&&l.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var T in l)y=l[T],l.hasOwnProperty(T)&&d[T]!==y&&Rs(a,T,y)}else for(var P in l)l.hasOwnProperty(P)&&Rs(a,P,l[P])}function Ws(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Np=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zh(a){return Qw.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Op=null;function Rp(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ks=null,_c=null;function em(a){var l=fr(a);if(l&&(a=l.stateNode)){var d=a[Ct]||null;e:switch(a=l.stateNode,l.type){case"input":if(pe(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Oe(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var y=d[l];if(y!==a&&y.form===a.form){var T=y[Ct]||null;if(!T)throw Error(n(90));pe(y,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(l=0;l<d.length;l++)y=d[l],y.form===a.form&&vu(y)}break e;case"textarea":mt(a,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&ke(a,!!d.multiple,l,!1)}}}var dl=!1;function tm(a,l,d){if(dl)return a(l,d);dl=!0;try{var y=a(l);return y}finally{if(dl=!1,(Ks!==null||_c!==null)&&(Bm(),Ks&&(l=Ks,a=_c,_c=Ks=null,em(l),a)))for(l=0;l<a.length;l++)em(a[l])}}function Sc(a,l){var d=a.stateNode;if(d===null)return null;var y=d[Ct]||null;if(y===null)return null;d=y[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(n(231,l,typeof d));return d}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qh=!1;if(la)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){Qh=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{Qh=!1}var ua=null,Ac=null,Eu=null;function rm(){if(Eu)return Eu;var a,l=Ac,d=l.length,y,T="value"in ua?ua.value:ua.textContent,P=T.length;for(a=0;a<d&&l[a]===T[a];a++);var X=d-a;for(y=1;y<=X&&l[d-y]===T[P-y];y++);return Eu=T.slice(a,1<y?1-y:void 0)}function Xh(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function Jh(){return!0}function ne(){return!1}function he(a){function l(d,y,T,P,X){this._reactName=d,this._targetInst=T,this.type=y,this.nativeEvent=P,this.target=X,this.currentTarget=null;for(var te in a)a.hasOwnProperty(te)&&(d=a[te],this[te]=d?d(P):P[te]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Jh:ne,this.isPropagationStopped=ne,this}return f(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Jh)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Jh)},persist:function(){},isPersistent:Jh}),l}var Re={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ut=he(Re),jr=f({},Re,{view:0,detail:0}),Qt=he(jr),wn,Wn,Ln,nn=f({},jr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xw,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ln&&(Ln&&a.type==="mousemove"?(wn=a.screenX-Ln.screenX,Wn=a.screenY-Ln.screenY):Wn=wn=0,Ln=a),wn)},movementY:function(a){return"movementY"in a?a.movementY:Wn}}),ds=he(nn),yo=f({},nn,{dataTransfer:0}),Ci=he(yo),Vs=f({},jr,{relatedTarget:0}),fs=he(Vs),Pa=f({},Re,{animationName:0,elapsedTime:0,pseudoElement:0}),ha=he(Pa),Ic=f({},Re,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),nm=he(Ic),ed=f({},Re,{data:0}),_u=he(ed),NL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DL(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=RL[a])?!!l[a]:!1}function Xw(){return DL}var $L=f({},jr,{key:function(a){if(a.key){var l=NL[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Xh(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?OL[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xw,charCode:function(a){return a.type==="keypress"?Xh(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Xh(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),kL=he($L),PL=f({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),p5=he(PL),BL=f({},jr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xw}),LL=he(BL),UL=f({},Re,{propertyName:0,elapsedTime:0,pseudoElement:0}),jL=he(UL),zL=f({},nn,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),qL=he(zL),FL=f({},Re,{newState:0,oldState:0}),HL=he(FL),WL=[9,13,27,32],Jw=la&&"CompositionEvent"in window,Dp=null;la&&"documentMode"in document&&(Dp=document.documentMode);var KL=la&&"TextEvent"in window&&!Dp,g5=la&&(!Jw||Dp&&8<Dp&&11>=Dp),y5=" ",m5=!1;function b5(a,l){switch(a){case"keyup":return WL.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function w5(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var td=!1;function VL(a,l){switch(a){case"compositionend":return w5(l);case"keypress":return l.which!==32?null:(m5=!0,y5);case"textInput":return a=l.data,a===y5&&m5?null:a;default:return null}}function GL(a,l){if(td)return a==="compositionend"||!Jw&&b5(a,l)?(a=rm(),Eu=Ac=ua=null,td=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return g5&&l.locale!=="ko"?null:l.data;default:return null}}var YL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v5(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!YL[a.type]:l==="textarea"}function E5(a,l,d,y){Ks?_c?_c.push(y):_c=[y]:Ks=y,l=Fm(l,"onChange"),0<l.length&&(d=new ut("onChange","change",null,d,y),a.push({event:d,listeners:l}))}var $p=null,kp=null;function ZL(a){tI(a,0)}function im(a){var l=Zt(a);if(vu(l))return a}function _5(a,l){if(a==="change")return l}var S5=!1;if(la){var ev;if(la){var tv="oninput"in document;if(!tv){var A5=document.createElement("div");A5.setAttribute("oninput","return;"),tv=typeof A5.oninput=="function"}ev=tv}else ev=!1;S5=ev&&(!document.documentMode||9<document.documentMode)}function I5(){$p&&($p.detachEvent("onpropertychange",x5),kp=$p=null)}function x5(a){if(a.propertyName==="value"&&im(kp)){var l=[];E5(l,kp,a,Rp(a)),tm(ZL,l)}}function QL(a,l,d){a==="focusin"?(I5(),$p=l,kp=d,$p.attachEvent("onpropertychange",x5)):a==="focusout"&&I5()}function XL(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return im(kp)}function JL(a,l){if(a==="click")return im(l)}function eU(a,l){if(a==="input"||a==="change")return im(l)}function tU(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var mo=typeof Object.is=="function"?Object.is:tU;function Pp(a,l){if(mo(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var d=Object.keys(a),y=Object.keys(l);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var T=d[y];if(!Se.call(l,T)||!mo(a[T],l[T]))return!1}return!0}function C5(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function T5(a,l){var d=C5(a);a=0;for(var y;d;){if(d.nodeType===3){if(y=a+d.textContent.length,a<=l&&y>=l)return{node:d,offset:l-a};a=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=C5(d)}}function M5(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?M5(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function N5(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=Ec(a.document);l instanceof a.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)a=l.contentWindow;else break;l=Ec(a.document)}return l}function rv(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var rU=la&&"documentMode"in document&&11>=document.documentMode,rd=null,nv=null,Bp=null,iv=!1;function O5(a,l,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;iv||rd==null||rd!==Ec(y)||(y=rd,"selectionStart"in y&&rv(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Bp&&Pp(Bp,y)||(Bp=y,y=Fm(nv,"onSelect"),0<y.length&&(l=new ut("onSelect","select",null,l,d),a.push({event:l,listeners:y}),l.target=rd)))}function Su(a,l){var d={};return d[a.toLowerCase()]=l.toLowerCase(),d["Webkit"+a]="webkit"+l,d["Moz"+a]="moz"+l,d}var nd={animationend:Su("Animation","AnimationEnd"),animationiteration:Su("Animation","AnimationIteration"),animationstart:Su("Animation","AnimationStart"),transitionrun:Su("Transition","TransitionRun"),transitionstart:Su("Transition","TransitionStart"),transitioncancel:Su("Transition","TransitionCancel"),transitionend:Su("Transition","TransitionEnd")},sv={},R5={};la&&(R5=document.createElement("div").style,"AnimationEvent"in window||(delete nd.animationend.animation,delete nd.animationiteration.animation,delete nd.animationstart.animation),"TransitionEvent"in window||delete nd.transitionend.transition);function Au(a){if(sv[a])return sv[a];if(!nd[a])return a;var l=nd[a],d;for(d in l)if(l.hasOwnProperty(d)&&d in R5)return sv[a]=l[d];return a}var D5=Au("animationend"),$5=Au("animationiteration"),k5=Au("animationstart"),nU=Au("transitionrun"),iU=Au("transitionstart"),sU=Au("transitioncancel"),P5=Au("transitionend"),B5=new Map,ov="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ov.push("scrollEnd");function da(a,l){B5.set(a,l),oi(l,[a])}var L5=new WeakMap;function Fo(a,l){if(typeof a=="object"&&a!==null){var d=L5.get(a);return d!==void 0?d:(l={value:a,source:l,stack:Da(l)},L5.set(a,l),l)}return{value:a,source:l,stack:Da(l)}}var Ho=[],id=0,av=0;function sm(){for(var a=id,l=av=id=0;l<a;){var d=Ho[l];Ho[l++]=null;var y=Ho[l];Ho[l++]=null;var T=Ho[l];Ho[l++]=null;var P=Ho[l];if(Ho[l++]=null,y!==null&&T!==null){var X=y.pending;X===null?T.next=T:(T.next=X.next,X.next=T),y.pending=T}P!==0&&U5(d,T,P)}}function om(a,l,d,y){Ho[id++]=a,Ho[id++]=l,Ho[id++]=d,Ho[id++]=y,av|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function cv(a,l,d,y){return om(a,l,d,y),am(a)}function sd(a,l){return om(a,null,null,l),am(a)}function U5(a,l,d){a.lanes|=d;var y=a.alternate;y!==null&&(y.lanes|=d);for(var T=!1,P=a.return;P!==null;)P.childLanes|=d,y=P.alternate,y!==null&&(y.childLanes|=d),P.tag===22&&(a=P.stateNode,a===null||a._visibility&1||(T=!0)),a=P,P=P.return;return a.tag===3?(P=a.stateNode,T&&l!==null&&(T=31-K(d),a=P.hiddenUpdates,y=a[T],y===null?a[T]=[l]:y.push(l),l.lane=d|536870912),P):null}function am(a){if(50<c0)throw c0=0,p2=null,Error(n(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var od={};function oU(a,l,d,y){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(a,l,d,y){return new oU(a,l,d,y)}function lv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function xc(a,l){var d=a.alternate;return d===null?(d=bo(a.tag,l,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=l,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,l=a.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function j5(a,l){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,l=d.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function cm(a,l,d,y,T,P){var X=0;if(y=a,typeof a=="function")lv(a)&&(X=1);else if(typeof a=="string")X=cj(a,d,H.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=bo(31,d,l,T),a.elementType=B,a.lanes=P,a;case A:return Iu(d.children,T,P,l);case I:X=8,T|=24;break;case $:return a=bo(12,d,l,T|2),a.elementType=$,a.lanes=P,a;case j:return a=bo(13,d,l,T),a.elementType=j,a.lanes=P,a;case z:return a=bo(19,d,l,T),a.elementType=z,a.lanes=P,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case L:case U:X=10;break e;case k:X=9;break e;case q:X=11;break e;case V:X=14;break e;case G:X=16,y=null;break e}X=29,d=Error(n(130,a===null?"null":typeof a,"")),y=null}return l=bo(X,d,l,T),l.elementType=a,l.type=y,l.lanes=P,l}function Iu(a,l,d,y){return a=bo(7,a,y,l),a.lanes=d,a}function uv(a,l,d){return a=bo(6,a,null,l),a.lanes=d,a}function hv(a,l,d){return l=bo(4,a.children!==null?a.children:[],a.key,l),l.lanes=d,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var ad=[],cd=0,lm=null,um=0,Wo=[],Ko=0,xu=null,Cc=1,Tc="";function Cu(a,l){ad[cd++]=um,ad[cd++]=lm,lm=a,um=l}function z5(a,l,d){Wo[Ko++]=Cc,Wo[Ko++]=Tc,Wo[Ko++]=xu,xu=a;var y=Cc;a=Tc;var T=32-K(y)-1;y&=~(1<<T),d+=1;var P=32-K(l)+T;if(30<P){var X=T-T%5;P=(y&(1<<X)-1).toString(32),y>>=X,T-=X,Cc=1<<32-K(l)+T|d<<T|y,Tc=P+a}else Cc=1<<P|d<<T|y,Tc=a}function dv(a){a.return!==null&&(Cu(a,1),z5(a,1,0))}function fv(a){for(;a===lm;)lm=ad[--cd],ad[cd]=null,um=ad[--cd],ad[cd]=null;for(;a===xu;)xu=Wo[--Ko],Wo[Ko]=null,Tc=Wo[--Ko],Wo[Ko]=null,Cc=Wo[--Ko],Wo[Ko]=null}var Ds=null,Kn=null,zr=!1,Tu=null,Ba=!1,pv=Error(n(519));function Mu(a){var l=Error(n(418,""));throw jp(Fo(l,a)),pv}function q5(a){var l=a.stateNode,d=a.type,y=a.memoizedProps;switch(l[it]=a,l[Ct]=y,d){case"dialog":yr("cancel",l),yr("close",l);break;case"iframe":case"object":case"embed":yr("load",l);break;case"video":case"audio":for(d=0;d<u0.length;d++)yr(u0[d],l);break;case"source":yr("error",l);break;case"img":case"image":case"link":yr("error",l),yr("load",l);break;case"details":yr("toggle",l);break;case"input":yr("invalid",l),fe(l,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Hs(l);break;case"select":yr("invalid",l);break;case"textarea":yr("invalid",l),$t(l,y.value,y.defaultValue,y.children),Hs(l)}d=y.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||y.suppressHydrationWarning===!0||sI(l.textContent,d)?(y.popover!=null&&(yr("beforetoggle",l),yr("toggle",l)),y.onScroll!=null&&yr("scroll",l),y.onScrollEnd!=null&&yr("scrollend",l),y.onClick!=null&&(l.onclick=Hm),l=!0):l=!1,l||Mu(a)}function F5(a){for(Ds=a.return;Ds;)switch(Ds.tag){case 5:case 13:Ba=!1;return;case 27:case 3:Ba=!0;return;default:Ds=Ds.return}}function Lp(a){if(a!==Ds)return!1;if(!zr)return F5(a),zr=!0,!1;var l=a.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||N2(a.type,a.memoizedProps)),d=!d),d&&Kn&&Mu(a),F5(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(l===0){Kn=pa(a.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;a=a.nextSibling}Kn=null}}else l===27?(l=Kn,Ml(a.type)?(a=$2,$2=null,Kn=a):Kn=l):Kn=Ds?pa(a.stateNode.nextSibling):null;return!0}function Up(){Kn=Ds=null,zr=!1}function H5(){var a=Tu;return a!==null&&(Zs===null?Zs=a:Zs.push.apply(Zs,a),Tu=null),a}function jp(a){Tu===null?Tu=[a]:Tu.push(a)}var gv=O(null),Nu=null,Mc=null;function pl(a,l,d){N(gv,l._currentValue),l._currentValue=d}function Nc(a){a._currentValue=gv.current,x(gv)}function yv(a,l,d){for(;a!==null;){var y=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,y!==null&&(y.childLanes|=l)):y!==null&&(y.childLanes&l)!==l&&(y.childLanes|=l),a===d)break;a=a.return}}function mv(a,l,d,y){var T=a.child;for(T!==null&&(T.return=a);T!==null;){var P=T.dependencies;if(P!==null){var X=T.child;P=P.firstContext;e:for(;P!==null;){var te=P;P=T;for(var ae=0;ae<l.length;ae++)if(te.context===l[ae]){P.lanes|=d,te=P.alternate,te!==null&&(te.lanes|=d),yv(P.return,d,a),y||(X=null);break e}P=te.next}}else if(T.tag===18){if(X=T.return,X===null)throw Error(n(341));X.lanes|=d,P=X.alternate,P!==null&&(P.lanes|=d),yv(X,d,a),X=null}else X=T.child;if(X!==null)X.return=T;else for(X=T;X!==null;){if(X===a){X=null;break}if(T=X.sibling,T!==null){T.return=X.return,X=T;break}X=X.return}T=X}}function zp(a,l,d,y){a=null;for(var T=l,P=!1;T!==null;){if(!P){if((T.flags&524288)!==0)P=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var X=T.alternate;if(X===null)throw Error(n(387));if(X=X.memoizedProps,X!==null){var te=T.type;mo(T.pendingProps.value,X.value)||(a!==null?a.push(te):a=[te])}}else if(T===ee.current){if(X=T.alternate,X===null)throw Error(n(387));X.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(a!==null?a.push(y0):a=[y0])}T=T.return}a!==null&&mv(l,a,d,y),l.flags|=262144}function hm(a){for(a=a.firstContext;a!==null;){if(!mo(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ou(a){Nu=a,Mc=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function ps(a){return W5(Nu,a)}function dm(a,l){return Nu===null&&Ou(a),W5(a,l)}function W5(a,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},Mc===null){if(a===null)throw Error(n(308));Mc=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Mc=Mc.next=l;return d}var aU=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(d,y){a.push(y)}};this.abort=function(){l.aborted=!0,a.forEach(function(d){return d()})}},cU=t.unstable_scheduleCallback,lU=t.unstable_NormalPriority,yi={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bv(){return{controller:new aU,data:new Map,refCount:0}}function qp(a){a.refCount--,a.refCount===0&&cU(lU,function(){a.controller.abort()})}var Fp=null,wv=0,ld=0,ud=null;function uU(a,l){if(Fp===null){var d=Fp=[];wv=0,ld=E2(),ud={status:"pending",value:void 0,then:function(y){d.push(y)}}}return wv++,l.then(K5,K5),l}function K5(){if(--wv===0&&Fp!==null){ud!==null&&(ud.status="fulfilled");var a=Fp;Fp=null,ld=0,ud=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function hU(a,l){var d=[],y={status:"pending",value:null,reason:null,then:function(T){d.push(T)}};return a.then(function(){y.status="fulfilled",y.value=l;for(var T=0;T<d.length;T++)(0,d[T])(l)},function(T){for(y.status="rejected",y.reason=T,T=0;T<d.length;T++)(0,d[T])(void 0)}),y}var V5=m.S;m.S=function(a,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&uU(a,l),V5!==null&&V5(a,l)};var Ru=O(null);function vv(){var a=Ru.current;return a!==null?a:vn.pooledCache}function fm(a,l){l===null?N(Ru,Ru.current):N(Ru,l.pool)}function G5(){var a=vv();return a===null?null:{parent:yi._currentValue,pool:a}}var Hp=Error(n(460)),Y5=Error(n(474)),pm=Error(n(542)),Ev={then:function(){}};function Z5(a){return a=a.status,a==="fulfilled"||a==="rejected"}function gm(){}function Q5(a,l,d){switch(d=a[d],d===void 0?a.push(l):d!==l&&(l.then(gm,gm),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,J5(a),a;default:if(typeof l.status=="string")l.then(gm,gm);else{if(a=vn,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=l,a.status="pending",a.then(function(y){if(l.status==="pending"){var T=l;T.status="fulfilled",T.value=y}},function(y){if(l.status==="pending"){var T=l;T.status="rejected",T.reason=y}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,J5(a),a}throw Wp=l,Hp}}var Wp=null;function X5(){if(Wp===null)throw Error(n(459));var a=Wp;return Wp=null,a}function J5(a){if(a===Hp||a===pm)throw Error(n(483))}var gl=!1;function _v(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sv(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function yl(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ml(a,l,d){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(Yr&2)!==0){var T=y.pending;return T===null?l.next=l:(l.next=T.next,T.next=l),y.pending=l,l=am(a),U5(a,null,d),l}return om(a,y,l,d),am(a)}function Kp(a,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var y=l.lanes;y&=a.pendingLanes,d|=y,l.lanes=d,gt(a,d)}}function Av(a,l){var d=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var T=null,P=null;if(d=d.firstBaseUpdate,d!==null){do{var X={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};P===null?T=P=X:P=P.next=X,d=d.next}while(d!==null);P===null?T=P=l:P=P.next=l}else T=P=l;d={baseState:y.baseState,firstBaseUpdate:T,lastBaseUpdate:P,shared:y.shared,callbacks:y.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=l:a.next=l,d.lastBaseUpdate=l}var Iv=!1;function Vp(){if(Iv){var a=ud;if(a!==null)throw a}}function Gp(a,l,d,y){Iv=!1;var T=a.updateQueue;gl=!1;var P=T.firstBaseUpdate,X=T.lastBaseUpdate,te=T.shared.pending;if(te!==null){T.shared.pending=null;var ae=te,we=ae.next;ae.next=null,X===null?P=we:X.next=we,X=ae;var Me=a.alternate;Me!==null&&(Me=Me.updateQueue,te=Me.lastBaseUpdate,te!==X&&(te===null?Me.firstBaseUpdate=we:te.next=we,Me.lastBaseUpdate=ae))}if(P!==null){var De=T.baseState;X=0,Me=we=ae=null,te=P;do{var _e=te.lane&-536870913,Ie=_e!==te.lane;if(Ie?(Ir&_e)===_e:(y&_e)===_e){_e!==0&&_e===ld&&(Iv=!0),Me!==null&&(Me=Me.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var Ht=a,Bt=te;_e=l;var an=d;switch(Bt.tag){case 1:if(Ht=Bt.payload,typeof Ht=="function"){De=Ht.call(an,De,_e);break e}De=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Bt.payload,_e=typeof Ht=="function"?Ht.call(an,De,_e):Ht,_e==null)break e;De=f({},De,_e);break e;case 2:gl=!0}}_e=te.callback,_e!==null&&(a.flags|=64,Ie&&(a.flags|=8192),Ie=T.callbacks,Ie===null?T.callbacks=[_e]:Ie.push(_e))}else Ie={lane:_e,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Me===null?(we=Me=Ie,ae=De):Me=Me.next=Ie,X|=_e;if(te=te.next,te===null){if(te=T.shared.pending,te===null)break;Ie=te,te=Ie.next,Ie.next=null,T.lastBaseUpdate=Ie,T.shared.pending=null}}while(!0);Me===null&&(ae=De),T.baseState=ae,T.firstBaseUpdate=we,T.lastBaseUpdate=Me,P===null&&(T.shared.lanes=0),Il|=X,a.lanes=X,a.memoizedState=De}}function e6(a,l){if(typeof a!="function")throw Error(n(191,a));a.call(l)}function t6(a,l){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)e6(d[a],l)}var hd=O(null),ym=O(0);function r6(a,l){a=Bc,N(ym,a),N(hd,l),Bc=a|l.baseLanes}function xv(){N(ym,Bc),N(hd,hd.current)}function Cv(){Bc=ym.current,x(hd),x(ym)}var bl=0,cr=null,sn=null,ci=null,mm=!1,dd=!1,Du=!1,bm=0,Yp=0,fd=null,dU=0;function Jn(){throw Error(n(321))}function Tv(a,l){if(l===null)return!1;for(var d=0;d<l.length&&d<a.length;d++)if(!mo(a[d],l[d]))return!1;return!0}function Mv(a,l,d,y,T,P){return bl=P,cr=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,m.H=a===null||a.memoizedState===null?U6:j6,Du=!1,P=d(y,T),Du=!1,dd&&(P=i6(l,d,y,T)),n6(a),P}function n6(a){m.H=Am;var l=sn!==null&&sn.next!==null;if(bl=0,ci=sn=cr=null,mm=!1,Yp=0,fd=null,l)throw Error(n(300));a===null||Ti||(a=a.dependencies,a!==null&&hm(a)&&(Ti=!0))}function i6(a,l,d,y){cr=a;var T=0;do{if(dd&&(fd=null),Yp=0,dd=!1,25<=T)throw Error(n(301));if(T+=1,ci=sn=null,a.updateQueue!=null){var P=a.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}m.H=wU,P=l(d,y)}while(dd);return P}function fU(){var a=m.H,l=a.useState()[0];return l=typeof l.then=="function"?Zp(l):l,a=a.useState()[0],(sn!==null?sn.memoizedState:null)!==a&&(cr.flags|=1024),l}function Nv(){var a=bm!==0;return bm=0,a}function Ov(a,l,d){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~d}function Rv(a){if(mm){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}mm=!1}bl=0,ci=sn=cr=null,dd=!1,Yp=bm=0,fd=null}function Gs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?cr.memoizedState=ci=a:ci=ci.next=a,ci}function li(){if(sn===null){var a=cr.alternate;a=a!==null?a.memoizedState:null}else a=sn.next;var l=ci===null?cr.memoizedState:ci.next;if(l!==null)ci=l,sn=a;else{if(a===null)throw cr.alternate===null?Error(n(467)):Error(n(310));sn=a,a={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},ci===null?cr.memoizedState=ci=a:ci=ci.next=a}return ci}function Dv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zp(a){var l=Yp;return Yp+=1,fd===null&&(fd=[]),a=Q5(fd,a,l),l=cr,(ci===null?l.memoizedState:ci.next)===null&&(l=l.alternate,m.H=l===null||l.memoizedState===null?U6:j6),a}function wm(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Zp(a);if(a.$$typeof===U)return ps(a)}throw Error(n(438,String(a)))}function $v(a){var l=null,d=cr.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var y=cr.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(l={data:y.data.map(function(T){return T.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=Dv(),cr.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(a),y=0;y<a;y++)d[y]=W;return l.index++,d}function Oc(a,l){return typeof l=="function"?l(a):l}function vm(a){var l=li();return kv(l,sn,a)}function kv(a,l,d){var y=a.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=d;var T=a.baseQueue,P=y.pending;if(P!==null){if(T!==null){var X=T.next;T.next=P.next,P.next=X}l.baseQueue=T=P,y.pending=null}if(P=a.baseState,T===null)a.memoizedState=P;else{l=T.next;var te=X=null,ae=null,we=l,Me=!1;do{var De=we.lane&-536870913;if(De!==we.lane?(Ir&De)===De:(bl&De)===De){var _e=we.revertLane;if(_e===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),De===ld&&(Me=!0);else if((bl&_e)===_e){we=we.next,_e===ld&&(Me=!0);continue}else De={lane:0,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},ae===null?(te=ae=De,X=P):ae=ae.next=De,cr.lanes|=_e,Il|=_e;De=we.action,Du&&d(P,De),P=we.hasEagerState?we.eagerState:d(P,De)}else _e={lane:De,revertLane:we.revertLane,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null},ae===null?(te=ae=_e,X=P):ae=ae.next=_e,cr.lanes|=De,Il|=De;we=we.next}while(we!==null&&we!==l);if(ae===null?X=P:ae.next=te,!mo(P,a.memoizedState)&&(Ti=!0,Me&&(d=ud,d!==null)))throw d;a.memoizedState=P,a.baseState=X,a.baseQueue=ae,y.lastRenderedState=P}return T===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function Pv(a){var l=li(),d=l.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=a;var y=d.dispatch,T=d.pending,P=l.memoizedState;if(T!==null){d.pending=null;var X=T=T.next;do P=a(P,X.action),X=X.next;while(X!==T);mo(P,l.memoizedState)||(Ti=!0),l.memoizedState=P,l.baseQueue===null&&(l.baseState=P),d.lastRenderedState=P}return[P,y]}function s6(a,l,d){var y=cr,T=li(),P=zr;if(P){if(d===void 0)throw Error(n(407));d=d()}else d=l();var X=!mo((sn||T).memoizedState,d);X&&(T.memoizedState=d,Ti=!0),T=T.queue;var te=c6.bind(null,y,T,a);if(Qp(2048,8,te,[a]),T.getSnapshot!==l||X||ci!==null&&ci.memoizedState.tag&1){if(y.flags|=2048,pd(9,Em(),a6.bind(null,y,T,d,l),null),vn===null)throw Error(n(349));P||(bl&124)!==0||o6(y,l,d)}return d}function o6(a,l,d){a.flags|=16384,a={getSnapshot:l,value:d},l=cr.updateQueue,l===null?(l=Dv(),cr.updateQueue=l,l.stores=[a]):(d=l.stores,d===null?l.stores=[a]:d.push(a))}function a6(a,l,d,y){l.value=d,l.getSnapshot=y,l6(l)&&u6(a)}function c6(a,l,d){return d(function(){l6(l)&&u6(a)})}function l6(a){var l=a.getSnapshot;a=a.value;try{var d=l();return!mo(a,d)}catch{return!0}}function u6(a){var l=sd(a,2);l!==null&&So(l,a,2)}function Bv(a){var l=Gs();if(typeof a=="function"){var d=a;if(a=d(),Du){F(!0);try{d()}finally{F(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:a},l}function h6(a,l,d,y){return a.baseState=d,kv(a,sn,typeof y=="function"?y:Oc)}function pU(a,l,d,y,T){if(Sm(a))throw Error(n(485));if(a=l.action,a!==null){var P={payload:T,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(X){P.listeners.push(X)}};m.T!==null?d(!0):P.isTransition=!1,y(P),d=l.pending,d===null?(P.next=l.pending=P,d6(l,P)):(P.next=d.next,l.pending=d.next=P)}}function d6(a,l){var d=l.action,y=l.payload,T=a.state;if(l.isTransition){var P=m.T,X={};m.T=X;try{var te=d(T,y),ae=m.S;ae!==null&&ae(X,te),f6(a,l,te)}catch(we){Lv(a,l,we)}finally{m.T=P}}else try{P=d(T,y),f6(a,l,P)}catch(we){Lv(a,l,we)}}function f6(a,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(y){p6(a,l,y)},function(y){return Lv(a,l,y)}):p6(a,l,d)}function p6(a,l,d){l.status="fulfilled",l.value=d,g6(l),a.state=d,l=a.pending,l!==null&&(d=l.next,d===l?a.pending=null:(d=d.next,l.next=d,d6(a,d)))}function Lv(a,l,d){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do l.status="rejected",l.reason=d,g6(l),l=l.next;while(l!==y)}a.action=null}function g6(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function y6(a,l){return l}function m6(a,l){if(zr){var d=vn.formState;if(d!==null){e:{var y=cr;if(zr){if(Kn){t:{for(var T=Kn,P=Ba;T.nodeType!==8;){if(!P){T=null;break t}if(T=pa(T.nextSibling),T===null){T=null;break t}}P=T.data,T=P==="F!"||P==="F"?T:null}if(T){Kn=pa(T.nextSibling),y=T.data==="F!";break e}}Mu(y)}y=!1}y&&(l=d[0])}}return d=Gs(),d.memoizedState=d.baseState=l,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y6,lastRenderedState:l},d.queue=y,d=P6.bind(null,cr,y),y.dispatch=d,y=Bv(!1),P=Fv.bind(null,cr,!1,y.queue),y=Gs(),T={state:l,dispatch:null,action:a,pending:null},y.queue=T,d=pU.bind(null,cr,T,P,d),T.dispatch=d,y.memoizedState=a,[l,d,!1]}function b6(a){var l=li();return w6(l,sn,a)}function w6(a,l,d){if(l=kv(a,l,y6)[0],a=vm(Oc)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var y=Zp(l)}catch(X){throw X===Hp?pm:X}else y=l;l=li();var T=l.queue,P=T.dispatch;return d!==l.memoizedState&&(cr.flags|=2048,pd(9,Em(),gU.bind(null,T,d),null)),[y,P,a]}function gU(a,l){a.action=l}function v6(a){var l=li(),d=sn;if(d!==null)return w6(l,d,a);li(),l=l.memoizedState,d=li();var y=d.queue.dispatch;return d.memoizedState=a,[l,y,!1]}function pd(a,l,d,y){return a={tag:a,create:d,deps:y,inst:l,next:null},l=cr.updateQueue,l===null&&(l=Dv(),cr.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=a.next=a:(y=d.next,d.next=a,a.next=y,l.lastEffect=a),a}function Em(){return{destroy:void 0,resource:void 0}}function E6(){return li().memoizedState}function _m(a,l,d,y){var T=Gs();y=y===void 0?null:y,cr.flags|=a,T.memoizedState=pd(1|l,Em(),d,y)}function Qp(a,l,d,y){var T=li();y=y===void 0?null:y;var P=T.memoizedState.inst;sn!==null&&y!==null&&Tv(y,sn.memoizedState.deps)?T.memoizedState=pd(l,P,d,y):(cr.flags|=a,T.memoizedState=pd(1|l,P,d,y))}function _6(a,l){_m(8390656,8,a,l)}function S6(a,l){Qp(2048,8,a,l)}function A6(a,l){return Qp(4,2,a,l)}function I6(a,l){return Qp(4,4,a,l)}function x6(a,l){if(typeof l=="function"){a=a();var d=l(a);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function C6(a,l,d){d=d!=null?d.concat([a]):null,Qp(4,4,x6.bind(null,l,a),d)}function Uv(){}function T6(a,l){var d=li();l=l===void 0?null:l;var y=d.memoizedState;return l!==null&&Tv(l,y[1])?y[0]:(d.memoizedState=[a,l],a)}function M6(a,l){var d=li();l=l===void 0?null:l;var y=d.memoizedState;if(l!==null&&Tv(l,y[1]))return y[0];if(y=a(),Du){F(!0);try{a()}finally{F(!1)}}return d.memoizedState=[y,l],y}function jv(a,l,d){return d===void 0||(bl&1073741824)!==0?a.memoizedState=l:(a.memoizedState=d,a=R8(),cr.lanes|=a,Il|=a,d)}function N6(a,l,d,y){return mo(d,l)?d:hd.current!==null?(a=jv(a,d,y),mo(a,l)||(Ti=!0),a):(bl&42)===0?(Ti=!0,a.memoizedState=d):(a=R8(),cr.lanes|=a,Il|=a,l)}function O6(a,l,d,y,T){var P=M.p;M.p=P!==0&&8>P?P:8;var X=m.T,te={};m.T=te,Fv(a,!1,l,d);try{var ae=T(),we=m.S;if(we!==null&&we(te,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Me=hU(ae,y);Xp(a,l,Me,_o(a))}else Xp(a,l,y,_o(a))}catch(De){Xp(a,l,{then:function(){},status:"rejected",reason:De},_o())}finally{M.p=P,m.T=X}}function yU(){}function zv(a,l,d,y){if(a.tag!==5)throw Error(n(476));var T=R6(a).queue;O6(a,T,l,R,d===null?yU:function(){return D6(a),d(y)})}function R6(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:R},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:d},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function D6(a){var l=R6(a).next.queue;Xp(a,l,{},_o())}function qv(){return ps(y0)}function $6(){return li().memoizedState}function k6(){return li().memoizedState}function mU(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var d=_o();a=yl(d);var y=ml(l,a,d);y!==null&&(So(y,l,d),Kp(y,l,d)),l={cache:bv()},a.payload=l;return}l=l.return}}function bU(a,l,d){var y=_o();d={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Sm(a)?B6(l,d):(d=cv(a,l,d,y),d!==null&&(So(d,a,y),L6(d,l,y)))}function P6(a,l,d){var y=_o();Xp(a,l,d,y)}function Xp(a,l,d,y){var T={lane:y,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Sm(a))B6(l,T);else{var P=a.alternate;if(a.lanes===0&&(P===null||P.lanes===0)&&(P=l.lastRenderedReducer,P!==null))try{var X=l.lastRenderedState,te=P(X,d);if(T.hasEagerState=!0,T.eagerState=te,mo(te,X))return om(a,l,T,0),vn===null&&sm(),!1}catch{}finally{}if(d=cv(a,l,T,y),d!==null)return So(d,a,y),L6(d,l,y),!0}return!1}function Fv(a,l,d,y){if(y={lane:2,revertLane:E2(),action:y,hasEagerState:!1,eagerState:null,next:null},Sm(a)){if(l)throw Error(n(479))}else l=cv(a,d,y,2),l!==null&&So(l,a,2)}function Sm(a){var l=a.alternate;return a===cr||l!==null&&l===cr}function B6(a,l){dd=mm=!0;var d=a.pending;d===null?l.next=l:(l.next=d.next,d.next=l),a.pending=l}function L6(a,l,d){if((d&4194048)!==0){var y=l.lanes;y&=a.pendingLanes,d|=y,l.lanes=d,gt(a,d)}}var Am={readContext:ps,use:wm,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useLayoutEffect:Jn,useInsertionEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useSyncExternalStore:Jn,useId:Jn,useHostTransitionStatus:Jn,useFormState:Jn,useActionState:Jn,useOptimistic:Jn,useMemoCache:Jn,useCacheRefresh:Jn},U6={readContext:ps,use:wm,useCallback:function(a,l){return Gs().memoizedState=[a,l===void 0?null:l],a},useContext:ps,useEffect:_6,useImperativeHandle:function(a,l,d){d=d!=null?d.concat([a]):null,_m(4194308,4,x6.bind(null,l,a),d)},useLayoutEffect:function(a,l){return _m(4194308,4,a,l)},useInsertionEffect:function(a,l){_m(4,2,a,l)},useMemo:function(a,l){var d=Gs();l=l===void 0?null:l;var y=a();if(Du){F(!0);try{a()}finally{F(!1)}}return d.memoizedState=[y,l],y},useReducer:function(a,l,d){var y=Gs();if(d!==void 0){var T=d(l);if(Du){F(!0);try{d(l)}finally{F(!1)}}}else T=l;return y.memoizedState=y.baseState=T,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:T},y.queue=a,a=a.dispatch=bU.bind(null,cr,a),[y.memoizedState,a]},useRef:function(a){var l=Gs();return a={current:a},l.memoizedState=a},useState:function(a){a=Bv(a);var l=a.queue,d=P6.bind(null,cr,l);return l.dispatch=d,[a.memoizedState,d]},useDebugValue:Uv,useDeferredValue:function(a,l){var d=Gs();return jv(d,a,l)},useTransition:function(){var a=Bv(!1);return a=O6.bind(null,cr,a.queue,!0,!1),Gs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,d){var y=cr,T=Gs();if(zr){if(d===void 0)throw Error(n(407));d=d()}else{if(d=l(),vn===null)throw Error(n(349));(Ir&124)!==0||o6(y,l,d)}T.memoizedState=d;var P={value:d,getSnapshot:l};return T.queue=P,_6(c6.bind(null,y,P,a),[a]),y.flags|=2048,pd(9,Em(),a6.bind(null,y,P,d,l),null),d},useId:function(){var a=Gs(),l=vn.identifierPrefix;if(zr){var d=Tc,y=Cc;d=(y&~(1<<32-K(y)-1)).toString(32)+d,l=""+l+"R"+d,d=bm++,0<d&&(l+="H"+d.toString(32)),l+=""}else d=dU++,l=""+l+"r"+d.toString(32)+"";return a.memoizedState=l},useHostTransitionStatus:qv,useFormState:m6,useActionState:m6,useOptimistic:function(a){var l=Gs();l.memoizedState=l.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Fv.bind(null,cr,!0,d),d.dispatch=l,[a,l]},useMemoCache:$v,useCacheRefresh:function(){return Gs().memoizedState=mU.bind(null,cr)}},j6={readContext:ps,use:wm,useCallback:T6,useContext:ps,useEffect:S6,useImperativeHandle:C6,useInsertionEffect:A6,useLayoutEffect:I6,useMemo:M6,useReducer:vm,useRef:E6,useState:function(){return vm(Oc)},useDebugValue:Uv,useDeferredValue:function(a,l){var d=li();return N6(d,sn.memoizedState,a,l)},useTransition:function(){var a=vm(Oc)[0],l=li().memoizedState;return[typeof a=="boolean"?a:Zp(a),l]},useSyncExternalStore:s6,useId:$6,useHostTransitionStatus:qv,useFormState:b6,useActionState:b6,useOptimistic:function(a,l){var d=li();return h6(d,sn,a,l)},useMemoCache:$v,useCacheRefresh:k6},wU={readContext:ps,use:wm,useCallback:T6,useContext:ps,useEffect:S6,useImperativeHandle:C6,useInsertionEffect:A6,useLayoutEffect:I6,useMemo:M6,useReducer:Pv,useRef:E6,useState:function(){return Pv(Oc)},useDebugValue:Uv,useDeferredValue:function(a,l){var d=li();return sn===null?jv(d,a,l):N6(d,sn.memoizedState,a,l)},useTransition:function(){var a=Pv(Oc)[0],l=li().memoizedState;return[typeof a=="boolean"?a:Zp(a),l]},useSyncExternalStore:s6,useId:$6,useHostTransitionStatus:qv,useFormState:v6,useActionState:v6,useOptimistic:function(a,l){var d=li();return sn!==null?h6(d,sn,a,l):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:$v,useCacheRefresh:k6},gd=null,Jp=0;function Im(a){var l=Jp;return Jp+=1,gd===null&&(gd=[]),Q5(gd,a,l)}function e0(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function xm(a,l){throw l.$$typeof===p?Error(n(525)):(a=Object.prototype.toString.call(l),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function z6(a){var l=a._init;return l(a._payload)}function q6(a){function l(ge,le){if(a){var me=ge.deletions;me===null?(ge.deletions=[le],ge.flags|=16):me.push(le)}}function d(ge,le){if(!a)return null;for(;le!==null;)l(ge,le),le=le.sibling;return null}function y(ge){for(var le=new Map;ge!==null;)ge.key!==null?le.set(ge.key,ge):le.set(ge.index,ge),ge=ge.sibling;return le}function T(ge,le){return ge=xc(ge,le),ge.index=0,ge.sibling=null,ge}function P(ge,le,me){return ge.index=me,a?(me=ge.alternate,me!==null?(me=me.index,me<le?(ge.flags|=67108866,le):me):(ge.flags|=67108866,le)):(ge.flags|=1048576,le)}function X(ge){return a&&ge.alternate===null&&(ge.flags|=67108866),ge}function te(ge,le,me,Ne){return le===null||le.tag!==6?(le=uv(me,ge.mode,Ne),le.return=ge,le):(le=T(le,me),le.return=ge,le)}function ae(ge,le,me,Ne){var wt=me.type;return wt===A?Me(ge,le,me.props.children,Ne,me.key):le!==null&&(le.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===G&&z6(wt)===le.type)?(le=T(le,me.props),e0(le,me),le.return=ge,le):(le=cm(me.type,me.key,me.props,null,ge.mode,Ne),e0(le,me),le.return=ge,le)}function we(ge,le,me,Ne){return le===null||le.tag!==4||le.stateNode.containerInfo!==me.containerInfo||le.stateNode.implementation!==me.implementation?(le=hv(me,ge.mode,Ne),le.return=ge,le):(le=T(le,me.children||[]),le.return=ge,le)}function Me(ge,le,me,Ne,wt){return le===null||le.tag!==7?(le=Iu(me,ge.mode,Ne,wt),le.return=ge,le):(le=T(le,me),le.return=ge,le)}function De(ge,le,me){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return le=uv(""+le,ge.mode,me),le.return=ge,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case E:return me=cm(le.type,le.key,le.props,null,ge.mode,me),e0(me,le),me.return=ge,me;case S:return le=hv(le,ge.mode,me),le.return=ge,le;case G:var Ne=le._init;return le=Ne(le._payload),De(ge,le,me)}if(b(le)||_(le))return le=Iu(le,ge.mode,me,null),le.return=ge,le;if(typeof le.then=="function")return De(ge,Im(le),me);if(le.$$typeof===U)return De(ge,dm(ge,le),me);xm(ge,le)}return null}function _e(ge,le,me,Ne){var wt=le!==null?le.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return wt!==null?null:te(ge,le,""+me,Ne);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case E:return me.key===wt?ae(ge,le,me,Ne):null;case S:return me.key===wt?we(ge,le,me,Ne):null;case G:return wt=me._init,me=wt(me._payload),_e(ge,le,me,Ne)}if(b(me)||_(me))return wt!==null?null:Me(ge,le,me,Ne,null);if(typeof me.then=="function")return _e(ge,le,Im(me),Ne);if(me.$$typeof===U)return _e(ge,le,dm(ge,me),Ne);xm(ge,me)}return null}function Ie(ge,le,me,Ne,wt){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return ge=ge.get(me)||null,te(le,ge,""+Ne,wt);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case E:return ge=ge.get(Ne.key===null?me:Ne.key)||null,ae(le,ge,Ne,wt);case S:return ge=ge.get(Ne.key===null?me:Ne.key)||null,we(le,ge,Ne,wt);case G:var hr=Ne._init;return Ne=hr(Ne._payload),Ie(ge,le,me,Ne,wt)}if(b(Ne)||_(Ne))return ge=ge.get(me)||null,Me(le,ge,Ne,wt,null);if(typeof Ne.then=="function")return Ie(ge,le,me,Im(Ne),wt);if(Ne.$$typeof===U)return Ie(ge,le,me,dm(le,Ne),wt);xm(le,Ne)}return null}function Ht(ge,le,me,Ne){for(var wt=null,hr=null,Tt=le,jt=le=0,Ni=null;Tt!==null&&jt<me.length;jt++){Tt.index>jt?(Ni=Tt,Tt=null):Ni=Tt.sibling;var Nr=_e(ge,Tt,me[jt],Ne);if(Nr===null){Tt===null&&(Tt=Ni);break}a&&Tt&&Nr.alternate===null&&l(ge,Tt),le=P(Nr,le,jt),hr===null?wt=Nr:hr.sibling=Nr,hr=Nr,Tt=Ni}if(jt===me.length)return d(ge,Tt),zr&&Cu(ge,jt),wt;if(Tt===null){for(;jt<me.length;jt++)Tt=De(ge,me[jt],Ne),Tt!==null&&(le=P(Tt,le,jt),hr===null?wt=Tt:hr.sibling=Tt,hr=Tt);return zr&&Cu(ge,jt),wt}for(Tt=y(Tt);jt<me.length;jt++)Ni=Ie(Tt,ge,jt,me[jt],Ne),Ni!==null&&(a&&Ni.alternate!==null&&Tt.delete(Ni.key===null?jt:Ni.key),le=P(Ni,le,jt),hr===null?wt=Ni:hr.sibling=Ni,hr=Ni);return a&&Tt.forEach(function($l){return l(ge,$l)}),zr&&Cu(ge,jt),wt}function Bt(ge,le,me,Ne){if(me==null)throw Error(n(151));for(var wt=null,hr=null,Tt=le,jt=le=0,Ni=null,Nr=me.next();Tt!==null&&!Nr.done;jt++,Nr=me.next()){Tt.index>jt?(Ni=Tt,Tt=null):Ni=Tt.sibling;var $l=_e(ge,Tt,Nr.value,Ne);if($l===null){Tt===null&&(Tt=Ni);break}a&&Tt&&$l.alternate===null&&l(ge,Tt),le=P($l,le,jt),hr===null?wt=$l:hr.sibling=$l,hr=$l,Tt=Ni}if(Nr.done)return d(ge,Tt),zr&&Cu(ge,jt),wt;if(Tt===null){for(;!Nr.done;jt++,Nr=me.next())Nr=De(ge,Nr.value,Ne),Nr!==null&&(le=P(Nr,le,jt),hr===null?wt=Nr:hr.sibling=Nr,hr=Nr);return zr&&Cu(ge,jt),wt}for(Tt=y(Tt);!Nr.done;jt++,Nr=me.next())Nr=Ie(Tt,ge,jt,Nr.value,Ne),Nr!==null&&(a&&Nr.alternate!==null&&Tt.delete(Nr.key===null?jt:Nr.key),le=P(Nr,le,jt),hr===null?wt=Nr:hr.sibling=Nr,hr=Nr);return a&&Tt.forEach(function(vj){return l(ge,vj)}),zr&&Cu(ge,jt),wt}function an(ge,le,me,Ne){if(typeof me=="object"&&me!==null&&me.type===A&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case E:e:{for(var wt=me.key;le!==null;){if(le.key===wt){if(wt=me.type,wt===A){if(le.tag===7){d(ge,le.sibling),Ne=T(le,me.props.children),Ne.return=ge,ge=Ne;break e}}else if(le.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===G&&z6(wt)===le.type){d(ge,le.sibling),Ne=T(le,me.props),e0(Ne,me),Ne.return=ge,ge=Ne;break e}d(ge,le);break}else l(ge,le);le=le.sibling}me.type===A?(Ne=Iu(me.props.children,ge.mode,Ne,me.key),Ne.return=ge,ge=Ne):(Ne=cm(me.type,me.key,me.props,null,ge.mode,Ne),e0(Ne,me),Ne.return=ge,ge=Ne)}return X(ge);case S:e:{for(wt=me.key;le!==null;){if(le.key===wt)if(le.tag===4&&le.stateNode.containerInfo===me.containerInfo&&le.stateNode.implementation===me.implementation){d(ge,le.sibling),Ne=T(le,me.children||[]),Ne.return=ge,ge=Ne;break e}else{d(ge,le);break}else l(ge,le);le=le.sibling}Ne=hv(me,ge.mode,Ne),Ne.return=ge,ge=Ne}return X(ge);case G:return wt=me._init,me=wt(me._payload),an(ge,le,me,Ne)}if(b(me))return Ht(ge,le,me,Ne);if(_(me)){if(wt=_(me),typeof wt!="function")throw Error(n(150));return me=wt.call(me),Bt(ge,le,me,Ne)}if(typeof me.then=="function")return an(ge,le,Im(me),Ne);if(me.$$typeof===U)return an(ge,le,dm(ge,me),Ne);xm(ge,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,le!==null&&le.tag===6?(d(ge,le.sibling),Ne=T(le,me),Ne.return=ge,ge=Ne):(d(ge,le),Ne=uv(me,ge.mode,Ne),Ne.return=ge,ge=Ne),X(ge)):d(ge,le)}return function(ge,le,me,Ne){try{Jp=0;var wt=an(ge,le,me,Ne);return gd=null,wt}catch(Tt){if(Tt===Hp||Tt===pm)throw Tt;var hr=bo(29,Tt,null,ge.mode);return hr.lanes=Ne,hr.return=ge,hr}finally{}}}var yd=q6(!0),F6=q6(!1),Vo=O(null),La=null;function wl(a){var l=a.alternate;N(mi,mi.current&1),N(Vo,a),La===null&&(l===null||hd.current!==null||l.memoizedState!==null)&&(La=a)}function H6(a){if(a.tag===22){if(N(mi,mi.current),N(Vo,a),La===null){var l=a.alternate;l!==null&&l.memoizedState!==null&&(La=a)}}else vl()}function vl(){N(mi,mi.current),N(Vo,Vo.current)}function Rc(a){x(Vo),La===a&&(La=null),x(mi)}var mi=O(0);function Cm(a){for(var l=a;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||D2(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Hv(a,l,d,y){l=a.memoizedState,d=d(y,l),d=d==null?l:f({},l,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Wv={enqueueSetState:function(a,l,d){a=a._reactInternals;var y=_o(),T=yl(y);T.payload=l,d!=null&&(T.callback=d),l=ml(a,T,y),l!==null&&(So(l,a,y),Kp(l,a,y))},enqueueReplaceState:function(a,l,d){a=a._reactInternals;var y=_o(),T=yl(y);T.tag=1,T.payload=l,d!=null&&(T.callback=d),l=ml(a,T,y),l!==null&&(So(l,a,y),Kp(l,a,y))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var d=_o(),y=yl(d);y.tag=2,l!=null&&(y.callback=l),l=ml(a,y,d),l!==null&&(So(l,a,d),Kp(l,a,d))}};function W6(a,l,d,y,T,P,X){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,P,X):l.prototype&&l.prototype.isPureReactComponent?!Pp(d,y)||!Pp(T,P):!0}function K6(a,l,d,y){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,y),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,y),l.state!==a&&Wv.enqueueReplaceState(l,l.state,null)}function $u(a,l){var d=l;if("ref"in l){d={};for(var y in l)y!=="ref"&&(d[y]=l[y])}if(a=a.defaultProps){d===l&&(d=f({},d));for(var T in a)d[T]===void 0&&(d[T]=a[T])}return d}var Tm=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function V6(a){Tm(a)}function G6(a){console.error(a)}function Y6(a){Tm(a)}function Mm(a,l){try{var d=a.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(y){setTimeout(function(){throw y})}}function Z6(a,l,d){try{var y=a.onCaughtError;y(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function Kv(a,l,d){return d=yl(d),d.tag=3,d.payload={element:null},d.callback=function(){Mm(a,l)},d}function Q6(a){return a=yl(a),a.tag=3,a}function X6(a,l,d,y){var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var P=y.value;a.payload=function(){return T(P)},a.callback=function(){Z6(l,d,y)}}var X=d.stateNode;X!==null&&typeof X.componentDidCatch=="function"&&(a.callback=function(){Z6(l,d,y),typeof T!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var te=y.stack;this.componentDidCatch(y.value,{componentStack:te!==null?te:""})})}function vU(a,l,d,y,T){if(d.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(l=d.alternate,l!==null&&zp(l,d,T,!0),d=Vo.current,d!==null){switch(d.tag){case 13:return La===null?y2():d.alternate===null&&Vn===0&&(Vn=3),d.flags&=-257,d.flags|=65536,d.lanes=T,y===Ev?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([y]):l.add(y),b2(a,y,T)),!1;case 22:return d.flags|=65536,y===Ev?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([y])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([y]):d.add(y)),b2(a,y,T)),!1}throw Error(n(435,d.tag))}return b2(a,y,T),y2(),!1}if(zr)return l=Vo.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=T,y!==pv&&(a=Error(n(422),{cause:y}),jp(Fo(a,d)))):(y!==pv&&(l=Error(n(423),{cause:y}),jp(Fo(l,d))),a=a.current.alternate,a.flags|=65536,T&=-T,a.lanes|=T,y=Fo(y,d),T=Kv(a.stateNode,y,T),Av(a,T),Vn!==4&&(Vn=2)),!1;var P=Error(n(520),{cause:y});if(P=Fo(P,d),a0===null?a0=[P]:a0.push(P),Vn!==4&&(Vn=2),l===null)return!0;y=Fo(y,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,a=T&-T,d.lanes|=a,a=Kv(d.stateNode,y,a),Av(d,a),!1;case 1:if(l=d.type,P=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(xl===null||!xl.has(P))))return d.flags|=65536,T&=-T,d.lanes|=T,T=Q6(T),X6(T,a,d,y),Av(d,T),!1}d=d.return}while(d!==null);return!1}var J6=Error(n(461)),Ti=!1;function Wi(a,l,d,y){l.child=a===null?F6(l,null,d,y):yd(l,a.child,d,y)}function e8(a,l,d,y,T){d=d.render;var P=l.ref;if("ref"in y){var X={};for(var te in y)te!=="ref"&&(X[te]=y[te])}else X=y;return Ou(l),y=Mv(a,l,d,X,P,T),te=Nv(),a!==null&&!Ti?(Ov(a,l,T),Dc(a,l,T)):(zr&&te&&dv(l),l.flags|=1,Wi(a,l,y,T),l.child)}function t8(a,l,d,y,T){if(a===null){var P=d.type;return typeof P=="function"&&!lv(P)&&P.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=P,r8(a,l,P,y,T)):(a=cm(d.type,null,y,l,l.mode,T),a.ref=l.ref,a.return=l,l.child=a)}if(P=a.child,!e2(a,T)){var X=P.memoizedProps;if(d=d.compare,d=d!==null?d:Pp,d(X,y)&&a.ref===l.ref)return Dc(a,l,T)}return l.flags|=1,a=xc(P,y),a.ref=l.ref,a.return=l,l.child=a}function r8(a,l,d,y,T){if(a!==null){var P=a.memoizedProps;if(Pp(P,y)&&a.ref===l.ref)if(Ti=!1,l.pendingProps=y=P,e2(a,T))(a.flags&131072)!==0&&(Ti=!0);else return l.lanes=a.lanes,Dc(a,l,T)}return Vv(a,l,d,y,T)}function n8(a,l,d){var y=l.pendingProps,T=y.children,P=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((l.flags&128)!==0){if(y=P!==null?P.baseLanes|d:d,a!==null){for(T=l.child=a.child,P=0;T!==null;)P=P|T.lanes|T.childLanes,T=T.sibling;l.childLanes=P&~y}else l.childLanes=0,l.child=null;return i8(a,l,y,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&fm(l,P!==null?P.cachePool:null),P!==null?r6(l,P):xv(),H6(l);else return l.lanes=l.childLanes=536870912,i8(a,l,P!==null?P.baseLanes|d:d,d)}else P!==null?(fm(l,P.cachePool),r6(l,P),vl(),l.memoizedState=null):(a!==null&&fm(l,null),xv(),vl());return Wi(a,l,T,d),l.child}function i8(a,l,d,y){var T=vv();return T=T===null?null:{parent:yi._currentValue,pool:T},l.memoizedState={baseLanes:d,cachePool:T},a!==null&&fm(l,null),xv(),H6(l),a!==null&&zp(a,l,y,!0),null}function Nm(a,l){var d=l.ref;if(d===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(a===null||a.ref!==d)&&(l.flags|=4194816)}}function Vv(a,l,d,y,T){return Ou(l),d=Mv(a,l,d,y,void 0,T),y=Nv(),a!==null&&!Ti?(Ov(a,l,T),Dc(a,l,T)):(zr&&y&&dv(l),l.flags|=1,Wi(a,l,d,T),l.child)}function s8(a,l,d,y,T,P){return Ou(l),l.updateQueue=null,d=i6(l,y,d,T),n6(a),y=Nv(),a!==null&&!Ti?(Ov(a,l,P),Dc(a,l,P)):(zr&&y&&dv(l),l.flags|=1,Wi(a,l,d,P),l.child)}function o8(a,l,d,y,T){if(Ou(l),l.stateNode===null){var P=od,X=d.contextType;typeof X=="object"&&X!==null&&(P=ps(X)),P=new d(y,P),l.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=Wv,l.stateNode=P,P._reactInternals=l,P=l.stateNode,P.props=y,P.state=l.memoizedState,P.refs={},_v(l),X=d.contextType,P.context=typeof X=="object"&&X!==null?ps(X):od,P.state=l.memoizedState,X=d.getDerivedStateFromProps,typeof X=="function"&&(Hv(l,d,X,y),P.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(X=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),X!==P.state&&Wv.enqueueReplaceState(P,P.state,null),Gp(l,y,P,T),Vp(),P.state=l.memoizedState),typeof P.componentDidMount=="function"&&(l.flags|=4194308),y=!0}else if(a===null){P=l.stateNode;var te=l.memoizedProps,ae=$u(d,te);P.props=ae;var we=P.context,Me=d.contextType;X=od,typeof Me=="object"&&Me!==null&&(X=ps(Me));var De=d.getDerivedStateFromProps;Me=typeof De=="function"||typeof P.getSnapshotBeforeUpdate=="function",te=l.pendingProps!==te,Me||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(te||we!==X)&&K6(l,P,y,X),gl=!1;var _e=l.memoizedState;P.state=_e,Gp(l,y,P,T),Vp(),we=l.memoizedState,te||_e!==we||gl?(typeof De=="function"&&(Hv(l,d,De,y),we=l.memoizedState),(ae=gl||W6(l,d,ae,y,_e,we,X))?(Me||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(l.flags|=4194308)):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=y,l.memoizedState=we),P.props=y,P.state=we,P.context=X,y=ae):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),y=!1)}else{P=l.stateNode,Sv(a,l),X=l.memoizedProps,Me=$u(d,X),P.props=Me,De=l.pendingProps,_e=P.context,we=d.contextType,ae=od,typeof we=="object"&&we!==null&&(ae=ps(we)),te=d.getDerivedStateFromProps,(we=typeof te=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(X!==De||_e!==ae)&&K6(l,P,y,ae),gl=!1,_e=l.memoizedState,P.state=_e,Gp(l,y,P,T),Vp();var Ie=l.memoizedState;X!==De||_e!==Ie||gl||a!==null&&a.dependencies!==null&&hm(a.dependencies)?(typeof te=="function"&&(Hv(l,d,te,y),Ie=l.memoizedState),(Me=gl||W6(l,d,Me,y,_e,Ie,ae)||a!==null&&a.dependencies!==null&&hm(a.dependencies))?(we||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(y,Ie,ae),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(y,Ie,ae)),typeof P.componentDidUpdate=="function"&&(l.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof P.componentDidUpdate!="function"||X===a.memoizedProps&&_e===a.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||X===a.memoizedProps&&_e===a.memoizedState||(l.flags|=1024),l.memoizedProps=y,l.memoizedState=Ie),P.props=y,P.state=Ie,P.context=ae,y=Me):(typeof P.componentDidUpdate!="function"||X===a.memoizedProps&&_e===a.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||X===a.memoizedProps&&_e===a.memoizedState||(l.flags|=1024),y=!1)}return P=y,Nm(a,l),y=(l.flags&128)!==0,P||y?(P=l.stateNode,d=y&&typeof d.getDerivedStateFromError!="function"?null:P.render(),l.flags|=1,a!==null&&y?(l.child=yd(l,a.child,null,T),l.child=yd(l,null,d,T)):Wi(a,l,d,T),l.memoizedState=P.state,a=l.child):a=Dc(a,l,T),a}function a8(a,l,d,y){return Up(),l.flags|=256,Wi(a,l,d,y),l.child}var Gv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yv(a){return{baseLanes:a,cachePool:G5()}}function Zv(a,l,d){return a=a!==null?a.childLanes&~d:0,l&&(a|=Go),a}function c8(a,l,d){var y=l.pendingProps,T=!1,P=(l.flags&128)!==0,X;if((X=P)||(X=a!==null&&a.memoizedState===null?!1:(mi.current&2)!==0),X&&(T=!0,l.flags&=-129),X=(l.flags&32)!==0,l.flags&=-33,a===null){if(zr){if(T?wl(l):vl(),zr){var te=Kn,ae;if(ae=te){e:{for(ae=te,te=Ba;ae.nodeType!==8;){if(!te){te=null;break e}if(ae=pa(ae.nextSibling),ae===null){te=null;break e}}te=ae}te!==null?(l.memoizedState={dehydrated:te,treeContext:xu!==null?{id:Cc,overflow:Tc}:null,retryLane:536870912,hydrationErrors:null},ae=bo(18,null,null,0),ae.stateNode=te,ae.return=l,l.child=ae,Ds=l,Kn=null,ae=!0):ae=!1}ae||Mu(l)}if(te=l.memoizedState,te!==null&&(te=te.dehydrated,te!==null))return D2(te)?l.lanes=32:l.lanes=536870912,null;Rc(l)}return te=y.children,y=y.fallback,T?(vl(),T=l.mode,te=Om({mode:"hidden",children:te},T),y=Iu(y,T,d,null),te.return=l,y.return=l,te.sibling=y,l.child=te,T=l.child,T.memoizedState=Yv(d),T.childLanes=Zv(a,X,d),l.memoizedState=Gv,y):(wl(l),Qv(l,te))}if(ae=a.memoizedState,ae!==null&&(te=ae.dehydrated,te!==null)){if(P)l.flags&256?(wl(l),l.flags&=-257,l=Xv(a,l,d)):l.memoizedState!==null?(vl(),l.child=a.child,l.flags|=128,l=null):(vl(),T=y.fallback,te=l.mode,y=Om({mode:"visible",children:y.children},te),T=Iu(T,te,d,null),T.flags|=2,y.return=l,T.return=l,y.sibling=T,l.child=y,yd(l,a.child,null,d),y=l.child,y.memoizedState=Yv(d),y.childLanes=Zv(a,X,d),l.memoizedState=Gv,l=T);else if(wl(l),D2(te)){if(X=te.nextSibling&&te.nextSibling.dataset,X)var we=X.dgst;X=we,y=Error(n(419)),y.stack="",y.digest=X,jp({value:y,source:null,stack:null}),l=Xv(a,l,d)}else if(Ti||zp(a,l,d,!1),X=(d&a.childLanes)!==0,Ti||X){if(X=vn,X!==null&&(y=d&-d,y=(y&42)!==0?1:Et(y),y=(y&(X.suspendedLanes|d))!==0?0:y,y!==0&&y!==ae.retryLane))throw ae.retryLane=y,sd(a,y),So(X,a,y),J6;te.data==="$?"||y2(),l=Xv(a,l,d)}else te.data==="$?"?(l.flags|=192,l.child=a.child,l=null):(a=ae.treeContext,Kn=pa(te.nextSibling),Ds=l,zr=!0,Tu=null,Ba=!1,a!==null&&(Wo[Ko++]=Cc,Wo[Ko++]=Tc,Wo[Ko++]=xu,Cc=a.id,Tc=a.overflow,xu=l),l=Qv(l,y.children),l.flags|=4096);return l}return T?(vl(),T=y.fallback,te=l.mode,ae=a.child,we=ae.sibling,y=xc(ae,{mode:"hidden",children:y.children}),y.subtreeFlags=ae.subtreeFlags&65011712,we!==null?T=xc(we,T):(T=Iu(T,te,d,null),T.flags|=2),T.return=l,y.return=l,y.sibling=T,l.child=y,y=T,T=l.child,te=a.child.memoizedState,te===null?te=Yv(d):(ae=te.cachePool,ae!==null?(we=yi._currentValue,ae=ae.parent!==we?{parent:we,pool:we}:ae):ae=G5(),te={baseLanes:te.baseLanes|d,cachePool:ae}),T.memoizedState=te,T.childLanes=Zv(a,X,d),l.memoizedState=Gv,y):(wl(l),d=a.child,a=d.sibling,d=xc(d,{mode:"visible",children:y.children}),d.return=l,d.sibling=null,a!==null&&(X=l.deletions,X===null?(l.deletions=[a],l.flags|=16):X.push(a)),l.child=d,l.memoizedState=null,d)}function Qv(a,l){return l=Om({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function Om(a,l){return a=bo(22,a,null,l),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Xv(a,l,d){return yd(l,a.child,null,d),a=Qv(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function l8(a,l,d){a.lanes|=l;var y=a.alternate;y!==null&&(y.lanes|=l),yv(a.return,l,d)}function Jv(a,l,d,y,T){var P=a.memoizedState;P===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:T}:(P.isBackwards=l,P.rendering=null,P.renderingStartTime=0,P.last=y,P.tail=d,P.tailMode=T)}function u8(a,l,d){var y=l.pendingProps,T=y.revealOrder,P=y.tail;if(Wi(a,l,y.children,d),y=mi.current,(y&2)!==0)y=y&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&l8(a,d,l);else if(a.tag===19)l8(a,d,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(N(mi,y),T){case"forwards":for(d=l.child,T=null;d!==null;)a=d.alternate,a!==null&&Cm(a)===null&&(T=d),d=d.sibling;d=T,d===null?(T=l.child,l.child=null):(T=d.sibling,d.sibling=null),Jv(l,!1,T,d,P);break;case"backwards":for(d=null,T=l.child,l.child=null;T!==null;){if(a=T.alternate,a!==null&&Cm(a)===null){l.child=T;break}a=T.sibling,T.sibling=d,d=T,T=a}Jv(l,!0,d,null,P);break;case"together":Jv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Dc(a,l,d){if(a!==null&&(l.dependencies=a.dependencies),Il|=l.lanes,(d&l.childLanes)===0)if(a!==null){if(zp(a,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(n(153));if(l.child!==null){for(a=l.child,d=xc(a,a.pendingProps),l.child=d,d.return=l;a.sibling!==null;)a=a.sibling,d=d.sibling=xc(a,a.pendingProps),d.return=l;d.sibling=null}return l.child}function e2(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&hm(a)))}function EU(a,l,d){switch(l.tag){case 3:re(l,l.stateNode.containerInfo),pl(l,yi,a.memoizedState.cache),Up();break;case 27:case 5:be(l);break;case 4:re(l,l.stateNode.containerInfo);break;case 10:pl(l,l.type,l.memoizedProps.value);break;case 13:var y=l.memoizedState;if(y!==null)return y.dehydrated!==null?(wl(l),l.flags|=128,null):(d&l.child.childLanes)!==0?c8(a,l,d):(wl(l),a=Dc(a,l,d),a!==null?a.sibling:null);wl(l);break;case 19:var T=(a.flags&128)!==0;if(y=(d&l.childLanes)!==0,y||(zp(a,l,d,!1),y=(d&l.childLanes)!==0),T){if(y)return u8(a,l,d);l.flags|=128}if(T=l.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),N(mi,mi.current),y)break;return null;case 22:case 23:return l.lanes=0,n8(a,l,d);case 24:pl(l,yi,a.memoizedState.cache)}return Dc(a,l,d)}function h8(a,l,d){if(a!==null)if(a.memoizedProps!==l.pendingProps)Ti=!0;else{if(!e2(a,d)&&(l.flags&128)===0)return Ti=!1,EU(a,l,d);Ti=(a.flags&131072)!==0}else Ti=!1,zr&&(l.flags&1048576)!==0&&z5(l,um,l.index);switch(l.lanes=0,l.tag){case 16:e:{a=l.pendingProps;var y=l.elementType,T=y._init;if(y=T(y._payload),l.type=y,typeof y=="function")lv(y)?(a=$u(y,a),l.tag=1,l=o8(null,l,y,a,d)):(l.tag=0,l=Vv(null,l,y,a,d));else{if(y!=null){if(T=y.$$typeof,T===q){l.tag=11,l=e8(null,l,y,a,d);break e}else if(T===V){l.tag=14,l=t8(null,l,y,a,d);break e}}throw l=g(y)||y,Error(n(306,l,""))}}return l;case 0:return Vv(a,l,l.type,l.pendingProps,d);case 1:return y=l.type,T=$u(y,l.pendingProps),o8(a,l,y,T,d);case 3:e:{if(re(l,l.stateNode.containerInfo),a===null)throw Error(n(387));y=l.pendingProps;var P=l.memoizedState;T=P.element,Sv(a,l),Gp(l,y,null,d);var X=l.memoizedState;if(y=X.cache,pl(l,yi,y),y!==P.cache&&mv(l,[yi],d,!0),Vp(),y=X.element,P.isDehydrated)if(P={element:y,isDehydrated:!1,cache:X.cache},l.updateQueue.baseState=P,l.memoizedState=P,l.flags&256){l=a8(a,l,y,d);break e}else if(y!==T){T=Fo(Error(n(424)),l),jp(T),l=a8(a,l,y,d);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Kn=pa(a.firstChild),Ds=l,zr=!0,Tu=null,Ba=!0,d=F6(l,null,y,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(Up(),y===T){l=Dc(a,l,d);break e}Wi(a,l,y,d)}l=l.child}return l;case 26:return Nm(a,l),a===null?(d=gI(l.type,null,l.pendingProps,null))?l.memoizedState=d:zr||(d=l.type,a=l.pendingProps,y=Wm(Q.current).createElement(d),y[it]=l,y[Ct]=a,Vi(y,d,a),Mr(y),l.stateNode=y):l.memoizedState=gI(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return be(l),a===null&&zr&&(y=l.stateNode=dI(l.type,l.pendingProps,Q.current),Ds=l,Ba=!0,T=Kn,Ml(l.type)?($2=T,Kn=pa(y.firstChild)):Kn=T),Wi(a,l,l.pendingProps.children,d),Nm(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&zr&&((T=y=Kn)&&(y=YU(y,l.type,l.pendingProps,Ba),y!==null?(l.stateNode=y,Ds=l,Kn=pa(y.firstChild),Ba=!1,T=!0):T=!1),T||Mu(l)),be(l),T=l.type,P=l.pendingProps,X=a!==null?a.memoizedProps:null,y=P.children,N2(T,P)?y=null:X!==null&&N2(T,X)&&(l.flags|=32),l.memoizedState!==null&&(T=Mv(a,l,fU,null,null,d),y0._currentValue=T),Nm(a,l),Wi(a,l,y,d),l.child;case 6:return a===null&&zr&&((a=d=Kn)&&(d=ZU(d,l.pendingProps,Ba),d!==null?(l.stateNode=d,Ds=l,Kn=null,a=!0):a=!1),a||Mu(l)),null;case 13:return c8(a,l,d);case 4:return re(l,l.stateNode.containerInfo),y=l.pendingProps,a===null?l.child=yd(l,null,y,d):Wi(a,l,y,d),l.child;case 11:return e8(a,l,l.type,l.pendingProps,d);case 7:return Wi(a,l,l.pendingProps,d),l.child;case 8:return Wi(a,l,l.pendingProps.children,d),l.child;case 12:return Wi(a,l,l.pendingProps.children,d),l.child;case 10:return y=l.pendingProps,pl(l,l.type,y.value),Wi(a,l,y.children,d),l.child;case 9:return T=l.type._context,y=l.pendingProps.children,Ou(l),T=ps(T),y=y(T),l.flags|=1,Wi(a,l,y,d),l.child;case 14:return t8(a,l,l.type,l.pendingProps,d);case 15:return r8(a,l,l.type,l.pendingProps,d);case 19:return u8(a,l,d);case 31:return y=l.pendingProps,d=l.mode,y={mode:y.mode,children:y.children},a===null?(d=Om(y,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=xc(a.child,y),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return n8(a,l,d);case 24:return Ou(l),y=ps(yi),a===null?(T=vv(),T===null&&(T=vn,P=bv(),T.pooledCache=P,P.refCount++,P!==null&&(T.pooledCacheLanes|=d),T=P),l.memoizedState={parent:y,cache:T},_v(l),pl(l,yi,T)):((a.lanes&d)!==0&&(Sv(a,l),Gp(l,null,null,d),Vp()),T=a.memoizedState,P=l.memoizedState,T.parent!==y?(T={parent:y,cache:y},l.memoizedState=T,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=T),pl(l,yi,y)):(y=P.cache,pl(l,yi,y),y!==T.cache&&mv(l,[yi],d,!0))),Wi(a,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function $c(a){a.flags|=4}function d8(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!vI(l)){if(l=Vo.current,l!==null&&((Ir&4194048)===Ir?La!==null:(Ir&62914560)!==Ir&&(Ir&536870912)===0||l!==La))throw Wp=Ev,Y5;a.flags|=8192}}function Rm(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?Ut():536870912,a.lanes|=l,vd|=l)}function t0(a,l){if(!zr)switch(a.tailMode){case"hidden":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Un(a){var l=a.alternate!==null&&a.alternate.child===a.child,d=0,y=0;if(l)for(var T=a.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags&65011712,y|=T.flags&65011712,T.return=a,T=T.sibling;else for(T=a.child;T!==null;)d|=T.lanes|T.childLanes,y|=T.subtreeFlags,y|=T.flags,T.return=a,T=T.sibling;return a.subtreeFlags|=y,a.childLanes=d,l}function _U(a,l,d){var y=l.pendingProps;switch(fv(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Un(l),null;case 1:return Un(l),null;case 3:return d=l.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),l.memoizedState.cache!==y&&(l.flags|=2048),Nc(yi),oe(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Lp(l)?$c(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,H5())),Un(l),null;case 26:return d=l.memoizedState,a===null?($c(l),d!==null?(Un(l),d8(l,d)):(Un(l),l.flags&=-16777217)):d?d!==a.memoizedState?($c(l),Un(l),d8(l,d)):(Un(l),l.flags&=-16777217):(a.memoizedProps!==y&&$c(l),Un(l),l.flags&=-16777217),null;case 27:Ce(l),d=Q.current;var T=l.type;if(a!==null&&l.stateNode!=null)a.memoizedProps!==y&&$c(l);else{if(!y){if(l.stateNode===null)throw Error(n(166));return Un(l),null}a=H.current,Lp(l)?q5(l):(a=dI(T,y,d),l.stateNode=a,$c(l))}return Un(l),null;case 5:if(Ce(l),d=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==y&&$c(l);else{if(!y){if(l.stateNode===null)throw Error(n(166));return Un(l),null}if(a=H.current,Lp(l))q5(l);else{switch(T=Wm(Q.current),a){case 1:a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=T.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?T.createElement("select",{is:y.is}):T.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?T.createElement(d,{is:y.is}):T.createElement(d)}}a[it]=l,a[Ct]=y;e:for(T=l.child;T!==null;){if(T.tag===5||T.tag===6)a.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===l)break e;for(;T.sibling===null;){if(T.return===null||T.return===l)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}l.stateNode=a;e:switch(Vi(a,d,y),d){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&$c(l)}}return Un(l),l.flags&=-16777217,null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==y&&$c(l);else{if(typeof y!="string"&&l.stateNode===null)throw Error(n(166));if(a=Q.current,Lp(l)){if(a=l.stateNode,d=l.memoizedProps,y=null,T=Ds,T!==null)switch(T.tag){case 27:case 5:y=T.memoizedProps}a[it]=l,a=!!(a.nodeValue===d||y!==null&&y.suppressHydrationWarning===!0||sI(a.nodeValue,d)),a||Mu(l)}else a=Wm(a).createTextNode(y),a[it]=l,l.stateNode=a}return Un(l),null;case 13:if(y=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(T=Lp(l),y!==null&&y.dehydrated!==null){if(a===null){if(!T)throw Error(n(318));if(T=l.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[it]=l}else Up(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Un(l),T=!1}else T=H5(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=T),T=!0;if(!T)return l.flags&256?(Rc(l),l):(Rc(l),null)}if(Rc(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=y!==null,a=a!==null&&a.memoizedState!==null,d){y=l.child,T=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(T=y.alternate.memoizedState.cachePool.pool);var P=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(P=y.memoizedState.cachePool.pool),P!==T&&(y.flags|=2048)}return d!==a&&d&&(l.child.flags|=8192),Rm(l,l.updateQueue),Un(l),null;case 4:return oe(),a===null&&I2(l.stateNode.containerInfo),Un(l),null;case 10:return Nc(l.type),Un(l),null;case 19:if(x(mi),T=l.memoizedState,T===null)return Un(l),null;if(y=(l.flags&128)!==0,P=T.rendering,P===null)if(y)t0(T,!1);else{if(Vn!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(P=Cm(a),P!==null){for(l.flags|=128,t0(T,!1),a=P.updateQueue,l.updateQueue=a,Rm(l,a),l.subtreeFlags=0,a=d,d=l.child;d!==null;)j5(d,a),d=d.sibling;return N(mi,mi.current&1|2),l.child}a=a.sibling}T.tail!==null&&He()>km&&(l.flags|=128,y=!0,t0(T,!1),l.lanes=4194304)}else{if(!y)if(a=Cm(P),a!==null){if(l.flags|=128,y=!0,a=a.updateQueue,l.updateQueue=a,Rm(l,a),t0(T,!0),T.tail===null&&T.tailMode==="hidden"&&!P.alternate&&!zr)return Un(l),null}else 2*He()-T.renderingStartTime>km&&d!==536870912&&(l.flags|=128,y=!0,t0(T,!1),l.lanes=4194304);T.isBackwards?(P.sibling=l.child,l.child=P):(a=T.last,a!==null?a.sibling=P:l.child=P,T.last=P)}return T.tail!==null?(l=T.tail,T.rendering=l,T.tail=l.sibling,T.renderingStartTime=He(),l.sibling=null,a=mi.current,N(mi,y?a&1|2:a&1),l):(Un(l),null);case 22:case 23:return Rc(l),Cv(),y=l.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(l.flags|=8192):y&&(l.flags|=8192),y?(d&536870912)!==0&&(l.flags&128)===0&&(Un(l),l.subtreeFlags&6&&(l.flags|=8192)):Un(l),d=l.updateQueue,d!==null&&Rm(l,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),y=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(y=l.memoizedState.cachePool.pool),y!==d&&(l.flags|=2048),a!==null&&x(Ru),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),Nc(yi),Un(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function SU(a,l){switch(fv(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Nc(yi),oe(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return Ce(l),null;case 13:if(Rc(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(n(340));Up()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return x(mi),null;case 4:return oe(),null;case 10:return Nc(l.type),null;case 22:case 23:return Rc(l),Cv(),a!==null&&x(Ru),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Nc(yi),null;case 25:return null;default:return null}}function f8(a,l){switch(fv(l),l.tag){case 3:Nc(yi),oe();break;case 26:case 27:case 5:Ce(l);break;case 4:oe();break;case 13:Rc(l);break;case 19:x(mi);break;case 10:Nc(l.type);break;case 22:case 23:Rc(l),Cv(),a!==null&&x(Ru);break;case 24:Nc(yi)}}function r0(a,l){try{var d=l.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var T=y.next;d=T;do{if((d.tag&a)===a){y=void 0;var P=d.create,X=d.inst;y=P(),X.destroy=y}d=d.next}while(d!==T)}}catch(te){dn(l,l.return,te)}}function El(a,l,d){try{var y=l.updateQueue,T=y!==null?y.lastEffect:null;if(T!==null){var P=T.next;y=P;do{if((y.tag&a)===a){var X=y.inst,te=X.destroy;if(te!==void 0){X.destroy=void 0,T=l;var ae=d,we=te;try{we()}catch(Me){dn(T,ae,Me)}}}y=y.next}while(y!==P)}}catch(Me){dn(l,l.return,Me)}}function p8(a){var l=a.updateQueue;if(l!==null){var d=a.stateNode;try{t6(l,d)}catch(y){dn(a,a.return,y)}}}function g8(a,l,d){d.props=$u(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(y){dn(a,l,y)}}function n0(a,l){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof d=="function"?a.refCleanup=d(y):d.current=y}}catch(T){dn(a,l,T)}}function Ua(a,l){var d=a.ref,y=a.refCleanup;if(d!==null)if(typeof y=="function")try{y()}catch(T){dn(a,l,T)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(T){dn(a,l,T)}else d.current=null}function y8(a){var l=a.type,d=a.memoizedProps,y=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&y.focus();break e;case"img":d.src?y.src=d.src:d.srcSet&&(y.srcset=d.srcSet)}}catch(T){dn(a,a.return,T)}}function t2(a,l,d){try{var y=a.stateNode;HU(y,a.type,d,l),y[Ct]=l}catch(T){dn(a,a.return,T)}}function m8(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ml(a.type)||a.tag===4}function r2(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||m8(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ml(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function n2(a,l,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(a),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=Hm));else if(y!==4&&(y===27&&Ml(a.type)&&(d=a.stateNode,l=null),a=a.child,a!==null))for(n2(a,l,d),a=a.sibling;a!==null;)n2(a,l,d),a=a.sibling}function Dm(a,l,d){var y=a.tag;if(y===5||y===6)a=a.stateNode,l?d.insertBefore(a,l):d.appendChild(a);else if(y!==4&&(y===27&&Ml(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(Dm(a,l,d),a=a.sibling;a!==null;)Dm(a,l,d),a=a.sibling}function b8(a){var l=a.stateNode,d=a.memoizedProps;try{for(var y=a.type,T=l.attributes;T.length;)l.removeAttributeNode(T[0]);Vi(l,y,d),l[it]=a,l[Ct]=d}catch(P){dn(a,a.return,P)}}var kc=!1,ei=!1,i2=!1,w8=typeof WeakSet=="function"?WeakSet:Set,Mi=null;function AU(a,l){if(a=a.containerInfo,T2=Qm,a=N5(a),rv(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var T=y.anchorOffset,P=y.focusNode;y=y.focusOffset;try{d.nodeType,P.nodeType}catch{d=null;break e}var X=0,te=-1,ae=-1,we=0,Me=0,De=a,_e=null;t:for(;;){for(var Ie;De!==d||T!==0&&De.nodeType!==3||(te=X+T),De!==P||y!==0&&De.nodeType!==3||(ae=X+y),De.nodeType===3&&(X+=De.nodeValue.length),(Ie=De.firstChild)!==null;)_e=De,De=Ie;for(;;){if(De===a)break t;if(_e===d&&++we===T&&(te=X),_e===P&&++Me===y&&(ae=X),(Ie=De.nextSibling)!==null)break;De=_e,_e=De.parentNode}De=Ie}d=te===-1||ae===-1?null:{start:te,end:ae}}else d=null}d=d||{start:0,end:0}}else d=null;for(M2={focusedElem:a,selectionRange:d},Qm=!1,Mi=l;Mi!==null;)if(l=Mi,a=l.child,(l.subtreeFlags&1024)!==0&&a!==null)a.return=l,Mi=a;else for(;Mi!==null;){switch(l=Mi,P=l.alternate,a=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&P!==null){a=void 0,d=l,T=P.memoizedProps,P=P.memoizedState,y=d.stateNode;try{var Ht=$u(d.type,T,d.elementType===d.type);a=y.getSnapshotBeforeUpdate(Ht,P),y.__reactInternalSnapshotBeforeUpdate=a}catch(Bt){dn(d,d.return,Bt)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,d=a.nodeType,d===9)R2(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":R2(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=l.sibling,a!==null){a.return=l.return,Mi=a;break}Mi=l.return}}function v8(a,l,d){var y=d.flags;switch(d.tag){case 0:case 11:case 15:_l(a,d),y&4&&r0(5,d);break;case 1:if(_l(a,d),y&4)if(a=d.stateNode,l===null)try{a.componentDidMount()}catch(X){dn(d,d.return,X)}else{var T=$u(d.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(T,l,a.__reactInternalSnapshotBeforeUpdate)}catch(X){dn(d,d.return,X)}}y&64&&p8(d),y&512&&n0(d,d.return);break;case 3:if(_l(a,d),y&64&&(a=d.updateQueue,a!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{t6(a,l)}catch(X){dn(d,d.return,X)}}break;case 27:l===null&&y&4&&b8(d);case 26:case 5:_l(a,d),l===null&&y&4&&y8(d),y&512&&n0(d,d.return);break;case 12:_l(a,d);break;case 13:_l(a,d),y&4&&S8(a,d),y&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=DU.bind(null,d),QU(a,d))));break;case 22:if(y=d.memoizedState!==null||kc,!y){l=l!==null&&l.memoizedState!==null||ei,T=kc;var P=ei;kc=y,(ei=l)&&!P?Sl(a,d,(d.subtreeFlags&8772)!==0):_l(a,d),kc=T,ei=P}break;case 30:break;default:_l(a,d)}}function E8(a){var l=a.alternate;l!==null&&(a.alternate=null,E8(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&ar(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var $n=null,Ys=!1;function Pc(a,l,d){for(d=d.child;d!==null;)_8(a,l,d),d=d.sibling}function _8(a,l,d){if(Z&&typeof Z.onCommitFiberUnmount=="function")try{Z.onCommitFiberUnmount(Te,d)}catch{}switch(d.tag){case 26:ei||Ua(d,l),Pc(a,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:ei||Ua(d,l);var y=$n,T=Ys;Ml(d.type)&&($n=d.stateNode,Ys=!1),Pc(a,l,d),d0(d.stateNode),$n=y,Ys=T;break;case 5:ei||Ua(d,l);case 6:if(y=$n,T=Ys,$n=null,Pc(a,l,d),$n=y,Ys=T,$n!==null)if(Ys)try{($n.nodeType===9?$n.body:$n.nodeName==="HTML"?$n.ownerDocument.body:$n).removeChild(d.stateNode)}catch(P){dn(d,l,P)}else try{$n.removeChild(d.stateNode)}catch(P){dn(d,l,P)}break;case 18:$n!==null&&(Ys?(a=$n,uI(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),v0(a)):uI($n,d.stateNode));break;case 4:y=$n,T=Ys,$n=d.stateNode.containerInfo,Ys=!0,Pc(a,l,d),$n=y,Ys=T;break;case 0:case 11:case 14:case 15:ei||El(2,d,l),ei||El(4,d,l),Pc(a,l,d);break;case 1:ei||(Ua(d,l),y=d.stateNode,typeof y.componentWillUnmount=="function"&&g8(d,l,y)),Pc(a,l,d);break;case 21:Pc(a,l,d);break;case 22:ei=(y=ei)||d.memoizedState!==null,Pc(a,l,d),ei=y;break;default:Pc(a,l,d)}}function S8(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{v0(a)}catch(d){dn(l,l.return,d)}}function IU(a){switch(a.tag){case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new w8),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new w8),l;default:throw Error(n(435,a.tag))}}function s2(a,l){var d=IU(a);l.forEach(function(y){var T=$U.bind(null,a,y);d.has(y)||(d.add(y),y.then(T,T))})}function wo(a,l){var d=l.deletions;if(d!==null)for(var y=0;y<d.length;y++){var T=d[y],P=a,X=l,te=X;e:for(;te!==null;){switch(te.tag){case 27:if(Ml(te.type)){$n=te.stateNode,Ys=!1;break e}break;case 5:$n=te.stateNode,Ys=!1;break e;case 3:case 4:$n=te.stateNode.containerInfo,Ys=!0;break e}te=te.return}if($n===null)throw Error(n(160));_8(P,X,T),$n=null,Ys=!1,P=T.alternate,P!==null&&(P.return=null),T.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)A8(l,a),l=l.sibling}var fa=null;function A8(a,l){var d=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:wo(l,a),vo(a),y&4&&(El(3,a,a.return),r0(3,a),El(5,a,a.return));break;case 1:wo(l,a),vo(a),y&512&&(ei||d===null||Ua(d,d.return)),y&64&&kc&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?y:d.concat(y))));break;case 26:var T=fa;if(wo(l,a),vo(a),y&512&&(ei||d===null||Ua(d,d.return)),y&4){var P=d!==null?d.memoizedState:null;if(y=a.memoizedState,d===null)if(y===null)if(a.stateNode===null){e:{y=a.type,d=a.memoizedProps,T=T.ownerDocument||T;t:switch(y){case"title":P=T.getElementsByTagName("title")[0],(!P||P[Xt]||P[it]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=T.createElement(y),T.head.insertBefore(P,T.querySelector("head > title"))),Vi(P,y,d),P[it]=a,Mr(P),y=P;break e;case"link":var X=bI("link","href",T).get(y+(d.href||""));if(X){for(var te=0;te<X.length;te++)if(P=X[te],P.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&P.getAttribute("rel")===(d.rel==null?null:d.rel)&&P.getAttribute("title")===(d.title==null?null:d.title)&&P.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){X.splice(te,1);break t}}P=T.createElement(y),Vi(P,y,d),T.head.appendChild(P);break;case"meta":if(X=bI("meta","content",T).get(y+(d.content||""))){for(te=0;te<X.length;te++)if(P=X[te],P.getAttribute("content")===(d.content==null?null:""+d.content)&&P.getAttribute("name")===(d.name==null?null:d.name)&&P.getAttribute("property")===(d.property==null?null:d.property)&&P.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&P.getAttribute("charset")===(d.charSet==null?null:d.charSet)){X.splice(te,1);break t}}P=T.createElement(y),Vi(P,y,d),T.head.appendChild(P);break;default:throw Error(n(468,y))}P[it]=a,Mr(P),y=P}a.stateNode=y}else wI(T,a.type,a.stateNode);else a.stateNode=mI(T,y,a.memoizedProps);else P!==y?(P===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):P.count--,y===null?wI(T,a.type,a.stateNode):mI(T,y,a.memoizedProps)):y===null&&a.stateNode!==null&&t2(a,a.memoizedProps,d.memoizedProps)}break;case 27:wo(l,a),vo(a),y&512&&(ei||d===null||Ua(d,d.return)),d!==null&&y&4&&t2(a,a.memoizedProps,d.memoizedProps);break;case 5:if(wo(l,a),vo(a),y&512&&(ei||d===null||Ua(d,d.return)),a.flags&32){T=a.stateNode;try{Ur(T,"")}catch(Ie){dn(a,a.return,Ie)}}y&4&&a.stateNode!=null&&(T=a.memoizedProps,t2(a,T,d!==null?d.memoizedProps:T)),y&1024&&(i2=!0);break;case 6:if(wo(l,a),vo(a),y&4){if(a.stateNode===null)throw Error(n(162));y=a.memoizedProps,d=a.stateNode;try{d.nodeValue=y}catch(Ie){dn(a,a.return,Ie)}}break;case 3:if(Gm=null,T=fa,fa=Km(l.containerInfo),wo(l,a),fa=T,vo(a),y&4&&d!==null&&d.memoizedState.isDehydrated)try{v0(l.containerInfo)}catch(Ie){dn(a,a.return,Ie)}i2&&(i2=!1,I8(a));break;case 4:y=fa,fa=Km(a.stateNode.containerInfo),wo(l,a),vo(a),fa=y;break;case 12:wo(l,a),vo(a);break;case 13:wo(l,a),vo(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(h2=He()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,s2(a,y)));break;case 22:T=a.memoizedState!==null;var ae=d!==null&&d.memoizedState!==null,we=kc,Me=ei;if(kc=we||T,ei=Me||ae,wo(l,a),ei=Me,kc=we,vo(a),y&8192)e:for(l=a.stateNode,l._visibility=T?l._visibility&-2:l._visibility|1,T&&(d===null||ae||kc||ei||ku(a)),d=null,l=a;;){if(l.tag===5||l.tag===26){if(d===null){ae=d=l;try{if(P=ae.stateNode,T)X=P.style,typeof X.setProperty=="function"?X.setProperty("display","none","important"):X.display="none";else{te=ae.stateNode;var De=ae.memoizedProps.style,_e=De!=null&&De.hasOwnProperty("display")?De.display:null;te.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(Ie){dn(ae,ae.return,Ie)}}}else if(l.tag===6){if(d===null){ae=l;try{ae.stateNode.nodeValue=T?"":ae.memoizedProps}catch(Ie){dn(ae,ae.return,Ie)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}y&4&&(y=a.updateQueue,y!==null&&(d=y.retryQueue,d!==null&&(y.retryQueue=null,s2(a,d))));break;case 19:wo(l,a),vo(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,s2(a,y)));break;case 30:break;case 21:break;default:wo(l,a),vo(a)}}function vo(a){var l=a.flags;if(l&2){try{for(var d,y=a.return;y!==null;){if(m8(y)){d=y;break}y=y.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var T=d.stateNode,P=r2(a);Dm(a,P,T);break;case 5:var X=d.stateNode;d.flags&32&&(Ur(X,""),d.flags&=-33);var te=r2(a);Dm(a,te,X);break;case 3:case 4:var ae=d.stateNode.containerInfo,we=r2(a);n2(a,we,ae);break;default:throw Error(n(161))}}catch(Me){dn(a,a.return,Me)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function I8(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;I8(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function _l(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)v8(a,l.alternate,l),l=l.sibling}function ku(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:El(4,l,l.return),ku(l);break;case 1:Ua(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&g8(l,l.return,d),ku(l);break;case 27:d0(l.stateNode);case 26:case 5:Ua(l,l.return),ku(l);break;case 22:l.memoizedState===null&&ku(l);break;case 30:ku(l);break;default:ku(l)}a=a.sibling}}function Sl(a,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var y=l.alternate,T=a,P=l,X=P.flags;switch(P.tag){case 0:case 11:case 15:Sl(T,P,d),r0(4,P);break;case 1:if(Sl(T,P,d),y=P,T=y.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(we){dn(y,y.return,we)}if(y=P,T=y.updateQueue,T!==null){var te=y.stateNode;try{var ae=T.shared.hiddenCallbacks;if(ae!==null)for(T.shared.hiddenCallbacks=null,T=0;T<ae.length;T++)e6(ae[T],te)}catch(we){dn(y,y.return,we)}}d&&X&64&&p8(P),n0(P,P.return);break;case 27:b8(P);case 26:case 5:Sl(T,P,d),d&&y===null&&X&4&&y8(P),n0(P,P.return);break;case 12:Sl(T,P,d);break;case 13:Sl(T,P,d),d&&X&4&&S8(T,P);break;case 22:P.memoizedState===null&&Sl(T,P,d),n0(P,P.return);break;case 30:break;default:Sl(T,P,d)}l=l.sibling}}function o2(a,l){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&qp(d))}function a2(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&qp(a))}function ja(a,l,d,y){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)x8(a,l,d,y),l=l.sibling}function x8(a,l,d,y){var T=l.flags;switch(l.tag){case 0:case 11:case 15:ja(a,l,d,y),T&2048&&r0(9,l);break;case 1:ja(a,l,d,y);break;case 3:ja(a,l,d,y),T&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&qp(a)));break;case 12:if(T&2048){ja(a,l,d,y),a=l.stateNode;try{var P=l.memoizedProps,X=P.id,te=P.onPostCommit;typeof te=="function"&&te(X,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(ae){dn(l,l.return,ae)}}else ja(a,l,d,y);break;case 13:ja(a,l,d,y);break;case 23:break;case 22:P=l.stateNode,X=l.alternate,l.memoizedState!==null?P._visibility&2?ja(a,l,d,y):i0(a,l):P._visibility&2?ja(a,l,d,y):(P._visibility|=2,md(a,l,d,y,(l.subtreeFlags&10256)!==0)),T&2048&&o2(X,l);break;case 24:ja(a,l,d,y),T&2048&&a2(l.alternate,l);break;default:ja(a,l,d,y)}}function md(a,l,d,y,T){for(T=T&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var P=a,X=l,te=d,ae=y,we=X.flags;switch(X.tag){case 0:case 11:case 15:md(P,X,te,ae,T),r0(8,X);break;case 23:break;case 22:var Me=X.stateNode;X.memoizedState!==null?Me._visibility&2?md(P,X,te,ae,T):i0(P,X):(Me._visibility|=2,md(P,X,te,ae,T)),T&&we&2048&&o2(X.alternate,X);break;case 24:md(P,X,te,ae,T),T&&we&2048&&a2(X.alternate,X);break;default:md(P,X,te,ae,T)}l=l.sibling}}function i0(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=a,y=l,T=y.flags;switch(y.tag){case 22:i0(d,y),T&2048&&o2(y.alternate,y);break;case 24:i0(d,y),T&2048&&a2(y.alternate,y);break;default:i0(d,y)}l=l.sibling}}var s0=8192;function bd(a){if(a.subtreeFlags&s0)for(a=a.child;a!==null;)C8(a),a=a.sibling}function C8(a){switch(a.tag){case 26:bd(a),a.flags&s0&&a.memoizedState!==null&&uj(fa,a.memoizedState,a.memoizedProps);break;case 5:bd(a);break;case 3:case 4:var l=fa;fa=Km(a.stateNode.containerInfo),bd(a),fa=l;break;case 22:a.memoizedState===null&&(l=a.alternate,l!==null&&l.memoizedState!==null?(l=s0,s0=16777216,bd(a),s0=l):bd(a));break;default:bd(a)}}function T8(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function o0(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var y=l[d];Mi=y,N8(y,a)}T8(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)M8(a),a=a.sibling}function M8(a){switch(a.tag){case 0:case 11:case 15:o0(a),a.flags&2048&&El(9,a,a.return);break;case 3:o0(a);break;case 12:o0(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,$m(a)):o0(a);break;default:o0(a)}}function $m(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var y=l[d];Mi=y,N8(y,a)}T8(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:El(8,l,l.return),$m(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,$m(l));break;default:$m(l)}a=a.sibling}}function N8(a,l){for(;Mi!==null;){var d=Mi;switch(d.tag){case 0:case 11:case 15:El(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var y=d.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:qp(d.memoizedState.cache)}if(y=d.child,y!==null)y.return=d,Mi=y;else e:for(d=a;Mi!==null;){y=Mi;var T=y.sibling,P=y.return;if(E8(y),y===d){Mi=null;break e}if(T!==null){T.return=P,Mi=T;break e}Mi=P}}}var xU={getCacheForType:function(a){var l=ps(yi),d=l.data.get(a);return d===void 0&&(d=a(),l.data.set(a,d)),d}},CU=typeof WeakMap=="function"?WeakMap:Map,Yr=0,vn=null,gr=null,Ir=0,Zr=0,Eo=null,Al=!1,wd=!1,c2=!1,Bc=0,Vn=0,Il=0,Pu=0,l2=0,Go=0,vd=0,a0=null,Zs=null,u2=!1,h2=0,km=1/0,Pm=null,xl=null,Ki=0,Cl=null,Ed=null,_d=0,d2=0,f2=null,O8=null,c0=0,p2=null;function _o(){if((Yr&2)!==0&&Ir!==0)return Ir&-Ir;if(m.T!==null){var a=ld;return a!==0?a:E2()}return rt()}function R8(){Go===0&&(Go=(Ir&536870912)===0||zr?ft():536870912);var a=Vo.current;return a!==null&&(a.flags|=32),Go}function So(a,l,d){(a===vn&&(Zr===2||Zr===9)||a.cancelPendingCommit!==null)&&(Sd(a,0),Tl(a,Ir,Go,!1)),pt(a,d),((Yr&2)===0||a!==vn)&&(a===vn&&((Yr&2)===0&&(Pu|=d),Vn===4&&Tl(a,Ir,Go,!1)),za(a))}function D8(a,l,d){if((Yr&6)!==0)throw Error(n(327));var y=!d&&(l&124)===0&&(l&a.expiredLanes)===0||We(a,l),T=y?NU(a,l):m2(a,l,!0),P=y;do{if(T===0){wd&&!y&&Tl(a,l,0,!1);break}else{if(d=a.current.alternate,P&&!TU(d)){T=m2(a,l,!1),P=!1;continue}if(T===2){if(P=l,a.errorRecoveryDisabledLanes&P)var X=0;else X=a.pendingLanes&-536870913,X=X!==0?X:X&536870912?536870912:0;if(X!==0){l=X;e:{var te=a;T=a0;var ae=te.current.memoizedState.isDehydrated;if(ae&&(Sd(te,X).flags|=256),X=m2(te,X,!1),X!==2){if(c2&&!ae){te.errorRecoveryDisabledLanes|=P,Pu|=P,T=4;break e}P=Zs,Zs=T,P!==null&&(Zs===null?Zs=P:Zs.push.apply(Zs,P))}T=X}if(P=!1,T!==2)continue}}if(T===1){Sd(a,0),Tl(a,l,0,!0);break}e:{switch(y=a,P=T,P){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Tl(y,l,Go,!Al);break e;case 2:Zs=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(T=h2+300-He(),10<T)){if(Tl(y,l,Go,!Al),Fe(y,0,!0)!==0)break e;y.timeoutHandle=cI($8.bind(null,y,d,Zs,Pm,u2,l,Go,Pu,vd,Al,P,2,-0,0),T);break e}$8(y,d,Zs,Pm,u2,l,Go,Pu,vd,Al,P,0,-0,0)}}break}while(!0);za(a)}function $8(a,l,d,y,T,P,X,te,ae,we,Me,De,_e,Ie){if(a.timeoutHandle=-1,De=l.subtreeFlags,(De&8192||(De&16785408)===16785408)&&(g0={stylesheets:null,count:0,unsuspend:lj},C8(l),De=hj(),De!==null)){a.cancelPendingCommit=De(z8.bind(null,a,l,P,d,y,T,X,te,ae,Me,1,_e,Ie)),Tl(a,P,X,!we);return}z8(a,l,P,d,y,T,X,te,ae)}function TU(a){for(var l=a;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var y=0;y<d.length;y++){var T=d[y],P=T.getSnapshot;T=T.value;try{if(!mo(P(),T))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Tl(a,l,d,y){l&=~l2,l&=~Pu,a.suspendedLanes|=l,a.pingedLanes&=~l,y&&(a.warmLanes|=l),y=a.expirationTimes;for(var T=l;0<T;){var P=31-K(T),X=1<<P;y[P]=-1,T&=~X}d!==0&&Vt(a,d,l)}function Bm(){return(Yr&6)===0?(l0(0),!1):!0}function g2(){if(gr!==null){if(Zr===0)var a=gr.return;else a=gr,Mc=Nu=null,Rv(a),gd=null,Jp=0,a=gr;for(;a!==null;)f8(a.alternate,a),a=a.return;gr=null}}function Sd(a,l){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,KU(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),g2(),vn=a,gr=d=xc(a.current,null),Ir=l,Zr=0,Eo=null,Al=!1,wd=We(a,l),c2=!1,vd=Go=l2=Pu=Il=Vn=0,Zs=a0=null,u2=!1,(l&8)!==0&&(l|=l&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=l;0<y;){var T=31-K(y),P=1<<T;l|=a[T],y&=~P}return Bc=l,sm(),d}function k8(a,l){cr=null,m.H=Am,l===Hp||l===pm?(l=X5(),Zr=3):l===Y5?(l=X5(),Zr=4):Zr=l===J6?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Eo=l,gr===null&&(Vn=1,Mm(a,Fo(l,a.current)))}function P8(){var a=m.H;return m.H=Am,a===null?Am:a}function B8(){var a=m.A;return m.A=xU,a}function y2(){Vn=4,Al||(Ir&4194048)!==Ir&&Vo.current!==null||(wd=!0),(Il&134217727)===0&&(Pu&134217727)===0||vn===null||Tl(vn,Ir,Go,!1)}function m2(a,l,d){var y=Yr;Yr|=2;var T=P8(),P=B8();(vn!==a||Ir!==l)&&(Pm=null,Sd(a,l)),l=!1;var X=Vn;e:do try{if(Zr!==0&&gr!==null){var te=gr,ae=Eo;switch(Zr){case 8:g2(),X=6;break e;case 3:case 2:case 9:case 6:Vo.current===null&&(l=!0);var we=Zr;if(Zr=0,Eo=null,Ad(a,te,ae,we),d&&wd){X=0;break e}break;default:we=Zr,Zr=0,Eo=null,Ad(a,te,ae,we)}}MU(),X=Vn;break}catch(Me){k8(a,Me)}while(!0);return l&&a.shellSuspendCounter++,Mc=Nu=null,Yr=y,m.H=T,m.A=P,gr===null&&(vn=null,Ir=0,sm()),X}function MU(){for(;gr!==null;)L8(gr)}function NU(a,l){var d=Yr;Yr|=2;var y=P8(),T=B8();vn!==a||Ir!==l?(Pm=null,km=He()+500,Sd(a,l)):wd=We(a,l);e:do try{if(Zr!==0&&gr!==null){l=gr;var P=Eo;t:switch(Zr){case 1:Zr=0,Eo=null,Ad(a,l,P,1);break;case 2:case 9:if(Z5(P)){Zr=0,Eo=null,U8(l);break}l=function(){Zr!==2&&Zr!==9||vn!==a||(Zr=7),za(a)},P.then(l,l);break e;case 3:Zr=7;break e;case 4:Zr=5;break e;case 7:Z5(P)?(Zr=0,Eo=null,U8(l)):(Zr=0,Eo=null,Ad(a,l,P,7));break;case 5:var X=null;switch(gr.tag){case 26:X=gr.memoizedState;case 5:case 27:var te=gr;if(!X||vI(X)){Zr=0,Eo=null;var ae=te.sibling;if(ae!==null)gr=ae;else{var we=te.return;we!==null?(gr=we,Lm(we)):gr=null}break t}}Zr=0,Eo=null,Ad(a,l,P,5);break;case 6:Zr=0,Eo=null,Ad(a,l,P,6);break;case 8:g2(),Vn=6;break e;default:throw Error(n(462))}}OU();break}catch(Me){k8(a,Me)}while(!0);return Mc=Nu=null,m.H=y,m.A=T,Yr=d,gr!==null?0:(vn=null,Ir=0,sm(),Vn)}function OU(){for(;gr!==null&&!Be();)L8(gr)}function L8(a){var l=h8(a.alternate,a,Bc);a.memoizedProps=a.pendingProps,l===null?Lm(a):gr=l}function U8(a){var l=a,d=l.alternate;switch(l.tag){case 15:case 0:l=s8(d,l,l.pendingProps,l.type,void 0,Ir);break;case 11:l=s8(d,l,l.pendingProps,l.type.render,l.ref,Ir);break;case 5:Rv(l);default:f8(d,l),l=gr=j5(l,Bc),l=h8(d,l,Bc)}a.memoizedProps=a.pendingProps,l===null?Lm(a):gr=l}function Ad(a,l,d,y){Mc=Nu=null,Rv(l),gd=null,Jp=0;var T=l.return;try{if(vU(a,T,l,d,Ir)){Vn=1,Mm(a,Fo(d,a.current)),gr=null;return}}catch(P){if(T!==null)throw gr=T,P;Vn=1,Mm(a,Fo(d,a.current)),gr=null;return}l.flags&32768?(zr||y===1?a=!0:wd||(Ir&536870912)!==0?a=!1:(Al=a=!0,(y===2||y===9||y===3||y===6)&&(y=Vo.current,y!==null&&y.tag===13&&(y.flags|=16384))),j8(l,a)):Lm(l)}function Lm(a){var l=a;do{if((l.flags&32768)!==0){j8(l,Al);return}a=l.return;var d=_U(l.alternate,l,Bc);if(d!==null){gr=d;return}if(l=l.sibling,l!==null){gr=l;return}gr=l=a}while(l!==null);Vn===0&&(Vn=5)}function j8(a,l){do{var d=SU(a.alternate,a);if(d!==null){d.flags&=32767,gr=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(a=a.sibling,a!==null)){gr=a;return}gr=a=d}while(a!==null);Vn=6,gr=null}function z8(a,l,d,y,T,P,X,te,ae){a.cancelPendingCommit=null;do Um();while(Ki!==0);if((Yr&6)!==0)throw Error(n(327));if(l!==null){if(l===a.current)throw Error(n(177));if(P=l.lanes|l.childLanes,P|=av,Ft(a,d,P,X,te,ae),a===vn&&(gr=vn=null,Ir=0),Ed=l,Cl=a,_d=d,d2=P,f2=T,O8=y,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,kU(et,function(){return K8(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||y){y=m.T,m.T=null,T=M.p,M.p=2,X=Yr,Yr|=4;try{AU(a,l,d)}finally{Yr=X,M.p=T,m.T=y}}Ki=1,q8(),F8(),H8()}}function q8(){if(Ki===1){Ki=0;var a=Cl,l=Ed,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=m.T,m.T=null;var y=M.p;M.p=2;var T=Yr;Yr|=4;try{A8(l,a);var P=M2,X=N5(a.containerInfo),te=P.focusedElem,ae=P.selectionRange;if(X!==te&&te&&te.ownerDocument&&M5(te.ownerDocument.documentElement,te)){if(ae!==null&&rv(te)){var we=ae.start,Me=ae.end;if(Me===void 0&&(Me=we),"selectionStart"in te)te.selectionStart=we,te.selectionEnd=Math.min(Me,te.value.length);else{var De=te.ownerDocument||document,_e=De&&De.defaultView||window;if(_e.getSelection){var Ie=_e.getSelection(),Ht=te.textContent.length,Bt=Math.min(ae.start,Ht),an=ae.end===void 0?Bt:Math.min(ae.end,Ht);!Ie.extend&&Bt>an&&(X=an,an=Bt,Bt=X);var ge=T5(te,Bt),le=T5(te,an);if(ge&&le&&(Ie.rangeCount!==1||Ie.anchorNode!==ge.node||Ie.anchorOffset!==ge.offset||Ie.focusNode!==le.node||Ie.focusOffset!==le.offset)){var me=De.createRange();me.setStart(ge.node,ge.offset),Ie.removeAllRanges(),Bt>an?(Ie.addRange(me),Ie.extend(le.node,le.offset)):(me.setEnd(le.node,le.offset),Ie.addRange(me))}}}}for(De=[],Ie=te;Ie=Ie.parentNode;)Ie.nodeType===1&&De.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<De.length;te++){var Ne=De[te];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}Qm=!!T2,M2=T2=null}finally{Yr=T,M.p=y,m.T=d}}a.current=l,Ki=2}}function F8(){if(Ki===2){Ki=0;var a=Cl,l=Ed,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=m.T,m.T=null;var y=M.p;M.p=2;var T=Yr;Yr|=4;try{v8(a,l.alternate,l)}finally{Yr=T,M.p=y,m.T=d}}Ki=3}}function H8(){if(Ki===4||Ki===3){Ki=0,tt();var a=Cl,l=Ed,d=_d,y=O8;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Ki=5:(Ki=0,Ed=Cl=null,W8(a,a.pendingLanes));var T=a.pendingLanes;if(T===0&&(xl=null),Rt(d),l=l.stateNode,Z&&typeof Z.onCommitFiberRoot=="function")try{Z.onCommitFiberRoot(Te,l,void 0,(l.current.flags&128)===128)}catch{}if(y!==null){l=m.T,T=M.p,M.p=2,m.T=null;try{for(var P=a.onRecoverableError,X=0;X<y.length;X++){var te=y[X];P(te.value,{componentStack:te.stack})}}finally{m.T=l,M.p=T}}(_d&3)!==0&&Um(),za(a),T=a.pendingLanes,(d&4194090)!==0&&(T&42)!==0?a===p2?c0++:(c0=0,p2=a):c0=0,l0(0)}}function W8(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,qp(l)))}function Um(a){return q8(),F8(),H8(),K8()}function K8(){if(Ki!==5)return!1;var a=Cl,l=d2;d2=0;var d=Rt(_d),y=m.T,T=M.p;try{M.p=32>d?32:d,m.T=null,d=f2,f2=null;var P=Cl,X=_d;if(Ki=0,Ed=Cl=null,_d=0,(Yr&6)!==0)throw Error(n(331));var te=Yr;if(Yr|=4,M8(P.current),x8(P,P.current,X,d),Yr=te,l0(0,!1),Z&&typeof Z.onPostCommitFiberRoot=="function")try{Z.onPostCommitFiberRoot(Te,P)}catch{}return!0}finally{M.p=T,m.T=y,W8(a,l)}}function V8(a,l,d){l=Fo(d,l),l=Kv(a.stateNode,l,2),a=ml(a,l,2),a!==null&&(pt(a,2),za(a))}function dn(a,l,d){if(a.tag===3)V8(a,a,d);else for(;l!==null;){if(l.tag===3){V8(l,a,d);break}else if(l.tag===1){var y=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(xl===null||!xl.has(y))){a=Fo(d,a),d=Q6(2),y=ml(l,d,2),y!==null&&(X6(d,y,l,a),pt(y,2),za(y));break}}l=l.return}}function b2(a,l,d){var y=a.pingCache;if(y===null){y=a.pingCache=new CU;var T=new Set;y.set(l,T)}else T=y.get(l),T===void 0&&(T=new Set,y.set(l,T));T.has(d)||(c2=!0,T.add(d),a=RU.bind(null,a,l,d),l.then(a,a))}function RU(a,l,d){var y=a.pingCache;y!==null&&y.delete(l),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,vn===a&&(Ir&d)===d&&(Vn===4||Vn===3&&(Ir&62914560)===Ir&&300>He()-h2?(Yr&2)===0&&Sd(a,0):l2|=d,vd===Ir&&(vd=0)),za(a)}function G8(a,l){l===0&&(l=Ut()),a=sd(a,l),a!==null&&(pt(a,l),za(a))}function DU(a){var l=a.memoizedState,d=0;l!==null&&(d=l.retryLane),G8(a,d)}function $U(a,l){var d=0;switch(a.tag){case 13:var y=a.stateNode,T=a.memoizedState;T!==null&&(d=T.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(l),G8(a,d)}function kU(a,l){return xe(a,l)}var jm=null,Id=null,w2=!1,zm=!1,v2=!1,Bu=0;function za(a){a!==Id&&a.next===null&&(Id===null?jm=Id=a:Id=Id.next=a),zm=!0,w2||(w2=!0,BU())}function l0(a,l){if(!v2&&zm){v2=!0;do for(var d=!1,y=jm;y!==null;){if(a!==0){var T=y.pendingLanes;if(T===0)var P=0;else{var X=y.suspendedLanes,te=y.pingedLanes;P=(1<<31-K(42|a)+1)-1,P&=T&~(X&~te),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(d=!0,X8(y,P))}else P=Ir,P=Fe(y,y===vn?P:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(P&3)===0||We(y,P)||(d=!0,X8(y,P));y=y.next}while(d);v2=!1}}function PU(){Y8()}function Y8(){zm=w2=!1;var a=0;Bu!==0&&(WU()&&(a=Bu),Bu=0);for(var l=He(),d=null,y=jm;y!==null;){var T=y.next,P=Z8(y,l);P===0?(y.next=null,d===null?jm=T:d.next=T,T===null&&(Id=d)):(d=y,(a!==0||(P&3)!==0)&&(zm=!0)),y=T}l0(a)}function Z8(a,l){for(var d=a.suspendedLanes,y=a.pingedLanes,T=a.expirationTimes,P=a.pendingLanes&-62914561;0<P;){var X=31-K(P),te=1<<X,ae=T[X];ae===-1?((te&d)===0||(te&y)!==0)&&(T[X]=at(te,l)):ae<=l&&(a.expiredLanes|=te),P&=~te}if(l=vn,d=Ir,d=Fe(a,a===l?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,d===0||a===l&&(Zr===2||Zr===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&ze(y),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||We(a,d)){if(l=d&-d,l===a.callbackPriority)return l;switch(y!==null&&ze(y),Rt(d)){case 2:case 8:d=yt;break;case 32:d=et;break;case 268435456:d=Mt;break;default:d=et}return y=Q8.bind(null,a),d=xe(d,y),a.callbackPriority=l,a.callbackNode=d,l}return y!==null&&y!==null&&ze(y),a.callbackPriority=2,a.callbackNode=null,2}function Q8(a,l){if(Ki!==0&&Ki!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(Um()&&a.callbackNode!==d)return null;var y=Ir;return y=Fe(a,a===vn?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(D8(a,y,l),Z8(a,He()),a.callbackNode!=null&&a.callbackNode===d?Q8.bind(null,a):null)}function X8(a,l){if(Um())return null;D8(a,l,!0)}function BU(){VU(function(){(Yr&6)!==0?xe(vt,PU):Y8()})}function E2(){return Bu===0&&(Bu=ft()),Bu}function J8(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Zh(""+a)}function eI(a,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,a.id&&d.setAttribute("form",a.id),l.parentNode.insertBefore(d,l),a=new FormData(a),d.parentNode.removeChild(d),a}function LU(a,l,d,y,T){if(l==="submit"&&d&&d.stateNode===T){var P=J8((T[Ct]||null).action),X=y.submitter;X&&(l=(l=X[Ct]||null)?J8(l.formAction):X.getAttribute("formAction"),l!==null&&(P=l,X=null));var te=new ut("action","action",null,y,T);a.push({event:te,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Bu!==0){var ae=X?eI(T,X):new FormData(T);zv(d,{pending:!0,data:ae,method:T.method,action:P},null,ae)}}else typeof P=="function"&&(te.preventDefault(),ae=X?eI(T,X):new FormData(T),zv(d,{pending:!0,data:ae,method:T.method,action:P},P,ae))},currentTarget:T}]})}}for(var _2=0;_2<ov.length;_2++){var S2=ov[_2],UU=S2.toLowerCase(),jU=S2[0].toUpperCase()+S2.slice(1);da(UU,"on"+jU)}da(D5,"onAnimationEnd"),da($5,"onAnimationIteration"),da(k5,"onAnimationStart"),da("dblclick","onDoubleClick"),da("focusin","onFocus"),da("focusout","onBlur"),da(nU,"onTransitionRun"),da(iU,"onTransitionStart"),da(sU,"onTransitionCancel"),da(P5,"onTransitionEnd"),Mn("onMouseEnter",["mouseout","mouseover"]),Mn("onMouseLeave",["mouseout","mouseover"]),Mn("onPointerEnter",["pointerout","pointerover"]),Mn("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var u0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(u0));function tI(a,l){l=(l&4)!==0;for(var d=0;d<a.length;d++){var y=a[d],T=y.event;y=y.listeners;e:{var P=void 0;if(l)for(var X=y.length-1;0<=X;X--){var te=y[X],ae=te.instance,we=te.currentTarget;if(te=te.listener,ae!==P&&T.isPropagationStopped())break e;P=te,T.currentTarget=we;try{P(T)}catch(Me){Tm(Me)}T.currentTarget=null,P=ae}else for(X=0;X<y.length;X++){if(te=y[X],ae=te.instance,we=te.currentTarget,te=te.listener,ae!==P&&T.isPropagationStopped())break e;P=te,T.currentTarget=we;try{P(T)}catch(Me){Tm(Me)}T.currentTarget=null,P=ae}}}}function yr(a,l){var d=l[bt];d===void 0&&(d=l[bt]=new Set);var y=a+"__bubble";d.has(y)||(rI(l,a,2,!1),d.add(y))}function A2(a,l,d){var y=0;l&&(y|=4),rI(d,a,y,l)}var qm="_reactListening"+Math.random().toString(36).slice(2);function I2(a){if(!a[qm]){a[qm]=!0,Hi.forEach(function(d){d!=="selectionchange"&&(zU.has(d)||A2(d,!1,a),A2(d,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[qm]||(l[qm]=!0,A2("selectionchange",!1,l))}}function rI(a,l,d,y){switch(xI(l)){case 2:var T=pj;break;case 8:T=gj;break;default:T=U2}d=T.bind(null,l,d,a),T=void 0,!Qh||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(T=!0),y?T!==void 0?a.addEventListener(l,d,{capture:!0,passive:T}):a.addEventListener(l,d,!0):T!==void 0?a.addEventListener(l,d,{passive:T}):a.addEventListener(l,d,!1)}function x2(a,l,d,y,T){var P=y;if((l&1)===0&&(l&2)===0&&y!==null)e:for(;;){if(y===null)return;var X=y.tag;if(X===3||X===4){var te=y.stateNode.containerInfo;if(te===T)break;if(X===4)for(X=y.return;X!==null;){var ae=X.tag;if((ae===3||ae===4)&&X.stateNode.containerInfo===T)return;X=X.return}for(;te!==null;){if(X=xt(te),X===null)return;if(ae=X.tag,ae===5||ae===6||ae===26||ae===27){y=P=X;continue e}te=te.parentNode}}y=y.return}tm(function(){var we=P,Me=Rp(d),De=[];e:{var _e=B5.get(a);if(_e!==void 0){var Ie=ut,Ht=a;switch(a){case"keypress":if(Xh(d)===0)break e;case"keydown":case"keyup":Ie=kL;break;case"focusin":Ht="focus",Ie=fs;break;case"focusout":Ht="blur",Ie=fs;break;case"beforeblur":case"afterblur":Ie=fs;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=ds;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Ci;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=LL;break;case D5:case $5:case k5:Ie=ha;break;case P5:Ie=jL;break;case"scroll":case"scrollend":Ie=Qt;break;case"wheel":Ie=qL;break;case"copy":case"cut":case"paste":Ie=nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=p5;break;case"toggle":case"beforetoggle":Ie=HL}var Bt=(l&4)!==0,an=!Bt&&(a==="scroll"||a==="scrollend"),ge=Bt?_e!==null?_e+"Capture":null:_e;Bt=[];for(var le=we,me;le!==null;){var Ne=le;if(me=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||me===null||ge===null||(Ne=Sc(le,ge),Ne!=null&&Bt.push(h0(le,Ne,me))),an)break;le=le.return}0<Bt.length&&(_e=new Ie(_e,Ht,null,d,Me),De.push({event:_e,listeners:Bt}))}}if((l&7)===0){e:{if(_e=a==="mouseover"||a==="pointerover",Ie=a==="mouseout"||a==="pointerout",_e&&d!==Op&&(Ht=d.relatedTarget||d.fromElement)&&(xt(Ht)||Ht[Dt]))break e;if((Ie||_e)&&(_e=Me.window===Me?Me:(_e=Me.ownerDocument)?_e.defaultView||_e.parentWindow:window,Ie?(Ht=d.relatedTarget||d.toElement,Ie=we,Ht=Ht?xt(Ht):null,Ht!==null&&(an=s(Ht),Bt=Ht.tag,Ht!==an||Bt!==5&&Bt!==27&&Bt!==6)&&(Ht=null)):(Ie=null,Ht=we),Ie!==Ht)){if(Bt=ds,Ne="onMouseLeave",ge="onMouseEnter",le="mouse",(a==="pointerout"||a==="pointerover")&&(Bt=p5,Ne="onPointerLeave",ge="onPointerEnter",le="pointer"),an=Ie==null?_e:Zt(Ie),me=Ht==null?_e:Zt(Ht),_e=new Bt(Ne,le+"leave",Ie,d,Me),_e.target=an,_e.relatedTarget=me,Ne=null,xt(Me)===we&&(Bt=new Bt(ge,le+"enter",Ht,d,Me),Bt.target=me,Bt.relatedTarget=an,Ne=Bt),an=Ne,Ie&&Ht)t:{for(Bt=Ie,ge=Ht,le=0,me=Bt;me;me=xd(me))le++;for(me=0,Ne=ge;Ne;Ne=xd(Ne))me++;for(;0<le-me;)Bt=xd(Bt),le--;for(;0<me-le;)ge=xd(ge),me--;for(;le--;){if(Bt===ge||ge!==null&&Bt===ge.alternate)break t;Bt=xd(Bt),ge=xd(ge)}Bt=null}else Bt=null;Ie!==null&&nI(De,_e,Ie,Bt,!1),Ht!==null&&an!==null&&nI(De,an,Ht,Bt,!0)}}e:{if(_e=we?Zt(we):window,Ie=_e.nodeName&&_e.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&_e.type==="file")var wt=_5;else if(v5(_e))if(S5)wt=eU;else{wt=XL;var hr=QL}else Ie=_e.nodeName,!Ie||Ie.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?we&&Ws(we.elementType)&&(wt=_5):wt=JL;if(wt&&(wt=wt(a,we))){E5(De,wt,d,Me);break e}hr&&hr(a,_e,we),a==="focusout"&&we&&_e.type==="number"&&we.memoizedProps.value!=null&&Pe(_e,"number",_e.value)}switch(hr=we?Zt(we):window,a){case"focusin":(v5(hr)||hr.contentEditable==="true")&&(rd=hr,nv=we,Bp=null);break;case"focusout":Bp=nv=rd=null;break;case"mousedown":iv=!0;break;case"contextmenu":case"mouseup":case"dragend":iv=!1,O5(De,d,Me);break;case"selectionchange":if(rU)break;case"keydown":case"keyup":O5(De,d,Me)}var Tt;if(Jw)e:{switch(a){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else td?b5(a,d)&&(jt="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(jt="onCompositionStart");jt&&(g5&&d.locale!=="ko"&&(td||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&td&&(Tt=rm()):(ua=Me,Ac="value"in ua?ua.value:ua.textContent,td=!0)),hr=Fm(we,jt),0<hr.length&&(jt=new _u(jt,a,null,d,Me),De.push({event:jt,listeners:hr}),Tt?jt.data=Tt:(Tt=w5(d),Tt!==null&&(jt.data=Tt)))),(Tt=KL?VL(a,d):GL(a,d))&&(jt=Fm(we,"onBeforeInput"),0<jt.length&&(hr=new _u("onBeforeInput","beforeinput",null,d,Me),De.push({event:hr,listeners:jt}),hr.data=Tt)),LU(De,a,we,d,Me)}tI(De,l)})}function h0(a,l,d){return{instance:a,listener:l,currentTarget:d}}function Fm(a,l){for(var d=l+"Capture",y=[];a!==null;){var T=a,P=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||P===null||(T=Sc(a,d),T!=null&&y.unshift(h0(a,T,P)),T=Sc(a,l),T!=null&&y.push(h0(a,T,P))),a.tag===3)return y;a=a.return}return[]}function xd(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function nI(a,l,d,y,T){for(var P=l._reactName,X=[];d!==null&&d!==y;){var te=d,ae=te.alternate,we=te.stateNode;if(te=te.tag,ae!==null&&ae===y)break;te!==5&&te!==26&&te!==27||we===null||(ae=we,T?(we=Sc(d,P),we!=null&&X.unshift(h0(d,we,ae))):T||(we=Sc(d,P),we!=null&&X.push(h0(d,we,ae)))),d=d.return}X.length!==0&&a.push({event:l,listeners:X})}var qU=/\r\n?/g,FU=/\u0000|\uFFFD/g;function iI(a){return(typeof a=="string"?a:""+a).replace(qU,`
`).replace(FU,"")}function sI(a,l){return l=iI(l),iI(a)===l}function Hm(){}function on(a,l,d,y,T,P){switch(d){case"children":typeof y=="string"?l==="body"||l==="textarea"&&y===""||Ur(a,y):(typeof y=="number"||typeof y=="bigint")&&l!=="body"&&Ur(a,""+y);break;case"className":ai(a,"class",y);break;case"tabIndex":ai(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(a,d,y);break;case"style":ka(a,y,P);break;case"data":if(l!=="object"){ai(a,"data",y);break}case"src":case"href":if(y===""&&(l!=="a"||d!=="href")){a.removeAttribute(d);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=Zh(""+y),a.setAttribute(d,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(d==="formAction"?(l!=="input"&&on(a,l,"name",T.name,T,null),on(a,l,"formEncType",T.formEncType,T,null),on(a,l,"formMethod",T.formMethod,T,null),on(a,l,"formTarget",T.formTarget,T,null)):(on(a,l,"encType",T.encType,T,null),on(a,l,"method",T.method,T,null),on(a,l,"target",T.target,T,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(d);break}y=Zh(""+y),a.setAttribute(d,y);break;case"onClick":y!=null&&(a.onclick=Hm);break;case"onScroll":y!=null&&yr("scroll",a);break;case"onScrollEnd":y!=null&&yr("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(d=y.__html,d!=null){if(T.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}d=Zh(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""+y):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":y===!0?a.setAttribute(d,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(d,y):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(d,y):a.removeAttribute(d);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(d):a.setAttribute(d,y);break;case"popover":yr("beforetoggle",a),yr("toggle",a),gi(a,"popover",y);break;case"xlinkActuate":Qn(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Qn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Qn(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Qn(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Qn(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Qn(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Qn(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Qn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Qn(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":gi(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Np.get(d)||d,gi(a,d,y))}}function C2(a,l,d,y,T,P){switch(d){case"style":ka(a,y,P);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(d=y.__html,d!=null){if(T.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"children":typeof y=="string"?Ur(a,y):(typeof y=="number"||typeof y=="bigint")&&Ur(a,""+y);break;case"onScroll":y!=null&&yr("scroll",a);break;case"onScrollEnd":y!=null&&yr("scrollend",a);break;case"onClick":y!=null&&(a.onclick=Hm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!us.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(T=d.endsWith("Capture"),l=d.slice(2,T?d.length-7:void 0),P=a[Ct]||null,P=P!=null?P[d]:null,typeof P=="function"&&a.removeEventListener(l,P,T),typeof y=="function")){typeof P!="function"&&P!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(l,y,T);break e}d in a?a[d]=y:y===!0?a.setAttribute(d,""):gi(a,d,y)}}}function Vi(a,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yr("error",a),yr("load",a);var y=!1,T=!1,P;for(P in d)if(d.hasOwnProperty(P)){var X=d[P];if(X!=null)switch(P){case"src":y=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:on(a,l,P,X,d,null)}}T&&on(a,l,"srcSet",d.srcSet,d,null),y&&on(a,l,"src",d.src,d,null);return;case"input":yr("invalid",a);var te=P=X=T=null,ae=null,we=null;for(y in d)if(d.hasOwnProperty(y)){var Me=d[y];if(Me!=null)switch(y){case"name":T=Me;break;case"type":X=Me;break;case"checked":ae=Me;break;case"defaultChecked":we=Me;break;case"value":P=Me;break;case"defaultValue":te=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(n(137,l));break;default:on(a,l,y,Me,d,null)}}fe(a,P,te,ae,we,X,T,!1),Hs(a);return;case"select":yr("invalid",a),y=X=P=null;for(T in d)if(d.hasOwnProperty(T)&&(te=d[T],te!=null))switch(T){case"value":P=te;break;case"defaultValue":X=te;break;case"multiple":y=te;default:on(a,l,T,te,d,null)}l=P,d=X,a.multiple=!!y,l!=null?ke(a,!!y,l,!1):d!=null&&ke(a,!!y,d,!0);return;case"textarea":yr("invalid",a),P=T=y=null;for(X in d)if(d.hasOwnProperty(X)&&(te=d[X],te!=null))switch(X){case"value":y=te;break;case"defaultValue":T=te;break;case"children":P=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(91));break;default:on(a,l,X,te,d,null)}$t(a,y,T,P),Hs(a);return;case"option":for(ae in d)if(d.hasOwnProperty(ae)&&(y=d[ae],y!=null))switch(ae){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:on(a,l,ae,y,d,null)}return;case"dialog":yr("beforetoggle",a),yr("toggle",a),yr("cancel",a),yr("close",a);break;case"iframe":case"object":yr("load",a);break;case"video":case"audio":for(y=0;y<u0.length;y++)yr(u0[y],a);break;case"image":yr("error",a),yr("load",a);break;case"details":yr("toggle",a);break;case"embed":case"source":case"link":yr("error",a),yr("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(we in d)if(d.hasOwnProperty(we)&&(y=d[we],y!=null))switch(we){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:on(a,l,we,y,d,null)}return;default:if(Ws(l)){for(Me in d)d.hasOwnProperty(Me)&&(y=d[Me],y!==void 0&&C2(a,l,Me,y,d,void 0));return}}for(te in d)d.hasOwnProperty(te)&&(y=d[te],y!=null&&on(a,l,te,y,d,null))}function HU(a,l,d,y){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,P=null,X=null,te=null,ae=null,we=null,Me=null;for(Ie in d){var De=d[Ie];if(d.hasOwnProperty(Ie)&&De!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":ae=De;default:y.hasOwnProperty(Ie)||on(a,l,Ie,null,y,De)}}for(var _e in y){var Ie=y[_e];if(De=d[_e],y.hasOwnProperty(_e)&&(Ie!=null||De!=null))switch(_e){case"type":P=Ie;break;case"name":T=Ie;break;case"checked":we=Ie;break;case"defaultChecked":Me=Ie;break;case"value":X=Ie;break;case"defaultValue":te=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(n(137,l));break;default:Ie!==De&&on(a,l,_e,Ie,y,De)}}pe(a,X,te,ae,we,Me,P,T);return;case"select":Ie=X=te=_e=null;for(P in d)if(ae=d[P],d.hasOwnProperty(P)&&ae!=null)switch(P){case"value":break;case"multiple":Ie=ae;default:y.hasOwnProperty(P)||on(a,l,P,null,y,ae)}for(T in y)if(P=y[T],ae=d[T],y.hasOwnProperty(T)&&(P!=null||ae!=null))switch(T){case"value":_e=P;break;case"defaultValue":te=P;break;case"multiple":X=P;default:P!==ae&&on(a,l,T,P,y,ae)}l=te,d=X,y=Ie,_e!=null?ke(a,!!d,_e,!1):!!y!=!!d&&(l!=null?ke(a,!!d,l,!0):ke(a,!!d,d?[]:"",!1));return;case"textarea":Ie=_e=null;for(te in d)if(T=d[te],d.hasOwnProperty(te)&&T!=null&&!y.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:on(a,l,te,null,y,T)}for(X in y)if(T=y[X],P=d[X],y.hasOwnProperty(X)&&(T!=null||P!=null))switch(X){case"value":_e=T;break;case"defaultValue":Ie=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:T!==P&&on(a,l,X,T,y,P)}mt(a,_e,Ie);return;case"option":for(var Ht in d)if(_e=d[Ht],d.hasOwnProperty(Ht)&&_e!=null&&!y.hasOwnProperty(Ht))switch(Ht){case"selected":a.selected=!1;break;default:on(a,l,Ht,null,y,_e)}for(ae in y)if(_e=y[ae],Ie=d[ae],y.hasOwnProperty(ae)&&_e!==Ie&&(_e!=null||Ie!=null))switch(ae){case"selected":a.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:on(a,l,ae,_e,y,Ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in d)_e=d[Bt],d.hasOwnProperty(Bt)&&_e!=null&&!y.hasOwnProperty(Bt)&&on(a,l,Bt,null,y,_e);for(we in y)if(_e=y[we],Ie=d[we],y.hasOwnProperty(we)&&_e!==Ie&&(_e!=null||Ie!=null))switch(we){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(n(137,l));break;default:on(a,l,we,_e,y,Ie)}return;default:if(Ws(l)){for(var an in d)_e=d[an],d.hasOwnProperty(an)&&_e!==void 0&&!y.hasOwnProperty(an)&&C2(a,l,an,void 0,y,_e);for(Me in y)_e=y[Me],Ie=d[Me],!y.hasOwnProperty(Me)||_e===Ie||_e===void 0&&Ie===void 0||C2(a,l,Me,_e,y,Ie);return}}for(var ge in d)_e=d[ge],d.hasOwnProperty(ge)&&_e!=null&&!y.hasOwnProperty(ge)&&on(a,l,ge,null,y,_e);for(De in y)_e=y[De],Ie=d[De],!y.hasOwnProperty(De)||_e===Ie||_e==null&&Ie==null||on(a,l,De,_e,y,Ie)}var T2=null,M2=null;function Wm(a){return a.nodeType===9?a:a.ownerDocument}function oI(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function aI(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function N2(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var O2=null;function WU(){var a=window.event;return a&&a.type==="popstate"?a===O2?!1:(O2=a,!0):(O2=null,!1)}var cI=typeof setTimeout=="function"?setTimeout:void 0,KU=typeof clearTimeout=="function"?clearTimeout:void 0,lI=typeof Promise=="function"?Promise:void 0,VU=typeof queueMicrotask=="function"?queueMicrotask:typeof lI<"u"?function(a){return lI.resolve(null).then(a).catch(GU)}:cI;function GU(a){setTimeout(function(){throw a})}function Ml(a){return a==="head"}function uI(a,l){var d=l,y=0,T=0;do{var P=d.nextSibling;if(a.removeChild(d),P&&P.nodeType===8)if(d=P.data,d==="/$"){if(0<y&&8>y){d=y;var X=a.ownerDocument;if(d&1&&d0(X.documentElement),d&2&&d0(X.body),d&4)for(d=X.head,d0(d),X=d.firstChild;X;){var te=X.nextSibling,ae=X.nodeName;X[Xt]||ae==="SCRIPT"||ae==="STYLE"||ae==="LINK"&&X.rel.toLowerCase()==="stylesheet"||d.removeChild(X),X=te}}if(T===0){a.removeChild(P),v0(l);return}T--}else d==="$"||d==="$?"||d==="$!"?T++:y=d.charCodeAt(0)-48;else y=0;d=P}while(d);v0(l)}function R2(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":R2(d),ar(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function YU(a,l,d,y){for(;a.nodeType===1;){var T=d;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[Xt])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(P=a.getAttribute("rel"),P==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(P!==T.rel||a.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||a.getAttribute("title")!==(T.title==null?null:T.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(P=a.getAttribute("src"),(P!==(T.src==null?null:T.src)||a.getAttribute("type")!==(T.type==null?null:T.type)||a.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&P&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var P=T.name==null?null:""+T.name;if(T.type==="hidden"&&a.getAttribute("name")===P)return a}else return a;if(a=pa(a.nextSibling),a===null)break}return null}function ZU(a,l,d){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=pa(a.nextSibling),a===null))return null;return a}function D2(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function QU(a,l){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")l();else{var y=function(){l(),d.removeEventListener("DOMContentLoaded",y)};d.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function pa(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return a}var $2=null;function hI(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return a;l--}else d==="/$"&&l++}a=a.previousSibling}return null}function dI(a,l,d){switch(l=Wm(d),a){case"html":if(a=l.documentElement,!a)throw Error(n(452));return a;case"head":if(a=l.head,!a)throw Error(n(453));return a;case"body":if(a=l.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function d0(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);ar(a)}var Yo=new Map,fI=new Set;function Km(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Lc=M.d;M.d={f:XU,r:JU,D:ej,C:tj,L:rj,m:nj,X:sj,S:ij,M:oj};function XU(){var a=Lc.f(),l=Bm();return a||l}function JU(a){var l=fr(a);l!==null&&l.tag===5&&l.type==="form"?D6(l):Lc.r(a)}var Cd=typeof document>"u"?null:document;function pI(a,l,d){var y=Cd;if(y&&typeof l=="string"&&l){var T=Oe(l);T='link[rel="'+a+'"][href="'+T+'"]',typeof d=="string"&&(T+='[crossorigin="'+d+'"]'),fI.has(T)||(fI.add(T),a={rel:a,crossOrigin:d,href:l},y.querySelector(T)===null&&(l=y.createElement("link"),Vi(l,"link",a),Mr(l),y.head.appendChild(l)))}}function ej(a){Lc.D(a),pI("dns-prefetch",a,null)}function tj(a,l){Lc.C(a,l),pI("preconnect",a,l)}function rj(a,l,d){Lc.L(a,l,d);var y=Cd;if(y&&a&&l){var T='link[rel="preload"][as="'+Oe(l)+'"]';l==="image"&&d&&d.imageSrcSet?(T+='[imagesrcset="'+Oe(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(T+='[imagesizes="'+Oe(d.imageSizes)+'"]')):T+='[href="'+Oe(a)+'"]';var P=T;switch(l){case"style":P=Td(a);break;case"script":P=Md(a)}Yo.has(P)||(a=f({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:a,as:l},d),Yo.set(P,a),y.querySelector(T)!==null||l==="style"&&y.querySelector(f0(P))||l==="script"&&y.querySelector(p0(P))||(l=y.createElement("link"),Vi(l,"link",a),Mr(l),y.head.appendChild(l)))}}function nj(a,l){Lc.m(a,l);var d=Cd;if(d&&a){var y=l&&typeof l.as=="string"?l.as:"script",T='link[rel="modulepreload"][as="'+Oe(y)+'"][href="'+Oe(a)+'"]',P=T;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=Md(a)}if(!Yo.has(P)&&(a=f({rel:"modulepreload",href:a},l),Yo.set(P,a),d.querySelector(T)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(p0(P)))return}y=d.createElement("link"),Vi(y,"link",a),Mr(y),d.head.appendChild(y)}}}function ij(a,l,d){Lc.S(a,l,d);var y=Cd;if(y&&a){var T=pr(y).hoistableStyles,P=Td(a);l=l||"default";var X=T.get(P);if(!X){var te={loading:0,preload:null};if(X=y.querySelector(f0(P)))te.loading=5;else{a=f({rel:"stylesheet",href:a,"data-precedence":l},d),(d=Yo.get(P))&&k2(a,d);var ae=X=y.createElement("link");Mr(ae),Vi(ae,"link",a),ae._p=new Promise(function(we,Me){ae.onload=we,ae.onerror=Me}),ae.addEventListener("load",function(){te.loading|=1}),ae.addEventListener("error",function(){te.loading|=2}),te.loading|=4,Vm(X,l,y)}X={type:"stylesheet",instance:X,count:1,state:te},T.set(P,X)}}}function sj(a,l){Lc.X(a,l);var d=Cd;if(d&&a){var y=pr(d).hoistableScripts,T=Md(a),P=y.get(T);P||(P=d.querySelector(p0(T)),P||(a=f({src:a,async:!0},l),(l=Yo.get(T))&&P2(a,l),P=d.createElement("script"),Mr(P),Vi(P,"link",a),d.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},y.set(T,P))}}function oj(a,l){Lc.M(a,l);var d=Cd;if(d&&a){var y=pr(d).hoistableScripts,T=Md(a),P=y.get(T);P||(P=d.querySelector(p0(T)),P||(a=f({src:a,async:!0,type:"module"},l),(l=Yo.get(T))&&P2(a,l),P=d.createElement("script"),Mr(P),Vi(P,"link",a),d.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},y.set(T,P))}}function gI(a,l,d,y){var T=(T=Q.current)?Km(T):null;if(!T)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=Td(d.href),d=pr(T).hoistableStyles,y=d.get(l),y||(y={type:"style",instance:null,count:0,state:null},d.set(l,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=Td(d.href);var P=pr(T).hoistableStyles,X=P.get(a);if(X||(T=T.ownerDocument||T,X={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(a,X),(P=T.querySelector(f0(a)))&&!P._p&&(X.instance=P,X.state.loading=5),Yo.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Yo.set(a,d),P||aj(T,a,d,X.state))),l&&y===null)throw Error(n(528,""));return X}if(l&&y!==null)throw Error(n(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Md(d),d=pr(T).hoistableScripts,y=d.get(l),y||(y={type:"script",instance:null,count:0,state:null},d.set(l,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Td(a){return'href="'+Oe(a)+'"'}function f0(a){return'link[rel="stylesheet"]['+a+"]"}function yI(a){return f({},a,{"data-precedence":a.precedence,precedence:null})}function aj(a,l,d,y){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?y.loading=1:(l=a.createElement("link"),y.preload=l,l.addEventListener("load",function(){return y.loading|=1}),l.addEventListener("error",function(){return y.loading|=2}),Vi(l,"link",d),Mr(l),a.head.appendChild(l))}function Md(a){return'[src="'+Oe(a)+'"]'}function p0(a){return"script[async]"+a}function mI(a,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var y=a.querySelector('style[data-href~="'+Oe(d.href)+'"]');if(y)return l.instance=y,Mr(y),y;var T=f({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),Mr(y),Vi(y,"style",T),Vm(y,d.precedence,a),l.instance=y;case"stylesheet":T=Td(d.href);var P=a.querySelector(f0(T));if(P)return l.state.loading|=4,l.instance=P,Mr(P),P;y=yI(d),(T=Yo.get(T))&&k2(y,T),P=(a.ownerDocument||a).createElement("link"),Mr(P);var X=P;return X._p=new Promise(function(te,ae){X.onload=te,X.onerror=ae}),Vi(P,"link",y),l.state.loading|=4,Vm(P,d.precedence,a),l.instance=P;case"script":return P=Md(d.src),(T=a.querySelector(p0(P)))?(l.instance=T,Mr(T),T):(y=d,(T=Yo.get(P))&&(y=f({},d),P2(y,T)),a=a.ownerDocument||a,T=a.createElement("script"),Mr(T),Vi(T,"link",y),a.head.appendChild(T),l.instance=T);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(y=l.instance,l.state.loading|=4,Vm(y,d.precedence,a));return l.instance}function Vm(a,l,d){for(var y=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=y.length?y[y.length-1]:null,P=T,X=0;X<y.length;X++){var te=y[X];if(te.dataset.precedence===l)P=te;else if(P!==T)break}P?P.parentNode.insertBefore(a,P.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(a,l.firstChild))}function k2(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function P2(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var Gm=null;function bI(a,l,d){if(Gm===null){var y=new Map,T=Gm=new Map;T.set(d,y)}else T=Gm,y=T.get(d),y||(y=new Map,T.set(d,y));if(y.has(a))return y;for(y.set(a,null),d=d.getElementsByTagName(a),T=0;T<d.length;T++){var P=d[T];if(!(P[Xt]||P[it]||a==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var X=P.getAttribute(l)||"";X=a+X;var te=y.get(X);te?te.push(P):y.set(X,[P])}}return y}function wI(a,l,d){a=a.ownerDocument||a,a.head.insertBefore(d,l==="title"?a.querySelector("head > title"):null)}function cj(a,l,d){if(d===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function vI(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var g0=null;function lj(){}function uj(a,l,d){if(g0===null)throw Error(n(475));var y=g0;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var T=Td(d.href),P=a.querySelector(f0(T));if(P){a=P._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=Ym.bind(y),a.then(y,y)),l.state.loading|=4,l.instance=P,Mr(P);return}P=a.ownerDocument||a,d=yI(d),(T=Yo.get(T))&&k2(d,T),P=P.createElement("link"),Mr(P);var X=P;X._p=new Promise(function(te,ae){X.onload=te,X.onerror=ae}),Vi(P,"link",d),l.instance=P}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(y.count++,l=Ym.bind(y),a.addEventListener("load",l),a.addEventListener("error",l))}}function hj(){if(g0===null)throw Error(n(475));var a=g0;return a.stylesheets&&a.count===0&&B2(a,a.stylesheets),0<a.count?function(l){var d=setTimeout(function(){if(a.stylesheets&&B2(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d)}}:null}function Ym(){if(this.count--,this.count===0){if(this.stylesheets)B2(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Zm=null;function B2(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Zm=new Map,l.forEach(dj,a),Zm=null,Ym.call(a))}function dj(a,l){if(!(l.state.loading&4)){var d=Zm.get(a);if(d)var y=d.get(null);else{d=new Map,Zm.set(a,d);for(var T=a.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<T.length;P++){var X=T[P];(X.nodeName==="LINK"||X.getAttribute("media")!=="not all")&&(d.set(X.dataset.precedence,X),y=X)}y&&d.set(null,y)}T=l.instance,X=T.getAttribute("data-precedence"),P=d.get(X)||y,P===y&&d.set(null,T),d.set(X,T),this.count++,y=Ym.bind(this),T.addEventListener("load",y),T.addEventListener("error",y),P?P.parentNode.insertBefore(T,P.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(T,a.firstChild)),l.state.loading|=4}}var y0={$$typeof:U,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function fj(a,l,d,y,T,P,X,te){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kt(0),this.hiddenUpdates=Kt(null),this.identifierPrefix=y,this.onUncaughtError=T,this.onCaughtError=P,this.onRecoverableError=X,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function EI(a,l,d,y,T,P,X,te,ae,we,Me,De){return a=new fj(a,l,d,X,te,ae,we,De),l=1,P===!0&&(l|=24),P=bo(3,null,null,l),a.current=P,P.stateNode=a,l=bv(),l.refCount++,a.pooledCache=l,l.refCount++,P.memoizedState={element:y,isDehydrated:d,cache:l},_v(P),a}function _I(a){return a?(a=od,a):od}function SI(a,l,d,y,T,P){T=_I(T),y.context===null?y.context=T:y.pendingContext=T,y=yl(l),y.payload={element:d},P=P===void 0?null:P,P!==null&&(y.callback=P),d=ml(a,y,l),d!==null&&(So(d,a,l),Kp(d,a,l))}function AI(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<l?d:l}}function L2(a,l){AI(a,l),(a=a.alternate)&&AI(a,l)}function II(a){if(a.tag===13){var l=sd(a,67108864);l!==null&&So(l,a,67108864),L2(a,67108864)}}var Qm=!0;function pj(a,l,d,y){var T=m.T;m.T=null;var P=M.p;try{M.p=2,U2(a,l,d,y)}finally{M.p=P,m.T=T}}function gj(a,l,d,y){var T=m.T;m.T=null;var P=M.p;try{M.p=8,U2(a,l,d,y)}finally{M.p=P,m.T=T}}function U2(a,l,d,y){if(Qm){var T=j2(y);if(T===null)x2(a,l,y,Xm,d),CI(a,y);else if(mj(T,a,l,d,y))y.stopPropagation();else if(CI(a,y),l&4&&-1<yj.indexOf(a)){for(;T!==null;){var P=fr(T);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var X=Ye(P.pendingLanes);if(X!==0){var te=P;for(te.pendingLanes|=2,te.entangledLanes|=2;X;){var ae=1<<31-K(X);te.entanglements[1]|=ae,X&=~ae}za(P),(Yr&6)===0&&(km=He()+500,l0(0))}}break;case 13:te=sd(P,2),te!==null&&So(te,P,2),Bm(),L2(P,2)}if(P=j2(y),P===null&&x2(a,l,y,Xm,d),P===T)break;T=P}T!==null&&y.stopPropagation()}else x2(a,l,y,null,d)}}function j2(a){return a=Rp(a),z2(a)}var Xm=null;function z2(a){if(Xm=null,a=xt(a),a!==null){var l=s(a);if(l===null)a=null;else{var d=l.tag;if(d===13){if(a=o(l),a!==null)return a;a=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return Xm=a,null}function xI(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Je()){case vt:return 2;case yt:return 8;case et:case ht:return 32;case Mt:return 268435456;default:return 32}default:return 32}}var q2=!1,Nl=null,Ol=null,Rl=null,m0=new Map,b0=new Map,Dl=[],yj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function CI(a,l){switch(a){case"focusin":case"focusout":Nl=null;break;case"dragenter":case"dragleave":Ol=null;break;case"mouseover":case"mouseout":Rl=null;break;case"pointerover":case"pointerout":m0.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":b0.delete(l.pointerId)}}function w0(a,l,d,y,T,P){return a===null||a.nativeEvent!==P?(a={blockedOn:l,domEventName:d,eventSystemFlags:y,nativeEvent:P,targetContainers:[T]},l!==null&&(l=fr(l),l!==null&&II(l)),a):(a.eventSystemFlags|=y,l=a.targetContainers,T!==null&&l.indexOf(T)===-1&&l.push(T),a)}function mj(a,l,d,y,T){switch(l){case"focusin":return Nl=w0(Nl,a,l,d,y,T),!0;case"dragenter":return Ol=w0(Ol,a,l,d,y,T),!0;case"mouseover":return Rl=w0(Rl,a,l,d,y,T),!0;case"pointerover":var P=T.pointerId;return m0.set(P,w0(m0.get(P)||null,a,l,d,y,T)),!0;case"gotpointercapture":return P=T.pointerId,b0.set(P,w0(b0.get(P)||null,a,l,d,y,T)),!0}return!1}function TI(a){var l=xt(a.target);if(l!==null){var d=s(l);if(d!==null){if(l=d.tag,l===13){if(l=o(d),l!==null){a.blockedOn=l,Nt(a.priority,function(){if(d.tag===13){var y=_o();y=Et(y);var T=sd(d,y);T!==null&&So(T,d,y),L2(d,y)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Jm(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var d=j2(a.nativeEvent);if(d===null){d=a.nativeEvent;var y=new d.constructor(d.type,d);Op=y,d.target.dispatchEvent(y),Op=null}else return l=fr(d),l!==null&&II(l),a.blockedOn=d,!1;l.shift()}return!0}function MI(a,l,d){Jm(a)&&d.delete(l)}function bj(){q2=!1,Nl!==null&&Jm(Nl)&&(Nl=null),Ol!==null&&Jm(Ol)&&(Ol=null),Rl!==null&&Jm(Rl)&&(Rl=null),m0.forEach(MI),b0.forEach(MI)}function eb(a,l){a.blockedOn===l&&(a.blockedOn=null,q2||(q2=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,bj)))}var tb=null;function NI(a){tb!==a&&(tb=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tb===a&&(tb=null);for(var l=0;l<a.length;l+=3){var d=a[l],y=a[l+1],T=a[l+2];if(typeof y!="function"){if(z2(y||d)===null)continue;break}var P=fr(d);P!==null&&(a.splice(l,3),l-=3,zv(P,{pending:!0,data:T,method:d.method,action:y},y,T))}}))}function v0(a){function l(ae){return eb(ae,a)}Nl!==null&&eb(Nl,a),Ol!==null&&eb(Ol,a),Rl!==null&&eb(Rl,a),m0.forEach(l),b0.forEach(l);for(var d=0;d<Dl.length;d++){var y=Dl[d];y.blockedOn===a&&(y.blockedOn=null)}for(;0<Dl.length&&(d=Dl[0],d.blockedOn===null);)TI(d),d.blockedOn===null&&Dl.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(y=0;y<d.length;y+=3){var T=d[y],P=d[y+1],X=T[Ct]||null;if(typeof P=="function")X||NI(d);else if(X){var te=null;if(P&&P.hasAttribute("formAction")){if(T=P,X=P[Ct]||null)te=X.formAction;else if(z2(T)!==null)continue}else te=X.action;typeof te=="function"?d[y+1]=te:(d.splice(y,3),y-=3),NI(d)}}}function F2(a){this._internalRoot=a}rb.prototype.render=F2.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(n(409));var d=l.current,y=_o();SI(d,y,a,l,null,null)},rb.prototype.unmount=F2.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;SI(a.current,2,null,a,null,null),Bm(),l[Dt]=null}};function rb(a){this._internalRoot=a}rb.prototype.unstable_scheduleHydration=function(a){if(a){var l=rt();a={blockedOn:null,target:a,priority:l};for(var d=0;d<Dl.length&&l!==0&&l<Dl[d].priority;d++);Dl.splice(d,0,a),d===0&&TI(a)}};var OI=e.version;if(OI!=="19.1.0")throw Error(n(527,OI,"19.1.0"));M.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=u(l),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var wj={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:m,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nb.isDisabled&&nb.supportsFiber)try{Te=nb.inject(wj),Z=nb}catch{}}return _0.createRoot=function(a,l){if(!i(a))throw Error(n(299));var d=!1,y="",T=V6,P=G6,X=Y6,te=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(T=l.onUncaughtError),l.onCaughtError!==void 0&&(P=l.onCaughtError),l.onRecoverableError!==void 0&&(X=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(te=l.unstable_transitionCallbacks)),l=EI(a,1,!1,null,null,d,y,T,P,X,te,null),a[Dt]=l.current,I2(a),new F2(l)},_0.hydrateRoot=function(a,l,d){if(!i(a))throw Error(n(299));var y=!1,T="",P=V6,X=G6,te=Y6,ae=null,we=null;return d!=null&&(d.unstable_strictMode===!0&&(y=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onUncaughtError!==void 0&&(P=d.onUncaughtError),d.onCaughtError!==void 0&&(X=d.onCaughtError),d.onRecoverableError!==void 0&&(te=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(ae=d.unstable_transitionCallbacks),d.formState!==void 0&&(we=d.formState)),l=EI(a,1,!0,l,d??null,y,T,P,X,te,ae,we),l.context=_I(null),d=l.current,y=_o(),y=Et(y),T=yl(y),T.callback=null,ml(d,T,y),d=y,l.current.lanes=d,pt(l,d),za(l),a[Dt]=l.current,I2(a),new rb(l)},_0.version="19.1.0",_0}var zI;function Nj(){if(zI)return K2.exports;zI=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),K2.exports=Mj(),K2.exports}var Oj=Nj();const nR={setVisible(t){console.error(iR("call","setVisible"))},visible:!1};Object.defineProperty(nR,"visible",{get(){return console.error(iR("read","visible")),!1}});function iR(t,e){return`You have tried to  ${t} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const sR=Ve.createContext(nR);function oR(){return Ve.useContext(sR)}var Z2={},S0={},qI;function Rj(){if(qI)return S0;qI=1,S0.byteLength=c,S0.toByteArray=h,S0.fromByteArray=E;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=n.length;i<s;++i)t[i]=n[i],e[n.charCodeAt(i)]=i;e[45]=62,e[95]=63;function o(S){var A=S.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=S.indexOf("=");I===-1&&(I=A);var $=I===A?0:4-I%4;return[I,$]}function c(S){var A=o(S),I=A[0],$=A[1];return(I+$)*3/4-$}function u(S,A,I){return(A+I)*3/4-I}function h(S){var A,I=o(S),$=I[0],L=I[1],k=new r(u(S,$,L)),U=0,q=L>0?$-4:$,j;for(j=0;j<q;j+=4)A=e[S.charCodeAt(j)]<<18|e[S.charCodeAt(j+1)]<<12|e[S.charCodeAt(j+2)]<<6|e[S.charCodeAt(j+3)],k[U++]=A>>16&255,k[U++]=A>>8&255,k[U++]=A&255;return L===2&&(A=e[S.charCodeAt(j)]<<2|e[S.charCodeAt(j+1)]>>4,k[U++]=A&255),L===1&&(A=e[S.charCodeAt(j)]<<10|e[S.charCodeAt(j+1)]<<4|e[S.charCodeAt(j+2)]>>2,k[U++]=A>>8&255,k[U++]=A&255),k}function f(S){return t[S>>18&63]+t[S>>12&63]+t[S>>6&63]+t[S&63]}function p(S,A,I){for(var $,L=[],k=A;k<I;k+=3)$=(S[k]<<16&16711680)+(S[k+1]<<8&65280)+(S[k+2]&255),L.push(f($));return L.join("")}function E(S){for(var A,I=S.length,$=I%3,L=[],k=16383,U=0,q=I-$;U<q;U+=k)L.push(p(S,U,U+k>q?q:U+k));return $===1?(A=S[I-1],L.push(t[A>>2]+t[A<<4&63]+"==")):$===2&&(A=(S[I-2]<<8)+S[I-1],L.push(t[A>>10]+t[A>>4&63]+t[A<<2&63]+"=")),L.join("")}return S0}var ib={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var FI;function Dj(){return FI||(FI=1,ib.read=function(t,e,r,n,i){var s,o,c=i*8-n-1,u=(1<<c)-1,h=u>>1,f=-7,p=r?i-1:0,E=r?-1:1,S=t[e+p];for(p+=E,s=S&(1<<-f)-1,S>>=-f,f+=c;f>0;s=s*256+t[e+p],p+=E,f-=8);for(o=s&(1<<-f)-1,s>>=-f,f+=n;f>0;o=o*256+t[e+p],p+=E,f-=8);if(s===0)s=1-h;else{if(s===u)return o?NaN:(S?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-h}return(S?-1:1)*o*Math.pow(2,s-n)},ib.write=function(t,e,r,n,i,s){var o,c,u,h=s*8-i-1,f=(1<<h)-1,p=f>>1,E=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=n?0:s-1,A=n?1:-1,I=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,o=f):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+p>=1?e+=E/u:e+=E*Math.pow(2,1-p),e*u>=2&&(o++,u/=2),o+p>=f?(c=0,o=f):o+p>=1?(c=(e*u-1)*Math.pow(2,i),o=o+p):(c=e*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;t[r+S]=c&255,S+=A,c/=256,i-=8);for(o=o<<i|c,h+=i;h>0;t[r+S]=o&255,S+=A,o/=256,h-=8);t[r+S-A]|=I*128}),ib}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var HI;function z4(){return HI||(HI=1,function(t){const e=Rj(),r=Dj(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=k,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const Z=new Uint8Array(1),F={foo:function(){return 42}};return Object.setPrototypeOf(F,Uint8Array.prototype),Object.setPrototypeOf(Z,F),Z.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(Z){if(Z>i)throw new RangeError('The value "'+Z+'" is invalid for option "size"');const F=new Uint8Array(Z);return Object.setPrototypeOf(F,c.prototype),F}function c(Z,F,K){if(typeof Z=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(Z)}return u(Z,F,K)}c.poolSize=8192;function u(Z,F,K){if(typeof Z=="string")return E(Z,F);if(ArrayBuffer.isView(Z))return A(Z);if(Z==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Z);if(ht(Z,ArrayBuffer)||Z&&ht(Z.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ht(Z,SharedArrayBuffer)||Z&&ht(Z.buffer,SharedArrayBuffer)))return I(Z,F,K);if(typeof Z=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const J=Z.valueOf&&Z.valueOf();if(J!=null&&J!==Z)return c.from(J,F,K);const ie=$(Z);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Z[Symbol.toPrimitive]=="function")return c.from(Z[Symbol.toPrimitive]("string"),F,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Z)}c.from=function(Z,F,K){return u(Z,F,K)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function h(Z){if(typeof Z!="number")throw new TypeError('"size" argument must be of type number');if(Z<0)throw new RangeError('The value "'+Z+'" is invalid for option "size"')}function f(Z,F,K){return h(Z),Z<=0?o(Z):F!==void 0?typeof K=="string"?o(Z).fill(F,K):o(Z).fill(F):o(Z)}c.alloc=function(Z,F,K){return f(Z,F,K)};function p(Z){return h(Z),o(Z<0?0:L(Z)|0)}c.allocUnsafe=function(Z){return p(Z)},c.allocUnsafeSlow=function(Z){return p(Z)};function E(Z,F){if((typeof F!="string"||F==="")&&(F="utf8"),!c.isEncoding(F))throw new TypeError("Unknown encoding: "+F);const K=U(Z,F)|0;let J=o(K);const ie=J.write(Z,F);return ie!==K&&(J=J.slice(0,ie)),J}function S(Z){const F=Z.length<0?0:L(Z.length)|0,K=o(F);for(let J=0;J<F;J+=1)K[J]=Z[J]&255;return K}function A(Z){if(ht(Z,Uint8Array)){const F=new Uint8Array(Z);return I(F.buffer,F.byteOffset,F.byteLength)}return S(Z)}function I(Z,F,K){if(F<0||Z.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(Z.byteLength<F+(K||0))throw new RangeError('"length" is outside of buffer bounds');let J;return F===void 0&&K===void 0?J=new Uint8Array(Z):K===void 0?J=new Uint8Array(Z,F):J=new Uint8Array(Z,F,K),Object.setPrototypeOf(J,c.prototype),J}function $(Z){if(c.isBuffer(Z)){const F=L(Z.length)|0,K=o(F);return K.length===0||Z.copy(K,0,0,F),K}if(Z.length!==void 0)return typeof Z.length!="number"||Mt(Z.length)?o(0):S(Z);if(Z.type==="Buffer"&&Array.isArray(Z.data))return S(Z.data)}function L(Z){if(Z>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return Z|0}function k(Z){return+Z!=Z&&(Z=0),c.alloc(+Z)}c.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==c.prototype},c.compare=function(F,K){if(ht(F,Uint8Array)&&(F=c.from(F,F.offset,F.byteLength)),ht(K,Uint8Array)&&(K=c.from(K,K.offset,K.byteLength)),!c.isBuffer(F)||!c.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===K)return 0;let J=F.length,ie=K.length;for(let ce=0,de=Math.min(J,ie);ce<de;++ce)if(F[ce]!==K[ce]){J=F[ce],ie=K[ce];break}return J<ie?-1:ie<J?1:0},c.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(F,K){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return c.alloc(0);let J;if(K===void 0)for(K=0,J=0;J<F.length;++J)K+=F[J].length;const ie=c.allocUnsafe(K);let ce=0;for(J=0;J<F.length;++J){let de=F[J];if(ht(de,Uint8Array))ce+de.length>ie.length?(c.isBuffer(de)||(de=c.from(de)),de.copy(ie,ce)):Uint8Array.prototype.set.call(ie,de,ce);else if(c.isBuffer(de))de.copy(ie,ce);else throw new TypeError('"list" argument must be an Array of Buffers');ce+=de.length}return ie};function U(Z,F){if(c.isBuffer(Z))return Z.length;if(ArrayBuffer.isView(Z)||ht(Z,ArrayBuffer))return Z.byteLength;if(typeof Z!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Z);const K=Z.length,J=arguments.length>2&&arguments[2]===!0;if(!J&&K===0)return 0;let ie=!1;for(;;)switch(F){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return He(Z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K*2;case"hex":return K>>>1;case"base64":return yt(Z).length;default:if(ie)return J?-1:He(Z).length;F=(""+F).toLowerCase(),ie=!0}}c.byteLength=U;function q(Z,F,K){let J=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((K===void 0||K>this.length)&&(K=this.length),K<=0)||(K>>>=0,F>>>=0,K<=F))return"";for(Z||(Z="utf8");;)switch(Z){case"hex":return C(this,F,K);case"utf8":case"utf-8":return g(this,F,K);case"ascii":return M(this,F,K);case"latin1":case"binary":return R(this,F,K);case"base64":return w(this,F,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,F,K);default:if(J)throw new TypeError("Unknown encoding: "+Z);Z=(Z+"").toLowerCase(),J=!0}}c.prototype._isBuffer=!0;function j(Z,F,K){const J=Z[F];Z[F]=Z[K],Z[K]=J}c.prototype.swap16=function(){const F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let K=0;K<F;K+=2)j(this,K,K+1);return this},c.prototype.swap32=function(){const F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let K=0;K<F;K+=4)j(this,K,K+3),j(this,K+1,K+2);return this},c.prototype.swap64=function(){const F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let K=0;K<F;K+=8)j(this,K,K+7),j(this,K+1,K+6),j(this,K+2,K+5),j(this,K+3,K+4);return this},c.prototype.toString=function(){const F=this.length;return F===0?"":arguments.length===0?g(this,0,F):q.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(F){if(!c.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:c.compare(this,F)===0},c.prototype.inspect=function(){let F="";const K=t.INSPECT_MAX_BYTES;return F=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(F+=" ... "),"<Buffer "+F+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(F,K,J,ie,ce){if(ht(F,Uint8Array)&&(F=c.from(F,F.offset,F.byteLength)),!c.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(K===void 0&&(K=0),J===void 0&&(J=F?F.length:0),ie===void 0&&(ie=0),ce===void 0&&(ce=this.length),K<0||J>F.length||ie<0||ce>this.length)throw new RangeError("out of range index");if(ie>=ce&&K>=J)return 0;if(ie>=ce)return-1;if(K>=J)return 1;if(K>>>=0,J>>>=0,ie>>>=0,ce>>>=0,this===F)return 0;let de=ce-ie,$e=J-K;const Ye=Math.min(de,$e),Fe=this.slice(ie,ce),We=F.slice(K,J);for(let at=0;at<Ye;++at)if(Fe[at]!==We[at]){de=Fe[at],$e=We[at];break}return de<$e?-1:$e<de?1:0};function z(Z,F,K,J,ie){if(Z.length===0)return-1;if(typeof K=="string"?(J=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),K=+K,Mt(K)&&(K=ie?0:Z.length-1),K<0&&(K=Z.length+K),K>=Z.length){if(ie)return-1;K=Z.length-1}else if(K<0)if(ie)K=0;else return-1;if(typeof F=="string"&&(F=c.from(F,J)),c.isBuffer(F))return F.length===0?-1:V(Z,F,K,J,ie);if(typeof F=="number")return F=F&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(Z,F,K):Uint8Array.prototype.lastIndexOf.call(Z,F,K):V(Z,[F],K,J,ie);throw new TypeError("val must be string, number or Buffer")}function V(Z,F,K,J,ie){let ce=1,de=Z.length,$e=F.length;if(J!==void 0&&(J=String(J).toLowerCase(),J==="ucs2"||J==="ucs-2"||J==="utf16le"||J==="utf-16le")){if(Z.length<2||F.length<2)return-1;ce=2,de/=2,$e/=2,K/=2}function Ye(We,at){return ce===1?We[at]:We.readUInt16BE(at*ce)}let Fe;if(ie){let We=-1;for(Fe=K;Fe<de;Fe++)if(Ye(Z,Fe)===Ye(F,We===-1?0:Fe-We)){if(We===-1&&(We=Fe),Fe-We+1===$e)return We*ce}else We!==-1&&(Fe-=Fe-We),We=-1}else for(K+$e>de&&(K=de-$e),Fe=K;Fe>=0;Fe--){let We=!0;for(let at=0;at<$e;at++)if(Ye(Z,Fe+at)!==Ye(F,at)){We=!1;break}if(We)return Fe}return-1}c.prototype.includes=function(F,K,J){return this.indexOf(F,K,J)!==-1},c.prototype.indexOf=function(F,K,J){return z(this,F,K,J,!0)},c.prototype.lastIndexOf=function(F,K,J){return z(this,F,K,J,!1)};function G(Z,F,K,J){K=Number(K)||0;const ie=Z.length-K;J?(J=Number(J),J>ie&&(J=ie)):J=ie;const ce=F.length;J>ce/2&&(J=ce/2);let de;for(de=0;de<J;++de){const $e=parseInt(F.substr(de*2,2),16);if(Mt($e))return de;Z[K+de]=$e}return de}function B(Z,F,K,J){return et(He(F,Z.length-K),Z,K,J)}function W(Z,F,K,J){return et(Je(F),Z,K,J)}function D(Z,F,K,J){return et(yt(F),Z,K,J)}function _(Z,F,K,J){return et(vt(F,Z.length-K),Z,K,J)}c.prototype.write=function(F,K,J,ie){if(K===void 0)ie="utf8",J=this.length,K=0;else if(J===void 0&&typeof K=="string")ie=K,J=this.length,K=0;else if(isFinite(K))K=K>>>0,isFinite(J)?(J=J>>>0,ie===void 0&&(ie="utf8")):(ie=J,J=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ce=this.length-K;if((J===void 0||J>ce)&&(J=ce),F.length>0&&(J<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let de=!1;for(;;)switch(ie){case"hex":return G(this,F,K,J);case"utf8":case"utf-8":return B(this,F,K,J);case"ascii":case"latin1":case"binary":return W(this,F,K,J);case"base64":return D(this,F,K,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,F,K,J);default:if(de)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),de=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(Z,F,K){return F===0&&K===Z.length?e.fromByteArray(Z):e.fromByteArray(Z.slice(F,K))}function g(Z,F,K){K=Math.min(Z.length,K);const J=[];let ie=F;for(;ie<K;){const ce=Z[ie];let de=null,$e=ce>239?4:ce>223?3:ce>191?2:1;if(ie+$e<=K){let Ye,Fe,We,at;switch($e){case 1:ce<128&&(de=ce);break;case 2:Ye=Z[ie+1],(Ye&192)===128&&(at=(ce&31)<<6|Ye&63,at>127&&(de=at));break;case 3:Ye=Z[ie+1],Fe=Z[ie+2],(Ye&192)===128&&(Fe&192)===128&&(at=(ce&15)<<12|(Ye&63)<<6|Fe&63,at>2047&&(at<55296||at>57343)&&(de=at));break;case 4:Ye=Z[ie+1],Fe=Z[ie+2],We=Z[ie+3],(Ye&192)===128&&(Fe&192)===128&&(We&192)===128&&(at=(ce&15)<<18|(Ye&63)<<12|(Fe&63)<<6|We&63,at>65535&&at<1114112&&(de=at))}}de===null?(de=65533,$e=1):de>65535&&(de-=65536,J.push(de>>>10&1023|55296),de=56320|de&1023),J.push(de),ie+=$e}return m(J)}const b=4096;function m(Z){const F=Z.length;if(F<=b)return String.fromCharCode.apply(String,Z);let K="",J=0;for(;J<F;)K+=String.fromCharCode.apply(String,Z.slice(J,J+=b));return K}function M(Z,F,K){let J="";K=Math.min(Z.length,K);for(let ie=F;ie<K;++ie)J+=String.fromCharCode(Z[ie]&127);return J}function R(Z,F,K){let J="";K=Math.min(Z.length,K);for(let ie=F;ie<K;++ie)J+=String.fromCharCode(Z[ie]);return J}function C(Z,F,K){const J=Z.length;(!F||F<0)&&(F=0),(!K||K<0||K>J)&&(K=J);let ie="";for(let ce=F;ce<K;++ce)ie+=dt[Z[ce]];return ie}function v(Z,F,K){const J=Z.slice(F,K);let ie="";for(let ce=0;ce<J.length-1;ce+=2)ie+=String.fromCharCode(J[ce]+J[ce+1]*256);return ie}c.prototype.slice=function(F,K){const J=this.length;F=~~F,K=K===void 0?J:~~K,F<0?(F+=J,F<0&&(F=0)):F>J&&(F=J),K<0?(K+=J,K<0&&(K=0)):K>J&&(K=J),K<F&&(K=F);const ie=this.subarray(F,K);return Object.setPrototypeOf(ie,c.prototype),ie};function O(Z,F,K){if(Z%1!==0||Z<0)throw new RangeError("offset is not uint");if(Z+F>K)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(F,K,J){F=F>>>0,K=K>>>0,J||O(F,K,this.length);let ie=this[F],ce=1,de=0;for(;++de<K&&(ce*=256);)ie+=this[F+de]*ce;return ie},c.prototype.readUintBE=c.prototype.readUIntBE=function(F,K,J){F=F>>>0,K=K>>>0,J||O(F,K,this.length);let ie=this[F+--K],ce=1;for(;K>0&&(ce*=256);)ie+=this[F+--K]*ce;return ie},c.prototype.readUint8=c.prototype.readUInt8=function(F,K){return F=F>>>0,K||O(F,1,this.length),this[F]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(F,K){return F=F>>>0,K||O(F,2,this.length),this[F]|this[F+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(F,K){return F=F>>>0,K||O(F,2,this.length),this[F]<<8|this[F+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(F,K){return F=F>>>0,K||O(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(F,K){return F=F>>>0,K||O(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},c.prototype.readBigUInt64LE=Ee(function(F){F=F>>>0,xe(F,"offset");const K=this[F],J=this[F+7];(K===void 0||J===void 0)&&ze(F,this.length-8);const ie=K+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24,ce=this[++F]+this[++F]*2**8+this[++F]*2**16+J*2**24;return BigInt(ie)+(BigInt(ce)<<BigInt(32))}),c.prototype.readBigUInt64BE=Ee(function(F){F=F>>>0,xe(F,"offset");const K=this[F],J=this[F+7];(K===void 0||J===void 0)&&ze(F,this.length-8);const ie=K*2**24+this[++F]*2**16+this[++F]*2**8+this[++F],ce=this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+J;return(BigInt(ie)<<BigInt(32))+BigInt(ce)}),c.prototype.readIntLE=function(F,K,J){F=F>>>0,K=K>>>0,J||O(F,K,this.length);let ie=this[F],ce=1,de=0;for(;++de<K&&(ce*=256);)ie+=this[F+de]*ce;return ce*=128,ie>=ce&&(ie-=Math.pow(2,8*K)),ie},c.prototype.readIntBE=function(F,K,J){F=F>>>0,K=K>>>0,J||O(F,K,this.length);let ie=K,ce=1,de=this[F+--ie];for(;ie>0&&(ce*=256);)de+=this[F+--ie]*ce;return ce*=128,de>=ce&&(de-=Math.pow(2,8*K)),de},c.prototype.readInt8=function(F,K){return F=F>>>0,K||O(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},c.prototype.readInt16LE=function(F,K){F=F>>>0,K||O(F,2,this.length);const J=this[F]|this[F+1]<<8;return J&32768?J|4294901760:J},c.prototype.readInt16BE=function(F,K){F=F>>>0,K||O(F,2,this.length);const J=this[F+1]|this[F]<<8;return J&32768?J|4294901760:J},c.prototype.readInt32LE=function(F,K){return F=F>>>0,K||O(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},c.prototype.readInt32BE=function(F,K){return F=F>>>0,K||O(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},c.prototype.readBigInt64LE=Ee(function(F){F=F>>>0,xe(F,"offset");const K=this[F],J=this[F+7];(K===void 0||J===void 0)&&ze(F,this.length-8);const ie=this[F+4]+this[F+5]*2**8+this[F+6]*2**16+(J<<24);return(BigInt(ie)<<BigInt(32))+BigInt(K+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24)}),c.prototype.readBigInt64BE=Ee(function(F){F=F>>>0,xe(F,"offset");const K=this[F],J=this[F+7];(K===void 0||J===void 0)&&ze(F,this.length-8);const ie=(K<<24)+this[++F]*2**16+this[++F]*2**8+this[++F];return(BigInt(ie)<<BigInt(32))+BigInt(this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+J)}),c.prototype.readFloatLE=function(F,K){return F=F>>>0,K||O(F,4,this.length),r.read(this,F,!0,23,4)},c.prototype.readFloatBE=function(F,K){return F=F>>>0,K||O(F,4,this.length),r.read(this,F,!1,23,4)},c.prototype.readDoubleLE=function(F,K){return F=F>>>0,K||O(F,8,this.length),r.read(this,F,!0,52,8)},c.prototype.readDoubleBE=function(F,K){return F=F>>>0,K||O(F,8,this.length),r.read(this,F,!1,52,8)};function x(Z,F,K,J,ie,ce){if(!c.isBuffer(Z))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>ie||F<ce)throw new RangeError('"value" argument is out of bounds');if(K+J>Z.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(F,K,J,ie){if(F=+F,K=K>>>0,J=J>>>0,!ie){const $e=Math.pow(2,8*J)-1;x(this,F,K,J,$e,0)}let ce=1,de=0;for(this[K]=F&255;++de<J&&(ce*=256);)this[K+de]=F/ce&255;return K+J},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(F,K,J,ie){if(F=+F,K=K>>>0,J=J>>>0,!ie){const $e=Math.pow(2,8*J)-1;x(this,F,K,J,$e,0)}let ce=J-1,de=1;for(this[K+ce]=F&255;--ce>=0&&(de*=256);)this[K+ce]=F/de&255;return K+J},c.prototype.writeUint8=c.prototype.writeUInt8=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,1,255,0),this[K]=F&255,K+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,2,65535,0),this[K]=F&255,this[K+1]=F>>>8,K+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,2,65535,0),this[K]=F>>>8,this[K+1]=F&255,K+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,4,4294967295,0),this[K+3]=F>>>24,this[K+2]=F>>>16,this[K+1]=F>>>8,this[K]=F&255,K+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,4,4294967295,0),this[K]=F>>>24,this[K+1]=F>>>16,this[K+2]=F>>>8,this[K+3]=F&255,K+4};function N(Z,F,K,J,ie){Se(F,J,ie,Z,K,7);let ce=Number(F&BigInt(4294967295));Z[K++]=ce,ce=ce>>8,Z[K++]=ce,ce=ce>>8,Z[K++]=ce,ce=ce>>8,Z[K++]=ce;let de=Number(F>>BigInt(32)&BigInt(4294967295));return Z[K++]=de,de=de>>8,Z[K++]=de,de=de>>8,Z[K++]=de,de=de>>8,Z[K++]=de,K}function H(Z,F,K,J,ie){Se(F,J,ie,Z,K,7);let ce=Number(F&BigInt(4294967295));Z[K+7]=ce,ce=ce>>8,Z[K+6]=ce,ce=ce>>8,Z[K+5]=ce,ce=ce>>8,Z[K+4]=ce;let de=Number(F>>BigInt(32)&BigInt(4294967295));return Z[K+3]=de,de=de>>8,Z[K+2]=de,de=de>>8,Z[K+1]=de,de=de>>8,Z[K]=de,K+8}c.prototype.writeBigUInt64LE=Ee(function(F,K=0){return N(this,F,K,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Ee(function(F,K=0){return H(this,F,K,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(F,K,J,ie){if(F=+F,K=K>>>0,!ie){const Ye=Math.pow(2,8*J-1);x(this,F,K,J,Ye-1,-Ye)}let ce=0,de=1,$e=0;for(this[K]=F&255;++ce<J&&(de*=256);)F<0&&$e===0&&this[K+ce-1]!==0&&($e=1),this[K+ce]=(F/de>>0)-$e&255;return K+J},c.prototype.writeIntBE=function(F,K,J,ie){if(F=+F,K=K>>>0,!ie){const Ye=Math.pow(2,8*J-1);x(this,F,K,J,Ye-1,-Ye)}let ce=J-1,de=1,$e=0;for(this[K+ce]=F&255;--ce>=0&&(de*=256);)F<0&&$e===0&&this[K+ce+1]!==0&&($e=1),this[K+ce]=(F/de>>0)-$e&255;return K+J},c.prototype.writeInt8=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,1,127,-128),F<0&&(F=255+F+1),this[K]=F&255,K+1},c.prototype.writeInt16LE=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,2,32767,-32768),this[K]=F&255,this[K+1]=F>>>8,K+2},c.prototype.writeInt16BE=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,2,32767,-32768),this[K]=F>>>8,this[K+1]=F&255,K+2},c.prototype.writeInt32LE=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,4,2147483647,-2147483648),this[K]=F&255,this[K+1]=F>>>8,this[K+2]=F>>>16,this[K+3]=F>>>24,K+4},c.prototype.writeInt32BE=function(F,K,J){return F=+F,K=K>>>0,J||x(this,F,K,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[K]=F>>>24,this[K+1]=F>>>16,this[K+2]=F>>>8,this[K+3]=F&255,K+4},c.prototype.writeBigInt64LE=Ee(function(F,K=0){return N(this,F,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Ee(function(F,K=0){return H(this,F,K,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Y(Z,F,K,J,ie,ce){if(K+J>Z.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Q(Z,F,K,J,ie){return F=+F,K=K>>>0,ie||Y(Z,F,K,4),r.write(Z,F,K,J,23,4),K+4}c.prototype.writeFloatLE=function(F,K,J){return Q(this,F,K,!0,J)},c.prototype.writeFloatBE=function(F,K,J){return Q(this,F,K,!1,J)};function ee(Z,F,K,J,ie){return F=+F,K=K>>>0,ie||Y(Z,F,K,8),r.write(Z,F,K,J,52,8),K+8}c.prototype.writeDoubleLE=function(F,K,J){return ee(this,F,K,!0,J)},c.prototype.writeDoubleBE=function(F,K,J){return ee(this,F,K,!1,J)},c.prototype.copy=function(F,K,J,ie){if(!c.isBuffer(F))throw new TypeError("argument should be a Buffer");if(J||(J=0),!ie&&ie!==0&&(ie=this.length),K>=F.length&&(K=F.length),K||(K=0),ie>0&&ie<J&&(ie=J),ie===J||F.length===0||this.length===0)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(J<0||J>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),F.length-K<ie-J&&(ie=F.length-K+J);const ce=ie-J;return this===F&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(K,J,ie):Uint8Array.prototype.set.call(F,this.subarray(J,ie),K),ce},c.prototype.fill=function(F,K,J,ie){if(typeof F=="string"){if(typeof K=="string"?(ie=K,K=0,J=this.length):typeof J=="string"&&(ie=J,J=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!c.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(F.length===1){const de=F.charCodeAt(0);(ie==="utf8"&&de<128||ie==="latin1")&&(F=de)}}else typeof F=="number"?F=F&255:typeof F=="boolean"&&(F=Number(F));if(K<0||this.length<K||this.length<J)throw new RangeError("Out of range index");if(J<=K)return this;K=K>>>0,J=J===void 0?this.length:J>>>0,F||(F=0);let ce;if(typeof F=="number")for(ce=K;ce<J;++ce)this[ce]=F;else{const de=c.isBuffer(F)?F:c.from(F,ie),$e=de.length;if($e===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(ce=0;ce<J-K;++ce)this[ce+K]=de[ce%$e]}return this};const re={};function oe(Z,F,K){re[Z]=class extends K{constructor(){super(),Object.defineProperty(this,"message",{value:F.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Z}]`,this.stack,delete this.name}get code(){return Z}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${Z}]: ${this.message}`}}}oe("ERR_BUFFER_OUT_OF_BOUNDS",function(Z){return Z?`${Z} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),oe("ERR_INVALID_ARG_TYPE",function(Z,F){return`The "${Z}" argument must be of type number. Received type ${typeof F}`},TypeError),oe("ERR_OUT_OF_RANGE",function(Z,F,K){let J=`The value of "${Z}" is out of range.`,ie=K;return Number.isInteger(K)&&Math.abs(K)>2**32?ie=be(String(K)):typeof K=="bigint"&&(ie=String(K),(K>BigInt(2)**BigInt(32)||K<-(BigInt(2)**BigInt(32)))&&(ie=be(ie)),ie+="n"),J+=` It must be ${F}. Received ${ie}`,J},RangeError);function be(Z){let F="",K=Z.length;const J=Z[0]==="-"?1:0;for(;K>=J+4;K-=3)F=`_${Z.slice(K-3,K)}${F}`;return`${Z.slice(0,K)}${F}`}function Ce(Z,F,K){xe(F,"offset"),(Z[F]===void 0||Z[F+K]===void 0)&&ze(F,Z.length-(K+1))}function Se(Z,F,K,J,ie,ce){if(Z>K||Z<F){const de=typeof F=="bigint"?"n":"";let $e;throw F===0||F===BigInt(0)?$e=`>= 0${de} and < 2${de} ** ${(ce+1)*8}${de}`:$e=`>= -(2${de} ** ${(ce+1)*8-1}${de}) and < 2 ** ${(ce+1)*8-1}${de}`,new re.ERR_OUT_OF_RANGE("value",$e,Z)}Ce(J,ie,ce)}function xe(Z,F){if(typeof Z!="number")throw new re.ERR_INVALID_ARG_TYPE(F,"number",Z)}function ze(Z,F,K){throw Math.floor(Z)!==Z?(xe(Z,K),new re.ERR_OUT_OF_RANGE("offset","an integer",Z)):F<0?new re.ERR_BUFFER_OUT_OF_BOUNDS:new re.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${F}`,Z)}const Be=/[^+/0-9A-Za-z-_]/g;function tt(Z){if(Z=Z.split("=")[0],Z=Z.trim().replace(Be,""),Z.length<2)return"";for(;Z.length%4!==0;)Z=Z+"=";return Z}function He(Z,F){F=F||1/0;let K;const J=Z.length;let ie=null;const ce=[];for(let de=0;de<J;++de){if(K=Z.charCodeAt(de),K>55295&&K<57344){if(!ie){if(K>56319){(F-=3)>-1&&ce.push(239,191,189);continue}else if(de+1===J){(F-=3)>-1&&ce.push(239,191,189);continue}ie=K;continue}if(K<56320){(F-=3)>-1&&ce.push(239,191,189),ie=K;continue}K=(ie-55296<<10|K-56320)+65536}else ie&&(F-=3)>-1&&ce.push(239,191,189);if(ie=null,K<128){if((F-=1)<0)break;ce.push(K)}else if(K<2048){if((F-=2)<0)break;ce.push(K>>6|192,K&63|128)}else if(K<65536){if((F-=3)<0)break;ce.push(K>>12|224,K>>6&63|128,K&63|128)}else if(K<1114112){if((F-=4)<0)break;ce.push(K>>18|240,K>>12&63|128,K>>6&63|128,K&63|128)}else throw new Error("Invalid code point")}return ce}function Je(Z){const F=[];for(let K=0;K<Z.length;++K)F.push(Z.charCodeAt(K)&255);return F}function vt(Z,F){let K,J,ie;const ce=[];for(let de=0;de<Z.length&&!((F-=2)<0);++de)K=Z.charCodeAt(de),J=K>>8,ie=K%256,ce.push(ie),ce.push(J);return ce}function yt(Z){return e.toByteArray(tt(Z))}function et(Z,F,K,J){let ie;for(ie=0;ie<J&&!(ie+K>=F.length||ie>=Z.length);++ie)F[ie+K]=Z[ie];return ie}function ht(Z,F){return Z instanceof F||Z!=null&&Z.constructor!=null&&Z.constructor.name!=null&&Z.constructor.name===F.name}function Mt(Z){return Z!==Z}const dt=function(){const Z="0123456789abcdef",F=new Array(256);for(let K=0;K<16;++K){const J=K*16;for(let ie=0;ie<16;++ie)F[J+ie]=Z[K]+Z[ie]}return F}();function Ee(Z){return typeof BigInt>"u"?Te:Z}function Te(){throw new Error("BigInt not supported")}}(Z2)),Z2}var zt=z4();const Nd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function q4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Bg(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function sa(t,...e){if(!q4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function $j(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Bg(t.outputLen),Bg(t.blockLen)}function Wf(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aR(t,e){sa(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function kj(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function gu(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Q2(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function qa(t,e){return t<<32-e|t>>>e}const Pj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Bj(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Lj(t){for(let e=0;e<t.length;e++)t[e]=Bj(t[e]);return t}const WI=Pj?t=>t:Lj,cR=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Uj=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Kf(t){if(sa(t),cR)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=Uj[t[r]];return e}const Uc={_0:48,_9:57,A:65,F:70,a:97,f:102};function KI(t){if(t>=Uc._0&&t<=Uc._9)return t-Uc._0;if(t>=Uc.A&&t<=Uc.F)return t-(Uc.A-10);if(t>=Uc.a&&t<=Uc.f)return t-(Uc.a-10)}function F4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(cR)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=KI(t.charCodeAt(s)),c=KI(t.charCodeAt(s+1));if(o===void 0||c===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+c}return n}function jj(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function nw(t){return typeof t=="string"&&(t=jj(t)),sa(t),t}function sl(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];sa(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}let H4=class{};function W4(t){const e=n=>t().update(nw(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function lR(t=32){if(Nd&&typeof Nd.getRandomValues=="function")return Nd.getRandomValues(new Uint8Array(t));if(Nd&&typeof Nd.randomBytes=="function")return Uint8Array.from(Nd.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function zj(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),c=Number(r&s),u=n?4:0,h=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+h,c,n)}function qj(t,e,r){return t&e^~t&r}function Fj(t,e,r){return t&e^t&r^e&r}class uR extends H4{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Q2(this.buffer)}update(e){Wf(this),e=nw(e),sa(e);const{view:r,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=Q2(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wf(this),aR(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,gu(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let p=o;p<i;p++)r[p]=0;zj(n,i-8,BigInt(this.length*8),s),this.process(n,0);const c=Q2(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=u/4,f=this.get();if(h>f.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)c.setUint32(4*p,f[p],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:c}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=c,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const kl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ys=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),sb=BigInt(2**32-1),VI=BigInt(32);function Hj(t,e=!1){return e?{h:Number(t&sb),l:Number(t>>VI&sb)}:{h:Number(t>>VI&sb)|0,l:Number(t&sb)|0}}function hR(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:c}=Hj(t[s],e);[n[s],i[s]]=[o,c]}return[n,i]}const GI=(t,e,r)=>t>>>r,YI=(t,e,r)=>t<<32-r|e>>>r,Od=(t,e,r)=>t>>>r|e<<32-r,Rd=(t,e,r)=>t<<32-r|e>>>r,ob=(t,e,r)=>t<<64-r|e>>>r-32,ab=(t,e,r)=>t>>>r-32|e<<64-r,Wj=(t,e,r)=>t<<r|e>>>32-r,Kj=(t,e,r)=>e<<r|t>>>32-r,Vj=(t,e,r)=>e<<r-32|t>>>64-r,Gj=(t,e,r)=>t<<r-32|e>>>64-r;function jc(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const Yj=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Zj=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Qj=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Xj=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,Jj=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),ez=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,tz=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pl=new Uint32Array(64);class rz extends uR{constructor(e=32){super(64,e,8,!1),this.A=kl[0]|0,this.B=kl[1]|0,this.C=kl[2]|0,this.D=kl[3]|0,this.E=kl[4]|0,this.F=kl[5]|0,this.G=kl[6]|0,this.H=kl[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:c,H:u}=this;return[e,r,n,i,s,o,c,u]}set(e,r,n,i,s,o,c,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,r){for(let p=0;p<16;p++,r+=4)Pl[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const E=Pl[p-15],S=Pl[p-2],A=qa(E,7)^qa(E,18)^E>>>3,I=qa(S,17)^qa(S,19)^S>>>10;Pl[p]=I+Pl[p-7]+A+Pl[p-16]|0}let{A:n,B:i,C:s,D:o,E:c,F:u,G:h,H:f}=this;for(let p=0;p<64;p++){const E=qa(c,6)^qa(c,11)^qa(c,25),S=f+E+qj(c,u,h)+tz[p]+Pl[p]|0,I=(qa(n,2)^qa(n,13)^qa(n,22))+Fj(n,i,s)|0;f=h,h=u,u=c,c=o+S|0,o=s,s=i,i=n,n=S+I|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,i,s,o,c,u,h,f)}roundClean(){gu(Pl)}destroy(){this.set(0,0,0,0,0,0,0,0),gu(this.buffer)}}const dR=hR(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),nz=dR[0],iz=dR[1],Bl=new Uint32Array(80),Ll=new Uint32Array(80);class sz extends uR{constructor(e=64){super(128,e,16,!1),this.Ah=ys[0]|0,this.Al=ys[1]|0,this.Bh=ys[2]|0,this.Bl=ys[3]|0,this.Ch=ys[4]|0,this.Cl=ys[5]|0,this.Dh=ys[6]|0,this.Dl=ys[7]|0,this.Eh=ys[8]|0,this.El=ys[9]|0,this.Fh=ys[10]|0,this.Fl=ys[11]|0,this.Gh=ys[12]|0,this.Gl=ys[13]|0,this.Hh=ys[14]|0,this.Hl=ys[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:h,El:f,Fh:p,Fl:E,Gh:S,Gl:A,Hh:I,Hl:$}=this;return[e,r,n,i,s,o,c,u,h,f,p,E,S,A,I,$]}set(e,r,n,i,s,o,c,u,h,f,p,E,S,A,I,$){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=h|0,this.El=f|0,this.Fh=p|0,this.Fl=E|0,this.Gh=S|0,this.Gl=A|0,this.Hh=I|0,this.Hl=$|0}process(e,r){for(let U=0;U<16;U++,r+=4)Bl[U]=e.getUint32(r),Ll[U]=e.getUint32(r+=4);for(let U=16;U<80;U++){const q=Bl[U-15]|0,j=Ll[U-15]|0,z=Od(q,j,1)^Od(q,j,8)^GI(q,j,7),V=Rd(q,j,1)^Rd(q,j,8)^YI(q,j,7),G=Bl[U-2]|0,B=Ll[U-2]|0,W=Od(G,B,19)^ob(G,B,61)^GI(G,B,6),D=Rd(G,B,19)^ab(G,B,61)^YI(G,B,6),_=Qj(V,D,Ll[U-7],Ll[U-16]),w=Xj(_,z,W,Bl[U-7],Bl[U-16]);Bl[U]=w|0,Ll[U]=_|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:h,Dl:f,Eh:p,El:E,Fh:S,Fl:A,Gh:I,Gl:$,Hh:L,Hl:k}=this;for(let U=0;U<80;U++){const q=Od(p,E,14)^Od(p,E,18)^ob(p,E,41),j=Rd(p,E,14)^Rd(p,E,18)^ab(p,E,41),z=p&S^~p&I,V=E&A^~E&$,G=Jj(k,j,V,iz[U],Ll[U]),B=ez(G,L,q,z,nz[U],Bl[U]),W=G|0,D=Od(n,i,28)^ob(n,i,34)^ob(n,i,39),_=Rd(n,i,28)^ab(n,i,34)^ab(n,i,39),w=n&s^n&c^s&c,g=i&o^i&u^o&u;L=I|0,k=$|0,I=S|0,$=A|0,S=p|0,A=E|0,{h:p,l:E}=jc(h|0,f|0,B|0,W|0),h=c|0,f=u|0,c=s|0,u=o|0,s=n|0,o=i|0;const b=Yj(W,_,g);n=Zj(b,B,D,w),i=b|0}({h:n,l:i}=jc(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=jc(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=jc(this.Ch|0,this.Cl|0,c|0,u|0),{h,l:f}=jc(this.Dh|0,this.Dl|0,h|0,f|0),{h:p,l:E}=jc(this.Eh|0,this.El|0,p|0,E|0),{h:S,l:A}=jc(this.Fh|0,this.Fl|0,S|0,A|0),{h:I,l:$}=jc(this.Gh|0,this.Gl|0,I|0,$|0),{h:L,l:k}=jc(this.Hh|0,this.Hl|0,L|0,k|0),this.set(n,i,s,o,c,u,h,f,p,E,S,A,I,$,L,k)}roundClean(){gu(Bl,Ll)}destroy(){gu(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const fR=W4(()=>new rz),oz=W4(()=>new sz);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const K4=BigInt(0),X3=BigInt(1);function wh(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function cb(t){const e=t.toString(16);return e.length&1?"0"+e:e}function pR(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?K4:BigInt("0x"+t)}function iw(t){return pR(Kf(t))}function Lg(t){return sa(t),pR(Kf(Uint8Array.from(t).reverse()))}function V4(t,e){return F4(t.toString(16).padStart(e*2,"0"))}function sw(t,e){return V4(t,e).reverse()}function ri(t,e,r){let n;if(typeof e=="string")try{n=F4(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(q4(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const X2=t=>typeof t=="bigint"&&K4<=t;function az(t,e,r){return X2(t)&&X2(e)&&X2(r)&&e<=t&&t<r}function Tf(t,e,r,n){if(!az(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function cz(t){let e;for(e=0;t>K4;t>>=X3,e+=1);return e}const ow=t=>(X3<<BigInt(t))-X3;function lz(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=S=>new Uint8Array(S),i=S=>Uint8Array.of(S);let s=n(t),o=n(t),c=0;const u=()=>{s.fill(1),o.fill(0),c=0},h=(...S)=>r(o,s,...S),f=(S=n(0))=>{o=h(i(0),S),s=h(),S.length!==0&&(o=h(i(1),S),s=h())},p=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const A=[];for(;S<e;){s=h();const I=s.slice();A.push(I),S+=s.length}return sl(...A)};return(S,A)=>{u(),f(S);let I;for(;!(I=A(p()));)f();return u(),I}}function Cy(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,s,o){const c=t[i];if(o&&c===void 0)return;const u=typeof c;if(u!==s||c===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${u}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function S1(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const uo=BigInt(0),ss=BigInt(1),sh=BigInt(2),uz=BigInt(3),gR=BigInt(4),yR=BigInt(5),mR=BigInt(8);function ni(t,e){const r=t%e;return r>=uo?r:e+r}function Gn(t,e,r){let n=t;for(;e-- >uo;)n*=n,n%=r;return n}function ZI(t,e){if(t===uo)throw new Error("invert: expected non-zero number");if(e<=uo)throw new Error("invert: expected positive modulus, got "+e);let r=ni(t,e),n=e,i=uo,s=ss;for(;r!==uo;){const c=n/r,u=n%r,h=i-s*c;n=r,r=u,i=s,s=h}if(n!==ss)throw new Error("invert: does not exist");return ni(i,e)}function bR(t,e){const r=(t.ORDER+ss)/gR,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function hz(t,e){const r=(t.ORDER-yR)/mR,n=t.mul(e,sh),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,sh),i),c=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(c),e))throw new Error("Cannot find square root");return c}function dz(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-ss,r=0;for(;e%sh===uo;)e/=sh,r++;let n=sh;const i=dp(t);for(;QI(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return bR;let s=i.pow(n,e);const o=(e+ss)/sh;return function(u,h){if(u.is0(h))return h;if(QI(u,h)!==1)throw new Error("Cannot find square root");let f=r,p=u.mul(u.ONE,s),E=u.pow(h,e),S=u.pow(h,o);for(;!u.eql(E,u.ONE);){if(u.is0(E))return u.ZERO;let A=1,I=u.sqr(E);for(;!u.eql(I,u.ONE);)if(A++,I=u.sqr(I),A===f)throw new Error("Cannot find square root");const $=ss<<BigInt(f-A-1),L=u.pow(p,$);f=A,p=u.sqr(L),E=u.mul(E,p),S=u.mul(S,L)}return S}}function fz(t){return t%gR===uz?bR:t%mR===yR?hz:dz(t)}const pz=(t,e)=>(ni(t,e)&ss)===ss,gz=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yz(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=gz.reduce((n,i)=>(n[i]="function",n),e);return Cy(t,r),t}function mz(t,e,r){if(r<uo)throw new Error("invalid exponent, negatives unsupported");if(r===uo)return t.ONE;if(r===ss)return e;let n=t.ONE,i=e;for(;r>uo;)r&ss&&(n=t.mul(n,i)),i=t.sqr(i),r>>=ss;return n}function wR(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,c,u)=>t.is0(c)?o:(n[u]=o,t.mul(o,c)),t.ONE),s=t.inv(i);return e.reduceRight((o,c,u)=>t.is0(c)?o:(n[u]=t.mul(o,n[u]),t.mul(o,c)),s),n}function QI(t,e){const r=(t.ORDER-ss)/sh,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function bz(t,e){e!==void 0&&Bg(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function dp(t,e,r=!1,n={}){if(t<=uo)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(i=f.BITS),f.sqrt&&(s=f.sqrt),typeof f.isLE=="boolean"&&(r=f.isLE)}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:o,nByteLength:c}=bz(t,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const h=Object.freeze({ORDER:t,isLE:r,BITS:o,BYTES:c,MASK:ow(o),ZERO:uo,ONE:ss,create:f=>ni(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return uo<=f&&f<t},is0:f=>f===uo,isValidNot0:f=>!h.is0(f)&&h.isValid(f),isOdd:f=>(f&ss)===ss,neg:f=>ni(-f,t),eql:(f,p)=>f===p,sqr:f=>ni(f*f,t),add:(f,p)=>ni(f+p,t),sub:(f,p)=>ni(f-p,t),mul:(f,p)=>ni(f*p,t),pow:(f,p)=>mz(h,f,p),div:(f,p)=>ni(f*ZI(p,t),t),sqrN:f=>f*f,addN:(f,p)=>f+p,subN:(f,p)=>f-p,mulN:(f,p)=>f*p,inv:f=>ZI(f,t),sqrt:s||(f=>(u||(u=fz(t)),u(h,f))),toBytes:f=>r?sw(f,c):V4(f,c),fromBytes:f=>{if(f.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+f.length);return r?Lg(f):iw(f)},invertBatch:f=>wR(h,f),cmov:(f,p,E)=>E?p:f});return Object.freeze(h)}function vR(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function ER(t){const e=vR(t);return e+Math.ceil(e/2)}function wz(t,e,r=!1){const n=t.length,i=vR(e),s=ER(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Lg(t):iw(t),c=ni(o,e-ss)+ss;return r?sw(c,i):V4(c,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vf=BigInt(0),oh=BigInt(1);function wg(t,e){const r=e.negate();return t?r:e}function _R(t,e,r){const n=e==="pz"?o=>o.pz:o=>o.ez,i=wR(t.Fp,r.map(n));return r.map((o,c)=>o.toAffine(i[c])).map(t.fromAffine)}function SR(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function J2(t,e){SR(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=ow(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function XI(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let c=Number(t&i),u=t>>o;c>n&&(c-=s,u+=oh);const h=e*n,f=h+Math.abs(c)-1,p=c===0,E=c<0,S=e%2!==0;return{nextN:u,offset:f,isZero:p,isNeg:E,isNegF:S,offsetF:h}}function vz(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function Ez(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const eE=new WeakMap,AR=new WeakMap;function tE(t){return AR.get(t)||1}function JI(t){if(t!==Vf)throw new Error("invalid wNAF")}function IR(t,e){return{constTimeNegate:wg,hasPrecomputes(r){return tE(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>Vf;)n&oh&&(i=i.add(s)),s=s.double(),n>>=oh;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=J2(n,e),o=[];let c=r,u=c;for(let h=0;h<i;h++){u=c,o.push(u);for(let f=1;f<s;f++)u=u.add(c),o.push(u);c=u.double()}return o},wNAF(r,n,i){let s=t.ZERO,o=t.BASE;const c=J2(r,e);for(let u=0;u<c.windows;u++){const{nextN:h,offset:f,isZero:p,isNeg:E,isNegF:S,offsetF:A}=XI(i,u,c);i=h,p?o=o.add(wg(S,n[A])):s=s.add(wg(E,n[f]))}return JI(i),{p:s,f:o}},wNAFUnsafe(r,n,i,s=t.ZERO){const o=J2(r,e);for(let c=0;c<o.windows&&i!==Vf;c++){const{nextN:u,offset:h,isZero:f,isNeg:p}=XI(i,c,o);if(i=u,!f){const E=n[h];s=s.add(p?E.negate():E)}}return JI(i),s},getPrecomputes(r,n,i){let s=eE.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&(typeof i=="function"&&(s=i(s)),eE.set(n,s))),s},wNAFCached(r,n,i){const s=tE(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=tE(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){SR(n,e),AR.set(r,n),eE.delete(r)}}}function _z(t,e,r,n){let i=e,s=t.ZERO,o=t.ZERO;for(;r>Vf||n>Vf;)r&oh&&(s=s.add(i)),n&oh&&(o=o.add(i)),i=i.double(),r>>=oh,n>>=oh;return{p1:s,p2:o}}function xR(t,e,r,n){vz(r,t),Ez(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,c=cz(BigInt(i));let u=1;c>12?u=c-3:c>4?u=c-2:c>0&&(u=2);const h=ow(u),f=new Array(Number(h)+1).fill(o),p=Math.floor((e.BITS-1)/u)*u;let E=o;for(let S=p;S>=0;S-=u){f.fill(o);for(let I=0;I<s;I++){const $=n[I],L=Number($>>BigInt(S)&h);f[L]=f[L].add(r[I])}let A=o;for(let I=f.length-1,$=o;I>0;I--)$=$.add(f[I]),A=A.add($);if(E=E.add(A),S!==0)for(let I=0;I<u;I++)E=E.double()}return E}function ex(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return yz(e),e}else return dp(t)}function CR(t,e,r={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const c of["p","n","h"]){const u=e[c];if(!(typeof u=="bigint"&&u>Vf))throw new Error(`CURVE.${c} must be positive bigint`)}const n=ex(e.p,r.Fp),i=ex(e.n,r.Fn),o=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const c of o)if(!n.isValid(e[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const rc=BigInt(0),$s=BigInt(1),rE=BigInt(2),Sz=BigInt(8),Az={zip215:!0};function Iz(t,e,r,n){const i=t.sqr(r),s=t.sqr(n),o=t.add(t.mul(e.a,i),s),c=t.add(t.ONE,t.mul(e.d,t.mul(i,s)));return t.eql(o,c)}function xz(t,e={}){const{Fp:r,Fn:n}=CR("edwards",t,e),{h:i,n:s}=t;Cy(e,{},{uvRatio:"function"});const o=rE<<BigInt(n.BYTES*8)-$s,c=I=>r.create(I),u=e.uvRatio||((I,$)=>{try{return{isValid:!0,value:r.sqrt(r.div(I,$))}}catch{return{isValid:!1,value:rc}}});if(!Iz(r,t,t.Gx,t.Gy))throw new Error("bad curve params: generator point");function h(I,$,L=!1){const k=L?$s:rc;return Tf("coordinate "+I,$,k,o),$}function f(I){if(!(I instanceof S))throw new Error("ExtendedPoint expected")}const p=S1((I,$)=>{const{ex:L,ey:k,ez:U}=I,q=I.is0();$==null&&($=q?Sz:r.inv(U));const j=c(L*$),z=c(k*$),V=c(U*$);if(q)return{x:rc,y:$s};if(V!==$s)throw new Error("invZ was invalid");return{x:j,y:z}}),E=S1(I=>{const{a:$,d:L}=t;if(I.is0())throw new Error("bad point: ZERO");const{ex:k,ey:U,ez:q,et:j}=I,z=c(k*k),V=c(U*U),G=c(q*q),B=c(G*G),W=c(z*$),D=c(G*c(W+V)),_=c(B+c(L*c(z*V)));if(D!==_)throw new Error("bad point: equation left != right (1)");const w=c(k*U),g=c(q*j);if(w!==g)throw new Error("bad point: equation left != right (2)");return!0});class S{constructor($,L,k,U){this.ex=h("x",$),this.ey=h("y",L),this.ez=h("z",k,!0),this.et=h("t",U),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine($){if($ instanceof S)throw new Error("extended point not allowed");const{x:L,y:k}=$||{};return h("x",L),h("y",k),new S(L,k,$s,c(L*k))}static normalizeZ($){return _R(S,"ez",$)}static msm($,L){return xR(S,n,$,L)}_setWindowSize($){this.precompute($)}precompute($=8,L=!0){return A.setWindowSize(this,$),L||this.multiply(rE),this}assertValidity(){E(this)}equals($){f($);const{ex:L,ey:k,ez:U}=this,{ex:q,ey:j,ez:z}=$,V=c(L*z),G=c(q*U),B=c(k*z),W=c(j*U);return V===G&&B===W}is0(){return this.equals(S.ZERO)}negate(){return new S(c(-this.ex),this.ey,this.ez,c(-this.et))}double(){const{a:$}=t,{ex:L,ey:k,ez:U}=this,q=c(L*L),j=c(k*k),z=c(rE*c(U*U)),V=c($*q),G=L+k,B=c(c(G*G)-q-j),W=V+j,D=W-z,_=V-j,w=c(B*D),g=c(W*_),b=c(B*_),m=c(D*W);return new S(w,g,m,b)}add($){f($);const{a:L,d:k}=t,{ex:U,ey:q,ez:j,et:z}=this,{ex:V,ey:G,ez:B,et:W}=$,D=c(U*V),_=c(q*G),w=c(z*k*W),g=c(j*B),b=c((U+q)*(V+G)-D-_),m=g-w,M=g+w,R=c(_-L*D),C=c(b*m),v=c(M*R),O=c(b*R),x=c(m*M);return new S(C,v,x,O)}subtract($){return this.add($.negate())}multiply($){const L=$;Tf("scalar",L,$s,s);const{p:k,f:U}=A.wNAFCached(this,L,S.normalizeZ);return S.normalizeZ([k,U])[0]}multiplyUnsafe($,L=S.ZERO){const k=$;return Tf("scalar",k,rc,s),k===rc?S.ZERO:this.is0()||k===$s?this:A.wNAFCachedUnsafe(this,k,S.normalizeZ,L)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}isTorsionFree(){return A.wNAFCachedUnsafe(this,s).is0()}toAffine($){return p(this,$)}clearCofactor(){return i===$s?this:this.multiplyUnsafe(i)}static fromBytes($,L=!1){return sa($),this.fromHex($,L)}static fromHex($,L=!1){const{d:k,a:U}=t,q=r.BYTES;$=ri("pointHex",$,q),wh("zip215",L);const j=$.slice(),z=$[q-1];j[q-1]=z&-129;const V=Lg(j),G=L?o:r.ORDER;Tf("pointHex.y",V,rc,G);const B=c(V*V),W=c(B-$s),D=c(k*B-U);let{isValid:_,value:w}=u(W,D);if(!_)throw new Error("Point.fromHex: invalid y coordinate");const g=(w&$s)===$s,b=(z&128)!==0;if(!L&&w===rc&&b)throw new Error("Point.fromHex: x=0 and x_0=1");return b!==g&&(w=c(-w)),S.fromAffine({x:w,y:V})}static fromPrivateScalar($){return S.BASE.multiply($)}toBytes(){const{x:$,y:L}=this.toAffine(),k=sw(L,r.BYTES);return k[k.length-1]|=$&$s?128:0,k}toRawBytes(){return this.toBytes()}toHex(){return Kf(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}S.BASE=new S(t.Gx,t.Gy,$s,c(t.Gx*t.Gy)),S.ZERO=new S(rc,$s,$s,rc),S.Fp=r,S.Fn=n;const A=IR(S,n.BYTES*8);return S}function Cz(t,e){Cy(e,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r,hash:n}=e,{BASE:i,Fp:s,Fn:o}=t,c=o.ORDER,u=e.randomBytes||lR,h=e.adjustScalarBytes||(j=>j),f=e.domain||((j,z,V)=>{if(wh("phflag",V),z.length||V)throw new Error("Contexts/pre-hash are not supported");return j});function p(j){return o.create(j)}function E(j){return p(Lg(j))}function S(j){const z=s.BYTES;j=ri("private key",j,z);const V=ri("hashed private key",n(j),2*z),G=h(V.slice(0,z)),B=V.slice(z,2*z),W=E(G);return{head:G,prefix:B,scalar:W}}function A(j){const{head:z,prefix:V,scalar:G}=S(j),B=i.multiply(G),W=B.toBytes();return{head:z,prefix:V,scalar:G,point:B,pointBytes:W}}function I(j){return A(j).pointBytes}function $(j=Uint8Array.of(),...z){const V=sl(...z);return E(n(f(V,ri("context",j),!!r)))}function L(j,z,V={}){j=ri("message",j),r&&(j=r(j));const{prefix:G,scalar:B,pointBytes:W}=A(z),D=$(V.context,G,j),_=i.multiply(D).toBytes(),w=$(V.context,_,W,j),g=p(D+w*B);Tf("signature.s",g,rc,c);const b=s.BYTES,m=sl(_,sw(g,b));return ri("result",m,b*2)}const k=Az;function U(j,z,V,G=k){const{context:B,zip215:W}=G,D=s.BYTES;j=ri("signature",j,2*D),z=ri("message",z),V=ri("publicKey",V,D),W!==void 0&&wh("zip215",W),r&&(z=r(z));const _=Lg(j.slice(D,2*D));let w,g,b;try{w=t.fromHex(V,W),g=t.fromHex(j.slice(0,D),W),b=i.multiplyUnsafe(_)}catch{return!1}if(!W&&w.isSmallOrder())return!1;const m=$(B,g.toBytes(),w.toBytes(),z);return g.add(w.multiplyUnsafe(m)).subtract(b).clearCofactor().is0()}return i.precompute(8),{getPublicKey:I,sign:L,verify:U,utils:{getExtendedPublicKey:A,randomPrivateKey:()=>u(s.BYTES),precompute(j=8,z=t.BASE){return z.precompute(j,!1)}},Point:t}}function Tz(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=dp(e.n,t.nBitLength,!0),i={Fp:r,Fn:n,uvRatio:t.uvRatio},s={hash:t.hash,randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:i,eddsaOpts:s}}function Mz(t,e){return Object.assign({},e,{ExtendedPoint:e.Point,CURVE:t})}function Nz(t){const{CURVE:e,curveOpts:r,eddsaOpts:n}=Tz(t),i=xz(e,r),s=Cz(i,n);return Mz(t,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);const Oz=BigInt(1),tx=BigInt(2);BigInt(3);const Rz=BigInt(5),Dz=BigInt(8),aw={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Dz,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function $z(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=aw.p,c=t*t%s*t%s,u=Gn(c,tx,s)*c%s,h=Gn(u,Oz,s)*t%s,f=Gn(h,Rz,s)*h%s,p=Gn(f,e,s)*f%s,E=Gn(p,r,s)*p%s,S=Gn(E,n,s)*E%s,A=Gn(S,i,s)*S%s,I=Gn(A,i,s)*S%s,$=Gn(I,e,s)*f%s;return{pow_p_5_8:Gn($,tx,s)*t%s,b2:c}}function kz(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const rx=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Pz(t,e){const r=aw.p,n=ni(e*e*e,r),i=ni(n*n*e,r),s=$z(t*i).pow_p_5_8;let o=ni(t*n*s,r);const c=ni(e*o*o,r),u=o,h=ni(o*rx,r),f=c===t,p=c===ni(-t,r),E=c===ni(-t*rx,r);return f&&(o=u),(p||E)&&(o=h),pz(o,r)&&(o=ni(-o,r)),{isValid:f||p,value:o}}const Bz=dp(aw.p,void 0,!0),Lz={...aw,Fp:Bz,hash:oz,adjustScalarBytes:kz,uvRatio:Pz},fp=Nz(Lz);var Jb={exports:{}};const Uz={},jz=Object.freeze(Object.defineProperty({__proto__:null,default:Uz},Symbol.toStringTag,{value:"Module"})),G4=Dh(jz);var zz=Jb.exports,nx;function TR(){return nx||(nx=1,function(t){(function(e,r){function n(w,g){if(!w)throw new Error(g||"Assertion failed")}function i(w,g){w.super_=g;var b=function(){};b.prototype=g.prototype,w.prototype=new b,w.prototype.constructor=w}function s(w,g,b){if(s.isBN(w))return w;this.negative=0,this.words=null,this.length=0,this.red=null,w!==null&&((g==="le"||g==="be")&&(b=g,g=10),this._init(w||0,g||10,b||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=G4.Buffer}catch{}s.isBN=function(g){return g instanceof s?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===s.wordSize&&Array.isArray(g.words)},s.max=function(g,b){return g.cmp(b)>0?g:b},s.min=function(g,b){return g.cmp(b)<0?g:b},s.prototype._init=function(g,b,m){if(typeof g=="number")return this._initNumber(g,b,m);if(typeof g=="object")return this._initArray(g,b,m);b==="hex"&&(b=16),n(b===(b|0)&&b>=2&&b<=36),g=g.toString().replace(/\s+/g,"");var M=0;g[0]==="-"&&(M++,this.negative=1),M<g.length&&(b===16?this._parseHex(g,M,m):(this._parseBase(g,b,M),m==="le"&&this._initArray(this.toArray(),b,m)))},s.prototype._initNumber=function(g,b,m){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(n(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),b,m)},s.prototype._initArray=function(g,b,m){if(n(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R,C,v=0;if(m==="be")for(M=g.length-1,R=0;M>=0;M-=3)C=g[M]|g[M-1]<<8|g[M-2]<<16,this.words[R]|=C<<v&67108863,this.words[R+1]=C>>>26-v&67108863,v+=24,v>=26&&(v-=26,R++);else if(m==="le")for(M=0,R=0;M<g.length;M+=3)C=g[M]|g[M+1]<<8|g[M+2]<<16,this.words[R]|=C<<v&67108863,this.words[R+1]=C>>>26-v&67108863,v+=24,v>=26&&(v-=26,R++);return this._strip()};function c(w,g){var b=w.charCodeAt(g);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;n(!1,"Invalid character in "+w)}function u(w,g,b){var m=c(w,b);return b-1>=g&&(m|=c(w,b-1)<<4),m}s.prototype._parseHex=function(g,b,m){this.length=Math.ceil((g.length-b)/6),this.words=new Array(this.length);for(var M=0;M<this.length;M++)this.words[M]=0;var R=0,C=0,v;if(m==="be")for(M=g.length-1;M>=b;M-=2)v=u(g,b,M)<<R,this.words[C]|=v&67108863,R>=18?(R-=18,C+=1,this.words[C]|=v>>>26):R+=8;else{var O=g.length-b;for(M=O%2===0?b+1:b;M<g.length;M+=2)v=u(g,b,M)<<R,this.words[C]|=v&67108863,R>=18?(R-=18,C+=1,this.words[C]|=v>>>26):R+=8}this._strip()};function h(w,g,b,m){for(var M=0,R=0,C=Math.min(w.length,b),v=g;v<C;v++){var O=w.charCodeAt(v)-48;M*=m,O>=49?R=O-49+10:O>=17?R=O-17+10:R=O,n(O>=0&&R<m,"Invalid character"),M+=R}return M}s.prototype._parseBase=function(g,b,m){this.words=[0],this.length=1;for(var M=0,R=1;R<=67108863;R*=b)M++;M--,R=R/b|0;for(var C=g.length-m,v=C%M,O=Math.min(C,C-v)+m,x=0,N=m;N<O;N+=M)x=h(g,N,N+M,b),this.imuln(R),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x);if(v!==0){var H=1;for(x=h(g,N,g.length,b),N=0;N<v;N++)H*=b;this.imuln(H),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x)}this._strip()},s.prototype.copy=function(g){g.words=new Array(this.length);for(var b=0;b<this.length;b++)g.words[b]=this.words[b];g.length=this.length,g.negative=this.negative,g.red=this.red};function f(w,g){w.words=g.words,w.length=g.length,w.negative=g.negative,w.red=g.red}if(s.prototype._move=function(g){f(g,this)},s.prototype.clone=function(){var g=new s(null);return this.copy(g),g},s.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=p}catch{s.prototype.inspect=p}else s.prototype.inspect=p;function p(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var E=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(g,b){g=g||10,b=b|0||1;var m;if(g===16||g==="hex"){m="";for(var M=0,R=0,C=0;C<this.length;C++){var v=this.words[C],O=((v<<M|R)&16777215).toString(16);R=v>>>24-M&16777215,M+=2,M>=26&&(M-=26,C--),R!==0||C!==this.length-1?m=E[6-O.length]+O+m:m=O+m}for(R!==0&&(m=R.toString(16)+m);m.length%b!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(g===(g|0)&&g>=2&&g<=36){var x=S[g],N=A[g];m="";var H=this.clone();for(H.negative=0;!H.isZero();){var Y=H.modrn(N).toString(g);H=H.idivn(N),H.isZero()?m=Y+m:m=E[x-Y.length]+Y+m}for(this.isZero()&&(m="0"+m);m.length%b!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(g,b){return this.toArrayLike(o,g,b)}),s.prototype.toArray=function(g,b){return this.toArrayLike(Array,g,b)};var I=function(g,b){return g.allocUnsafe?g.allocUnsafe(b):new g(b)};s.prototype.toArrayLike=function(g,b,m){this._strip();var M=this.byteLength(),R=m||Math.max(1,M);n(M<=R,"byte array longer than desired length"),n(R>0,"Requested array length <= 0");var C=I(g,R),v=b==="le"?"LE":"BE";return this["_toArrayLike"+v](C,M),C},s.prototype._toArrayLikeLE=function(g,b){for(var m=0,M=0,R=0,C=0;R<this.length;R++){var v=this.words[R]<<C|M;g[m++]=v&255,m<g.length&&(g[m++]=v>>8&255),m<g.length&&(g[m++]=v>>16&255),C===6?(m<g.length&&(g[m++]=v>>24&255),M=0,C=0):(M=v>>>24,C+=2)}if(m<g.length)for(g[m++]=M;m<g.length;)g[m++]=0},s.prototype._toArrayLikeBE=function(g,b){for(var m=g.length-1,M=0,R=0,C=0;R<this.length;R++){var v=this.words[R]<<C|M;g[m--]=v&255,m>=0&&(g[m--]=v>>8&255),m>=0&&(g[m--]=v>>16&255),C===6?(m>=0&&(g[m--]=v>>24&255),M=0,C=0):(M=v>>>24,C+=2)}if(m>=0)for(g[m--]=M;m>=0;)g[m--]=0},Math.clz32?s.prototype._countBits=function(g){return 32-Math.clz32(g)}:s.prototype._countBits=function(g){var b=g,m=0;return b>=4096&&(m+=13,b>>>=13),b>=64&&(m+=7,b>>>=7),b>=8&&(m+=4,b>>>=4),b>=2&&(m+=2,b>>>=2),m+b},s.prototype._zeroBits=function(g){if(g===0)return 26;var b=g,m=0;return(b&8191)===0&&(m+=13,b>>>=13),(b&127)===0&&(m+=7,b>>>=7),(b&15)===0&&(m+=4,b>>>=4),(b&3)===0&&(m+=2,b>>>=2),(b&1)===0&&m++,m},s.prototype.bitLength=function(){var g=this.words[this.length-1],b=this._countBits(g);return(this.length-1)*26+b};function $(w){for(var g=new Array(w.bitLength()),b=0;b<g.length;b++){var m=b/26|0,M=b%26;g[b]=w.words[m]>>>M&1}return g}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,b=0;b<this.length;b++){var m=this._zeroBits(this.words[b]);if(g+=m,m!==26)break}return g},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},s.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var b=0;b<g.length;b++)this.words[b]=this.words[b]|g.words[b];return this._strip()},s.prototype.ior=function(g){return n((this.negative|g.negative)===0),this.iuor(g)},s.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},s.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},s.prototype.iuand=function(g){var b;this.length>g.length?b=g:b=this;for(var m=0;m<b.length;m++)this.words[m]=this.words[m]&g.words[m];return this.length=b.length,this._strip()},s.prototype.iand=function(g){return n((this.negative|g.negative)===0),this.iuand(g)},s.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},s.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},s.prototype.iuxor=function(g){var b,m;this.length>g.length?(b=this,m=g):(b=g,m=this);for(var M=0;M<m.length;M++)this.words[M]=b.words[M]^m.words[M];if(this!==b)for(;M<b.length;M++)this.words[M]=b.words[M];return this.length=b.length,this._strip()},s.prototype.ixor=function(g){return n((this.negative|g.negative)===0),this.iuxor(g)},s.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},s.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},s.prototype.inotn=function(g){n(typeof g=="number"&&g>=0);var b=Math.ceil(g/26)|0,m=g%26;this._expand(b),m>0&&b--;for(var M=0;M<b;M++)this.words[M]=~this.words[M]&67108863;return m>0&&(this.words[M]=~this.words[M]&67108863>>26-m),this._strip()},s.prototype.notn=function(g){return this.clone().inotn(g)},s.prototype.setn=function(g,b){n(typeof g=="number"&&g>=0);var m=g/26|0,M=g%26;return this._expand(m+1),b?this.words[m]=this.words[m]|1<<M:this.words[m]=this.words[m]&~(1<<M),this._strip()},s.prototype.iadd=function(g){var b;if(this.negative!==0&&g.negative===0)return this.negative=0,b=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,b=this.isub(g),g.negative=1,b._normSign();var m,M;this.length>g.length?(m=this,M=g):(m=g,M=this);for(var R=0,C=0;C<M.length;C++)b=(m.words[C]|0)+(M.words[C]|0)+R,this.words[C]=b&67108863,R=b>>>26;for(;R!==0&&C<m.length;C++)b=(m.words[C]|0)+R,this.words[C]=b&67108863,R=b>>>26;if(this.length=m.length,R!==0)this.words[this.length]=R,this.length++;else if(m!==this)for(;C<m.length;C++)this.words[C]=m.words[C];return this},s.prototype.add=function(g){var b;return g.negative!==0&&this.negative===0?(g.negative=0,b=this.sub(g),g.negative^=1,b):g.negative===0&&this.negative!==0?(this.negative=0,b=g.sub(this),this.negative=1,b):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},s.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var b=this.iadd(g);return g.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var m=this.cmp(g);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var M,R;m>0?(M=this,R=g):(M=g,R=this);for(var C=0,v=0;v<R.length;v++)b=(M.words[v]|0)-(R.words[v]|0)+C,C=b>>26,this.words[v]=b&67108863;for(;C!==0&&v<M.length;v++)b=(M.words[v]|0)+C,C=b>>26,this.words[v]=b&67108863;if(C===0&&v<M.length&&M!==this)for(;v<M.length;v++)this.words[v]=M.words[v];return this.length=Math.max(this.length,v),M!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(g){return this.clone().isub(g)};function L(w,g,b){b.negative=g.negative^w.negative;var m=w.length+g.length|0;b.length=m,m=m-1|0;var M=w.words[0]|0,R=g.words[0]|0,C=M*R,v=C&67108863,O=C/67108864|0;b.words[0]=v;for(var x=1;x<m;x++){for(var N=O>>>26,H=O&67108863,Y=Math.min(x,g.length-1),Q=Math.max(0,x-w.length+1);Q<=Y;Q++){var ee=x-Q|0;M=w.words[ee]|0,R=g.words[Q]|0,C=M*R+H,N+=C/67108864|0,H=C&67108863}b.words[x]=H|0,O=N|0}return O!==0?b.words[x]=O|0:b.length--,b._strip()}var k=function(g,b,m){var M=g.words,R=b.words,C=m.words,v=0,O,x,N,H=M[0]|0,Y=H&8191,Q=H>>>13,ee=M[1]|0,re=ee&8191,oe=ee>>>13,be=M[2]|0,Ce=be&8191,Se=be>>>13,xe=M[3]|0,ze=xe&8191,Be=xe>>>13,tt=M[4]|0,He=tt&8191,Je=tt>>>13,vt=M[5]|0,yt=vt&8191,et=vt>>>13,ht=M[6]|0,Mt=ht&8191,dt=ht>>>13,Ee=M[7]|0,Te=Ee&8191,Z=Ee>>>13,F=M[8]|0,K=F&8191,J=F>>>13,ie=M[9]|0,ce=ie&8191,de=ie>>>13,$e=R[0]|0,Ye=$e&8191,Fe=$e>>>13,We=R[1]|0,at=We&8191,ft=We>>>13,Ut=R[2]|0,Kt=Ut&8191,pt=Ut>>>13,Ft=R[3]|0,Vt=Ft&8191,gt=Ft>>>13,Et=R[4]|0,Rt=Et&8191,rt=Et>>>13,Nt=R[5]|0,St=Nt&8191,it=Nt>>>13,Ct=R[6]|0,Dt=Ct&8191,bt=Ct>>>13,tr=R[7]|0,Yt=tr&8191,It=tr>>>13,Xt=R[8]|0,ar=Xt&8191,xt=Xt>>>13,fr=R[9]|0,Zt=fr&8191,pr=fr>>>13;m.negative=g.negative^b.negative,m.length=19,O=Math.imul(Y,Ye),x=Math.imul(Y,Fe),x=x+Math.imul(Q,Ye)|0,N=Math.imul(Q,Fe);var Mr=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,O=Math.imul(re,Ye),x=Math.imul(re,Fe),x=x+Math.imul(oe,Ye)|0,N=Math.imul(oe,Fe),O=O+Math.imul(Y,at)|0,x=x+Math.imul(Y,ft)|0,x=x+Math.imul(Q,at)|0,N=N+Math.imul(Q,ft)|0;var Hi=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,O=Math.imul(Ce,Ye),x=Math.imul(Ce,Fe),x=x+Math.imul(Se,Ye)|0,N=Math.imul(Se,Fe),O=O+Math.imul(re,at)|0,x=x+Math.imul(re,ft)|0,x=x+Math.imul(oe,at)|0,N=N+Math.imul(oe,ft)|0,O=O+Math.imul(Y,Kt)|0,x=x+Math.imul(Y,pt)|0,x=x+Math.imul(Q,Kt)|0,N=N+Math.imul(Q,pt)|0;var us=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(us>>>26)|0,us&=67108863,O=Math.imul(ze,Ye),x=Math.imul(ze,Fe),x=x+Math.imul(Be,Ye)|0,N=Math.imul(Be,Fe),O=O+Math.imul(Ce,at)|0,x=x+Math.imul(Ce,ft)|0,x=x+Math.imul(Se,at)|0,N=N+Math.imul(Se,ft)|0,O=O+Math.imul(re,Kt)|0,x=x+Math.imul(re,pt)|0,x=x+Math.imul(oe,Kt)|0,N=N+Math.imul(oe,pt)|0,O=O+Math.imul(Y,Vt)|0,x=x+Math.imul(Y,gt)|0,x=x+Math.imul(Q,Vt)|0,N=N+Math.imul(Q,gt)|0;var oi=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(oi>>>26)|0,oi&=67108863,O=Math.imul(He,Ye),x=Math.imul(He,Fe),x=x+Math.imul(Je,Ye)|0,N=Math.imul(Je,Fe),O=O+Math.imul(ze,at)|0,x=x+Math.imul(ze,ft)|0,x=x+Math.imul(Be,at)|0,N=N+Math.imul(Be,ft)|0,O=O+Math.imul(Ce,Kt)|0,x=x+Math.imul(Ce,pt)|0,x=x+Math.imul(Se,Kt)|0,N=N+Math.imul(Se,pt)|0,O=O+Math.imul(re,Vt)|0,x=x+Math.imul(re,gt)|0,x=x+Math.imul(oe,Vt)|0,N=N+Math.imul(oe,gt)|0,O=O+Math.imul(Y,Rt)|0,x=x+Math.imul(Y,rt)|0,x=x+Math.imul(Q,Rt)|0,N=N+Math.imul(Q,rt)|0;var Mn=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,O=Math.imul(yt,Ye),x=Math.imul(yt,Fe),x=x+Math.imul(et,Ye)|0,N=Math.imul(et,Fe),O=O+Math.imul(He,at)|0,x=x+Math.imul(He,ft)|0,x=x+Math.imul(Je,at)|0,N=N+Math.imul(Je,ft)|0,O=O+Math.imul(ze,Kt)|0,x=x+Math.imul(ze,pt)|0,x=x+Math.imul(Be,Kt)|0,N=N+Math.imul(Be,pt)|0,O=O+Math.imul(Ce,Vt)|0,x=x+Math.imul(Ce,gt)|0,x=x+Math.imul(Se,Vt)|0,N=N+Math.imul(Se,gt)|0,O=O+Math.imul(re,Rt)|0,x=x+Math.imul(re,rt)|0,x=x+Math.imul(oe,Rt)|0,N=N+Math.imul(oe,rt)|0,O=O+Math.imul(Y,St)|0,x=x+Math.imul(Y,it)|0,x=x+Math.imul(Q,St)|0,N=N+Math.imul(Q,it)|0;var qs=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(qs>>>26)|0,qs&=67108863,O=Math.imul(Mt,Ye),x=Math.imul(Mt,Fe),x=x+Math.imul(dt,Ye)|0,N=Math.imul(dt,Fe),O=O+Math.imul(yt,at)|0,x=x+Math.imul(yt,ft)|0,x=x+Math.imul(et,at)|0,N=N+Math.imul(et,ft)|0,O=O+Math.imul(He,Kt)|0,x=x+Math.imul(He,pt)|0,x=x+Math.imul(Je,Kt)|0,N=N+Math.imul(Je,pt)|0,O=O+Math.imul(ze,Vt)|0,x=x+Math.imul(ze,gt)|0,x=x+Math.imul(Be,Vt)|0,N=N+Math.imul(Be,gt)|0,O=O+Math.imul(Ce,Rt)|0,x=x+Math.imul(Ce,rt)|0,x=x+Math.imul(Se,Rt)|0,N=N+Math.imul(Se,rt)|0,O=O+Math.imul(re,St)|0,x=x+Math.imul(re,it)|0,x=x+Math.imul(oe,St)|0,N=N+Math.imul(oe,it)|0,O=O+Math.imul(Y,Dt)|0,x=x+Math.imul(Y,bt)|0,x=x+Math.imul(Q,Dt)|0,N=N+Math.imul(Q,bt)|0;var Ts=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,O=Math.imul(Te,Ye),x=Math.imul(Te,Fe),x=x+Math.imul(Z,Ye)|0,N=Math.imul(Z,Fe),O=O+Math.imul(Mt,at)|0,x=x+Math.imul(Mt,ft)|0,x=x+Math.imul(dt,at)|0,N=N+Math.imul(dt,ft)|0,O=O+Math.imul(yt,Kt)|0,x=x+Math.imul(yt,pt)|0,x=x+Math.imul(et,Kt)|0,N=N+Math.imul(et,pt)|0,O=O+Math.imul(He,Vt)|0,x=x+Math.imul(He,gt)|0,x=x+Math.imul(Je,Vt)|0,N=N+Math.imul(Je,gt)|0,O=O+Math.imul(ze,Rt)|0,x=x+Math.imul(ze,rt)|0,x=x+Math.imul(Be,Rt)|0,N=N+Math.imul(Be,rt)|0,O=O+Math.imul(Ce,St)|0,x=x+Math.imul(Ce,it)|0,x=x+Math.imul(Se,St)|0,N=N+Math.imul(Se,it)|0,O=O+Math.imul(re,Dt)|0,x=x+Math.imul(re,bt)|0,x=x+Math.imul(oe,Dt)|0,N=N+Math.imul(oe,bt)|0,O=O+Math.imul(Y,Yt)|0,x=x+Math.imul(Y,It)|0,x=x+Math.imul(Q,Yt)|0,N=N+Math.imul(Q,It)|0;var Fs=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,O=Math.imul(K,Ye),x=Math.imul(K,Fe),x=x+Math.imul(J,Ye)|0,N=Math.imul(J,Fe),O=O+Math.imul(Te,at)|0,x=x+Math.imul(Te,ft)|0,x=x+Math.imul(Z,at)|0,N=N+Math.imul(Z,ft)|0,O=O+Math.imul(Mt,Kt)|0,x=x+Math.imul(Mt,pt)|0,x=x+Math.imul(dt,Kt)|0,N=N+Math.imul(dt,pt)|0,O=O+Math.imul(yt,Vt)|0,x=x+Math.imul(yt,gt)|0,x=x+Math.imul(et,Vt)|0,N=N+Math.imul(et,gt)|0,O=O+Math.imul(He,Rt)|0,x=x+Math.imul(He,rt)|0,x=x+Math.imul(Je,Rt)|0,N=N+Math.imul(Je,rt)|0,O=O+Math.imul(ze,St)|0,x=x+Math.imul(ze,it)|0,x=x+Math.imul(Be,St)|0,N=N+Math.imul(Be,it)|0,O=O+Math.imul(Ce,Dt)|0,x=x+Math.imul(Ce,bt)|0,x=x+Math.imul(Se,Dt)|0,N=N+Math.imul(Se,bt)|0,O=O+Math.imul(re,Yt)|0,x=x+Math.imul(re,It)|0,x=x+Math.imul(oe,Yt)|0,N=N+Math.imul(oe,It)|0,O=O+Math.imul(Y,ar)|0,x=x+Math.imul(Y,xt)|0,x=x+Math.imul(Q,ar)|0,N=N+Math.imul(Q,xt)|0;var go=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(go>>>26)|0,go&=67108863,O=Math.imul(ce,Ye),x=Math.imul(ce,Fe),x=x+Math.imul(de,Ye)|0,N=Math.imul(de,Fe),O=O+Math.imul(K,at)|0,x=x+Math.imul(K,ft)|0,x=x+Math.imul(J,at)|0,N=N+Math.imul(J,ft)|0,O=O+Math.imul(Te,Kt)|0,x=x+Math.imul(Te,pt)|0,x=x+Math.imul(Z,Kt)|0,N=N+Math.imul(Z,pt)|0,O=O+Math.imul(Mt,Vt)|0,x=x+Math.imul(Mt,gt)|0,x=x+Math.imul(dt,Vt)|0,N=N+Math.imul(dt,gt)|0,O=O+Math.imul(yt,Rt)|0,x=x+Math.imul(yt,rt)|0,x=x+Math.imul(et,Rt)|0,N=N+Math.imul(et,rt)|0,O=O+Math.imul(He,St)|0,x=x+Math.imul(He,it)|0,x=x+Math.imul(Je,St)|0,N=N+Math.imul(Je,it)|0,O=O+Math.imul(ze,Dt)|0,x=x+Math.imul(ze,bt)|0,x=x+Math.imul(Be,Dt)|0,N=N+Math.imul(Be,bt)|0,O=O+Math.imul(Ce,Yt)|0,x=x+Math.imul(Ce,It)|0,x=x+Math.imul(Se,Yt)|0,N=N+Math.imul(Se,It)|0,O=O+Math.imul(re,ar)|0,x=x+Math.imul(re,xt)|0,x=x+Math.imul(oe,ar)|0,N=N+Math.imul(oe,xt)|0,O=O+Math.imul(Y,Zt)|0,x=x+Math.imul(Y,pr)|0,x=x+Math.imul(Q,Zt)|0,N=N+Math.imul(Q,pr)|0;var gi=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(gi>>>26)|0,gi&=67108863,O=Math.imul(ce,at),x=Math.imul(ce,ft),x=x+Math.imul(de,at)|0,N=Math.imul(de,ft),O=O+Math.imul(K,Kt)|0,x=x+Math.imul(K,pt)|0,x=x+Math.imul(J,Kt)|0,N=N+Math.imul(J,pt)|0,O=O+Math.imul(Te,Vt)|0,x=x+Math.imul(Te,gt)|0,x=x+Math.imul(Z,Vt)|0,N=N+Math.imul(Z,gt)|0,O=O+Math.imul(Mt,Rt)|0,x=x+Math.imul(Mt,rt)|0,x=x+Math.imul(dt,Rt)|0,N=N+Math.imul(dt,rt)|0,O=O+Math.imul(yt,St)|0,x=x+Math.imul(yt,it)|0,x=x+Math.imul(et,St)|0,N=N+Math.imul(et,it)|0,O=O+Math.imul(He,Dt)|0,x=x+Math.imul(He,bt)|0,x=x+Math.imul(Je,Dt)|0,N=N+Math.imul(Je,bt)|0,O=O+Math.imul(ze,Yt)|0,x=x+Math.imul(ze,It)|0,x=x+Math.imul(Be,Yt)|0,N=N+Math.imul(Be,It)|0,O=O+Math.imul(Ce,ar)|0,x=x+Math.imul(Ce,xt)|0,x=x+Math.imul(Se,ar)|0,N=N+Math.imul(Se,xt)|0,O=O+Math.imul(re,Zt)|0,x=x+Math.imul(re,pr)|0,x=x+Math.imul(oe,Zt)|0,N=N+Math.imul(oe,pr)|0;var ai=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(ai>>>26)|0,ai&=67108863,O=Math.imul(ce,Kt),x=Math.imul(ce,pt),x=x+Math.imul(de,Kt)|0,N=Math.imul(de,pt),O=O+Math.imul(K,Vt)|0,x=x+Math.imul(K,gt)|0,x=x+Math.imul(J,Vt)|0,N=N+Math.imul(J,gt)|0,O=O+Math.imul(Te,Rt)|0,x=x+Math.imul(Te,rt)|0,x=x+Math.imul(Z,Rt)|0,N=N+Math.imul(Z,rt)|0,O=O+Math.imul(Mt,St)|0,x=x+Math.imul(Mt,it)|0,x=x+Math.imul(dt,St)|0,N=N+Math.imul(dt,it)|0,O=O+Math.imul(yt,Dt)|0,x=x+Math.imul(yt,bt)|0,x=x+Math.imul(et,Dt)|0,N=N+Math.imul(et,bt)|0,O=O+Math.imul(He,Yt)|0,x=x+Math.imul(He,It)|0,x=x+Math.imul(Je,Yt)|0,N=N+Math.imul(Je,It)|0,O=O+Math.imul(ze,ar)|0,x=x+Math.imul(ze,xt)|0,x=x+Math.imul(Be,ar)|0,N=N+Math.imul(Be,xt)|0,O=O+Math.imul(Ce,Zt)|0,x=x+Math.imul(Ce,pr)|0,x=x+Math.imul(Se,Zt)|0,N=N+Math.imul(Se,pr)|0;var Qn=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,O=Math.imul(ce,Vt),x=Math.imul(ce,gt),x=x+Math.imul(de,Vt)|0,N=Math.imul(de,gt),O=O+Math.imul(K,Rt)|0,x=x+Math.imul(K,rt)|0,x=x+Math.imul(J,Rt)|0,N=N+Math.imul(J,rt)|0,O=O+Math.imul(Te,St)|0,x=x+Math.imul(Te,it)|0,x=x+Math.imul(Z,St)|0,N=N+Math.imul(Z,it)|0,O=O+Math.imul(Mt,Dt)|0,x=x+Math.imul(Mt,bt)|0,x=x+Math.imul(dt,Dt)|0,N=N+Math.imul(dt,bt)|0,O=O+Math.imul(yt,Yt)|0,x=x+Math.imul(yt,It)|0,x=x+Math.imul(et,Yt)|0,N=N+Math.imul(et,It)|0,O=O+Math.imul(He,ar)|0,x=x+Math.imul(He,xt)|0,x=x+Math.imul(Je,ar)|0,N=N+Math.imul(Je,xt)|0,O=O+Math.imul(ze,Zt)|0,x=x+Math.imul(ze,pr)|0,x=x+Math.imul(Be,Zt)|0,N=N+Math.imul(Be,pr)|0;var Ms=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,O=Math.imul(ce,Rt),x=Math.imul(ce,rt),x=x+Math.imul(de,Rt)|0,N=Math.imul(de,rt),O=O+Math.imul(K,St)|0,x=x+Math.imul(K,it)|0,x=x+Math.imul(J,St)|0,N=N+Math.imul(J,it)|0,O=O+Math.imul(Te,Dt)|0,x=x+Math.imul(Te,bt)|0,x=x+Math.imul(Z,Dt)|0,N=N+Math.imul(Z,bt)|0,O=O+Math.imul(Mt,Yt)|0,x=x+Math.imul(Mt,It)|0,x=x+Math.imul(dt,Yt)|0,N=N+Math.imul(dt,It)|0,O=O+Math.imul(yt,ar)|0,x=x+Math.imul(yt,xt)|0,x=x+Math.imul(et,ar)|0,N=N+Math.imul(et,xt)|0,O=O+Math.imul(He,Zt)|0,x=x+Math.imul(He,pr)|0,x=x+Math.imul(Je,Zt)|0,N=N+Math.imul(Je,pr)|0;var Xn=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,O=Math.imul(ce,St),x=Math.imul(ce,it),x=x+Math.imul(de,St)|0,N=Math.imul(de,it),O=O+Math.imul(K,Dt)|0,x=x+Math.imul(K,bt)|0,x=x+Math.imul(J,Dt)|0,N=N+Math.imul(J,bt)|0,O=O+Math.imul(Te,Yt)|0,x=x+Math.imul(Te,It)|0,x=x+Math.imul(Z,Yt)|0,N=N+Math.imul(Z,It)|0,O=O+Math.imul(Mt,ar)|0,x=x+Math.imul(Mt,xt)|0,x=x+Math.imul(dt,ar)|0,N=N+Math.imul(dt,xt)|0,O=O+Math.imul(yt,Zt)|0,x=x+Math.imul(yt,pr)|0,x=x+Math.imul(et,Zt)|0,N=N+Math.imul(et,pr)|0;var xi=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(xi>>>26)|0,xi&=67108863,O=Math.imul(ce,Dt),x=Math.imul(ce,bt),x=x+Math.imul(de,Dt)|0,N=Math.imul(de,bt),O=O+Math.imul(K,Yt)|0,x=x+Math.imul(K,It)|0,x=x+Math.imul(J,Yt)|0,N=N+Math.imul(J,It)|0,O=O+Math.imul(Te,ar)|0,x=x+Math.imul(Te,xt)|0,x=x+Math.imul(Z,ar)|0,N=N+Math.imul(Z,xt)|0,O=O+Math.imul(Mt,Zt)|0,x=x+Math.imul(Mt,pr)|0,x=x+Math.imul(dt,Zt)|0,N=N+Math.imul(dt,pr)|0;var Ns=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,O=Math.imul(ce,Yt),x=Math.imul(ce,It),x=x+Math.imul(de,Yt)|0,N=Math.imul(de,It),O=O+Math.imul(K,ar)|0,x=x+Math.imul(K,xt)|0,x=x+Math.imul(J,ar)|0,N=N+Math.imul(J,xt)|0,O=O+Math.imul(Te,Zt)|0,x=x+Math.imul(Te,pr)|0,x=x+Math.imul(Z,Zt)|0,N=N+Math.imul(Z,pr)|0;var Os=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(Os>>>26)|0,Os&=67108863,O=Math.imul(ce,ar),x=Math.imul(ce,xt),x=x+Math.imul(de,ar)|0,N=Math.imul(de,xt),O=O+Math.imul(K,Zt)|0,x=x+Math.imul(K,pr)|0,x=x+Math.imul(J,Zt)|0,N=N+Math.imul(J,pr)|0;var vc=(v+O|0)+((x&8191)<<13)|0;v=(N+(x>>>13)|0)+(vc>>>26)|0,vc&=67108863,O=Math.imul(ce,Zt),x=Math.imul(ce,pr),x=x+Math.imul(de,Zt)|0,N=Math.imul(de,pr);var Da=(v+O|0)+((x&8191)<<13)|0;return v=(N+(x>>>13)|0)+(Da>>>26)|0,Da&=67108863,C[0]=Mr,C[1]=Hi,C[2]=us,C[3]=oi,C[4]=Mn,C[5]=qs,C[6]=Ts,C[7]=Fs,C[8]=go,C[9]=gi,C[10]=ai,C[11]=Qn,C[12]=Ms,C[13]=Xn,C[14]=xi,C[15]=Ns,C[16]=Os,C[17]=vc,C[18]=Da,v!==0&&(C[19]=v,m.length++),m};Math.imul||(k=L);function U(w,g,b){b.negative=g.negative^w.negative,b.length=w.length+g.length;for(var m=0,M=0,R=0;R<b.length-1;R++){var C=M;M=0;for(var v=m&67108863,O=Math.min(R,g.length-1),x=Math.max(0,R-w.length+1);x<=O;x++){var N=R-x,H=w.words[N]|0,Y=g.words[x]|0,Q=H*Y,ee=Q&67108863;C=C+(Q/67108864|0)|0,ee=ee+v|0,v=ee&67108863,C=C+(ee>>>26)|0,M+=C>>>26,C&=67108863}b.words[R]=v,m=C,C=M}return m!==0?b.words[R]=m:b.length--,b._strip()}function q(w,g,b){return U(w,g,b)}s.prototype.mulTo=function(g,b){var m,M=this.length+g.length;return this.length===10&&g.length===10?m=k(this,g,b):M<63?m=L(this,g,b):M<1024?m=U(this,g,b):m=q(this,g,b),m},s.prototype.mul=function(g){var b=new s(null);return b.words=new Array(this.length+g.length),this.mulTo(g,b)},s.prototype.mulf=function(g){var b=new s(null);return b.words=new Array(this.length+g.length),q(this,g,b)},s.prototype.imul=function(g){return this.clone().mulTo(g,this)},s.prototype.imuln=function(g){var b=g<0;b&&(g=-g),n(typeof g=="number"),n(g<67108864);for(var m=0,M=0;M<this.length;M++){var R=(this.words[M]|0)*g,C=(R&67108863)+(m&67108863);m>>=26,m+=R/67108864|0,m+=C>>>26,this.words[M]=C&67108863}return m!==0&&(this.words[M]=m,this.length++),this.length=g===0?1:this.length,b?this.ineg():this},s.prototype.muln=function(g){return this.clone().imuln(g)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(g){var b=$(g);if(b.length===0)return new s(1);for(var m=this,M=0;M<b.length&&b[M]===0;M++,m=m.sqr());if(++M<b.length)for(var R=m.sqr();M<b.length;M++,R=R.sqr())b[M]!==0&&(m=m.mul(R));return m},s.prototype.iushln=function(g){n(typeof g=="number"&&g>=0);var b=g%26,m=(g-b)/26,M=67108863>>>26-b<<26-b,R;if(b!==0){var C=0;for(R=0;R<this.length;R++){var v=this.words[R]&M,O=(this.words[R]|0)-v<<b;this.words[R]=O|C,C=v>>>26-b}C&&(this.words[R]=C,this.length++)}if(m!==0){for(R=this.length-1;R>=0;R--)this.words[R+m]=this.words[R];for(R=0;R<m;R++)this.words[R]=0;this.length+=m}return this._strip()},s.prototype.ishln=function(g){return n(this.negative===0),this.iushln(g)},s.prototype.iushrn=function(g,b,m){n(typeof g=="number"&&g>=0);var M;b?M=(b-b%26)/26:M=0;var R=g%26,C=Math.min((g-R)/26,this.length),v=67108863^67108863>>>R<<R,O=m;if(M-=C,M=Math.max(0,M),O){for(var x=0;x<C;x++)O.words[x]=this.words[x];O.length=C}if(C!==0)if(this.length>C)for(this.length-=C,x=0;x<this.length;x++)this.words[x]=this.words[x+C];else this.words[0]=0,this.length=1;var N=0;for(x=this.length-1;x>=0&&(N!==0||x>=M);x--){var H=this.words[x]|0;this.words[x]=N<<26-R|H>>>R,N=H&v}return O&&N!==0&&(O.words[O.length++]=N),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(g,b,m){return n(this.negative===0),this.iushrn(g,b,m)},s.prototype.shln=function(g){return this.clone().ishln(g)},s.prototype.ushln=function(g){return this.clone().iushln(g)},s.prototype.shrn=function(g){return this.clone().ishrn(g)},s.prototype.ushrn=function(g){return this.clone().iushrn(g)},s.prototype.testn=function(g){n(typeof g=="number"&&g>=0);var b=g%26,m=(g-b)/26,M=1<<b;if(this.length<=m)return!1;var R=this.words[m];return!!(R&M)},s.prototype.imaskn=function(g){n(typeof g=="number"&&g>=0);var b=g%26,m=(g-b)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(b!==0&&m++,this.length=Math.min(m,this.length),b!==0){var M=67108863^67108863>>>b<<b;this.words[this.length-1]&=M}return this._strip()},s.prototype.maskn=function(g){return this.clone().imaskn(g)},s.prototype.iaddn=function(g){return n(typeof g=="number"),n(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<=g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},s.prototype._iaddn=function(g){this.words[0]+=g;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(g){if(n(typeof g=="number"),n(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},s.prototype.addn=function(g){return this.clone().iaddn(g)},s.prototype.subn=function(g){return this.clone().isubn(g)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(g,b,m){var M=g.length+m,R;this._expand(M);var C,v=0;for(R=0;R<g.length;R++){C=(this.words[R+m]|0)+v;var O=(g.words[R]|0)*b;C-=O&67108863,v=(C>>26)-(O/67108864|0),this.words[R+m]=C&67108863}for(;R<this.length-m;R++)C=(this.words[R+m]|0)+v,v=C>>26,this.words[R+m]=C&67108863;if(v===0)return this._strip();for(n(v===-1),v=0,R=0;R<this.length;R++)C=-(this.words[R]|0)+v,v=C>>26,this.words[R]=C&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(g,b){var m=this.length-g.length,M=this.clone(),R=g,C=R.words[R.length-1]|0,v=this._countBits(C);m=26-v,m!==0&&(R=R.ushln(m),M.iushln(m),C=R.words[R.length-1]|0);var O=M.length-R.length,x;if(b!=="mod"){x=new s(null),x.length=O+1,x.words=new Array(x.length);for(var N=0;N<x.length;N++)x.words[N]=0}var H=M.clone()._ishlnsubmul(R,1,O);H.negative===0&&(M=H,x&&(x.words[O]=1));for(var Y=O-1;Y>=0;Y--){var Q=(M.words[R.length+Y]|0)*67108864+(M.words[R.length+Y-1]|0);for(Q=Math.min(Q/C|0,67108863),M._ishlnsubmul(R,Q,Y);M.negative!==0;)Q--,M.negative=0,M._ishlnsubmul(R,1,Y),M.isZero()||(M.negative^=1);x&&(x.words[Y]=Q)}return x&&x._strip(),M._strip(),b!=="div"&&m!==0&&M.iushrn(m),{div:x||null,mod:M}},s.prototype.divmod=function(g,b,m){if(n(!g.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var M,R,C;return this.negative!==0&&g.negative===0?(C=this.neg().divmod(g,b),b!=="mod"&&(M=C.div.neg()),b!=="div"&&(R=C.mod.neg(),m&&R.negative!==0&&R.iadd(g)),{div:M,mod:R}):this.negative===0&&g.negative!==0?(C=this.divmod(g.neg(),b),b!=="mod"&&(M=C.div.neg()),{div:M,mod:C.mod}):(this.negative&g.negative)!==0?(C=this.neg().divmod(g.neg(),b),b!=="div"&&(R=C.mod.neg(),m&&R.negative!==0&&R.isub(g)),{div:C.div,mod:R}):g.length>this.length||this.cmp(g)<0?{div:new s(0),mod:this}:g.length===1?b==="div"?{div:this.divn(g.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modrn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new s(this.modrn(g.words[0]))}:this._wordDiv(g,b)},s.prototype.div=function(g){return this.divmod(g,"div",!1).div},s.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},s.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},s.prototype.divRound=function(g){var b=this.divmod(g);if(b.mod.isZero())return b.div;var m=b.div.negative!==0?b.mod.isub(g):b.mod,M=g.ushrn(1),R=g.andln(1),C=m.cmp(M);return C<0||R===1&&C===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modrn=function(g){var b=g<0;b&&(g=-g),n(g<=67108863);for(var m=(1<<26)%g,M=0,R=this.length-1;R>=0;R--)M=(m*M+(this.words[R]|0))%g;return b?-M:M},s.prototype.modn=function(g){return this.modrn(g)},s.prototype.idivn=function(g){var b=g<0;b&&(g=-g),n(g<=67108863);for(var m=0,M=this.length-1;M>=0;M--){var R=(this.words[M]|0)+m*67108864;this.words[M]=R/g|0,m=R%g}return this._strip(),b?this.ineg():this},s.prototype.divn=function(g){return this.clone().idivn(g)},s.prototype.egcd=function(g){n(g.negative===0),n(!g.isZero());var b=this,m=g.clone();b.negative!==0?b=b.umod(g):b=b.clone();for(var M=new s(1),R=new s(0),C=new s(0),v=new s(1),O=0;b.isEven()&&m.isEven();)b.iushrn(1),m.iushrn(1),++O;for(var x=m.clone(),N=b.clone();!b.isZero();){for(var H=0,Y=1;(b.words[0]&Y)===0&&H<26;++H,Y<<=1);if(H>0)for(b.iushrn(H);H-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(x),R.isub(N)),M.iushrn(1),R.iushrn(1);for(var Q=0,ee=1;(m.words[0]&ee)===0&&Q<26;++Q,ee<<=1);if(Q>0)for(m.iushrn(Q);Q-- >0;)(C.isOdd()||v.isOdd())&&(C.iadd(x),v.isub(N)),C.iushrn(1),v.iushrn(1);b.cmp(m)>=0?(b.isub(m),M.isub(C),R.isub(v)):(m.isub(b),C.isub(M),v.isub(R))}return{a:C,b:v,gcd:m.iushln(O)}},s.prototype._invmp=function(g){n(g.negative===0),n(!g.isZero());var b=this,m=g.clone();b.negative!==0?b=b.umod(g):b=b.clone();for(var M=new s(1),R=new s(0),C=m.clone();b.cmpn(1)>0&&m.cmpn(1)>0;){for(var v=0,O=1;(b.words[0]&O)===0&&v<26;++v,O<<=1);if(v>0)for(b.iushrn(v);v-- >0;)M.isOdd()&&M.iadd(C),M.iushrn(1);for(var x=0,N=1;(m.words[0]&N)===0&&x<26;++x,N<<=1);if(x>0)for(m.iushrn(x);x-- >0;)R.isOdd()&&R.iadd(C),R.iushrn(1);b.cmp(m)>=0?(b.isub(m),M.isub(R)):(m.isub(b),R.isub(M))}var H;return b.cmpn(1)===0?H=M:H=R,H.cmpn(0)<0&&H.iadd(g),H},s.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var b=this.clone(),m=g.clone();b.negative=0,m.negative=0;for(var M=0;b.isEven()&&m.isEven();M++)b.iushrn(1),m.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;m.isEven();)m.iushrn(1);var R=b.cmp(m);if(R<0){var C=b;b=m,m=C}else if(R===0||m.cmpn(1)===0)break;b.isub(m)}while(!0);return m.iushln(M)},s.prototype.invm=function(g){return this.egcd(g).a.umod(g)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(g){return this.words[0]&g},s.prototype.bincn=function(g){n(typeof g=="number");var b=g%26,m=(g-b)/26,M=1<<b;if(this.length<=m)return this._expand(m+1),this.words[m]|=M,this;for(var R=M,C=m;R!==0&&C<this.length;C++){var v=this.words[C]|0;v+=R,R=v>>>26,v&=67108863,this.words[C]=v}return R!==0&&(this.words[C]=R,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(g){var b=g<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var m;if(this.length>1)m=1;else{b&&(g=-g),n(g<=67108863,"Number is too big");var M=this.words[0]|0;m=M===g?0:M<g?-1:1}return this.negative!==0?-m|0:m},s.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var b=this.ucmp(g);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var b=0,m=this.length-1;m>=0;m--){var M=this.words[m]|0,R=g.words[m]|0;if(M!==R){M<R?b=-1:M>R&&(b=1);break}}return b},s.prototype.gtn=function(g){return this.cmpn(g)===1},s.prototype.gt=function(g){return this.cmp(g)===1},s.prototype.gten=function(g){return this.cmpn(g)>=0},s.prototype.gte=function(g){return this.cmp(g)>=0},s.prototype.ltn=function(g){return this.cmpn(g)===-1},s.prototype.lt=function(g){return this.cmp(g)===-1},s.prototype.lten=function(g){return this.cmpn(g)<=0},s.prototype.lte=function(g){return this.cmp(g)<=0},s.prototype.eqn=function(g){return this.cmpn(g)===0},s.prototype.eq=function(g){return this.cmp(g)===0},s.red=function(g){return new D(g)},s.prototype.toRed=function(g){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(g){return this.red=g,this},s.prototype.forceRed=function(g){return n(!this.red,"Already a number in reduction context"),this._forceRed(g)},s.prototype.redAdd=function(g){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},s.prototype.redIAdd=function(g){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},s.prototype.redSub=function(g){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},s.prototype.redISub=function(g){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},s.prototype.redShl=function(g){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},s.prototype.redMul=function(g){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},s.prototype.redIMul=function(g){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(g){return n(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var j={k256:null,p224:null,p192:null,p25519:null};function z(w,g){this.name=w,this.p=new s(g,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var g=new s(null);return g.words=new Array(Math.ceil(this.n/13)),g},z.prototype.ireduce=function(g){var b=g,m;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),m=b.bitLength();while(m>this.n);var M=m<this.n?-1:b.ucmp(this.p);return M===0?(b.words[0]=0,b.length=1):M>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},z.prototype.split=function(g,b){g.iushrn(this.n,0,b)},z.prototype.imulK=function(g){return g.imul(this.k)};function V(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(V,z),V.prototype.split=function(g,b){for(var m=4194303,M=Math.min(g.length,9),R=0;R<M;R++)b.words[R]=g.words[R];if(b.length=M,g.length<=9){g.words[0]=0,g.length=1;return}var C=g.words[9];for(b.words[b.length++]=C&m,R=10;R<g.length;R++){var v=g.words[R]|0;g.words[R-10]=(v&m)<<4|C>>>22,C=v}C>>>=22,g.words[R-10]=C,C===0&&g.length>10?g.length-=10:g.length-=9},V.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var b=0,m=0;m<g.length;m++){var M=g.words[m]|0;b+=M*977,g.words[m]=b&67108863,b=M*64+(b/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function G(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(G,z);function B(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,z);function W(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(W,z),W.prototype.imulK=function(g){for(var b=0,m=0;m<g.length;m++){var M=(g.words[m]|0)*19+b,R=M&67108863;M>>>=26,g.words[m]=R,b=M}return b!==0&&(g.words[g.length++]=b),g},s._prime=function(g){if(j[g])return j[g];var b;if(g==="k256")b=new V;else if(g==="p224")b=new G;else if(g==="p192")b=new B;else if(g==="p25519")b=new W;else throw new Error("Unknown prime "+g);return j[g]=b,b};function D(w){if(typeof w=="string"){var g=s._prime(w);this.m=g.p,this.prime=g}else n(w.gtn(1),"modulus must be greater than 1"),this.m=w,this.prime=null}D.prototype._verify1=function(g){n(g.negative===0,"red works only with positives"),n(g.red,"red works only with red numbers")},D.prototype._verify2=function(g,b){n((g.negative|b.negative)===0,"red works only with positives"),n(g.red&&g.red===b.red,"red works only with red numbers")},D.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):(f(g,g.umod(this.m)._forceRed(this)),g)},D.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},D.prototype.add=function(g,b){this._verify2(g,b);var m=g.add(b);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},D.prototype.iadd=function(g,b){this._verify2(g,b);var m=g.iadd(b);return m.cmp(this.m)>=0&&m.isub(this.m),m},D.prototype.sub=function(g,b){this._verify2(g,b);var m=g.sub(b);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},D.prototype.isub=function(g,b){this._verify2(g,b);var m=g.isub(b);return m.cmpn(0)<0&&m.iadd(this.m),m},D.prototype.shl=function(g,b){return this._verify1(g),this.imod(g.ushln(b))},D.prototype.imul=function(g,b){return this._verify2(g,b),this.imod(g.imul(b))},D.prototype.mul=function(g,b){return this._verify2(g,b),this.imod(g.mul(b))},D.prototype.isqr=function(g){return this.imul(g,g.clone())},D.prototype.sqr=function(g){return this.mul(g,g)},D.prototype.sqrt=function(g){if(g.isZero())return g.clone();var b=this.m.andln(3);if(n(b%2===1),b===3){var m=this.m.add(new s(1)).iushrn(2);return this.pow(g,m)}for(var M=this.m.subn(1),R=0;!M.isZero()&&M.andln(1)===0;)R++,M.iushrn(1);n(!M.isZero());var C=new s(1).toRed(this),v=C.redNeg(),O=this.m.subn(1).iushrn(1),x=this.m.bitLength();for(x=new s(2*x*x).toRed(this);this.pow(x,O).cmp(v)!==0;)x.redIAdd(v);for(var N=this.pow(x,M),H=this.pow(g,M.addn(1).iushrn(1)),Y=this.pow(g,M),Q=R;Y.cmp(C)!==0;){for(var ee=Y,re=0;ee.cmp(C)!==0;re++)ee=ee.redSqr();n(re<Q);var oe=this.pow(N,new s(1).iushln(Q-re-1));H=H.redMul(oe),N=oe.redSqr(),Y=Y.redMul(N),Q=re}return H},D.prototype.invm=function(g){var b=g._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},D.prototype.pow=function(g,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return g.clone();var m=4,M=new Array(1<<m);M[0]=new s(1).toRed(this),M[1]=g;for(var R=2;R<M.length;R++)M[R]=this.mul(M[R-1],g);var C=M[0],v=0,O=0,x=b.bitLength()%26;for(x===0&&(x=26),R=b.length-1;R>=0;R--){for(var N=b.words[R],H=x-1;H>=0;H--){var Y=N>>H&1;if(C!==M[0]&&(C=this.sqr(C)),Y===0&&v===0){O=0;continue}v<<=1,v|=Y,O++,!(O!==m&&(R!==0||H!==0))&&(C=this.mul(C,M[v]),O=0,v=0)}x=26}return C},D.prototype.convertTo=function(g){var b=g.umod(this.m);return b===g?b.clone():b},D.prototype.convertFrom=function(g){var b=g.clone();return b.red=null,b},s.mont=function(g){return new _(g)};function _(w){D.call(this,w),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(_,D),_.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},_.prototype.convertFrom=function(g){var b=this.imod(g.mul(this.rinv));return b.red=null,b},_.prototype.imul=function(g,b){if(g.isZero()||b.isZero())return g.words[0]=0,g.length=1,g;var m=g.imul(b),M=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=m.isub(M).iushrn(this.shift),C=R;return R.cmp(this.m)>=0?C=R.isub(this.m):R.cmpn(0)<0&&(C=R.iadd(this.m)),C._forceRed(this)},_.prototype.mul=function(g,b){if(g.isZero()||b.isZero())return new s(0)._forceRed(this);var m=g.mul(b),M=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),R=m.isub(M).iushrn(this.shift),C=R;return R.cmp(this.m)>=0?C=R.isub(this.m):R.cmpn(0)<0&&(C=R.iadd(this.m)),C._forceRed(this)},_.prototype.invm=function(g){var b=this.imod(g._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,zz)}(Jb)),Jb.exports}var qz=TR();const ix=yc(qz);var lb={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var sx;function MR(){return sx||(sx=1,function(t,e){var r=z4(),n=r.Buffer;function i(o,c){for(var u in o)c[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(i(r,e),e.Buffer=s);function s(o,c,u){return n(o,c,u)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(o,c,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,c,u)},s.alloc=function(o,c,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var h=n(o);return c!==void 0?typeof u=="string"?h.fill(c,u):h.fill(c):h.fill(0),h},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}}(lb,lb.exports)),lb.exports}var nE,ox;function Fz(){if(ox)return nE;ox=1;var t=MR().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=s}var u=r.length,h=r.charAt(0),f=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function E(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=t.from(I)),!t.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var $=0,L=0,k=0,U=I.length;k!==U&&I[k]===0;)k++,$++;for(var q=(U-k)*p+1>>>0,j=new Uint8Array(q);k!==U;){for(var z=I[k],V=0,G=q-1;(z!==0||V<L)&&G!==-1;G--,V++)z+=256*j[G]>>>0,j[G]=z%u>>>0,z=z/u>>>0;if(z!==0)throw new Error("Non-zero carry");L=V,k++}for(var B=q-L;B!==q&&j[B]===0;)B++;for(var W=h.repeat($);B<q;++B)W+=r.charAt(j[B]);return W}function S(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return t.alloc(0);for(var $=0,L=0,k=0;I[$]===h;)L++,$++;for(var U=(I.length-$)*f+1>>>0,q=new Uint8Array(U);$<I.length;){var j=I.charCodeAt($);if(j>255)return;var z=n[j];if(z===255)return;for(var V=0,G=U-1;(z!==0||V<k)&&G!==-1;G--,V++)z+=u*q[G]>>>0,q[G]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");k=V,$++}for(var B=U-k;B!==U&&q[B]===0;)B++;var W=t.allocUnsafe(L+(U-B));W.fill(0,0,L);for(var D=L;B!==U;)W[D++]=q[B++];return W}function A(I){var $=S(I);if($)return $;throw new Error("Non-base"+u+" character")}return{encode:E,decodeUnsafe:S,decode:A}}return nE=e,nE}var iE,ax;function Hz(){if(ax)return iE;ax=1;var t=Fz(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return iE=t(e),iE}var Wz=Hz();const is=yc(Wz),cx=fR;var Qr={},sE,lx;function Kz(){if(lx)return sE;lx=1;var t=MR().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),i=0;i<n.length;i++)n[i]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),c=o.charCodeAt(0);if(n[c]!==255)throw new TypeError(o+" is ambiguous");n[c]=s}var u=r.length,h=r.charAt(0),f=Math.log(u)/Math.log(256),p=Math.log(256)/Math.log(u);function E(I){if((Array.isArray(I)||I instanceof Uint8Array)&&(I=t.from(I)),!t.isBuffer(I))throw new TypeError("Expected Buffer");if(I.length===0)return"";for(var $=0,L=0,k=0,U=I.length;k!==U&&I[k]===0;)k++,$++;for(var q=(U-k)*p+1>>>0,j=new Uint8Array(q);k!==U;){for(var z=I[k],V=0,G=q-1;(z!==0||V<L)&&G!==-1;G--,V++)z+=256*j[G]>>>0,j[G]=z%u>>>0,z=z/u>>>0;if(z!==0)throw new Error("Non-zero carry");L=V,k++}for(var B=q-L;B!==q&&j[B]===0;)B++;for(var W=h.repeat($);B<q;++B)W+=r.charAt(j[B]);return W}function S(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return t.alloc(0);for(var $=0,L=0,k=0;I[$]===h;)L++,$++;for(var U=(I.length-$)*f+1>>>0,q=new Uint8Array(U);$<I.length;){var j=I.charCodeAt($);if(j>255)return;var z=n[j];if(z===255)return;for(var V=0,G=U-1;(z!==0||V<k)&&G!==-1;G--,V++)z+=u*q[G]>>>0,q[G]=z%256>>>0,z=z/256>>>0;if(z!==0)throw new Error("Non-zero carry");k=V,$++}for(var B=U-k;B!==U&&q[B]===0;)B++;var W=t.allocUnsafe(L+(U-B));W.fill(0,0,L);for(var D=L;B!==U;)W[D++]=q[B++];return W}function A(I){var $=S(I);if($)return $;throw new Error("Non-base"+u+" character")}return{encode:E,decodeUnsafe:S,decode:A}}return sE=e,sE}var oE,ux;function Vz(){if(ux)return oE;ux=1;var t=Kz(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return oE=t(e),oE}function rl(t,e,r){return e<=t&&t<=r}function cw(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Gz(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var s=e.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=t.charCodeAt(n+1);if(56320<=o&&o<=57343){var c=s&1023,u=o&1023;i.push(65536+(c<<10)+u),n+=1}else i.push(65533)}n+=1}return i}function Yz(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var A1=-1;function Y4(t){this.tokens=[].slice.call(t)}Y4.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():A1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Gf=-1;function aE(t,e){if(t)throw TypeError("Decoder error");return e||65533}var I1="utf-8";function x1(t,e){if(!(this instanceof x1))return new x1(t,e);if(t=t!==void 0?String(t).toLowerCase():I1,t!==I1)throw new Error("Encoding not supported. Only utf-8 is supported");e=cw(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}x1.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=cw(r),this._streaming||(this._decoder=new Zz({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var i=new Y4(n),s=[],o;!i.endOfStream()&&(o=this._decoder.handler(i,i.read()),o!==Gf);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(i,i.read()),o===Gf)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!i.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),Yz(s)}};function C1(t,e){if(!(this instanceof C1))return new C1(t,e);if(t=t!==void 0?String(t).toLowerCase():I1,t!==I1)throw new Error("Encoding not supported. Only utf-8 is supported");e=cw(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}C1.prototype={encode:function(e,r){e=e?String(e):"",r=cw(r),this._streaming||(this._encoder=new Qz(this._options)),this._streaming=!!r.stream;for(var n=[],i=new Y4(Gz(e)),s;!i.endOfStream()&&(s=this._encoder.handler(i,i.read()),s!==Gf);)Array.isArray(s)?n.push.apply(n,s):n.push(s);if(!this._streaming){for(;s=this._encoder.handler(i,i.read()),s!==Gf;)Array.isArray(s)?n.push.apply(n,s):n.push(s);this._encoder=null}return new Uint8Array(n)}};function Zz(t){var e=t.fatal,r=0,n=0,i=0,s=128,o=191;this.handler=function(c,u){if(u===A1&&i!==0)return i=0,aE(e);if(u===A1)return Gf;if(i===0){if(rl(u,0,127))return u;if(rl(u,194,223))i=1,r=u-192;else if(rl(u,224,239))u===224&&(s=160),u===237&&(o=159),i=2,r=u-224;else if(rl(u,240,244))u===240&&(s=144),u===244&&(o=143),i=3,r=u-240;else return aE(e);return r=r<<6*i,null}if(!rl(u,s,o))return r=i=n=0,s=128,o=191,c.prepend(u),aE(e);if(s=128,o=191,n+=1,r+=u-128<<6*(i-n),n!==i)return null;var h=r;return r=i=n=0,h}}function Qz(t){t.fatal,this.handler=function(e,r){if(r===A1)return Gf;if(rl(r,0,127))return r;var n,i;rl(r,128,2047)?(n=1,i=192):rl(r,2048,65535)?(n=2,i=224):rl(r,65536,1114111)&&(n=3,i=240);for(var s=[(r>>6*n)+i];n>0;){var o=r>>6*(n-1);s.push(128|o&63),n-=1}return s}}const Xz=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:x1,TextEncoder:C1},Symbol.toStringTag,{value:"Module"})),Jz=Dh(Xz);var hx;function eq(){if(hx)return Qr;hx=1;var t=Qr&&Qr.__createBinding||(Object.create?function(B,W,D,_){_===void 0&&(_=D),Object.defineProperty(B,_,{enumerable:!0,get:function(){return W[D]}})}:function(B,W,D,_){_===void 0&&(_=D),B[_]=W[D]}),e=Qr&&Qr.__setModuleDefault||(Object.create?function(B,W){Object.defineProperty(B,"default",{enumerable:!0,value:W})}:function(B,W){B.default=W}),r=Qr&&Qr.__decorate||function(B,W,D,_){var w=arguments.length,g=w<3?W:_===null?_=Object.getOwnPropertyDescriptor(W,D):_,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(B,W,D,_);else for(var m=B.length-1;m>=0;m--)(b=B[m])&&(g=(w<3?b(g):w>3?b(W,D,g):b(W,D))||g);return w>3&&g&&Object.defineProperty(W,D,g),g},n=Qr&&Qr.__importStar||function(B){if(B&&B.__esModule)return B;var W={};if(B!=null)for(var D in B)D!=="default"&&Object.hasOwnProperty.call(B,D)&&t(W,B,D);return e(W,B),W},i=Qr&&Qr.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.deserializeUnchecked=Qr.deserialize=Qr.serialize=Qr.BinaryReader=Qr.BinaryWriter=Qr.BorshError=Qr.baseDecode=Qr.baseEncode=void 0;const s=i(TR()),o=i(Vz()),c=n(Jz),u=typeof TextDecoder!="function"?c.TextDecoder:TextDecoder,h=new u("utf-8",{fatal:!0});function f(B){return typeof B=="string"&&(B=Buffer.from(B,"utf8")),o.default.encode(Buffer.from(B))}Qr.baseEncode=f;function p(B){return Buffer.from(o.default.decode(B))}Qr.baseDecode=p;const E=1024;class S extends Error{constructor(W){super(W),this.fieldPath=[],this.originalMessage=W}addToFieldPath(W){this.fieldPath.splice(0,0,W),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Qr.BorshError=S;class A{constructor(){this.buf=Buffer.alloc(E),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(E)]))}writeU8(W){this.maybeResize(),this.buf.writeUInt8(W,this.length),this.length+=1}writeU16(W){this.maybeResize(),this.buf.writeUInt16LE(W,this.length),this.length+=2}writeU32(W){this.maybeResize(),this.buf.writeUInt32LE(W,this.length),this.length+=4}writeU64(W){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(W).toArray("le",8)))}writeU128(W){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(W).toArray("le",16)))}writeU256(W){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(W).toArray("le",32)))}writeU512(W){this.maybeResize(),this.writeBuffer(Buffer.from(new s.default(W).toArray("le",64)))}writeBuffer(W){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),W,Buffer.alloc(E)]),this.length+=W.length}writeString(W){this.maybeResize();const D=Buffer.from(W,"utf8");this.writeU32(D.length),this.writeBuffer(D)}writeFixedArray(W){this.writeBuffer(Buffer.from(W))}writeArray(W,D){this.maybeResize(),this.writeU32(W.length);for(const _ of W)this.maybeResize(),D(_)}toArray(){return this.buf.subarray(0,this.length)}}Qr.BinaryWriter=A;function I(B,W,D){const _=D.value;D.value=function(...w){try{return _.apply(this,w)}catch(g){if(g instanceof RangeError){const b=g.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(b)>=0)throw new S("Reached the end of buffer when deserializing")}throw g}}}class ${constructor(W){this.buf=W,this.offset=0}readU8(){const W=this.buf.readUInt8(this.offset);return this.offset+=1,W}readU16(){const W=this.buf.readUInt16LE(this.offset);return this.offset+=2,W}readU32(){const W=this.buf.readUInt32LE(this.offset);return this.offset+=4,W}readU64(){const W=this.readBuffer(8);return new s.default(W,"le")}readU128(){const W=this.readBuffer(16);return new s.default(W,"le")}readU256(){const W=this.readBuffer(32);return new s.default(W,"le")}readU512(){const W=this.readBuffer(64);return new s.default(W,"le")}readBuffer(W){if(this.offset+W>this.buf.length)throw new S(`Expected buffer length ${W} isn't within bounds`);const D=this.buf.slice(this.offset,this.offset+W);return this.offset+=W,D}readString(){const W=this.readU32(),D=this.readBuffer(W);try{return h.decode(D)}catch(_){throw new S(`Error decoding UTF-8 string: ${_}`)}}readFixedArray(W){return new Uint8Array(this.readBuffer(W))}readArray(W){const D=this.readU32(),_=Array();for(let w=0;w<D;++w)_.push(W());return _}}r([I],$.prototype,"readU8",null),r([I],$.prototype,"readU16",null),r([I],$.prototype,"readU32",null),r([I],$.prototype,"readU64",null),r([I],$.prototype,"readU128",null),r([I],$.prototype,"readU256",null),r([I],$.prototype,"readU512",null),r([I],$.prototype,"readString",null),r([I],$.prototype,"readFixedArray",null),r([I],$.prototype,"readArray",null),Qr.BinaryReader=$;function L(B){return B.charAt(0).toUpperCase()+B.slice(1)}function k(B,W,D,_,w){try{if(typeof _=="string")w[`write${L(_)}`](D);else if(_ instanceof Array)if(typeof _[0]=="number"){if(D.length!==_[0])throw new S(`Expecting byte array of length ${_[0]}, but got ${D.length} bytes`);w.writeFixedArray(D)}else if(_.length===2&&typeof _[1]=="number"){if(D.length!==_[1])throw new S(`Expecting byte array of length ${_[1]}, but got ${D.length} bytes`);for(let g=0;g<_[1];g++)k(B,null,D[g],_[0],w)}else w.writeArray(D,g=>{k(B,W,g,_[0],w)});else if(_.kind!==void 0)switch(_.kind){case"option":{D==null?w.writeU8(0):(w.writeU8(1),k(B,W,D,_.type,w));break}case"map":{w.writeU32(D.size),D.forEach((g,b)=>{k(B,W,b,_.key,w),k(B,W,g,_.value,w)});break}default:throw new S(`FieldType ${_} unrecognized`)}else U(B,D,w)}catch(g){throw g instanceof S&&g.addToFieldPath(W),g}}function U(B,W,D){if(typeof W.borshSerialize=="function"){W.borshSerialize(D);return}const _=B.get(W.constructor);if(!_)throw new S(`Class ${W.constructor.name} is missing in schema`);if(_.kind==="struct")_.fields.map(([w,g])=>{k(B,w,W[w],g,D)});else if(_.kind==="enum"){const w=W[_.field];for(let g=0;g<_.values.length;++g){const[b,m]=_.values[g];if(b===w){D.writeU8(g),k(B,b,W[b],m,D);break}}}else throw new S(`Unexpected schema kind: ${_.kind} for ${W.constructor.name}`)}function q(B,W,D=A){const _=new D;return U(B,W,_),_.toArray()}Qr.serialize=q;function j(B,W,D,_){try{if(typeof D=="string")return _[`read${L(D)}`]();if(D instanceof Array){if(typeof D[0]=="number")return _.readFixedArray(D[0]);if(typeof D[1]=="number"){const w=[];for(let g=0;g<D[1];g++)w.push(j(B,null,D[0],_));return w}else return _.readArray(()=>j(B,W,D[0],_))}if(D.kind==="option")return _.readU8()?j(B,W,D.type,_):void 0;if(D.kind==="map"){let w=new Map;const g=_.readU32();for(let b=0;b<g;b++){const m=j(B,W,D.key,_),M=j(B,W,D.value,_);w.set(m,M)}return w}return z(B,D,_)}catch(w){throw w instanceof S&&w.addToFieldPath(W),w}}function z(B,W,D){if(typeof W.borshDeserialize=="function")return W.borshDeserialize(D);const _=B.get(W);if(!_)throw new S(`Class ${W.name} is missing in schema`);if(_.kind==="struct"){const w={};for(const[g,b]of B.get(W).fields)w[g]=j(B,g,b,D);return new W(w)}if(_.kind==="enum"){const w=D.readU8();if(w>=_.values.length)throw new S(`Enum index: ${w} is out of range`);const[g,b]=_.values[w],m=j(B,g,b,D);return new W({[g]:m})}throw new S(`Unexpected schema kind: ${_.kind} for ${W.constructor.name}`)}function V(B,W,D,_=$){const w=new _(D),g=z(B,W,w);if(w.offset<D.length)throw new S(`Unexpected ${D.length-w.offset} bytes after deserialized data`);return g}Qr.deserialize=V;function G(B,W,D,_=$){const w=new _(D);return z(B,W,w)}return Qr.deserializeUnchecked=G,Qr}var cE=eq(),Ae={},dx;function tq(){if(dx)return Ae;dx=1,Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.s16=Ae.s8=Ae.nu64be=Ae.u48be=Ae.u40be=Ae.u32be=Ae.u24be=Ae.u16be=Ae.nu64=Ae.u48=Ae.u40=Ae.u32=Ae.u24=Ae.u16=Ae.u8=Ae.offset=Ae.greedy=Ae.Constant=Ae.UTF8=Ae.CString=Ae.Blob=Ae.Boolean=Ae.BitField=Ae.BitStructure=Ae.VariantLayout=Ae.Union=Ae.UnionLayoutDiscriminator=Ae.UnionDiscriminator=Ae.Structure=Ae.Sequence=Ae.DoubleBE=Ae.Double=Ae.FloatBE=Ae.Float=Ae.NearInt64BE=Ae.NearInt64=Ae.NearUInt64BE=Ae.NearUInt64=Ae.IntBE=Ae.Int=Ae.UIntBE=Ae.UInt=Ae.OffsetLayout=Ae.GreedyCount=Ae.ExternalLayout=Ae.bindConstructorLayout=Ae.nameWithProperty=Ae.Layout=Ae.uint8ArrayToBuffer=Ae.checkUint8Array=void 0,Ae.constant=Ae.utf8=Ae.cstr=Ae.blob=Ae.unionLayoutDiscriminator=Ae.union=Ae.seq=Ae.bits=Ae.struct=Ae.f64be=Ae.f64=Ae.f32be=Ae.f32=Ae.ns64be=Ae.s48be=Ae.s40be=Ae.s32be=Ae.s24be=Ae.s16be=Ae.ns64=Ae.s48=Ae.s40=Ae.s32=Ae.s24=void 0;const t=z4();function e(x){if(!(x instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}Ae.checkUint8Array=e;function r(x){return e(x),t.Buffer.from(x.buffer,x.byteOffset,x.length)}Ae.uint8ArrayToBuffer=r;let n=class{constructor(N,H){if(!Number.isInteger(N))throw new TypeError("span must be an integer");this.span=N,this.property=H}makeDestinationObject(){return{}}getSpan(N,H){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(N){const H=Object.create(this.constructor.prototype);return Object.assign(H,this),H.property=N,H}fromArray(N){}};Ae.Layout=n;function i(x,N){return N.property?x+"["+N.property+"]":x}Ae.nameWithProperty=i;function s(x,N){if(typeof x!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(x,"layout_"))throw new Error("Class is already bound to a layout");if(!(N&&N instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(N,"boundConstructor_"))throw new Error("layout is already bound to a constructor");x.layout_=N,N.boundConstructor_=x,N.makeDestinationObject=()=>new x,Object.defineProperty(x.prototype,"encode",{value(H,Y){return N.encode(this,H,Y)},writable:!0}),Object.defineProperty(x,"decode",{value(H,Y){return N.decode(H,Y)},writable:!0})}Ae.bindConstructorLayout=s;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}Ae.ExternalLayout=o;class c extends o{constructor(N=1,H){if(!Number.isInteger(N)||0>=N)throw new TypeError("elementSpan must be a (positive) integer");super(-1,H),this.elementSpan=N}isCount(){return!0}decode(N,H=0){e(N);const Y=N.length-H;return Math.floor(Y/this.elementSpan)}encode(N,H,Y){return 0}}Ae.GreedyCount=c;class u extends o{constructor(N,H=0,Y){if(!(N instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(H))throw new TypeError("offset must be integer or undefined");super(N.span,Y||N.property),this.layout=N,this.offset=H}isCount(){return this.layout instanceof h||this.layout instanceof f}decode(N,H=0){return this.layout.decode(N,H+this.offset)}encode(N,H,Y=0){return this.layout.encode(N,H,Y+this.offset)}}Ae.OffsetLayout=u;class h extends n{constructor(N,H){if(super(N,H),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,H=0){return r(N).readUIntLE(H,this.span)}encode(N,H,Y=0){return r(H).writeUIntLE(N,Y,this.span),this.span}}Ae.UInt=h;class f extends n{constructor(N,H){if(super(N,H),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,H=0){return r(N).readUIntBE(H,this.span)}encode(N,H,Y=0){return r(H).writeUIntBE(N,Y,this.span),this.span}}Ae.UIntBE=f;class p extends n{constructor(N,H){if(super(N,H),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,H=0){return r(N).readIntLE(H,this.span)}encode(N,H,Y=0){return r(H).writeIntLE(N,Y,this.span),this.span}}Ae.Int=p;class E extends n{constructor(N,H){if(super(N,H),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(N,H=0){return r(N).readIntBE(H,this.span)}encode(N,H,Y=0){return r(H).writeIntBE(N,Y,this.span),this.span}}Ae.IntBE=E;const S=Math.pow(2,32);function A(x){const N=Math.floor(x/S),H=x-N*S;return{hi32:N,lo32:H}}function I(x,N){return x*S+N}class $ extends n{constructor(N){super(8,N)}decode(N,H=0){const Y=r(N),Q=Y.readUInt32LE(H),ee=Y.readUInt32LE(H+4);return I(ee,Q)}encode(N,H,Y=0){const Q=A(N),ee=r(H);return ee.writeUInt32LE(Q.lo32,Y),ee.writeUInt32LE(Q.hi32,Y+4),8}}Ae.NearUInt64=$;class L extends n{constructor(N){super(8,N)}decode(N,H=0){const Y=r(N),Q=Y.readUInt32BE(H),ee=Y.readUInt32BE(H+4);return I(Q,ee)}encode(N,H,Y=0){const Q=A(N),ee=r(H);return ee.writeUInt32BE(Q.hi32,Y),ee.writeUInt32BE(Q.lo32,Y+4),8}}Ae.NearUInt64BE=L;class k extends n{constructor(N){super(8,N)}decode(N,H=0){const Y=r(N),Q=Y.readUInt32LE(H),ee=Y.readInt32LE(H+4);return I(ee,Q)}encode(N,H,Y=0){const Q=A(N),ee=r(H);return ee.writeUInt32LE(Q.lo32,Y),ee.writeInt32LE(Q.hi32,Y+4),8}}Ae.NearInt64=k;class U extends n{constructor(N){super(8,N)}decode(N,H=0){const Y=r(N),Q=Y.readInt32BE(H),ee=Y.readUInt32BE(H+4);return I(Q,ee)}encode(N,H,Y=0){const Q=A(N),ee=r(H);return ee.writeInt32BE(Q.hi32,Y),ee.writeUInt32BE(Q.lo32,Y+4),8}}Ae.NearInt64BE=U;class q extends n{constructor(N){super(4,N)}decode(N,H=0){return r(N).readFloatLE(H)}encode(N,H,Y=0){return r(H).writeFloatLE(N,Y),4}}Ae.Float=q;class j extends n{constructor(N){super(4,N)}decode(N,H=0){return r(N).readFloatBE(H)}encode(N,H,Y=0){return r(H).writeFloatBE(N,Y),4}}Ae.FloatBE=j;class z extends n{constructor(N){super(8,N)}decode(N,H=0){return r(N).readDoubleLE(H)}encode(N,H,Y=0){return r(H).writeDoubleLE(N,Y),8}}Ae.Double=z;class V extends n{constructor(N){super(8,N)}decode(N,H=0){return r(N).readDoubleBE(H)}encode(N,H,Y=0){return r(H).writeDoubleBE(N,Y),8}}Ae.DoubleBE=V;class G extends n{constructor(N,H,Y){if(!(N instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(H instanceof o&&H.isCount()||Number.isInteger(H)&&0<=H))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let Q=-1;!(H instanceof o)&&0<N.span&&(Q=H*N.span),super(Q,Y),this.elementLayout=N,this.count=H}getSpan(N,H=0){if(0<=this.span)return this.span;let Y=0,Q=this.count;if(Q instanceof o&&(Q=Q.decode(N,H)),0<this.elementLayout.span)Y=Q*this.elementLayout.span;else{let ee=0;for(;ee<Q;)Y+=this.elementLayout.getSpan(N,H+Y),++ee}return Y}decode(N,H=0){const Y=[];let Q=0,ee=this.count;for(ee instanceof o&&(ee=ee.decode(N,H));Q<ee;)Y.push(this.elementLayout.decode(N,H)),H+=this.elementLayout.getSpan(N,H),Q+=1;return Y}encode(N,H,Y=0){const Q=this.elementLayout,ee=N.reduce((re,oe)=>re+Q.encode(oe,H,Y+re),0);return this.count instanceof o&&this.count.encode(N.length,H,Y),ee}}Ae.Sequence=G;class B extends n{constructor(N,H,Y){if(!(Array.isArray(N)&&N.reduce((ee,re)=>ee&&re instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof H=="boolean"&&Y===void 0&&(Y=H,H=void 0);for(const ee of N)if(0>ee.span&&ee.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let Q=-1;try{Q=N.reduce((ee,re)=>ee+re.getSpan(),0)}catch{}super(Q,H),this.fields=N,this.decodePrefixes=!!Y}getSpan(N,H=0){if(0<=this.span)return this.span;let Y=0;try{Y=this.fields.reduce((Q,ee)=>{const re=ee.getSpan(N,H);return H+=re,Q+re},0)}catch{throw new RangeError("indeterminate span")}return Y}decode(N,H=0){e(N);const Y=this.makeDestinationObject();for(const Q of this.fields)if(Q.property!==void 0&&(Y[Q.property]=Q.decode(N,H)),H+=Q.getSpan(N,H),this.decodePrefixes&&N.length===H)break;return Y}encode(N,H,Y=0){const Q=Y;let ee=0,re=0;for(const oe of this.fields){let be=oe.span;if(re=0<be?be:0,oe.property!==void 0){const Ce=N[oe.property];Ce!==void 0&&(re=oe.encode(Ce,H,Y),0>be&&(be=oe.getSpan(H,Y)))}ee=Y,Y+=be}return ee+re-Q}fromArray(N){const H=this.makeDestinationObject();for(const Y of this.fields)Y.property!==void 0&&0<N.length&&(H[Y.property]=N.shift());return H}layoutFor(N){if(typeof N!="string")throw new TypeError("property must be string");for(const H of this.fields)if(H.property===N)return H}offsetOf(N){if(typeof N!="string")throw new TypeError("property must be string");let H=0;for(const Y of this.fields){if(Y.property===N)return H;0>Y.span?H=-1:0<=H&&(H+=Y.span)}}}Ae.Structure=B;class W{constructor(N){this.property=N}decode(N,H){throw new Error("UnionDiscriminator is abstract")}encode(N,H,Y){throw new Error("UnionDiscriminator is abstract")}}Ae.UnionDiscriminator=W;class D extends W{constructor(N,H){if(!(N instanceof o&&N.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(H||N.property||"variant"),this.layout=N}decode(N,H){return this.layout.decode(N,H)}encode(N,H,Y){return this.layout.encode(N,H,Y)}}Ae.UnionLayoutDiscriminator=D;class _ extends n{constructor(N,H,Y){let Q;if(N instanceof h||N instanceof f)Q=new D(new u(N));else if(N instanceof o&&N.isCount())Q=new D(N);else if(N instanceof W)Q=N;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(H===void 0&&(H=null),!(H===null||H instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(H!==null){if(0>H.span)throw new Error("defaultLayout must have constant span");H.property===void 0&&(H=H.replicate("content"))}let ee=-1;H&&(ee=H.span,0<=ee&&(N instanceof h||N instanceof f)&&(ee+=Q.layout.span)),super(ee,Y),this.discriminator=Q,this.usesPrefixDiscriminator=N instanceof h||N instanceof f,this.defaultLayout=H,this.registry={};let re=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(oe){return re(oe)},this.configGetSourceVariant=function(oe){re=oe.bind(this)}}getSpan(N,H=0){if(0<=this.span)return this.span;const Y=this.getVariant(N,H);if(!Y)throw new Error("unable to determine span for unrecognized variant");return Y.getSpan(N,H)}defaultGetSourceVariant(N){if(Object.prototype.hasOwnProperty.call(N,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(N,this.defaultLayout.property))return;const H=this.registry[N[this.discriminator.property]];if(H&&(!H.layout||H.property&&Object.prototype.hasOwnProperty.call(N,H.property)))return H}else for(const H in this.registry){const Y=this.registry[H];if(Y.property&&Object.prototype.hasOwnProperty.call(N,Y.property))return Y}throw new Error("unable to infer src variant")}decode(N,H=0){let Y;const Q=this.discriminator,ee=Q.decode(N,H),re=this.registry[ee];if(re===void 0){const oe=this.defaultLayout;let be=0;this.usesPrefixDiscriminator&&(be=Q.layout.span),Y=this.makeDestinationObject(),Y[Q.property]=ee,Y[oe.property]=oe.decode(N,H+be)}else Y=re.decode(N,H);return Y}encode(N,H,Y=0){const Q=this.getSourceVariant(N);if(Q===void 0){const ee=this.discriminator,re=this.defaultLayout;let oe=0;return this.usesPrefixDiscriminator&&(oe=ee.layout.span),ee.encode(N[ee.property],H,Y),oe+re.encode(N[re.property],H,Y+oe)}return Q.encode(N,H,Y)}addVariant(N,H,Y){const Q=new w(this,N,H,Y);return this.registry[N]=Q,Q}getVariant(N,H=0){let Y;return N instanceof Uint8Array?Y=this.discriminator.decode(N,H):Y=N,this.registry[Y]}}Ae.Union=_;class w extends n{constructor(N,H,Y,Q){if(!(N instanceof _))throw new TypeError("union must be a Union");if(!Number.isInteger(H)||0>H)throw new TypeError("variant must be a (non-negative) integer");if(typeof Y=="string"&&Q===void 0&&(Q=Y,Y=null),Y){if(!(Y instanceof n))throw new TypeError("layout must be a Layout");if(N.defaultLayout!==null&&0<=Y.span&&Y.span>N.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof Q!="string")throw new TypeError("variant must have a String property")}let ee=N.span;0>N.span&&(ee=Y?Y.span:0,0<=ee&&N.usesPrefixDiscriminator&&(ee+=N.discriminator.layout.span)),super(ee,Q),this.union=N,this.variant=H,this.layout=Y||null}getSpan(N,H=0){if(0<=this.span)return this.span;let Y=0;this.union.usesPrefixDiscriminator&&(Y=this.union.discriminator.layout.span);let Q=0;return this.layout&&(Q=this.layout.getSpan(N,H+Y)),Y+Q}decode(N,H=0){const Y=this.makeDestinationObject();if(this!==this.union.getVariant(N,H))throw new Error("variant mismatch");let Q=0;return this.union.usesPrefixDiscriminator&&(Q=this.union.discriminator.layout.span),this.layout?Y[this.property]=this.layout.decode(N,H+Q):this.property?Y[this.property]=!0:this.union.usesPrefixDiscriminator&&(Y[this.union.discriminator.property]=this.variant),Y}encode(N,H,Y=0){let Q=0;if(this.union.usesPrefixDiscriminator&&(Q=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(N,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,H,Y);let ee=Q;if(this.layout&&(this.layout.encode(N[this.property],H,Y+Q),ee+=this.layout.getSpan(H,Y+Q),0<=this.union.span&&ee>this.union.span))throw new Error("encoded variant overruns containing union");return ee}fromArray(N){if(this.layout)return this.layout.fromArray(N)}}Ae.VariantLayout=w;function g(x){return 0>x&&(x+=4294967296),x}class b extends n{constructor(N,H,Y){if(!(N instanceof h||N instanceof f))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof H=="string"&&Y===void 0&&(Y=H,H=!1),4<N.span)throw new RangeError("word cannot exceed 32 bits");super(N.span,Y),this.word=N,this.msb=!!H,this.fields=[];let Q=0;this._packedSetValue=function(ee){return Q=g(ee),this},this._packedGetValue=function(){return Q}}decode(N,H=0){const Y=this.makeDestinationObject(),Q=this.word.decode(N,H);this._packedSetValue(Q);for(const ee of this.fields)ee.property!==void 0&&(Y[ee.property]=ee.decode(N));return Y}encode(N,H,Y=0){const Q=this.word.decode(H,Y);this._packedSetValue(Q);for(const ee of this.fields)if(ee.property!==void 0){const re=N[ee.property];re!==void 0&&ee.encode(re)}return this.word.encode(this._packedGetValue(),H,Y)}addField(N,H){const Y=new m(this,N,H);return this.fields.push(Y),Y}addBoolean(N){const H=new M(this,N);return this.fields.push(H),H}fieldFor(N){if(typeof N!="string")throw new TypeError("property must be string");for(const H of this.fields)if(H.property===N)return H}}Ae.BitStructure=b;class m{constructor(N,H,Y){if(!(N instanceof b))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(H)||0>=H)throw new TypeError("bits must be positive integer");const Q=8*N.span,ee=N.fields.reduce((re,oe)=>re+oe.bits,0);if(H+ee>Q)throw new Error("bits too long for span remainder ("+(Q-ee)+" of "+Q+" remain)");this.container=N,this.bits=H,this.valueMask=(1<<H)-1,H===32&&(this.valueMask=4294967295),this.start=ee,this.container.msb&&(this.start=Q-ee-H),this.wordMask=g(this.valueMask<<this.start),this.property=Y}decode(N,H){const Y=this.container._packedGetValue();return g(Y&this.wordMask)>>>this.start}encode(N){if(typeof N!="number"||!Number.isInteger(N)||N!==g(N&this.valueMask))throw new TypeError(i("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const H=this.container._packedGetValue(),Y=g(N<<this.start);this.container._packedSetValue(g(H&~this.wordMask)|Y)}}Ae.BitField=m;class M extends m{constructor(N,H){super(N,1,H)}decode(N,H){return!!super.decode(N,H)}encode(N){typeof N=="boolean"&&(N=+N),super.encode(N)}}Ae.Boolean=M;class R extends n{constructor(N,H){if(!(N instanceof o&&N.isCount()||Number.isInteger(N)&&0<=N))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let Y=-1;N instanceof o||(Y=N),super(Y,H),this.length=N}getSpan(N,H){let Y=this.span;return 0>Y&&(Y=this.length.decode(N,H)),Y}decode(N,H=0){let Y=this.span;return 0>Y&&(Y=this.length.decode(N,H)),r(N).slice(H,H+Y)}encode(N,H,Y){let Q=this.length;if(this.length instanceof o&&(Q=N.length),!(N instanceof Uint8Array&&Q===N.length))throw new TypeError(i("Blob.encode",this)+" requires (length "+Q+") Uint8Array as src");if(Y+Q>H.length)throw new RangeError("encoding overruns Uint8Array");const ee=r(N);return r(H).write(ee.toString("hex"),Y,Q,"hex"),this.length instanceof o&&this.length.encode(Q,H,Y),Q}}Ae.Blob=R;class C extends n{constructor(N){super(-1,N)}getSpan(N,H=0){e(N);let Y=H;for(;Y<N.length&&N[Y]!==0;)Y+=1;return 1+Y-H}decode(N,H=0){const Y=this.getSpan(N,H);return r(N).slice(H,H+Y-1).toString("utf-8")}encode(N,H,Y=0){typeof N!="string"&&(N=String(N));const Q=t.Buffer.from(N,"utf8"),ee=Q.length;if(Y+ee>H.length)throw new RangeError("encoding overruns Buffer");const re=r(H);return Q.copy(re,Y),re[Y+ee]=0,ee+1}}Ae.CString=C;class v extends n{constructor(N,H){if(typeof N=="string"&&H===void 0&&(H=N,N=void 0),N===void 0)N=-1;else if(!Number.isInteger(N))throw new TypeError("maxSpan must be an integer");super(-1,H),this.maxSpan=N}getSpan(N,H=0){return e(N),N.length-H}decode(N,H=0){const Y=this.getSpan(N,H);if(0<=this.maxSpan&&this.maxSpan<Y)throw new RangeError("text length exceeds maxSpan");return r(N).slice(H,H+Y).toString("utf-8")}encode(N,H,Y=0){typeof N!="string"&&(N=String(N));const Q=t.Buffer.from(N,"utf8"),ee=Q.length;if(0<=this.maxSpan&&this.maxSpan<ee)throw new RangeError("text length exceeds maxSpan");if(Y+ee>H.length)throw new RangeError("encoding overruns Buffer");return Q.copy(r(H),Y),ee}}Ae.UTF8=v;class O extends n{constructor(N,H){super(0,H),this.value=N}decode(N,H){return this.value}encode(N,H,Y){return 0}}return Ae.Constant=O,Ae.greedy=(x,N)=>new c(x,N),Ae.offset=(x,N,H)=>new u(x,N,H),Ae.u8=x=>new h(1,x),Ae.u16=x=>new h(2,x),Ae.u24=x=>new h(3,x),Ae.u32=x=>new h(4,x),Ae.u40=x=>new h(5,x),Ae.u48=x=>new h(6,x),Ae.nu64=x=>new $(x),Ae.u16be=x=>new f(2,x),Ae.u24be=x=>new f(3,x),Ae.u32be=x=>new f(4,x),Ae.u40be=x=>new f(5,x),Ae.u48be=x=>new f(6,x),Ae.nu64be=x=>new L(x),Ae.s8=x=>new p(1,x),Ae.s16=x=>new p(2,x),Ae.s24=x=>new p(3,x),Ae.s32=x=>new p(4,x),Ae.s40=x=>new p(5,x),Ae.s48=x=>new p(6,x),Ae.ns64=x=>new k(x),Ae.s16be=x=>new E(2,x),Ae.s24be=x=>new E(3,x),Ae.s32be=x=>new E(4,x),Ae.s40be=x=>new E(5,x),Ae.s48be=x=>new E(6,x),Ae.ns64be=x=>new U(x),Ae.f32=x=>new q(x),Ae.f32be=x=>new j(x),Ae.f64=x=>new z(x),Ae.f64be=x=>new V(x),Ae.struct=(x,N,H)=>new B(x,N,H),Ae.bits=(x,N,H)=>new b(x,N,H),Ae.seq=(x,N,H)=>new G(x,N,H),Ae.union=(x,N,H)=>new _(x,N,H),Ae.unionLayoutDiscriminator=(x,N)=>new D(x,N),Ae.blob=(x,N)=>new R(x,N),Ae.cstr=x=>new C(x),Ae.utf8=(x,N)=>new v(x,N),Ae.constant=(x,N)=>new O(x,N),Ae}var se=tq(),rq=8078e3,nq=8078001,iq=8078004,sq=8078005,oq=8078006,aq=8078011;function NR(t){return Array.isArray(t)?"%5B"+t.map(NR).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function cq([t,e]){return`${t}=${NR(e)}`}function lq(t){const e=Object.entries(t).map(cq).join("&");return btoa(e)}function uq(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${lq(e)}'`),`${r}\``}}var Pf=class extends Error{constructor(...[e,r]){let n,i;if(r){const{cause:o,...c}=r;o&&(i={cause:o}),Object.keys(c).length>0&&(n=c)}const s=uq(e,n);super(s,i);br(this,"cause",this.cause);br(this,"context");this.context={__code:e,...n},this.name="SolanaError"}};function hq(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function dq(t){return Object.freeze({...t,encode:e=>{const r=new Uint8Array(hq(e,t));return t.write(e,r,0),r}})}function fq(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function Dd(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function pq(t,e){if(Dd(t)!==Dd(e))throw new Pf(iq);if(Dd(t)&&Dd(e)&&t.fixedSize!==e.fixedSize)throw new Pf(sq,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Dd(t)&&!Dd(e)&&t.maxSize!==e.maxSize)throw new Pf(oq,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function gq(t,e,r=0){if(e.length-r<=0)throw new Pf(rq,{codecDescription:t})}function yq(t,e,r,n=0){const i=r.length-n;if(i<e)throw new Pf(nq,{bytesLength:i,codecDescription:t,expected:e})}function mq(t,e,r,n){if(n<e||n>r)throw new Pf(aq,{codecDescription:t,max:r,min:e,value:n})}function OR(t){return(t==null?void 0:t.endian)!==1}function bq(t){return dq({fixedSize:t.size,write(e,r,n){t.range&&mq(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,OR(t.config)),r.set(new Uint8Array(i),n),n+t.size}})}function wq(t){return fq({fixedSize:t.size,read(e,r=0){gq(t.name,e,r),yq(t.name,t.size,e,r);const n=new DataView(vq(e,r,t.size));return[t.get(n,OR(t.config)),r+t.size]}})}function vq(t,e,r){const n=t.byteOffset+(e??0),i=r??t.byteLength;return t.buffer.slice(n,n+i)}var RR=(t={})=>bq({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),Eq=(t={})=>wq({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),_q=(t={})=>pq(RR(t),Eq(t));class Sq extends TypeError{constructor(e,r){let n;const{message:i,explanation:s,...o}=e,{path:c}=e,u=c.length===0?i:`At path: ${c.join(".")} -- ${i}`;super(s??u),s!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function Aq(t){return Ty(t)&&typeof t[Symbol.iterator]=="function"}function Ty(t){return typeof t=="object"&&t!=null}function T1(t){return Ty(t)&&!Array.isArray(t)}function Na(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function Iq(t){const{done:e,value:r}=t.next();return e?void 0:r}function xq(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:i,branch:s}=e,{type:o}=r,{refinement:c,message:u=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${Na(n)}\``}=t;return{value:n,type:o,refinement:c,key:i[i.length-1],path:i,branch:s,...t,message:u}}function*fx(t,e,r,n){Aq(t)||(t=[t]);for(const i of t){const s=xq(i,e,r,n);s&&(yield s)}}function*Z4(t,e,r={}){const{path:n=[],branch:i=[t],coerce:s=!1,mask:o=!1}=r,c={path:n,branch:i,mask:o};s&&(t=e.coercer(t,c));let u="valid";for(const h of e.validator(t,c))h.explanation=r.message,u="not_valid",yield[h,void 0];for(let[h,f,p]of e.entries(t,c)){const E=Z4(f,p,{path:h===void 0?n:[...n,h],branch:h===void 0?i:[...i,f],coerce:s,mask:o,message:r.message});for(const S of E)S[0]?(u=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):s&&(f=S[1],h===void 0?t=f:t instanceof Map?t.set(h,f):t instanceof Set?t.add(f):Ty(t)&&(f!==void 0||h in t)&&(t[h]=f))}if(u!=="not_valid")for(const h of e.refiner(t,c))h.explanation=r.message,u="not_refined",yield[h,void 0];u==="valid"&&(yield[void 0,t])}let mc=class{constructor(e){const{type:r,schema:n,validator:i,refiner:s,coercer:o=u=>u,entries:c=function*(){}}=e;this.type=r,this.schema=n,this.entries=c,this.coercer=o,i?this.validator=(u,h)=>{const f=i(u,h);return fx(f,h,this,u)}:this.validator=()=>[],s?this.refiner=(u,h)=>{const f=s(u,h);return fx(f,h,this,u)}:this.refiner=()=>[]}assert(e,r){return DR(e,this,r)}create(e,r){return nt(e,this,r)}is(e){return $R(e,this)}mask(e,r){return Cq(e,this,r)}validate(e,r={}){return My(e,this,r)}};function DR(t,e,r){const n=My(t,e,{message:r});if(n[0])throw n[0]}function nt(t,e,r){const n=My(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function Cq(t,e,r){const n=My(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function $R(t,e){return!My(t,e)[0]}function My(t,e,r={}){const n=Z4(t,e,r),i=Iq(n);return i[0]?[new Sq(i[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,i[1]]}function $h(t,e){return new mc({type:t,schema:null,validator:e})}function Tq(){return $h("any",()=>!0)}function st(t){return new mc({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Na(e)}`}})}function dc(){return $h("boolean",t=>typeof t=="boolean")}function Q4(t){return $h("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${Na(e)}`)}function qn(t){const e=Na(t),r=typeof t;return new mc({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${Na(n)}`}})}function Mq(){return $h("never",()=>!1)}function ot(t){return new mc({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function ve(){return $h("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${Na(t)}`)}function Pt(t){return new mc({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function kR(t,e){return new mc({type:"record",schema:null,*entries(r){if(Ty(r))for(const n in r){const i=r[n];yield[n,n,t],yield[n,i,e]}},validator(r){return T1(r)||`Expected an object, but received: ${Na(r)}`},coercer(r){return T1(r)?{...r}:r}})}function Ge(){return $h("string",t=>typeof t=="string"||`Expected a string, but received: ${Na(t)}`)}function X4(t){const e=Mq();return new mc({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],t[i]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${Na(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function Le(t){const e=Object.keys(t);return new mc({type:"type",schema:t,*entries(r){if(Ty(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return T1(r)||`Expected an object, but received: ${Na(r)}`},coercer(r){return T1(r)?{...r}:r}})}function js(t){const e=t.map(r=>r.type).join(" | ");return new mc({type:"union",schema:null,coercer(r,n){for(const i of t){const[s,o]=i.validate(r,{coerce:!0,mask:n.mask});if(!s)return o}return r},validator(r,n){const i=[];for(const s of t){const[...o]=Z4(r,s,n),[c]=o;if(c[0])for(const[u]of o)u&&i.push(u);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Na(r)}`,...i]}})}function pp(){return $h("unknown",()=>!0)}function Ny(t,e,r){return new mc({...t,coercer:(n,i)=>$R(n,e)?t.coercer(r(n,i),i):t.coercer(n,i)})}var ub,Nq=new Uint8Array(16);function PR(){if(!ub&&(ub=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ub))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ub(Nq)}const Oq=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function lw(t){return typeof t=="string"&&Oq.test(t)}var es=[];for(var lE=0;lE<256;++lE)es.push((lE+256).toString(16).substr(1));function uw(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(es[t[e+0]]+es[t[e+1]]+es[t[e+2]]+es[t[e+3]]+"-"+es[t[e+4]]+es[t[e+5]]+"-"+es[t[e+6]]+es[t[e+7]]+"-"+es[t[e+8]]+es[t[e+9]]+"-"+es[t[e+10]]+es[t[e+11]]+es[t[e+12]]+es[t[e+13]]+es[t[e+14]]+es[t[e+15]]).toLowerCase();if(!lw(r))throw TypeError("Stringified UUID is invalid");return r}var px,uE,hE=0,dE=0;function Rq(t,e,r){var n=e&&r||0,i=e||new Array(16);t=t||{};var s=t.node||px,o=t.clockseq!==void 0?t.clockseq:uE;if(s==null||o==null){var c=t.random||(t.rng||PR)();s==null&&(s=px=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=uE=(c[6]<<8|c[7])&16383)}var u=t.msecs!==void 0?t.msecs:Date.now(),h=t.nsecs!==void 0?t.nsecs:dE+1,f=u-hE+(h-dE)/1e4;if(f<0&&t.clockseq===void 0&&(o=o+1&16383),(f<0||u>hE)&&t.nsecs===void 0&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");hE=u,dE=h,uE=o,u+=122192928e5;var p=((u&268435455)*1e4+h)%4294967296;i[n++]=p>>>24&255,i[n++]=p>>>16&255,i[n++]=p>>>8&255,i[n++]=p&255;var E=u/4294967296*1e4&268435455;i[n++]=E>>>8&255,i[n++]=E&255,i[n++]=E>>>24&15|16,i[n++]=E>>>16&255,i[n++]=o>>>8|128,i[n++]=o&255;for(var S=0;S<6;++S)i[n+S]=s[S];return e||uw(i)}function BR(t){if(!lw(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Dq(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var $q="6ba7b810-9dad-11d1-80b4-00c04fd430c8",kq="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function LR(t,e,r){function n(i,s,o,c){if(typeof i=="string"&&(i=Dq(i)),typeof s=="string"&&(s=BR(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){c=c||0;for(var h=0;h<16;++h)o[c+h]=u[h];return o}return uw(u)}try{n.name=t}catch{}return n.DNS=$q,n.URL=kq,n}function Pq(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return Bq(Lq(Uq(t),t.length*8))}function Bq(t){for(var e=[],r=t.length*32,n="0123456789abcdef",i=0;i<r;i+=8){var s=t[i>>5]>>>i%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);e.push(o)}return e}function UR(t){return(t+64>>>9<<4)+14+1}function Lq(t,e){t[e>>5]|=128<<e%32,t[UR(e)-1]=e;for(var r=1732584193,n=-271733879,i=-1732584194,s=271733878,o=0;o<t.length;o+=16){var c=r,u=n,h=i,f=s;r=ms(r,n,i,s,t[o],7,-680876936),s=ms(s,r,n,i,t[o+1],12,-389564586),i=ms(i,s,r,n,t[o+2],17,606105819),n=ms(n,i,s,r,t[o+3],22,-1044525330),r=ms(r,n,i,s,t[o+4],7,-176418897),s=ms(s,r,n,i,t[o+5],12,1200080426),i=ms(i,s,r,n,t[o+6],17,-1473231341),n=ms(n,i,s,r,t[o+7],22,-45705983),r=ms(r,n,i,s,t[o+8],7,1770035416),s=ms(s,r,n,i,t[o+9],12,-1958414417),i=ms(i,s,r,n,t[o+10],17,-42063),n=ms(n,i,s,r,t[o+11],22,-1990404162),r=ms(r,n,i,s,t[o+12],7,1804603682),s=ms(s,r,n,i,t[o+13],12,-40341101),i=ms(i,s,r,n,t[o+14],17,-1502002290),n=ms(n,i,s,r,t[o+15],22,1236535329),r=bs(r,n,i,s,t[o+1],5,-165796510),s=bs(s,r,n,i,t[o+6],9,-1069501632),i=bs(i,s,r,n,t[o+11],14,643717713),n=bs(n,i,s,r,t[o],20,-373897302),r=bs(r,n,i,s,t[o+5],5,-701558691),s=bs(s,r,n,i,t[o+10],9,38016083),i=bs(i,s,r,n,t[o+15],14,-660478335),n=bs(n,i,s,r,t[o+4],20,-405537848),r=bs(r,n,i,s,t[o+9],5,568446438),s=bs(s,r,n,i,t[o+14],9,-1019803690),i=bs(i,s,r,n,t[o+3],14,-187363961),n=bs(n,i,s,r,t[o+8],20,1163531501),r=bs(r,n,i,s,t[o+13],5,-1444681467),s=bs(s,r,n,i,t[o+2],9,-51403784),i=bs(i,s,r,n,t[o+7],14,1735328473),n=bs(n,i,s,r,t[o+12],20,-1926607734),r=ws(r,n,i,s,t[o+5],4,-378558),s=ws(s,r,n,i,t[o+8],11,-2022574463),i=ws(i,s,r,n,t[o+11],16,1839030562),n=ws(n,i,s,r,t[o+14],23,-35309556),r=ws(r,n,i,s,t[o+1],4,-1530992060),s=ws(s,r,n,i,t[o+4],11,1272893353),i=ws(i,s,r,n,t[o+7],16,-155497632),n=ws(n,i,s,r,t[o+10],23,-1094730640),r=ws(r,n,i,s,t[o+13],4,681279174),s=ws(s,r,n,i,t[o],11,-358537222),i=ws(i,s,r,n,t[o+3],16,-722521979),n=ws(n,i,s,r,t[o+6],23,76029189),r=ws(r,n,i,s,t[o+9],4,-640364487),s=ws(s,r,n,i,t[o+12],11,-421815835),i=ws(i,s,r,n,t[o+15],16,530742520),n=ws(n,i,s,r,t[o+2],23,-995338651),r=vs(r,n,i,s,t[o],6,-198630844),s=vs(s,r,n,i,t[o+7],10,1126891415),i=vs(i,s,r,n,t[o+14],15,-1416354905),n=vs(n,i,s,r,t[o+5],21,-57434055),r=vs(r,n,i,s,t[o+12],6,1700485571),s=vs(s,r,n,i,t[o+3],10,-1894986606),i=vs(i,s,r,n,t[o+10],15,-1051523),n=vs(n,i,s,r,t[o+1],21,-2054922799),r=vs(r,n,i,s,t[o+8],6,1873313359),s=vs(s,r,n,i,t[o+15],10,-30611744),i=vs(i,s,r,n,t[o+6],15,-1560198380),n=vs(n,i,s,r,t[o+13],21,1309151649),r=vs(r,n,i,s,t[o+4],6,-145523070),s=vs(s,r,n,i,t[o+11],10,-1120210379),i=vs(i,s,r,n,t[o+2],15,718787259),n=vs(n,i,s,r,t[o+9],21,-343485551),r=ru(r,c),n=ru(n,u),i=ru(i,h),s=ru(s,f)}return[r,n,i,s]}function Uq(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(UR(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function ru(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function jq(t,e){return t<<e|t>>>32-e}function hw(t,e,r,n,i,s){return ru(jq(ru(ru(e,t),ru(n,s)),i),r)}function ms(t,e,r,n,i,s,o){return hw(e&r|~e&n,t,e,i,s,o)}function bs(t,e,r,n,i,s,o){return hw(e&n|r&~n,t,e,i,s,o)}function ws(t,e,r,n,i,s,o){return hw(e^r^n,t,e,i,s,o)}function vs(t,e,r,n,i,s,o){return hw(r^(e|~n),t,e,i,s,o)}var zq=LR("v3",48,Pq);function qq(t,e,r){t=t||{};var n=t.random||(t.rng||PR)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return uw(n)}function Fq(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function fE(t,e){return t<<e|t>>>32-e}function Hq(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var i=0;i<n.length;++i)t.push(n.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),c=new Array(o),u=0;u<o;++u){for(var h=new Uint32Array(16),f=0;f<16;++f)h[f]=t[u*64+f*4]<<24|t[u*64+f*4+1]<<16|t[u*64+f*4+2]<<8|t[u*64+f*4+3];c[u]=h}c[o-1][14]=(t.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(t.length-1)*8&4294967295;for(var p=0;p<o;++p){for(var E=new Uint32Array(80),S=0;S<16;++S)E[S]=c[p][S];for(var A=16;A<80;++A)E[A]=fE(E[A-3]^E[A-8]^E[A-14]^E[A-16],1);for(var I=r[0],$=r[1],L=r[2],k=r[3],U=r[4],q=0;q<80;++q){var j=Math.floor(q/20),z=fE(I,5)+Fq(j,$,L,k)+U+e[j]+E[q]>>>0;U=k,k=L,L=fE($,30)>>>0,$=I,I=z}r[0]=r[0]+I>>>0,r[1]=r[1]+$>>>0,r[2]=r[2]+L>>>0,r[3]=r[3]+k>>>0,r[4]=r[4]+U>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Wq=LR("v5",80,Hq);const Kq="00000000-0000-0000-0000-000000000000";function Vq(t){if(!lw(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Gq=Object.freeze(Object.defineProperty({__proto__:null,NIL:Kq,parse:BR,stringify:uw,v1:Rq,v3:zq,v4:qq,v5:Wq,validate:lw,version:Vq},Symbol.toStringTag,{value:"Module"})),jR=Dh(Gq);var pE,gx;function Yq(){if(gx)return pE;gx=1;const t=jR.v4;return pE=function(r,n,i,s){if(typeof r!="string")throw new TypeError(r+" must be a string");s=s||{};const o=typeof s.version=="number"?s.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const c={method:r};if(o===2&&(c.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");c.params=n}if(typeof i>"u"){const u=typeof s.generator=="function"?s.generator:function(){return t()};c.id=u(c,s)}else o===2&&i===null?s.notificationIdNull&&(c.id=null):c.id=i;return c},pE}var gE,yx;function Zq(){if(yx)return gE;yx=1;const t=jR.v4,e=Yq(),r=function(n,i){if(!(this instanceof r))return new r(n,i);i||(i={}),this.options={reviver:typeof i.reviver<"u"?i.reviver:null,replacer:typeof i.replacer<"u"?i.replacer:null,generator:typeof i.generator<"u"?i.generator:function(){return t()},version:typeof i.version<"u"?i.version:2,notificationIdNull:typeof i.notificationIdNull=="boolean"?i.notificationIdNull:!1},this.callServer=n};return gE=r,r.prototype.request=function(n,i,s,o){const c=this;let u=null;const h=Array.isArray(n)&&typeof i=="function";if(this.options.version===1&&h)throw new TypeError("JSON-RPC 1.0 does not support batching");if(h||!h&&n&&typeof n=="object"&&typeof i=="function")o=i,u=n;else{typeof s=="function"&&(o=s,s=void 0);const E=typeof o=="function";try{u=e(n,i,s,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(S){if(E)return o(S);throw S}if(!E)return u}let p;try{p=JSON.stringify(u,this.options.replacer)}catch(E){return o(E)}return this.callServer(p,function(E,S){c._parseResponse(E,S,o)}),u},r.prototype._parseResponse=function(n,i,s){if(n){s(n);return}if(!i)return s();let o;try{o=JSON.parse(i,this.options.reviver)}catch(c){return s(c)}if(s.length===3)if(Array.isArray(o)){const c=function(h){return typeof h.error<"u"},u=function(h){return!c(h)};return s(null,o.filter(c),o.filter(u))}else return s(null,o.error,o.result);s(null,o)},gE}var Qq=Zq();const Xq=yc(Qq);var yE={exports:{}},mx;function zR(){return mx||(mx=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,h,f){this.fn=u,this.context=h,this.once=f||!1}function s(u,h,f,p,E){if(typeof f!="function")throw new TypeError("The listener must be a function");var S=new i(f,p||u,E),A=r?r+h:h;return u._events[A]?u._events[A].fn?u._events[A]=[u._events[A],S]:u._events[A].push(S):(u._events[A]=S,u._eventsCount++),u}function o(u,h){--u._eventsCount===0?u._events=new n:delete u._events[h]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],f,p;if(this._eventsCount===0)return h;for(p in f=this._events)e.call(f,p)&&h.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},c.prototype.listeners=function(h){var f=r?r+h:h,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var E=0,S=p.length,A=new Array(S);E<S;E++)A[E]=p[E].fn;return A},c.prototype.listenerCount=function(h){var f=r?r+h:h,p=this._events[f];return p?p.fn?1:p.length:0},c.prototype.emit=function(h,f,p,E,S,A){var I=r?r+h:h;if(!this._events[I])return!1;var $=this._events[I],L=arguments.length,k,U;if($.fn){switch($.once&&this.removeListener(h,$.fn,void 0,!0),L){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,f),!0;case 3:return $.fn.call($.context,f,p),!0;case 4:return $.fn.call($.context,f,p,E),!0;case 5:return $.fn.call($.context,f,p,E,S),!0;case 6:return $.fn.call($.context,f,p,E,S,A),!0}for(U=1,k=new Array(L-1);U<L;U++)k[U-1]=arguments[U];$.fn.apply($.context,k)}else{var q=$.length,j;for(U=0;U<q;U++)switch($[U].once&&this.removeListener(h,$[U].fn,void 0,!0),L){case 1:$[U].fn.call($[U].context);break;case 2:$[U].fn.call($[U].context,f);break;case 3:$[U].fn.call($[U].context,f,p);break;case 4:$[U].fn.call($[U].context,f,p,E);break;default:if(!k)for(j=1,k=new Array(L-1);j<L;j++)k[j-1]=arguments[j];$[U].fn.apply($[U].context,k)}}return!0},c.prototype.on=function(h,f,p){return s(this,h,f,p,!1)},c.prototype.once=function(h,f,p){return s(this,h,f,p,!0)},c.prototype.removeListener=function(h,f,p,E){var S=r?r+h:h;if(!this._events[S])return this;if(!f)return o(this,S),this;var A=this._events[S];if(A.fn)A.fn===f&&(!E||A.once)&&(!p||A.context===p)&&o(this,S);else{for(var I=0,$=[],L=A.length;I<L;I++)(A[I].fn!==f||E&&!A[I].once||p&&A[I].context!==p)&&$.push(A[I]);$.length?this._events[S]=$.length===1?$[0]:$:o(this,S)}return this},c.prototype.removeAllListeners=function(h){var f;return h?(f=r?r+h:h,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c}(yE)),yE.exports}var Jq=zR();const J4=yc(Jq);var eF=class extends J4{constructor(e,r,n){super();br(this,"socket");this.socket=new window.WebSocket(e,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,r,n){const i=n||r;try{this.socket.send(e),i()}catch(s){i(s)}}close(e,r){this.socket.close(e,r)}addEventListener(e,r,n){this.socket.addEventListener(e,r,n)}};function tF(t,e){return new eF(t,e)}var rF=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},nF=class extends J4{constructor(e,r="ws://localhost:8080",{autoconnect:n=!0,reconnect:i=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...c}={},u,h){super();br(this,"address");br(this,"rpc_id");br(this,"queue");br(this,"options");br(this,"autoconnect");br(this,"ready");br(this,"reconnect");br(this,"reconnect_timer_id");br(this,"reconnect_interval");br(this,"max_reconnects");br(this,"rest_options");br(this,"current_reconnects");br(this,"generate_request_id");br(this,"socket");br(this,"webSocketFactory");br(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=r,this.autoconnect=n,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=c,this.current_reconnects=0,this.generate_request_id=u||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),h?this.dataPack=h:this.dataPack=new rF,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,r,n,i){return!i&&typeof n=="object"&&(i=n,n=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const c=this.generate_request_id(e,r),u={jsonrpc:"2.0",method:e,params:r||void 0,id:c};this.socket.send(this.dataPack.encode(u),i,h=>{if(h)return o(h);this.queue[c]={promise:[s,o]},n&&(this.queue[c].timeout=setTimeout(()=>{delete this.queue[c],o(new Error("reply timeout"))},n))})})}async login(e){const r=await this.call("rpc.login",e);if(!r)throw new Error("authentication failed");return r}async listMethods(){return await this.call("__listMethods")}notify(e,r){return new Promise((n,i)=>{if(!this.ready)return i(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:r};this.socket.send(this.dataPack.encode(s),o=>{if(o)return i(o);n()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const r=await this.call("rpc.on",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+r[e]);return r}async unsubscribe(e){typeof e=="string"&&(e=[e]);const r=await this.call("rpc.off",e);if(typeof e=="string"&&r[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+r);return r}close(e,r){this.socket.close(e||1e3,r)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,r){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,r),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=zt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const i=[n.notification];if(n.params.constructor===Object)i.push(n.params);else for(let s=0;s<n.params.length;s++)i.push(n.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,i)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:i})=>{this.ready&&setTimeout(()=>this.emit("close",n,i),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(e,r),this.reconnect_interval)))})}};const iF=BigInt(0),A0=BigInt(1),sF=BigInt(2),oF=BigInt(7),aF=BigInt(256),cF=BigInt(113),qR=[],FR=[],HR=[];for(let t=0,e=A0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],qR.push(2*(5*n+r)),FR.push((t+1)*(t+2)/2%64);let i=iF;for(let s=0;s<7;s++)e=(e<<A0^(e>>oF)*cF)%aF,e&sF&&(i^=A0<<(A0<<BigInt(s))-A0);HR.push(i)}const WR=hR(HR,!0),lF=WR[0],uF=WR[1],bx=(t,e,r)=>r>32?Vj(t,e,r):Wj(t,e,r),wx=(t,e,r)=>r>32?Gj(t,e,r):Kj(t,e,r);function hF(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,h=r[u],f=r[u+1],p=bx(h,f,1)^r[c],E=wx(h,f,1)^r[c+1];for(let S=0;S<50;S+=10)t[o+S]^=p,t[o+S+1]^=E}let i=t[2],s=t[3];for(let o=0;o<24;o++){const c=FR[o],u=bx(i,s,c),h=wx(i,s,c),f=qR[o];i=t[f],s=t[f+1],t[f]=u,t[f+1]=h}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)r[c]=t[o+c];for(let c=0;c<10;c++)t[o+c]^=~r[(c+2)%10]&r[(c+4)%10]}t[0]^=lF[n],t[1]^=uF[n]}gu(r)}let dF=class KR extends H4{constructor(e,r,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,Bg(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=kj(this.state)}clone(){return this._cloneInto()}keccak(){WI(this.state32),hF(this.state32,this.rounds),WI(this.state32),this.posOut=0,this.pos=0}update(e){Wf(this),e=nw(e),sa(e);const{blockLen:r,state:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let c=0;c<o;c++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Wf(this,!1),sa(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Bg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,gu(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new KR(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const fF=(t,e,r)=>W4(()=>new dF(e,t,r)),vx=fF(1,136,256/8);class VR extends H4{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,$j(e);const n=nw(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),gu(s)}update(e){return Wf(this),this.iHash.update(e),this}digestInto(e){Wf(this),sa(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const GR=(t,e,r)=>new VR(t,e).update(r).digest();GR.create=(t,e)=>new VR(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ex(t){t.lowS!==void 0&&wh("lowS",t.lowS),t.prehash!==void 0&&wh("prehash",t.prehash)}class pF extends Error{constructor(e=""){super(e)}}const el={Err:pF,_tlv:{encode:(t,e)=>{const{Err:r}=el;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=cb(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?cb(i.length/2|128):"";return cb(t)+s+i+e},decode(t,e){const{Err:r}=el;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const u=i&127;if(!u)throw new r("tlv.decode(long): indefinite length not supported");if(u>4)throw new r("tlv.decode(long): byte length is too big");const h=e.subarray(n,n+u);if(h.length!==u)throw new r("tlv.decode: length bytes not complete");if(h[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const f of h)o=o<<8|f;if(n+=u,o<128)throw new r("tlv.decode(long): not minimal encoding")}const c=e.subarray(n,n+o);if(c.length!==o)throw new r("tlv.decode: wrong value length");return{v:c,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=el;if(t<vg)throw new e("integer: negative integers are not allowed");let r=cb(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=el;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return iw(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=el,i=ri("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:c,l:u}=n.decode(2,s),{v:h,l:f}=n.decode(2,u);if(f.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(c),s:r.decode(h)}},hexFromSig(t){const{_tlv:e,_int:r}=el,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},vg=BigInt(0),Eg=BigInt(1),gF=BigInt(2),hb=BigInt(3),yF=BigInt(4);function mF(t,e,r){function n(i){const s=t.sqr(i),o=t.mul(s,i);return t.add(t.add(o,t.mul(i,e)),r)}return n}function YR(t,e,r){const{BYTES:n}=t;function i(s){let o;if(typeof s=="bigint")o=s;else{let c=ri("private key",s);if(e){if(!e.includes(c.length*2))throw new Error("invalid private key");const u=new Uint8Array(n);u.set(c,u.length-c.length),c=u}try{o=t.fromBytes(c)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof s}`)}}if(r&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return i}function bF(t,e={}){const{Fp:r,Fn:n}=CR("weierstrass",t,e),{h:i,n:s}=t;Cy(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!r.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function c(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function u(G,B,W){const{x:D,y:_}=B.toAffine(),w=r.toBytes(D);if(wh("isCompressed",W),W){c();const g=!r.isOdd(_);return sl(ZR(g),w)}else return sl(Uint8Array.of(4),w,r.toBytes(_))}function h(G){sa(G);const B=r.BYTES,W=B+1,D=2*B+1,_=G.length,w=G[0],g=G.subarray(1);if(_===W&&(w===2||w===3)){const b=r.fromBytes(g);if(!r.isValid(b))throw new Error("bad point: is not on curve, wrong x");const m=E(b);let M;try{M=r.sqrt(m)}catch(v){const O=v instanceof Error?": "+v.message:"";throw new Error("bad point: is not on curve, sqrt error"+O)}c();const R=r.isOdd(M);return(w&1)===1!==R&&(M=r.neg(M)),{x:b,y:M}}else if(_===D&&w===4){const b=r.fromBytes(g.subarray(B*0,B*1)),m=r.fromBytes(g.subarray(B*1,B*2));if(!S(b,m))throw new Error("bad point: is not on curve");return{x:b,y:m}}else throw new Error(`bad point: got length ${_}, expected compressed=${W} or uncompressed=${D}`)}const f=e.toBytes||u,p=e.fromBytes||h,E=mF(r,t.a,t.b);function S(G,B){const W=r.sqr(B),D=E(G);return r.eql(W,D)}if(!S(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const A=r.mul(r.pow(t.a,hb),yF),I=r.mul(r.sqr(t.b),BigInt(27));if(r.is0(r.add(A,I)))throw new Error("bad curve params: a or b");function $(G,B,W=!1){if(!r.isValid(B)||W&&r.is0(B))throw new Error(`bad point coordinate ${G}`);return B}function L(G){if(!(G instanceof j))throw new Error("ProjectivePoint expected")}const k=S1((G,B)=>{const{px:W,py:D,pz:_}=G;if(r.eql(_,r.ONE))return{x:W,y:D};const w=G.is0();B==null&&(B=w?r.ONE:r.inv(_));const g=r.mul(W,B),b=r.mul(D,B),m=r.mul(_,B);if(w)return{x:r.ZERO,y:r.ZERO};if(!r.eql(m,r.ONE))throw new Error("invZ was invalid");return{x:g,y:b}}),U=S1(G=>{if(G.is0()){if(e.allowInfinityPoint&&!r.is0(G.py))return;throw new Error("bad point: ZERO")}const{x:B,y:W}=G.toAffine();if(!r.isValid(B)||!r.isValid(W))throw new Error("bad point: x or y not field elements");if(!S(B,W))throw new Error("bad point: equation left != right");if(!G.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function q(G,B,W,D,_){return W=new j(r.mul(W.px,G),W.py,W.pz),B=wg(D,B),W=wg(_,W),B.add(W)}class j{constructor(B,W,D){this.px=$("x",B),this.py=$("y",W,!0),this.pz=$("z",D),Object.freeze(this)}static fromAffine(B){const{x:W,y:D}=B||{};if(!B||!r.isValid(W)||!r.isValid(D))throw new Error("invalid affine point");if(B instanceof j)throw new Error("projective point not allowed");return r.is0(W)&&r.is0(D)?j.ZERO:new j(W,D,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(B){return _R(j,"pz",B)}static fromBytes(B){return sa(B),j.fromHex(B)}static fromHex(B){const W=j.fromAffine(p(ri("pointHex",B)));return W.assertValidity(),W}static fromPrivateKey(B){const W=YR(n,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return j.BASE.multiply(W(B))}static msm(B,W){return xR(j,n,B,W)}precompute(B=8,W=!0){return V.setWindowSize(this,B),W||this.multiply(hb),this}_setWindowSize(B){this.precompute(B)}assertValidity(){U(this)}hasEvenY(){const{y:B}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(B)}equals(B){L(B);const{px:W,py:D,pz:_}=this,{px:w,py:g,pz:b}=B,m=r.eql(r.mul(W,b),r.mul(w,_)),M=r.eql(r.mul(D,b),r.mul(g,_));return m&&M}negate(){return new j(this.px,r.neg(this.py),this.pz)}double(){const{a:B,b:W}=t,D=r.mul(W,hb),{px:_,py:w,pz:g}=this;let b=r.ZERO,m=r.ZERO,M=r.ZERO,R=r.mul(_,_),C=r.mul(w,w),v=r.mul(g,g),O=r.mul(_,w);return O=r.add(O,O),M=r.mul(_,g),M=r.add(M,M),b=r.mul(B,M),m=r.mul(D,v),m=r.add(b,m),b=r.sub(C,m),m=r.add(C,m),m=r.mul(b,m),b=r.mul(O,b),M=r.mul(D,M),v=r.mul(B,v),O=r.sub(R,v),O=r.mul(B,O),O=r.add(O,M),M=r.add(R,R),R=r.add(M,R),R=r.add(R,v),R=r.mul(R,O),m=r.add(m,R),v=r.mul(w,g),v=r.add(v,v),R=r.mul(v,O),b=r.sub(b,R),M=r.mul(v,C),M=r.add(M,M),M=r.add(M,M),new j(b,m,M)}add(B){L(B);const{px:W,py:D,pz:_}=this,{px:w,py:g,pz:b}=B;let m=r.ZERO,M=r.ZERO,R=r.ZERO;const C=t.a,v=r.mul(t.b,hb);let O=r.mul(W,w),x=r.mul(D,g),N=r.mul(_,b),H=r.add(W,D),Y=r.add(w,g);H=r.mul(H,Y),Y=r.add(O,x),H=r.sub(H,Y),Y=r.add(W,_);let Q=r.add(w,b);return Y=r.mul(Y,Q),Q=r.add(O,N),Y=r.sub(Y,Q),Q=r.add(D,_),m=r.add(g,b),Q=r.mul(Q,m),m=r.add(x,N),Q=r.sub(Q,m),R=r.mul(C,Y),m=r.mul(v,N),R=r.add(m,R),m=r.sub(x,R),R=r.add(x,R),M=r.mul(m,R),x=r.add(O,O),x=r.add(x,O),N=r.mul(C,N),Y=r.mul(v,Y),x=r.add(x,N),N=r.sub(O,N),N=r.mul(C,N),Y=r.add(Y,N),O=r.mul(x,Y),M=r.add(M,O),O=r.mul(Q,Y),m=r.mul(H,m),m=r.sub(m,O),O=r.mul(H,x),R=r.mul(Q,R),R=r.add(R,O),new j(m,M,R)}subtract(B){return this.add(B.negate())}is0(){return this.equals(j.ZERO)}multiply(B){const{endo:W}=e;if(!n.isValidNot0(B))throw new Error("invalid scalar: out of range");let D,_;const w=g=>V.wNAFCached(this,g,j.normalizeZ);if(W){const{k1neg:g,k1:b,k2neg:m,k2:M}=W.splitScalar(B),{p:R,f:C}=w(b),{p:v,f:O}=w(M);_=C.add(O),D=q(W.beta,R,v,g,m)}else{const{p:g,f:b}=w(B);D=g,_=b}return j.normalizeZ([D,_])[0]}multiplyUnsafe(B){const{endo:W}=e,D=this;if(!n.isValid(B))throw new Error("invalid scalar: out of range");if(B===vg||D.is0())return j.ZERO;if(B===Eg)return D;if(V.hasPrecomputes(this))return this.multiply(B);if(W){const{k1neg:_,k1:w,k2neg:g,k2:b}=W.splitScalar(B),{p1:m,p2:M}=_z(j,D,w,b);return q(W.beta,m,M,_,g)}else return V.wNAFCachedUnsafe(D,B)}multiplyAndAddUnsafe(B,W,D){const _=this.multiplyUnsafe(W).add(B.multiplyUnsafe(D));return _.is0()?void 0:_}toAffine(B){return k(this,B)}isTorsionFree(){const{isTorsionFree:B}=e;return i===Eg?!0:B?B(j,this):V.wNAFCachedUnsafe(this,s).is0()}clearCofactor(){const{clearCofactor:B}=e;return i===Eg?this:B?B(j,this):this.multiplyUnsafe(i)}toBytes(B=!0){return wh("isCompressed",B),this.assertValidity(),f(j,this,B)}toRawBytes(B=!0){return this.toBytes(B)}toHex(B=!0){return Kf(this.toBytes(B))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}j.BASE=new j(t.Gx,t.Gy,r.ONE),j.ZERO=new j(r.ZERO,r.ONE,r.ZERO),j.Fp=r,j.Fn=n;const z=n.BITS,V=IR(j,e.endo?Math.ceil(z/2):z);return j}function ZR(t){return Uint8Array.of(t?2:3)}function wF(t,e,r={}){Cy(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||lR,i=e.hmac||((D,..._)=>GR(e.hash,D,sl(..._))),{Fp:s,Fn:o}=t,{ORDER:c,BITS:u}=o;function h(D){const _=c>>Eg;return D>_}function f(D){return h(D)?o.neg(D):D}function p(D,_){if(!o.isValidNot0(_))throw new Error(`invalid signature ${D}: out of range 1..CURVE.n`)}class E{constructor(_,w,g){p("r",_),p("s",w),this.r=_,this.s=w,g!=null&&(this.recovery=g),Object.freeze(this)}static fromCompact(_){const w=o.BYTES,g=ri("compactSignature",_,w*2);return new E(o.fromBytes(g.subarray(0,w)),o.fromBytes(g.subarray(w,w*2)))}static fromDER(_){const{r:w,s:g}=el.toSig(ri("DER",_));return new E(w,g)}assertValidity(){}addRecoveryBit(_){return new E(this.r,this.s,_)}recoverPublicKey(_){const w=s.ORDER,{r:g,s:b,recovery:m}=this;if(m==null||![0,1,2,3].includes(m))throw new Error("recovery id invalid");if(c*gF<w&&m>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=m===2||m===3?g+c:g;if(!s.isValid(R))throw new Error("recovery id 2 or 3 invalid");const C=s.toBytes(R),v=t.fromHex(sl(ZR((m&1)===0),C)),O=o.inv(R),x=U(ri("msgHash",_)),N=o.create(-x*O),H=o.create(b*O),Y=t.BASE.multiplyUnsafe(N).add(v.multiplyUnsafe(H));if(Y.is0())throw new Error("point at infinify");return Y.assertValidity(),Y}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,o.neg(this.s),this.recovery):this}toBytes(_){if(_==="compact")return sl(o.toBytes(this.r),o.toBytes(this.s));if(_==="der")return F4(el.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Kf(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Kf(this.toBytes("compact"))}}const S=YR(o,r.allowedPrivateKeyLengths,r.wrapPrivateKey),A={isValidPrivateKey(D){try{return S(D),!0}catch{return!1}},normPrivateKeyToScalar:S,randomPrivateKey:()=>{const D=c;return wz(n(ER(D)),D)},precompute(D=8,_=t.BASE){return _.precompute(D,!1)}};function I(D,_=!0){return t.fromPrivateKey(D).toBytes(_)}function $(D){if(typeof D=="bigint")return!1;if(D instanceof t)return!0;const w=ri("key",D).length,g=s.BYTES,b=g+1,m=2*g+1;if(!(r.allowedPrivateKeyLengths||o.BYTES===b))return w===b||w===m}function L(D,_,w=!0){if($(D)===!0)throw new Error("first arg must be private key");if($(_)===!1)throw new Error("second arg must be public key");return t.fromHex(_).multiply(S(D)).toBytes(w)}const k=e.bits2int||function(D){if(D.length>8192)throw new Error("input is too large");const _=iw(D),w=D.length*8-u;return w>0?_>>BigInt(w):_},U=e.bits2int_modN||function(D){return o.create(k(D))},q=ow(u);function j(D){return Tf("num < 2^"+u,D,vg,q),o.toBytes(D)}function z(D,_,w=V){if(["recovered","canonical"].some(H=>H in w))throw new Error("sign() legacy options not supported");const{hash:g}=e;let{lowS:b,prehash:m,extraEntropy:M}=w;b==null&&(b=!0),D=ri("msgHash",D),Ex(w),m&&(D=ri("prehashed msgHash",g(D)));const R=U(D),C=S(_),v=[j(C),j(R)];if(M!=null&&M!==!1){const H=M===!0?n(s.BYTES):M;v.push(ri("extraEntropy",H))}const O=sl(...v),x=R;function N(H){const Y=k(H);if(!o.isValidNot0(Y))return;const Q=o.inv(Y),ee=t.BASE.multiply(Y).toAffine(),re=o.create(ee.x);if(re===vg)return;const oe=o.create(Q*o.create(x+re*C));if(oe===vg)return;let be=(ee.x===re?0:2)|Number(ee.y&Eg),Ce=oe;return b&&h(oe)&&(Ce=f(oe),be^=1),new E(re,Ce,be)}return{seed:O,k2sig:N}}const V={lowS:e.lowS,prehash:!1},G={lowS:e.lowS,prehash:!1};function B(D,_,w=V){const{seed:g,k2sig:b}=z(D,_,w);return lz(e.hash.outputLen,o.BYTES,i)(g,b)}t.BASE.precompute(8);function W(D,_,w,g=G){const b=D;_=ri("msgHash",_),w=ri("publicKey",w),Ex(g);const{lowS:m,prehash:M,format:R}=g;if("strict"in g)throw new Error("options.strict was renamed to lowS");if(R!==void 0&&!["compact","der","js"].includes(R))throw new Error('format must be "compact", "der" or "js"');const C=typeof b=="string"||q4(b),v=!C&&!R&&typeof b=="object"&&b!==null&&typeof b.r=="bigint"&&typeof b.s=="bigint";if(!C&&!v)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let O,x;try{if(v)if(R===void 0||R==="js")O=new E(b.r,b.s);else throw new Error("invalid format");if(C){try{R!=="compact"&&(O=E.fromDER(b))}catch(Ce){if(!(Ce instanceof el.Err))throw Ce}!O&&R!=="der"&&(O=E.fromCompact(b))}x=t.fromHex(w)}catch{return!1}if(!O||m&&O.hasHighS())return!1;M&&(_=e.hash(_));const{r:N,s:H}=O,Y=U(_),Q=o.inv(H),ee=o.create(Y*Q),re=o.create(N*Q),oe=t.BASE.multiplyUnsafe(ee).add(x.multiplyUnsafe(re));return oe.is0()?!1:o.create(oe.x)===N}return Object.freeze({getPublicKey:I,getSharedSecret:L,sign:B,verify:W,utils:A,Point:t,Signature:E})}function vF(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=dp(e.n,t.nBitLength),i={Fp:r,Fn:n,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function EF(t){const{CURVE:e,curveOpts:r}=vF(t),n={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,ecdsaOpts:n}}function _F(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function SF(t){const{CURVE:e,curveOpts:r,ecdsaOpts:n}=EF(t),i=bF(e,r),s=wF(i,n,r);return _F(t,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function AF(t,e){const r=n=>SF({...t,hash:n});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const M1={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const IF=BigInt(1),J3=BigInt(2),_x=(t,e)=>(t+e/J3)/e;function xF(t){const e=M1.p,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),h=t*t*t%e,f=h*h*t%e,p=Gn(f,r,e)*f%e,E=Gn(p,r,e)*f%e,S=Gn(E,J3,e)*h%e,A=Gn(S,i,e)*S%e,I=Gn(A,s,e)*A%e,$=Gn(I,c,e)*I%e,L=Gn($,u,e)*$%e,k=Gn(L,c,e)*I%e,U=Gn(k,r,e)*f%e,q=Gn(U,o,e)*A%e,j=Gn(q,n,e)*h%e,z=Gn(j,J3,e);if(!eS.eql(eS.sqr(z),t))throw new Error("Cannot find square root");return z}const eS=dp(M1.p,void 0,void 0,{sqrt:xF}),eA=AF({...M1,Fp:eS,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=M1.n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-IF*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),c=_x(s*t,e),u=_x(-n*t,e);let h=ni(t-c*r-u*i,e),f=ni(-c*n-u*s,e);const p=h>o,E=f>o;if(p&&(h=e-h),E&&(f=e-f),h>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:p,k1:h,k2neg:E,k2:f}}}},fR),CF=fp.utils.randomPrivateKey,Sx=()=>{const t=fp.utils.randomPrivateKey(),e=N1(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),{publicKey:e,secretKey:r}},N1=fp.getPublicKey;function Ax(t){try{return fp.ExtendedPoint.fromHex(t),!0}catch{return!1}}const tA=(t,e)=>fp.sign(t,e.slice(0,32)),TF=fp.verify,sr=t=>zt.Buffer.isBuffer(t)?t:t instanceof Uint8Array?zt.Buffer.from(t.buffer,t.byteOffset,t.byteLength):zt.Buffer.from(t);class rA{constructor(e){Object.assign(this,e)}encode(){return zt.Buffer.from(cE.serialize(_g,this))}static decode(e){return cE.deserialize(_g,this,e)}static decodeUnchecked(e){return cE.deserializeUnchecked(_g,this,e)}}class MF extends rA{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(r=>{this.enum=r})}}const _g=new Map;var QR;const XR=32,uc=32;function NF(t){return t._bn!==void 0}let Ix=1;class Ke extends rA{constructor(e){if(super({}),this._bn=void 0,NF(e))this._bn=e._bn;else{if(typeof e=="string"){const r=is.decode(e);if(r.length!=uc)throw new Error("Invalid public key input");this._bn=new ix(r)}else this._bn=new ix(e);if(this._bn.byteLength()>uc)throw new Error("Invalid public key input")}}static unique(){const e=new Ke(Ix);return Ix+=1,new Ke(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return is.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(zt.Buffer);if(e.length===uc)return e;const r=zt.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){const i=zt.Buffer.concat([e.toBuffer(),zt.Buffer.from(r),n.toBuffer()]),s=cx(i);return new Ke(s)}static createProgramAddressSync(e,r){let n=zt.Buffer.alloc(0);e.forEach(function(s){if(s.length>XR)throw new TypeError("Max seed length exceeded");n=zt.Buffer.concat([n,sr(s)])}),n=zt.Buffer.concat([n,r.toBuffer(),zt.Buffer.from("ProgramDerivedAddress")]);const i=cx(n);if(Ax(i))throw new Error("Invalid seeds, address must fall off the curve");return new Ke(i)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,i;for(;n!=0;){try{const s=e.concat(zt.Buffer.from([n]));i=this.createProgramAddressSync(s,r)}catch(s){if(s instanceof TypeError)throw s;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new Ke(e);return Ax(r.toBytes())}}QR=Ke;Ke.default=new QR("11111111111111111111111111111111");_g.set(Ke,{kind:"struct",fields:[["_bn","u256"]]});class OF{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const r=sr(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=r.slice(32,64),this._secretKey=r.slice(0,32)}else this._secretKey=sr(CF()),this._publicKey=sr(N1(this._secretKey))}get publicKey(){return new Ke(this._publicKey)}get secretKey(){return zt.Buffer.concat([this._secretKey,this._publicKey],64)}}const RF=new Ke("BPFLoader1111111111111111111111111111111111"),lu=1232,dw=127,Yf=64;class nA extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(nA.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class iA extends Error{constructor(e,r){super(`Transaction was not confirmed in ${r.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(iA.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Mf extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Mf.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Ug{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((s,o)=>{n.set(s.toBase58(),o)});const i=s=>{const o=n.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:i(s.programId),accountKeyIndexes:s.keys.map(o=>i(o.pubkey)),data:s.data}))}}const mr=(t="publicKey")=>se.blob(32,t),DF=(t="signature")=>se.blob(64,t),ah=(t="string")=>{const e=se.struct([se.u32("length"),se.u32("lengthPadding"),se.blob(se.offset(se.u32(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(s,o)=>r(s,o).chars.toString(),i.encode=(s,o,c)=>{const u={chars:zt.Buffer.from(s,"utf8")};return n(u,o,c)},i.alloc=s=>se.u32().span+se.u32().span+zt.Buffer.from(s,"utf8").length,i},$F=(t="authorized")=>se.struct([mr("staker"),mr("withdrawer")],t),kF=(t="lockup")=>se.struct([se.ns64("unixTimestamp"),se.ns64("epoch"),mr("custodian")],t),PF=(t="voteInit")=>se.struct([mr("nodePubkey"),mr("authorizedVoter"),mr("authorizedWithdrawer"),se.u8("commission")],t),BF=(t="voteAuthorizeWithSeedArgs")=>se.struct([se.u32("voteAuthorizationType"),mr("currentAuthorityDerivedKeyOwnerPubkey"),ah("currentAuthorityDerivedKeySeed"),mr("newAuthorized")],t);function JR(t,e){const r=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){const s=e[i.property];if(Array.isArray(s))return s.length*r(i.elementLayout)}else if("fields"in i)return JR({layout:i},e[i.property]);return 0};let n=0;return t.layout.fields.forEach(i=>{n+=r(i)}),n}function ao(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,(n&128)===0)break}return e}function Oo(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function Pr(t,e){if(!t)throw new Error(e||"Assertion failed")}class fw{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const n=new Map,i=o=>{const c=o.toBase58();let u=n.get(c);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(c,u)),u},s=i(r);s.isSigner=!0,s.isWritable=!0;for(const o of e){i(o.programId).isInvoked=!0;for(const c of o.keys){const u=i(c.pubkey);u.isSigner||(u.isSigner=c.isSigner),u.isWritable||(u.isWritable=c.isWritable)}}return new fw(r,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Pr(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,u])=>u.isSigner&&u.isWritable),n=e.filter(([,u])=>u.isSigner&&!u.isWritable),i=e.filter(([,u])=>!u.isSigner&&u.isWritable),s=e.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:s.length};{Pr(r.length>0,"Expected at least one writable signer key");const[u]=r[0];Pr(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...r.map(([u])=>new Ke(u)),...n.map(([u])=>new Ke(u)),...i.map(([u])=>new Ke(u)),...s.map(([u])=>new Ke(u))];return[o,c]}extractTableLookup(e){const[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[i,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(r.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:i},{writable:n,readonly:s}]}drainKeysFoundInLookupTable(e,r){const n=new Array,i=new Array;for(const[s,o]of this.keyMetaMap.entries())if(r(o)){const c=new Ke(s),u=e.findIndex(h=>h.equals(c));u>=0&&(Pr(u<256,"Max lookup table index exceeded"),n.push(u),i.push(c),this.keyMetaMap.delete(s))}return[n,i]}}const eD="Reached end of buffer unexpectedly";function ac(t){if(t.length===0)throw new Error(eD);return t.shift()}function co(t,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(eD);return t.splice(...e)}class Oa{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new Ke(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:is.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Ug(this.staticAccountKeys)}static compile(e){const r=fw.compile(e.instructions,e.payerKey),[n,i]=r.getMessageComponents(),o=new Ug(i).compileInstructions(e.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:is.encode(c.data)}));return new Oa({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-r,s=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<s}else{const n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];Oo(r,e);const n=this.instructions.map(p=>{const{accounts:E,programIdIndex:S}=p,A=Array.from(is.decode(p.data));let I=[];Oo(I,E.length);let $=[];return Oo($,A.length),{programIdIndex:S,keyIndicesCount:zt.Buffer.from(I),keyIndices:E,dataLength:zt.Buffer.from($),data:A}});let i=[];Oo(i,n.length);let s=zt.Buffer.alloc(lu);zt.Buffer.from(i).copy(s);let o=i.length;n.forEach(p=>{const S=se.struct([se.u8("programIdIndex"),se.blob(p.keyIndicesCount.length,"keyIndicesCount"),se.seq(se.u8("keyIndex"),p.keyIndices.length,"keyIndices"),se.blob(p.dataLength.length,"dataLength"),se.seq(se.u8("userdatum"),p.data.length,"data")]).encode(p,s,o);o+=S}),s=s.slice(0,o);const c=se.struct([se.blob(1,"numRequiredSignatures"),se.blob(1,"numReadonlySignedAccounts"),se.blob(1,"numReadonlyUnsignedAccounts"),se.blob(r.length,"keyCount"),se.seq(mr("key"),e,"keys"),mr("recentBlockhash")]),u={numRequiredSignatures:zt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:zt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:zt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:zt.Buffer.from(r),keys:this.accountKeys.map(p=>sr(p.toBytes())),recentBlockhash:is.decode(this.recentBlockhash)};let h=zt.Buffer.alloc(2048);const f=c.encode(u,h);return s.copy(h,f),h.slice(0,f+s.length)}static from(e){let r=[...e];const n=ac(r);if(n!==(n&dw))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const i=ac(r),s=ac(r),o=ao(r);let c=[];for(let E=0;E<o;E++){const S=co(r,0,uc);c.push(new Ke(zt.Buffer.from(S)))}const u=co(r,0,uc),h=ao(r);let f=[];for(let E=0;E<h;E++){const S=ac(r),A=ao(r),I=co(r,0,A),$=ao(r),L=co(r,0,$),k=is.encode(zt.Buffer.from(L));f.push({programIdIndex:S,accounts:I,data:k})}const p={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:s},recentBlockhash:is.encode(zt.Buffer.from(u)),accountKeys:c,instructions:f};return new Oa(p)}}class vh{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Ug(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const i=e-n,s=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return i<s}else if(e>=this.header.numRequiredSignatures){const i=e-r,o=n-r-this.header.numReadonlyUnsignedAccounts;return i<o}else{const i=r-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const i=e.find(s=>s.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const s of n.writableIndexes)if(s<i.state.addresses.length)r.writable.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`);for(const s of n.readonlyIndexes)if(s<i.state.addresses.length)r.readonly.push(i.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){const r=fw.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const f of s){const p=r.extractTableLookup(f);if(p!==void 0){const[E,{writable:S,readonly:A}]=p;n.push(E),i.writable.push(...S),i.readonly.push(...A)}}const[o,c]=r.getMessageComponents(),h=new Ug(c,i).compileInstructions(e.instructions);return new vh({header:o,staticAccountKeys:c,recentBlockhash:e.recentBlockhash,compiledInstructions:h,addressTableLookups:n})}serialize(){const e=Array();Oo(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();Oo(n,this.compiledInstructions.length);const i=this.serializeAddressTableLookups(),s=Array();Oo(s,this.addressTableLookups.length);const o=se.struct([se.u8("prefix"),se.struct([se.u8("numRequiredSignatures"),se.u8("numReadonlySignedAccounts"),se.u8("numReadonlyUnsignedAccounts")],"header"),se.blob(e.length,"staticAccountKeysLength"),se.seq(mr(),this.staticAccountKeys.length,"staticAccountKeys"),mr("recentBlockhash"),se.blob(n.length,"instructionsLength"),se.blob(r.length,"serializedInstructions"),se.blob(s.length,"addressTableLookupsLength"),se.blob(i.length,"serializedAddressTableLookups")]),c=new Uint8Array(lu),h=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(f=>f.toBytes()),recentBlockhash:is.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:i},c);return c.slice(0,h)}serializeInstructions(){let e=0;const r=new Uint8Array(lu);for(const n of this.compiledInstructions){const i=Array();Oo(i,n.accountKeyIndexes.length);const s=Array();Oo(s,n.data.length);const o=se.struct([se.u8("programIdIndex"),se.blob(i.length,"encodedAccountKeyIndexesLength"),se.seq(se.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),se.blob(s.length,"encodedDataLength"),se.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(lu);for(const n of this.addressTableLookups){const i=Array();Oo(i,n.writableIndexes.length);const s=Array();Oo(s,n.readonlyIndexes.length);const o=se.struct([mr("accountKey"),se.blob(i.length,"encodedWritableIndexesLength"),se.seq(se.u8(),n.writableIndexes.length,"writableIndexes"),se.blob(s.length,"encodedReadonlyIndexesLength"),se.seq(se.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const n=ac(r),i=n&dw;Pr(n!==i,"Expected versioned message but received legacy message");const s=i;Pr(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:ac(r),numReadonlySignedAccounts:ac(r),numReadonlyUnsignedAccounts:ac(r)},c=[],u=ao(r);for(let A=0;A<u;A++)c.push(new Ke(co(r,0,uc)));const h=is.encode(co(r,0,uc)),f=ao(r),p=[];for(let A=0;A<f;A++){const I=ac(r),$=ao(r),L=co(r,0,$),k=ao(r),U=new Uint8Array(co(r,0,k));p.push({programIdIndex:I,accountKeyIndexes:L,data:U})}const E=ao(r),S=[];for(let A=0;A<E;A++){const I=new Ke(co(r,0,uc)),$=ao(r),L=co(r,0,$),k=ao(r),U=co(r,0,k);S.push({accountKey:I,writableIndexes:L,readonlyIndexes:U})}return new vh({header:o,staticAccountKeys:c,recentBlockhash:h,compiledInstructions:p,addressTableLookups:S})}}const pw={deserializeMessageVersion(t){const e=t[0],r=e&dw;return r===e?"legacy":r},deserialize:t=>{const e=pw.deserializeMessageVersion(t);if(e==="legacy")return Oa.from(t);if(e===0)return vh.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Qc=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const LF=zt.Buffer.alloc(Yf).fill(0);class mn{constructor(e){this.keys=void 0,this.programId=void 0,this.data=zt.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ar{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{const{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new mn(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let I=0;I<r.length;I++)if(r[I].programId===void 0)throw new Error(`Transaction instruction index ${I} has undefined program id`);const i=[],s=[];r.forEach(I=>{I.keys.forEach(L=>{s.push({...L})});const $=I.programId.toString();i.includes($)||i.push($)}),i.forEach(I=>{s.push({pubkey:new Ke(I),isSigner:!1,isWritable:!1})});const o=[];s.forEach(I=>{const $=I.pubkey.toString(),L=o.findIndex(k=>k.pubkey.toString()===$);L>-1?(o[L].isWritable=o[L].isWritable||I.isWritable,o[L].isSigner=o[L].isSigner||I.isSigner):o.push(I)}),o.sort(function(I,$){if(I.isSigner!==$.isSigner)return I.isSigner?-1:1;if(I.isWritable!==$.isWritable)return I.isWritable?-1:1;const L={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return I.pubkey.toBase58().localeCompare($.pubkey.toBase58(),"en",L)});const c=o.findIndex(I=>I.pubkey.equals(n));if(c>-1){const[I]=o.splice(c,1);I.isSigner=!0,I.isWritable=!0,o.unshift(I)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const I of this.signatures){const $=o.findIndex(L=>L.pubkey.equals(I.publicKey));if($>-1)o[$].isSigner||(o[$].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${I.publicKey.toString()}`)}let u=0,h=0,f=0;const p=[],E=[];o.forEach(({pubkey:I,isSigner:$,isWritable:L})=>{$?(p.push(I.toString()),u+=1,L||(h+=1)):(E.push(I.toString()),L||(f+=1))});const S=p.concat(E),A=r.map(I=>{const{data:$,programId:L}=I;return{programIdIndex:S.indexOf(L.toString()),accounts:I.keys.map(k=>S.indexOf(k.pubkey.toString())),data:is.encode($)}});return A.forEach(I=>{Pr(I.programIdIndex>=0),I.accounts.forEach($=>Pr($>=0))}),new Oa({header:{numRequiredSignatures:u,numReadonlySignedAccounts:h,numReadonlyUnsignedAccounts:f},accountKeys:S,recentBlockhash:e,instructions:A})}_compile(){const e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((i,s)=>r[s].equals(i.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const r=new Set;this.signatures=e.filter(n=>{const i=n.toString();return r.has(i)?!1:(r.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const s of e){const o=s.publicKey.toString();r.has(o)||(r.add(o),n.push(s))}this.signatures=n.map(s=>({signature:null,publicKey:s.publicKey}));const i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const s of e){const o=s.publicKey.toString();r.has(o)||(r.add(o),n.push(s))}const i=this._compile();this._partialSign(i,...n)}_partialSign(e,...r){const n=e.serialize();r.forEach(i=>{const s=tA(n,i.secretKey);this._addSignature(i.publicKey,sr(s))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){Pr(r.length===64);const n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=zt.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){const n={};for(const{signature:i,publicKey:s}of this.signatures)i===null?r&&(n.missing||(n.missing=[])).push(s):TF(i,e,s.toBytes())||(n.invalid||(n.invalid=[])).push(s);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){const s=this._getMessageSignednessErrors(i,r);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(i)}_serialize(e){const{signatures:r}=this,n=[];Oo(n,r.length);const i=n.length+r.length*64+e.length,s=zt.Buffer.alloc(i);return Pr(r.length<256),zt.Buffer.from(n).copy(s,0),r.forEach(({signature:o},c)=>{o!==null&&(Pr(o.length===64,"signature has invalid length"),zt.Buffer.from(o).copy(s,n.length+c*64))}),e.copy(s,n.length+r.length*64),Pr(s.length<=lu,`Transaction too large: ${s.length} > ${lu}`),s}get keys(){return Pr(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Pr(this.instructions.length===1),this.instructions[0].programId}get data(){return Pr(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e];const n=ao(r);let i=[];for(let s=0;s<n;s++){const o=co(r,0,Yf);i.push(is.encode(zt.Buffer.from(o)))}return Ar.populate(Oa.from(r),i)}static populate(e,r=[]){const n=new Ar;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((i,s)=>{const o={signature:i==is.encode(LF)?null:is.decode(i),publicKey:e.accountKeys[s]};n.signatures.push(o)}),e.instructions.forEach(i=>{const s=i.accounts.map(o=>{const c=e.accountKeys[o];return{pubkey:c,isSigner:n.signatures.some(u=>u.publicKey.toString()===c.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new mn({keys:s,programId:e.accountKeys[i.programIdIndex],data:is.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}}class sA{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,r){const{header:n,compiledInstructions:i,recentBlockhash:s}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u}=n,h=o-c;Pr(h>0,"Message header is invalid");const f=e.staticAccountKeys.length-o-u;Pr(f>=0,"Message header is invalid");const p=e.getAccountKeys(r),E=p.get(0);if(E===void 0)throw new Error("Failed to decompile message because no account keys were found");const S=[];for(const A of i){const I=[];for(const L of A.accountKeyIndexes){const k=p.get(L);if(k===void 0)throw new Error(`Failed to find key for account key index ${L}`);const U=L<o;let q;U?q=L<h:L<p.staticAccountKeys.length?q=L-o<f:q=L-p.staticAccountKeys.length<p.accountKeysFromLookups.writable.length,I.push({pubkey:k,isSigner:L<n.numRequiredSignatures,isWritable:q})}const $=p.get(A.programIdIndex);if($===void 0)throw new Error(`Failed to find program id for program id index ${A.programIdIndex}`);S.push(new mn({programId:$,data:sr(A.data),keys:I}))}return new sA({payerKey:E,instructions:S,recentBlockhash:s})}compileToLegacyMessage(){return Oa.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return vh.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class Eh{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)Pr(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Yf));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),r=Array();Oo(r,this.signatures.length);const n=se.struct([se.blob(r.length,"encodedSignaturesLength"),se.seq(DF(),this.signatures.length,"signatures"),se.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),s=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,s)}static deserialize(e){let r=[...e];const n=[],i=ao(r);for(let o=0;o<i;o++)n.push(new Uint8Array(co(r,0,Yf)));const s=pw.deserialize(new Uint8Array(r));return new Eh(s,n)}sign(e){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const i of e){const s=n.findIndex(o=>o.equals(i.publicKey));Pr(s>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[s]=tA(r,i.secretKey)}}addSignature(e,r){Pr(r.byteLength===64,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));Pr(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=r}}const UF=160,jF=64,zF=UF/jF,tD=1e3/zF,sc=new Ke("SysvarC1ock11111111111111111111111111111111"),qF=new Ke("SysvarEpochSchedu1e111111111111111111111111"),FF=new Ke("Sysvar1nstructions1111111111111111111111111"),e1=new Ke("SysvarRecentB1ockHashes11111111111111111111"),Zf=new Ke("SysvarRent111111111111111111111111111111111"),HF=new Ke("SysvarRewards111111111111111111111111111111"),WF=new Ke("SysvarS1otHashes111111111111111111111111111"),KF=new Ke("SysvarS1otHistory11111111111111111111111111"),t1=new Ke("SysvarStakeHistory1111111111111111111111111");class jg extends Error{constructor({action:e,signature:r,transactionMessage:n,logs:i}){const s=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(e){case"send":c=`Transaction ${r} resulted in an error. 
${n}. `+s+o;break;case"simulate":c=`Simulation failed. 
Message: ${n}. 
`+s+o;break;default:c=`Unknown action '${(u=>u)(e)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=r,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((r,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){const s=i.meta.logMessages;this.transactionLogs=s,r(s)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const VF={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class At extends Error{constructor({code:e,message:r,data:n},i){super(i!=null?`${i}: ${r}`:r),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function tS(t,e,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await t.sendTransaction(e,r,i);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await t.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:s,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:c}=e.nonceInfo,u=c.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:e.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await t.confirmTransaction(s,n&&n.commitment)).value;if(o.err)throw s!=null?new jg({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${s} failed (${JSON.stringify(o)})`);return s}function eh(t){return new Promise(e=>setTimeout(e,t))}function Cr(t,e){const r=t.layout.span>=0?t.layout.span:JR(t,e),n=zt.Buffer.alloc(r),i=Object.assign({instruction:t.index},e);return t.layout.encode(i,n),n}function Kr(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${r.instruction} != ${t.index}`);return r}const rD=se.nu64("lamportsPerSignature"),nD=se.struct([se.u32("version"),se.u32("state"),mr("authorizedPubkey"),mr("nonce"),se.struct([rD],"feeCalculator")]),rS=nD.span;class gw{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const r=nD.decode(sr(e),0);return new gw({authorizedPubkey:new Ke(r.authorizedPubkey),nonce:new Ke(r.nonce).toString(),feeCalculator:r.feeCalculator})}}function Qf(t){const e=se.blob(8,t),r=e.decode.bind(e),n=e.encode.bind(e),i=e,s=_q();return i.decode=(o,c)=>{const u=r(o,c);return s.decode(u)},i.encode=(o,c,u)=>{const h=s.encode(o);return n(h,c,u)},i}class GF{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(xn))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:r,space:n,programId:i}=Kr(xn.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:r,space:n,programId:new Ke(i)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:r}=Kr(xn.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:r}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:r,seed:n,programId:i}=Kr(xn.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:r,seed:n,programId:new Ke(i)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:r}=Kr(xn.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:r}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:r,seed:n,space:i,programId:s}=Kr(xn.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Ke(r),seed:n,space:i,programId:new Ke(s)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:r}=Kr(xn.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new Ke(r)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:r,seed:n,programId:i}=Kr(xn.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new Ke(r),seed:n,programId:new Ke(i)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:r,seed:n,lamports:i,space:s,programId:o}=Kr(xn.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Ke(r),seed:n,lamports:i,space:s,programId:new Ke(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:r}=Kr(xn.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Ke(r)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Kr(xn.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:r}=Kr(xn.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:r}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:r}=Kr(xn.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Ke(r)}}static checkProgramId(e){if(!e.equals(qi.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,r){if(e.length<r)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${r}`)}}const xn=Object.freeze({Create:{index:0,layout:se.struct([se.u32("instruction"),se.ns64("lamports"),se.ns64("space"),mr("programId")])},Assign:{index:1,layout:se.struct([se.u32("instruction"),mr("programId")])},Transfer:{index:2,layout:se.struct([se.u32("instruction"),Qf("lamports")])},CreateWithSeed:{index:3,layout:se.struct([se.u32("instruction"),mr("base"),ah("seed"),se.ns64("lamports"),se.ns64("space"),mr("programId")])},AdvanceNonceAccount:{index:4,layout:se.struct([se.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:se.struct([se.u32("instruction"),se.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:se.struct([se.u32("instruction"),mr("authorized")])},AuthorizeNonceAccount:{index:7,layout:se.struct([se.u32("instruction"),mr("authorized")])},Allocate:{index:8,layout:se.struct([se.u32("instruction"),se.ns64("space")])},AllocateWithSeed:{index:9,layout:se.struct([se.u32("instruction"),mr("base"),ah("seed"),se.ns64("space"),mr("programId")])},AssignWithSeed:{index:10,layout:se.struct([se.u32("instruction"),mr("base"),ah("seed"),mr("programId")])},TransferWithSeed:{index:11,layout:se.struct([se.u32("instruction"),Qf("lamports"),ah("seed"),mr("programId")])},UpgradeNonceAccount:{index:12,layout:se.struct([se.u32("instruction")])}});class qi{constructor(){}static createAccount(e){const r=xn.Create,n=Cr(r,{lamports:e.lamports,space:e.space,programId:sr(e.programId.toBuffer())});return new mn({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let r,n;if("basePubkey"in e){const i=xn.TransferWithSeed;r=Cr(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:sr(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const i=xn.Transfer;r=Cr(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new mn({keys:n,programId:this.programId,data:r})}static assign(e){let r,n;if("basePubkey"in e){const i=xn.AssignWithSeed;r=Cr(i,{base:sr(e.basePubkey.toBuffer()),seed:e.seed,programId:sr(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=xn.Assign;r=Cr(i,{programId:sr(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new mn({keys:n,programId:this.programId,data:r})}static createAccountWithSeed(e){const r=xn.CreateWithSeed,n=Cr(r,{base:sr(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:sr(e.programId.toBuffer())});let i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new mn({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){const r=new Ar;"basePubkey"in e&&"seed"in e?r.add(qi.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:rS,programId:this.programId})):r.add(qi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:rS,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return r.add(this.nonceInitialize(n)),r}static nonceInitialize(e){const r=xn.InitializeNonceAccount,n=Cr(r,{authorized:sr(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e1,isSigner:!1,isWritable:!1},{pubkey:Zf,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new mn(i)}static nonceAdvance(e){const r=xn.AdvanceNonceAccount,n=Cr(r),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e1,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new mn(i)}static nonceWithdraw(e){const r=xn.WithdrawNonceAccount,n=Cr(r,{lamports:e.lamports});return new mn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:e1,isSigner:!1,isWritable:!1},{pubkey:Zf,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const r=xn.AuthorizeNonceAccount,n=Cr(r,{authorized:sr(e.newAuthorizedPubkey.toBuffer())});return new mn({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let r,n;if("basePubkey"in e){const i=xn.AllocateWithSeed;r=Cr(i,{base:sr(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:sr(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const i=xn.Allocate;r=Cr(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new mn({keys:n,programId:this.programId,data:r})}}qi.programId=new Ke("11111111111111111111111111111111");const YF=lu-300;class _h{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/_h.chunkSize)+1+1)}static async load(e,r,n,i,s){{const p=await e.getMinimumBalanceForRentExemption(s.length),E=await e.getAccountInfo(n.publicKey,"confirmed");let S=null;if(E!==null){if(E.executable)return console.error("Program load failed, account is already executable"),!1;E.data.length!==s.length&&(S=S||new Ar,S.add(qi.allocate({accountPubkey:n.publicKey,space:s.length}))),E.owner.equals(i)||(S=S||new Ar,S.add(qi.assign({accountPubkey:n.publicKey,programId:i}))),E.lamports<p&&(S=S||new Ar,S.add(qi.transfer({fromPubkey:r.publicKey,toPubkey:n.publicKey,lamports:p-E.lamports})))}else S=new Ar().add(qi.createAccount({fromPubkey:r.publicKey,newAccountPubkey:n.publicKey,lamports:p>0?p:1,space:s.length,programId:i}));S!==null&&await tS(e,S,[r,n],{commitment:"confirmed"})}const o=se.struct([se.u32("instruction"),se.u32("offset"),se.u32("bytesLength"),se.u32("bytesLengthPadding"),se.seq(se.u8("byte"),se.offset(se.u32(),-8),"bytes")]),c=_h.chunkSize;let u=0,h=s,f=[];for(;h.length>0;){const p=h.slice(0,c),E=zt.Buffer.alloc(c+16);o.encode({instruction:0,offset:u,bytes:p,bytesLength:0,bytesLengthPadding:0},E);const S=new Ar().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:E});f.push(tS(e,S,[r,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await eh(1e3/4),u+=c,h=h.slice(c)}await Promise.all(f);{const p=se.struct([se.u32("instruction")]),E=zt.Buffer.alloc(p.span);p.encode({instruction:1},E);const S=new Ar().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Zf,isSigner:!1,isWritable:!1}],programId:i,data:E}),A="processed",I=await e.sendTransaction(S,[r,n],{preflightCommitment:A}),{context:$,value:L}=await e.confirmTransaction({signature:I,lastValidBlockHeight:S.lastValidBlockHeight,blockhash:S.recentBlockhash},A);if(L.err)throw new Error(`Transaction ${I} failed (${JSON.stringify(L)})`);for(;;){try{if(await e.getSlot({commitment:A})>$.slot)break}catch{}await new Promise(k=>setTimeout(k,Math.round(tD/2)))}}return!0}}_h.chunkSize=YF;const ZF=new Ke("BPFLoader2111111111111111111111111111111111");class QF{static getMinNumSignatures(e){return _h.getMinNumSignatures(e)}static load(e,r,n,i,s){return _h.load(e,r,n,s,i)}}function XF(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mE,xx;function JF(){if(xx)return mE;xx=1;var t=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var s in n)i.push(s);return i};function r(n,i){var s,o,c,u,h,f,p;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return r(n.toJSON(),i);if(p=t.call(n),p==="[object Array]"){for(c="[",o=n.length-1,s=0;s<o;s++)c+=r(n[s],!0)+",";return o>-1&&(c+=r(n[s],!0)),c+"]"}else if(p==="[object Object]"){for(u=e(n).sort(),o=u.length,c="",s=0;s<o;)h=u[s],f=r(n[h],!1),f!==void 0&&(c&&(c+=","),c+=JSON.stringify(h)+":"+f),s++;return"{"+c+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return mE=function(n){var i=r(n,!1);if(i!==void 0)return""+i},mE}var eH=JF(),Cx=XF(eH);const I0=32;function bE(t){let e=0;for(;t>1;)t/=2,e++;return e}function tH(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class iD{constructor(e,r,n,i,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=r,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=bE(tH(e+I0+1))-bE(I0)-1,n=this.getSlotsInEpoch(r),i=e-(n-I0);return[r,i]}else{const r=e-this.firstNormalSlot,n=Math.floor(r/this.slotsPerEpoch),i=this.firstNormalEpoch+n,s=r%this.slotsPerEpoch;return[i,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*I0:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+bE(I0)):this.slotsPerEpoch}}var rH=globalThis.fetch;class nH extends nF{constructor(e,r,n){const i=s=>{const o=tF(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...r});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(i,e,r,n),this.underlyingSocket=void 0}call(...e){var n;const r=(n=this.underlyingSocket)==null?void 0:n.readyState;return r===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}notify(...e){var n;const r=(n=this.underlyingSocket)==null?void 0:n.readyState;return r===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}function iH(t,e){let r;try{r=t.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(r.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${t.index}`);return r}const Tx=56;class nS{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const r=iH(sH,e),n=e.length-Tx;Pr(n>=0,"lookup table is invalid"),Pr(n%32===0,"lookup table is invalid");const i=n/32,{addresses:s}=se.struct([se.seq(mr(),i,"addresses")]).decode(e.slice(Tx));return{deactivationSlot:r.deactivationSlot,lastExtendedSlot:r.lastExtendedSlot,lastExtendedSlotStartIndex:r.lastExtendedStartIndex,authority:r.authority.length!==0?new Ke(r.authority[0]):void 0,addresses:s.map(o=>new Ke(o))}}}const sH={index:1,layout:se.struct([se.u32("typeIndex"),Qf("deactivationSlot"),se.nu64("lastExtendedSlot"),se.u8("lastExtendedStartIndex"),se.u8(),se.seq(mr(),se.offset(se.u8(),-1),"authority")])},oH=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function aH(t){const e=t.match(oH);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[r,n,i,s]=e,o=t.startsWith("https:")?"wss:":"ws:",c=i==null?null:parseInt(i.slice(1),10),u=c==null?"":`:${c+1}`;return`${o}//${n}${u}${s}`}const Fn=Ny(Q4(Ke),Ge(),t=>new Ke(t)),sD=X4([Ge(),qn("base64")]),oA=Ny(Q4(zt.Buffer),sD,t=>zt.Buffer.from(t[0],"base64")),oD=30*1e3;function cH(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function En(t){let e,r;if(typeof t=="string")e=t;else if(t){const{commitment:n,...i}=t;e=n,r=i}return{commitment:e,config:r}}function Mx(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function aD(t){return js([Le({jsonrpc:qn("2.0"),id:Ge(),result:t}),Le({jsonrpc:qn("2.0"),id:Ge(),error:Le({code:pp(),message:Ge(),data:Pt(Tq())})})])}const lH=aD(pp());function ir(t){return Ny(aD(t),lH,e=>"error"in e?e:{...e,result:nt(e.result,t)})}function ti(t){return ir(Le({context:Le({slot:ve()}),value:t}))}function yw(t){return Le({context:Le({slot:ve()}),value:t})}function wE(t,e){return t===0?new vh({header:e.header,staticAccountKeys:e.accountKeys.map(r=>new Ke(r)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(r=>({programIdIndex:r.programIdIndex,accountKeyIndexes:r.accounts,data:is.decode(r.data)})),addressTableLookups:e.addressTableLookups}):new Oa(e)}const uH=Le({foundation:ve(),foundationTerm:ve(),initial:ve(),taper:ve(),terminal:ve()}),hH=ir(st(ot(Le({epoch:ve(),effectiveSlot:ve(),amount:ve(),postBalance:ve(),commission:Pt(ot(ve()))})))),dH=st(Le({slot:ve(),prioritizationFee:ve()})),fH=Le({total:ve(),validator:ve(),foundation:ve(),epoch:ve()}),pH=Le({epoch:ve(),slotIndex:ve(),slotsInEpoch:ve(),absoluteSlot:ve(),blockHeight:Pt(ve()),transactionCount:Pt(ve())}),gH=Le({slotsPerEpoch:ve(),leaderScheduleSlotOffset:ve(),warmup:dc(),firstNormalEpoch:ve(),firstNormalSlot:ve()}),yH=kR(Ge(),st(ve())),kh=ot(js([Le({}),Ge()])),mH=Le({err:kh}),bH=qn("receivedSignature"),wH=Le({"solana-core":Ge(),"feature-set":Pt(ve())}),vH=Le({program:Ge(),programId:Fn,parsed:pp()}),EH=Le({programId:Fn,accounts:st(Fn),data:Ge()}),Nx=ti(Le({err:ot(js([Le({}),Ge()])),logs:ot(st(Ge())),accounts:Pt(ot(st(ot(Le({executable:dc(),owner:Ge(),lamports:ve(),data:st(Ge()),rentEpoch:Pt(ve())}))))),unitsConsumed:Pt(ve()),returnData:Pt(ot(Le({programId:Ge(),data:X4([Ge(),qn("base64")])}))),innerInstructions:Pt(ot(st(Le({index:ve(),instructions:st(js([vH,EH]))}))))})),_H=ti(Le({byIdentity:kR(Ge(),st(ve())),range:Le({firstSlot:ve(),lastSlot:ve()})}));function SH(t,e,r,n,i,s){const o=r||rH;let c;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(f,p)=>{const E=await new Promise((S,A)=>{try{n(f,p,(I,$)=>S([I,$]))}catch(I){A(I)}});return await o(...E)}),new Xq(async(f,p)=>{const E={method:"POST",body:f,agent:c,headers:Object.assign({"Content-Type":"application/json"},e||{},SW)};try{let S=5,A,I=500;for(;u?A=await u(t,E):A=await o(t,E),!(A.status!==429||i===!0||(S-=1,S===0));)console.error(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${I}ms delay...`),await eh(I),I*=2;const $=await A.text();A.ok?p(null,$):p(new Error(`${A.status} ${A.statusText}: ${$}`))}catch(S){S instanceof Error&&p(S)}},{})}function AH(t){return(e,r)=>new Promise((n,i)=>{t.request(e,r,(s,o)=>{if(s){i(s);return}n(o)})})}function IH(t){return e=>new Promise((r,n)=>{e.length===0&&r([]);const i=e.map(s=>t.request(s.methodName,s.args));t.request(i,(s,o)=>{if(s){n(s);return}r(o)})})}const xH=ir(uH),CH=ir(fH),TH=ir(dH),MH=ir(pH),NH=ir(gH),OH=ir(yH),RH=ir(ve()),DH=ti(Le({total:ve(),circulating:ve(),nonCirculating:ve(),nonCirculatingAccounts:st(Fn)})),iS=Le({amount:Ge(),uiAmount:ot(ve()),decimals:ve(),uiAmountString:Pt(Ge())}),$H=ti(st(Le({address:Fn,amount:Ge(),uiAmount:ot(ve()),decimals:ve(),uiAmountString:Pt(Ge())}))),kH=ti(st(Le({pubkey:Fn,account:Le({executable:dc(),owner:Fn,lamports:ve(),data:oA,rentEpoch:ve()})}))),sS=Le({program:Ge(),parsed:pp(),space:ve()}),PH=ti(st(Le({pubkey:Fn,account:Le({executable:dc(),owner:Fn,lamports:ve(),data:sS,rentEpoch:ve()})}))),BH=ti(st(Le({lamports:ve(),address:Fn}))),zg=Le({executable:dc(),owner:Fn,lamports:ve(),data:oA,rentEpoch:ve()}),LH=Le({pubkey:Fn,account:zg}),UH=Ny(js([Q4(zt.Buffer),sS]),js([sD,sS]),t=>Array.isArray(t)?nt(t,oA):t),oS=Le({executable:dc(),owner:Fn,lamports:ve(),data:UH,rentEpoch:ve()}),jH=Le({pubkey:Fn,account:oS}),zH=Le({state:js([qn("active"),qn("inactive"),qn("activating"),qn("deactivating")]),active:ve(),inactive:ve()}),qH=ir(st(Le({signature:Ge(),slot:ve(),err:kh,memo:ot(Ge()),blockTime:Pt(ot(ve()))}))),FH=ir(st(Le({signature:Ge(),slot:ve(),err:kh,memo:ot(Ge()),blockTime:Pt(ot(ve()))}))),HH=Le({subscription:ve(),result:yw(zg)}),WH=Le({pubkey:Fn,account:zg}),KH=Le({subscription:ve(),result:yw(WH)}),VH=Le({parent:ve(),slot:ve(),root:ve()}),GH=Le({subscription:ve(),result:VH}),YH=js([Le({type:js([qn("firstShredReceived"),qn("completed"),qn("optimisticConfirmation"),qn("root")]),slot:ve(),timestamp:ve()}),Le({type:qn("createdBank"),parent:ve(),slot:ve(),timestamp:ve()}),Le({type:qn("frozen"),slot:ve(),timestamp:ve(),stats:Le({numTransactionEntries:ve(),numSuccessfulTransactions:ve(),numFailedTransactions:ve(),maxTransactionsPerEntry:ve()})}),Le({type:qn("dead"),slot:ve(),timestamp:ve(),err:Ge()})]),ZH=Le({subscription:ve(),result:YH}),QH=Le({subscription:ve(),result:yw(js([mH,bH]))}),XH=Le({subscription:ve(),result:ve()}),JH=Le({pubkey:Ge(),gossip:ot(Ge()),tpu:ot(Ge()),rpc:ot(Ge()),version:ot(Ge())}),Ox=Le({votePubkey:Ge(),nodePubkey:Ge(),activatedStake:ve(),epochVoteAccount:dc(),epochCredits:st(X4([ve(),ve(),ve()])),commission:ve(),lastVote:ve(),rootSlot:ot(ve())}),eW=ir(Le({current:st(Ox),delinquent:st(Ox)})),tW=js([qn("processed"),qn("confirmed"),qn("finalized")]),rW=Le({slot:ve(),confirmations:ot(ve()),err:kh,confirmationStatus:Pt(tW)}),nW=ti(st(ot(rW))),iW=ir(ve()),cD=Le({accountKey:Fn,writableIndexes:st(ve()),readonlyIndexes:st(ve())}),aA=Le({signatures:st(Ge()),message:Le({accountKeys:st(Ge()),header:Le({numRequiredSignatures:ve(),numReadonlySignedAccounts:ve(),numReadonlyUnsignedAccounts:ve()}),instructions:st(Le({accounts:st(ve()),data:Ge(),programIdIndex:ve()})),recentBlockhash:Ge(),addressTableLookups:Pt(st(cD))})}),lD=Le({pubkey:Fn,signer:dc(),writable:dc(),source:Pt(js([qn("transaction"),qn("lookupTable")]))}),uD=Le({accountKeys:st(lD),signatures:st(Ge())}),hD=Le({parsed:pp(),program:Ge(),programId:Fn}),dD=Le({accounts:st(Fn),data:Ge(),programId:Fn}),sW=js([dD,hD]),oW=js([Le({parsed:pp(),program:Ge(),programId:Ge()}),Le({accounts:st(Ge()),data:Ge(),programId:Ge()})]),fD=Ny(sW,oW,t=>"accounts"in t?nt(t,dD):nt(t,hD)),pD=Le({signatures:st(Ge()),message:Le({accountKeys:st(lD),instructions:st(fD),recentBlockhash:Ge(),addressTableLookups:Pt(ot(st(cD)))})}),O1=Le({accountIndex:ve(),mint:Ge(),owner:Pt(Ge()),programId:Pt(Ge()),uiTokenAmount:iS}),gD=Le({writable:st(Fn),readonly:st(Fn)}),mw=Le({err:kh,fee:ve(),innerInstructions:Pt(ot(st(Le({index:ve(),instructions:st(Le({accounts:st(ve()),data:Ge(),programIdIndex:ve()}))})))),preBalances:st(ve()),postBalances:st(ve()),logMessages:Pt(ot(st(Ge()))),preTokenBalances:Pt(ot(st(O1))),postTokenBalances:Pt(ot(st(O1))),loadedAddresses:Pt(gD),computeUnitsConsumed:Pt(ve())}),cA=Le({err:kh,fee:ve(),innerInstructions:Pt(ot(st(Le({index:ve(),instructions:st(fD)})))),preBalances:st(ve()),postBalances:st(ve()),logMessages:Pt(ot(st(Ge()))),preTokenBalances:Pt(ot(st(O1))),postTokenBalances:Pt(ot(st(O1))),loadedAddresses:Pt(gD),computeUnitsConsumed:Pt(ve())}),gp=js([qn(0),qn("legacy")]),Ph=Le({pubkey:Ge(),lamports:ve(),postBalance:ot(ve()),rewardType:ot(Ge()),commission:Pt(ot(ve()))}),aW=ir(ot(Le({blockhash:Ge(),previousBlockhash:Ge(),parentSlot:ve(),transactions:st(Le({transaction:aA,meta:ot(mw),version:Pt(gp)})),rewards:Pt(st(Ph)),blockTime:ot(ve()),blockHeight:ot(ve())}))),cW=ir(ot(Le({blockhash:Ge(),previousBlockhash:Ge(),parentSlot:ve(),rewards:Pt(st(Ph)),blockTime:ot(ve()),blockHeight:ot(ve())}))),lW=ir(ot(Le({blockhash:Ge(),previousBlockhash:Ge(),parentSlot:ve(),transactions:st(Le({transaction:uD,meta:ot(mw),version:Pt(gp)})),rewards:Pt(st(Ph)),blockTime:ot(ve()),blockHeight:ot(ve())}))),uW=ir(ot(Le({blockhash:Ge(),previousBlockhash:Ge(),parentSlot:ve(),transactions:st(Le({transaction:pD,meta:ot(cA),version:Pt(gp)})),rewards:Pt(st(Ph)),blockTime:ot(ve()),blockHeight:ot(ve())}))),hW=ir(ot(Le({blockhash:Ge(),previousBlockhash:Ge(),parentSlot:ve(),transactions:st(Le({transaction:uD,meta:ot(cA),version:Pt(gp)})),rewards:Pt(st(Ph)),blockTime:ot(ve()),blockHeight:ot(ve())}))),dW=ir(ot(Le({blockhash:Ge(),previousBlockhash:Ge(),parentSlot:ve(),rewards:Pt(st(Ph)),blockTime:ot(ve()),blockHeight:ot(ve())}))),fW=ir(ot(Le({blockhash:Ge(),previousBlockhash:Ge(),parentSlot:ve(),transactions:st(Le({transaction:aA,meta:ot(mw)})),rewards:Pt(st(Ph)),blockTime:ot(ve())}))),Rx=ir(ot(Le({blockhash:Ge(),previousBlockhash:Ge(),parentSlot:ve(),signatures:st(Ge()),blockTime:ot(ve())}))),vE=ir(ot(Le({slot:ve(),meta:ot(mw),blockTime:Pt(ot(ve())),transaction:aA,version:Pt(gp)}))),db=ir(ot(Le({slot:ve(),transaction:pD,meta:ot(cA),blockTime:Pt(ot(ve())),version:Pt(gp)}))),pW=ti(Le({blockhash:Ge(),lastValidBlockHeight:ve()})),gW=ti(dc()),yW=Le({slot:ve(),numTransactions:ve(),numSlots:ve(),samplePeriodSecs:ve()}),mW=ir(st(yW)),bW=ti(ot(Le({feeCalculator:Le({lamportsPerSignature:ve()})}))),wW=ir(Ge()),vW=ir(Ge()),EW=Le({err:kh,logs:st(Ge()),signature:Ge()}),_W=Le({result:yw(EW),subscription:ve()}),SW={"solana-client":"js/1.0.0-maintenance"};class yD{constructor(e,r){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const h={};return async f=>{const{commitment:p,config:E}=En(f),S=this._buildArgs([],p,void 0,E),A=Cx(S);return h[A]=h[A]??(async()=>{try{const I=await this._rpcRequest("getBlockHeight",S),$=nt(I,ir(ve()));if("error"in $)throw new At($.error,"failed to get block height information");return $.result}finally{delete h[A]}})(),await h[A]}})();let n,i,s,o,c,u;r&&typeof r=="string"?this._commitment=r:r&&(this._commitment=r.commitment,this._confirmTransactionInitialTimeout=r.confirmTransactionInitialTimeout,n=r.wsEndpoint,i=r.httpHeaders,s=r.fetch,o=r.fetchMiddleware,c=r.disableRetryOnRateLimit,u=r.httpAgent),this._rpcEndpoint=cH(e),this._rpcWsEndpoint=n||aH(e),this._rpcClient=SH(e,i,s,o,c,u),this._rpcRequest=AH(this._rpcClient),this._rpcBatchRequest=IH(this._rpcClient),this._rpcWebSocket=new nH(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,r){const{commitment:n,config:i}=En(r),s=this._buildArgs([e.toBase58()],n,void 0,i),o=await this._rpcRequest("getBalance",s),c=nt(o,ti(ve()));if("error"in c)throw new At(c.error,`failed to get balance for ${e.toBase58()}`);return c.result}async getBalance(e,r){return await this.getBalanceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const r=await this._rpcRequest("getBlockTime",[e]),n=nt(r,ir(ot(ve())));if("error"in n)throw new At(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),r=nt(e,ir(ve()));if("error"in r)throw new At(r.error,"failed to get minimum ledger slot");return r.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),r=nt(e,RH);if("error"in r)throw new At(r.error,"failed to get first available block");return r.result}async getSupply(e){let r={};typeof e=="string"?r={commitment:e}:e?r={...e,commitment:e&&e.commitment||this.commitment}:r={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[r]),i=nt(n,DH);if("error"in i)throw new At(i.error,"failed to get supply");return i.result}async getTokenSupply(e,r){const n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenSupply",n),s=nt(i,ti(iS));if("error"in s)throw new At(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,r){const n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenAccountBalance",n),s=nt(i,ti(iS));if("error"in s)throw new At(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,r,n){const{commitment:i,config:s}=En(n);let o=[e.toBase58()];"mint"in r?o.push({mint:r.mint.toBase58()}):o.push({programId:r.programId.toBase58()});const c=this._buildArgs(o,i,"base64",s),u=await this._rpcRequest("getTokenAccountsByOwner",c),h=nt(u,kH);if("error"in h)throw new At(h.error,`failed to get token accounts owned by account ${e.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(e,r,n){let i=[e.toBase58()];"mint"in r?i.push({mint:r.mint.toBase58()}):i.push({programId:r.programId.toBase58()});const s=this._buildArgs(i,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),c=nt(o,PH);if("error"in c)throw new At(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getLargestAccounts(e){const r={...e,commitment:e&&e.commitment||this.commitment},n=r.filter||r.commitment?[r]:[],i=await this._rpcRequest("getLargestAccounts",n),s=nt(i,BH);if("error"in s)throw new At(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,r){const n=this._buildArgs([e.toBase58()],r),i=await this._rpcRequest("getTokenLargestAccounts",n),s=nt(i,$H);if("error"in s)throw new At(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,r){const{commitment:n,config:i}=En(r),s=this._buildArgs([e.toBase58()],n,"base64",i),o=await this._rpcRequest("getAccountInfo",s),c=nt(o,ti(ot(zg)));if("error"in c)throw new At(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getParsedAccountInfo(e,r){const{commitment:n,config:i}=En(r),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getAccountInfo",s),c=nt(o,ti(ot(oS)));if("error"in c)throw new At(c.error,`failed to get info about account ${e.toBase58()}`);return c.result}async getAccountInfo(e,r){try{return(await this.getAccountInfoAndContext(e,r)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,r){const{commitment:n,config:i}=En(r),s=e.map(h=>h.toBase58()),o=this._buildArgs([s],n,"jsonParsed",i),c=await this._rpcRequest("getMultipleAccounts",o),u=nt(c,ti(st(ot(oS))));if("error"in u)throw new At(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfoAndContext(e,r){const{commitment:n,config:i}=En(r),s=e.map(h=>h.toBase58()),o=this._buildArgs([s],n,"base64",i),c=await this._rpcRequest("getMultipleAccounts",o),u=nt(c,ti(st(ot(zg))));if("error"in u)throw new At(u.error,`failed to get info for accounts ${s}`);return u.result}async getMultipleAccountsInfo(e,r){return(await this.getMultipleAccountsInfoAndContext(e,r)).value}async getStakeActivation(e,r,n){const{commitment:i,config:s}=En(r),o=this._buildArgs([e.toBase58()],i,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),c=await this._rpcRequest("getStakeActivation",o),u=nt(c,ir(zH));if("error"in u)throw new At(u.error,`failed to get Stake Activation ${e.toBase58()}`);return u.result}async getProgramAccounts(e,r){const{commitment:n,config:i}=En(r),{encoding:s,...o}=i||{},c=this._buildArgs([e.toBase58()],n,s||"base64",{...o,...o.filters?{filters:Mx(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",c),h=st(LH),f=o.withContext===!0?nt(u,ti(h)):nt(u,ir(h));if("error"in f)throw new At(f.error,`failed to get accounts owned by program ${e.toBase58()}`);return f.result}async getParsedProgramAccounts(e,r){const{commitment:n,config:i}=En(r),s=this._buildArgs([e.toBase58()],n,"jsonParsed",i),o=await this._rpcRequest("getProgramAccounts",s),c=nt(o,ir(st(jH)));if("error"in c)throw new At(c.error,`failed to get accounts owned by program ${e.toBase58()}`);return c.result}async confirmTransaction(e,r){var s;let n;if(typeof e=="string")n=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=is.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Pr(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:r||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:r||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:r||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((r,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:r}){let n,i,s=!1;const o=new Promise((u,h)=>{try{n=this.onSignature(r,(p,E)=>{n=void 0;const S={context:E,value:p};u({__type:Qc.PROCESSED,response:S})},e);const f=new Promise(p=>{n==null?p():i=this._onSubscriptionStateChange(n,E=>{E==="subscribed"&&p()})});(async()=>{if(await f,s)return;const p=await this.getSignatureStatus(r);if(s||p==null)return;const{context:E,value:S}=p;if(S!=null)if(S!=null&&S.err)h(S.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,u({__type:Qc.PROCESSED,response:{context:E,value:S}})}})()}catch(f){h(f)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:r,lastValidBlockHeight:n,signature:i}}){let s=!1;const o=new Promise(p=>{const E=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let S=await E();if(!s){for(;S<=n;)if(await eh(1e3),s||(S=await E(),s))return;p({__type:Qc.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),h=this.getCancellationPromise(r);let f;try{const p=await Promise.race([h,u,o]);if(p.__type===Qc.PROCESSED)f=p.response;else throw new nA(i)}finally{s=!0,c()}return f}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:r,minContextSlot:n,nonceAccountPubkey:i,nonceValue:s,signature:o}}){let c=!1;const u=new Promise(S=>{let A=s,I=null;const $=async()=>{try{const{context:L,value:k}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return I=L.slot,k==null?void 0:k.nonce}catch{return A}};(async()=>{if(A=await $(),!c)for(;;){if(s!==A){S({__type:Qc.NONCE_INVALID,slotInWhichNonceDidAdvance:I});return}if(await eh(2e3),c||(A=await $(),c))return}})()}),{abortConfirmation:h,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),p=this.getCancellationPromise(r);let E;try{const S=await Promise.race([p,f,u]);if(S.__type===Qc.PROCESSED)E=S.response;else{let A;for(;;){const I=await this.getSignatureStatus(o);if(I==null)break;if(I.context.slot<(S.slotInWhichNonceDidAdvance??n)){await eh(400);continue}A=I;break}if(A!=null&&A.value){const I=e||"finalized",{confirmationStatus:$}=A.value;switch(I){case"processed":case"recent":if($!=="processed"&&$!=="confirmed"&&$!=="finalized")throw new Mf(o);break;case"confirmed":case"single":case"singleGossip":if($!=="confirmed"&&$!=="finalized")throw new Mf(o);break;case"finalized":case"max":case"root":if($!=="finalized")throw new Mf(o);break;default:}E={context:A.context,value:{err:A.value.err}}}else throw new Mf(o)}}finally{c=!0,h()}return E}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:r}){let n;const i=new Promise(u=>{let h=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{h=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:Qc.TIMED_OUT,timeoutMs:h}),h)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:r});let c;try{const u=await Promise.race([o,i]);if(u.__type===Qc.PROCESSED)c=u.response;else throw new iA(r,u.timeoutMs/1e3)}finally{clearTimeout(n),s()}return c}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),r=nt(e,ir(st(JH)));if("error"in r)throw new At(r.error,"failed to get cluster nodes");return r.result}async getVoteAccounts(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",r),i=nt(n,eW);if("error"in i)throw new At(i.error,"failed to get vote accounts");return i.result}async getSlot(e){const{commitment:r,config:n}=En(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getSlot",i),o=nt(s,ir(ve()));if("error"in o)throw new At(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:r,config:n}=En(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getSlotLeader",i),o=nt(s,ir(Ge()));if("error"in o)throw new At(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,r){const n=[e,r],i=await this._rpcRequest("getSlotLeaders",n),s=nt(i,ir(st(Fn)));if("error"in s)throw new At(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,r){const{context:n,value:i}=await this.getSignatureStatuses([e],r);Pr(i.length===1);const s=i[0];return{context:n,value:s}}async getSignatureStatuses(e,r){const n=[e];r&&n.push(r);const i=await this._rpcRequest("getSignatureStatuses",n),s=nt(i,nW);if("error"in s)throw new At(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:r,config:n}=En(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getTransactionCount",i),o=nt(s,ir(ve()));if("error"in o)throw new At(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const r=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",r),i=nt(n,xH);if("error"in i)throw new At(i.error,"failed to get inflation");return i.result}async getInflationReward(e,r,n){const{commitment:i,config:s}=En(n),o=this._buildArgs([e.map(h=>h.toBase58())],i,void 0,{...s,epoch:r??(s==null?void 0:s.epoch)}),c=await this._rpcRequest("getInflationReward",o),u=nt(c,hH);if("error"in u)throw new At(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),r=nt(e,CH);if("error"in r)throw new At(r.error,"failed to get inflation rate");return r.result}async getEpochInfo(e){const{commitment:r,config:n}=En(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getEpochInfo",i),o=nt(s,MH);if("error"in o)throw new At(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),r=nt(e,NH);if("error"in r)throw new At(r.error,"failed to get epoch schedule");const n=r.result;return new iD(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),r=nt(e,OH);if("error"in r)throw new At(r.error,"failed to get leader schedule");return r.result}async getMinimumBalanceForRentExemption(e,r){const n=this._buildArgs([e],r),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),s=nt(i,iW);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:r,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:r,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const r=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=nt(r,mW);if("error"in n)throw new At(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,r){const n=this._buildArgs([e],r),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),s=nt(i,bW);if("error"in s)throw new At(s.error,"failed to get fee calculator");const{context:o,value:c}=s.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(e,r){const n=sr(e.serialize()).toString("base64"),i=this._buildArgs([n],r),s=await this._rpcRequest("getFeeForMessage",i),o=nt(s,ti(ot(ve())));if("error"in o)throw new At(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const r=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(c=>c.toBase58()),n=r!=null&&r.length?[r]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),s=nt(i,TH);if("error"in s)throw new At(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(r){throw new Error("failed to get recent blockhash: "+r)}}async getLatestBlockhashAndContext(e){const{commitment:r,config:n}=En(e),i=this._buildArgs([],r,void 0,n),s=await this._rpcRequest("getLatestBlockhash",i),o=nt(s,pW);if("error"in o)throw new At(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,r){const{commitment:n,config:i}=En(r),s=this._buildArgs([e],n,void 0,i),o=await this._rpcRequest("isBlockhashValid",s),c=nt(o,gW);if("error"in c)throw new At(c.error,"failed to determine if the blockhash `"+e+"`is valid");return c.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),r=nt(e,ir(wH));if("error"in r)throw new At(r.error,"failed to get version");return r.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),r=nt(e,ir(Ge()));if("error"in r)throw new At(r.error,"failed to get genesis hash");return r.result}async getBlock(e,r){const{commitment:n,config:i}=En(r),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const c=nt(o,lW);if("error"in c)throw c.error;return c.result}case"none":{const c=nt(o,cW);if("error"in c)throw c.error;return c.result}default:{const c=nt(o,aW);if("error"in c)throw c.error;const{result:u}=c;return u?{...u,transactions:u.transactions.map(({transaction:h,meta:f,version:p})=>({meta:f,transaction:{...h,message:wE(p,h.message)},version:p}))}:null}}}catch(c){throw new At(c,"failed to get confirmed block")}}async getParsedBlock(e,r){const{commitment:n,config:i}=En(r),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getBlock",s);try{switch(i==null?void 0:i.transactionDetails){case"accounts":{const c=nt(o,hW);if("error"in c)throw c.error;return c.result}case"none":{const c=nt(o,dW);if("error"in c)throw c.error;return c.result}default:{const c=nt(o,uW);if("error"in c)throw c.error;return c.result}}}catch(c){throw new At(c,"failed to get block")}}async getBlockProduction(e){let r,n;if(typeof e=="string")n=e;else if(e){const{commitment:c,...u}=e;n=c,r=u}const i=this._buildArgs([],n,"base64",r),s=await this._rpcRequest("getBlockProduction",i),o=nt(s,_H);if("error"in o)throw new At(o.error,"failed to get block production information");return o.result}async getTransaction(e,r){const{commitment:n,config:i}=En(r),s=this._buildArgsAtLeastConfirmed([e],n,void 0,i),o=await this._rpcRequest("getTransaction",s),c=nt(o,vE);if("error"in c)throw new At(c.error,"failed to get transaction");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:wE(u.version,u.transaction.message)}}}async getParsedTransaction(e,r){const{commitment:n,config:i}=En(r),s=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),o=await this._rpcRequest("getTransaction",s),c=nt(o,db);if("error"in c)throw new At(c.error,"failed to get transaction");return c.result}async getParsedTransactions(e,r){const{commitment:n,config:i}=En(r),s=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(s)).map(u=>{const h=nt(u,db);if("error"in h)throw new At(h.error,"failed to get transactions");return h.result})}async getTransactions(e,r){const{commitment:n,config:i}=En(r),s=e.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,void 0,i)}));return(await this._rpcBatchRequest(s)).map(u=>{const h=nt(u,vE);if("error"in h)throw new At(h.error,"failed to get transactions");const f=h.result;return f&&{...f,transaction:{...f.transaction,message:wE(f.version,f.transaction.message)}}})}async getConfirmedBlock(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),i=await this._rpcRequest("getBlock",n),s=nt(i,fW);if("error"in s)throw new At(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const c={...o,transactions:o.transactions.map(({transaction:u,meta:h})=>{const f=new Oa(u.message);return{meta:h,transaction:{...u,message:f}}})};return{...c,transactions:c.transactions.map(({transaction:u,meta:h})=>({meta:h,transaction:Ar.populate(u.message,u.signatures)}))}}async getBlocks(e,r,n){const i=this._buildArgsAtLeastConfirmed(r!==void 0?[e,r]:[e],n),s=await this._rpcRequest("getBlocks",i),o=nt(s,ir(st(ve())));if("error"in o)throw new At(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=nt(i,Rx);if("error"in s)throw new At(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),s=nt(i,Rx);if("error"in s)throw new At(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r),i=await this._rpcRequest("getTransaction",n),s=nt(i,vE);if("error"in s)throw new At(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const c=new Oa(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:Ar.populate(c,u)}}async getParsedConfirmedTransaction(e,r){const n=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),s=nt(i,db);if("error"in s)throw new At(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,r){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],r,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const c=nt(o,db);if("error"in c)throw new At(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(e,r,n){let i={},s=await this.getFirstAvailableBlock();for(;!("until"in i)&&(r--,!(r<=0||r<s));)try{const u=await this.getConfirmedBlockSignatures(r,"finalized");u.signatures.length>0&&(i.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(e,r,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),o=nt(s,qH);if("error"in o)throw new At(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,r,n){const i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,r),s=await this._rpcRequest("getSignaturesForAddress",i),o=nt(s,FH);if("error"in o)throw new At(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,r){const{context:n,value:i}=await this.getAccountInfoAndContext(e,r);let s=null;return i!==null&&(s=new nS({key:e,state:nS.deserialize(i.data)})),{context:n,value:s}}async getNonceAndContext(e,r){const{context:n,value:i}=await this.getAccountInfoAndContext(e,r);let s=null;return i!==null&&(s=gw.fromAccountData(i.data)),{context:n,value:s}}async getNonce(e,r){return await this.getNonceAndContext(e,r).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,r){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),r]),i=nt(n,wW);if("error"in i)throw new At(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await eh(100);const n=Date.now()-this._blockhashInfo.lastFetch>=oD;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),r=this._blockhashInfo.latestBlockhash,n=r?r.blockhash:null;for(let i=0;i<50;i++){const s=await this.getLatestBlockhash("finalized");if(n!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await eh(tD/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:r,config:n}=En(e),i=this._buildArgs([],r,"base64",n),s=await this._rpcRequest("getStakeMinimumDelegation",i),o=nt(s,ti(ve()));if("error"in o)throw new At(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,r,n){if("message"in e){const I=e.serialize(),$=zt.Buffer.from(I).toString("base64");if(Array.isArray(r)||n!==void 0)throw new Error("Invalid arguments");const L=r||{};L.encoding="base64","commitment"in L||(L.commitment=this.commitment),r&&typeof r=="object"&&"innerInstructions"in r&&(L.innerInstructions=r.innerInstructions);const k=[$,L],U=await this._rpcRequest("simulateTransaction",k),q=nt(U,Nx);if("error"in q)throw new Error("failed to simulate transaction: "+q.error.message);return q.result}let i;if(e instanceof Ar){let A=e;i=new Ar,i.feePayer=A.feePayer,i.instructions=e.instructions,i.nonceInfo=A.nonceInfo,i.signatures=A.signatures}else i=Ar.populate(e),i._message=i._json=void 0;if(r!==void 0&&!Array.isArray(r))throw new Error("Invalid arguments");const s=r;if(i.nonceInfo&&s)i.sign(...s);else{let A=this._disableBlockhashCaching;for(;;){const I=await this._blockhashWithExpiryBlockHeight(A);if(i.lastValidBlockHeight=I.lastValidBlockHeight,i.recentBlockhash=I.blockhash,!s)break;if(i.sign(...s),!i.signature)throw new Error("!signature");const $=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes($)&&!this._blockhashInfo.transactionSignatures.includes($)){this._blockhashInfo.simulatedSignatures.push($);break}else A=!0}}const o=i._compile(),c=o.serialize(),h=i._serialize(c).toString("base64"),f={encoding:"base64",commitment:this.commitment};if(n){const A=(Array.isArray(n)?n:o.nonProgramIds()).map(I=>I.toBase58());f.accounts={encoding:"base64",addresses:A}}s&&(f.sigVerify=!0),r&&typeof r=="object"&&"innerInstructions"in r&&(f.innerInstructions=r.innerInstructions);const p=[h,f],E=await this._rpcRequest("simulateTransaction",p),S=nt(E,Nx);if("error"in S){let A;if("data"in S.error&&(A=S.error.data.logs,A&&Array.isArray(A))){const I=`
    `,$=I+A.join(I);console.error(S.error.message,$)}throw new jg({action:"simulate",signature:"",transactionMessage:S.error.message,logs:A})}return S.result}async sendTransaction(e,r,n){if("version"in e){if(r&&Array.isArray(r))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,r)}if(r===void 0||!Array.isArray(r))throw new Error("Invalid arguments");const i=r;if(e.nonceInfo)e.sign(...i);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=c.lastValidBlockHeight,e.recentBlockhash=c.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");const u=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const s=e.serialize();return await this.sendRawTransaction(s,n)}async sendRawTransaction(e,r){const n=sr(e).toString("base64");return await this.sendEncodedTransaction(n,r)}async sendEncodedTransaction(e,r){const n={encoding:"base64"},i=r&&r.skipPreflight,s=i===!0?"processed":r&&r.preflightCommitment||this.commitment;r&&r.maxRetries!=null&&(n.maxRetries=r.maxRetries),r&&r.minContextSlot!=null&&(n.minContextSlot=r.minContextSlot),i&&(n.skipPreflight=i),s&&(n.preflightCommitment=s);const o=[e,n],c=await this._rpcRequest("sendTransaction",o),u=nt(c,vW);if("error"in u){let h;throw"data"in u.error&&(h=u.error.data.logs),new jg({action:i?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:h})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([r,n])=>{this._setSubscription(r,{...n,state:"pending"})})}_setSubscription(e,r){var i;const n=(i=this._subscriptionsByHash[e])==null?void 0:i.state;if(this._subscriptionsByHash[e]=r,n!==r.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(r.state)}catch{}})}}_onSubscriptionStateChange(e,r){var s;const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const i=(s=this._subscriptionStateChangeCallbacksByHash)[n]||(s[n]=new Set);return i.add(r),()=>{i.delete(r),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,r=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=i;try{this._setSubscription(n,{...i,state:"subscribing"});const c=await this._rpcWebSocket.call(o,s);this._setSubscription(n,{...i,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=i.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:c}),!r())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!r())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,r){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...r)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:r,subscription:n}=nt(e,HH);this._handleServerNotification(n,[r.value,r.context])}_makeSubscription(e,r){const n=this._nextClientSubscriptionId++,i=Cx([e.method,r]),s=this._subscriptionsByHash[i];return s===void 0?this._subscriptionsByHash[i]={...e,args:r,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[i];Pr(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,r,n){const{commitment:i,config:s}=En(n),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:r,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:r,subscription:n}=nt(e,KH);this._handleServerNotification(n,[{accountId:r.value.pubkey,accountInfo:r.value.account},r.context])}onProgramAccountChange(e,r,n,i){const{commitment:s,config:o}=En(n),c=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(i?{filters:Mx(i)}:void 0));return this._makeSubscription({callback:r,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,r,n){const i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:r,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:r,subscription:n}=nt(e,_W);this._handleServerNotification(n,[r.value,r.context])}_wsOnSlotNotification(e){const{result:r,subscription:n}=nt(e,GH);this._handleServerNotification(n,[r])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:r,subscription:n}=nt(e,ZH);this._handleServerNotification(n,[r])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,r){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${r}' events could not be found.`)}_buildArgs(e,r,n,i){const s=r||this._commitment;if(s||n||i){let o={};n&&(o.encoding=n),s&&(o.commitment=s),i&&(o=Object.assign(o,i)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,r,n,i){const s=r||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,r,n,i)}_wsOnSignatureNotification(e){const{result:r,subscription:n}=nt(e,QH);r.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,r.value==="receivedSignature"?[{type:"received"},r.context]:[{type:"status",result:r.value},r.context])}onSignature(e,r,n){const i=this._buildArgs([e],n||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){r(o.result,c);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return s}onSignatureWithOptions(e,r,n){const{commitment:i,...s}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],i,void 0,s),c=this._makeSubscription({callback:(u,h)=>{r(u,h);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:r,subscription:n}=nt(e,XH);this._handleServerNotification(n,[r])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Bf{constructor(e){this._keypair=void 0,this._keypair=e??Sx()}static generate(){return new Bf(Sx())}static fromSecretKey(e,r){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!r||!r.skipValidation){const i=e.slice(0,32),s=N1(i);for(let o=0;o<32;o++)if(n[o]!==s[o])throw new Error("provided secretKey is invalid")}return new Bf({publicKey:n,secretKey:e})}static fromSeed(e){const r=N1(e),n=new Uint8Array(64);return n.set(e),n.set(r,32),new Bf({publicKey:r,secretKey:n})}get publicKey(){return new Ke(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const nl=Object.freeze({CreateLookupTable:{index:0,layout:se.struct([se.u32("instruction"),Qf("recentSlot"),se.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:se.struct([se.u32("instruction")])},ExtendLookupTable:{index:2,layout:se.struct([se.u32("instruction"),Qf(),se.seq(mr(),se.offset(se.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:se.struct([se.u32("instruction")])},CloseLookupTable:{index:4,layout:se.struct([se.u32("instruction")])}});class AW{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(nl))if(o.index==n){i=s;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:r}=Kr(nl.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(r)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:r}=Kr(nl.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:r.map(n=>new Ke(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(lA.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,r){if(e.length<r)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${r}`)}}class lA{constructor(){}static createLookupTable(e){const[r,n]=Ke.findProgramAddressSync([e.authority.toBuffer(),RR().encode(e.recentSlot)],this.programId),i=nl.CreateLookupTable,s=Cr(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:qi.programId,isSigner:!1,isWritable:!1}];return[new mn({programId:this.programId,keys:o,data:s}),r]}static freezeLookupTable(e){const r=nl.FreezeLookupTable,n=Cr(r),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new mn({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){const r=nl.ExtendLookupTable,n=Cr(r,{addresses:e.addresses.map(s=>s.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:qi.programId,isSigner:!1,isWritable:!1}),new mn({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){const r=nl.DeactivateLookupTable,n=Cr(r),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new mn({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){const r=nl.CloseLookupTable,n=Cr(r),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new mn({programId:this.programId,keys:i,data:n})}}lA.programId=new Ke("AddressLookupTab1e1111111111111111111111111");class IW{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se.u8("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(cc))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:r,additionalFee:n}=Kr(cc.RequestUnits,e.data);return{units:r,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:r}=Kr(cc.RequestHeapFrame,e.data);return{bytes:r}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:r}=Kr(cc.SetComputeUnitLimit,e.data);return{units:r}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:r}=Kr(cc.SetComputeUnitPrice,e.data);return{microLamports:r}}static checkProgramId(e){if(!e.equals(uA.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const cc=Object.freeze({RequestUnits:{index:0,layout:se.struct([se.u8("instruction"),se.u32("units"),se.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:se.struct([se.u8("instruction"),se.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:se.struct([se.u8("instruction"),se.u32("units")])},SetComputeUnitPrice:{index:3,layout:se.struct([se.u8("instruction"),Qf("microLamports")])}});class uA{constructor(){}static requestUnits(e){const r=cc.RequestUnits,n=Cr(r,e);return new mn({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const r=cc.RequestHeapFrame,n=Cr(r,e);return new mn({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const r=cc.SetComputeUnitLimit,n=Cr(r,e);return new mn({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const r=cc.SetComputeUnitPrice,n=Cr(r,{microLamports:BigInt(e.microLamports)});return new mn({keys:[],programId:this.programId,data:n})}}uA.programId=new Ke("ComputeBudget111111111111111111111111111111");const Dx=64,$x=32,kx=64,Px=se.struct([se.u8("numSignatures"),se.u8("padding"),se.u16("signatureOffset"),se.u16("signatureInstructionIndex"),se.u16("publicKeyOffset"),se.u16("publicKeyInstructionIndex"),se.u16("messageDataOffset"),se.u16("messageDataSize"),se.u16("messageInstructionIndex")]);class bw{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:r,message:n,signature:i,instructionIndex:s}=e;Pr(r.length===$x,`Public Key must be ${$x} bytes but received ${r.length} bytes`),Pr(i.length===kx,`Signature must be ${kx} bytes but received ${i.length} bytes`);const o=Px.span,c=o+r.length,u=c+i.length,h=1,f=zt.Buffer.alloc(u+n.length),p=s??65535;return Px.encode({numSignatures:h,padding:0,signatureOffset:c,signatureInstructionIndex:p,publicKeyOffset:o,publicKeyInstructionIndex:p,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:p},f),f.fill(r,o),f.fill(i,c),f.fill(n,u),new mn({keys:[],programId:bw.programId,data:f})}static createInstructionWithPrivateKey(e){const{privateKey:r,message:n,instructionIndex:i}=e;Pr(r.length===Dx,`Private key must be ${Dx} bytes but received ${r.length} bytes`);try{const s=Bf.fromSecretKey(r),o=s.publicKey.toBytes(),c=tA(n,s.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:c,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}bw.programId=new Ke("Ed25519SigVerify111111111111111111111111111");const xW=(t,e)=>{const r=eA.sign(t,e);return[r.toCompactRawBytes(),r.recovery]};eA.utils.isValidPrivateKey;const CW=eA.getPublicKey,Bx=32,EE=20,Lx=64,TW=11,_E=se.struct([se.u8("numSignatures"),se.u16("signatureOffset"),se.u8("signatureInstructionIndex"),se.u16("ethAddressOffset"),se.u8("ethAddressInstructionIndex"),se.u16("messageDataOffset"),se.u16("messageDataSize"),se.u8("messageInstructionIndex"),se.blob(20,"ethAddress"),se.blob(64,"signature"),se.u8("recoveryId")]);class Lf{constructor(){}static publicKeyToEthAddress(e){Pr(e.length===Lx,`Public key must be ${Lx} bytes but received ${e.length} bytes`);try{return zt.Buffer.from(vx(sr(e))).slice(-EE)}catch(r){throw new Error(`Error constructing Ethereum address: ${r}`)}}static createInstructionWithPublicKey(e){const{publicKey:r,message:n,signature:i,recoveryId:s,instructionIndex:o}=e;return Lf.createInstructionWithEthAddress({ethAddress:Lf.publicKeyToEthAddress(r),message:n,signature:i,recoveryId:s,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:r,message:n,signature:i,recoveryId:s,instructionIndex:o=0}=e;let c;typeof r=="string"?r.startsWith("0x")?c=zt.Buffer.from(r.substr(2),"hex"):c=zt.Buffer.from(r,"hex"):c=r,Pr(c.length===EE,`Address must be ${EE} bytes but received ${c.length} bytes`);const u=1+TW,h=u,f=u+c.length,p=f+i.length+1,E=1,S=zt.Buffer.alloc(_E.span+n.length);return _E.encode({numSignatures:E,signatureOffset:f,signatureInstructionIndex:o,ethAddressOffset:h,ethAddressInstructionIndex:o,messageDataOffset:p,messageDataSize:n.length,messageInstructionIndex:o,signature:sr(i),ethAddress:sr(c),recoveryId:s},S),S.fill(sr(n),_E.span),new mn({keys:[],programId:Lf.programId,data:S})}static createInstructionWithPrivateKey(e){const{privateKey:r,message:n,instructionIndex:i}=e;Pr(r.length===Bx,`Private key must be ${Bx} bytes but received ${r.length} bytes`);try{const s=sr(r),o=CW(s,!1).slice(1),c=zt.Buffer.from(vx(sr(n))),[u,h]=xW(c,s);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:u,recoveryId:h,instructionIndex:i})}catch(s){throw new Error(`Error creating instruction; ${s}`)}}}Lf.programId=new Ke("KeccakSecp256k11111111111111111111111111111");var mD;const bD=new Ke("StakeConfig11111111111111111111111111111111");class wD{constructor(e,r){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=r}}class Oy{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}}mD=Oy;Oy.default=new mD(0,0,Ke.default);class MW{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(Pi))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:r,lockup:n}=Kr(Pi.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new wD(new Ke(r.staker),new Ke(r.withdrawer)),lockup:new Oy(n.unixTimestamp,n.epoch,new Ke(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Kr(Pi.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:r,stakeAuthorizationType:n}=Kr(Pi.Authorize,e.data),i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Ke(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:r,stakeAuthorizationType:n,authoritySeed:i,authorityOwner:s}=Kr(Pi.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new Ke(s),newAuthorizedPubkey:new Ke(r),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:r}=Kr(Pi.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:r}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Kr(Pi.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:r}=Kr(Pi.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:r};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Kr(Pi.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(ww.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,r){if(e.length<r)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${r}`)}}const Pi=Object.freeze({Initialize:{index:0,layout:se.struct([se.u32("instruction"),$F(),kF()])},Authorize:{index:1,layout:se.struct([se.u32("instruction"),mr("newAuthorized"),se.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:se.struct([se.u32("instruction")])},Split:{index:3,layout:se.struct([se.u32("instruction"),se.ns64("lamports")])},Withdraw:{index:4,layout:se.struct([se.u32("instruction"),se.ns64("lamports")])},Deactivate:{index:5,layout:se.struct([se.u32("instruction")])},Merge:{index:7,layout:se.struct([se.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:se.struct([se.u32("instruction"),mr("newAuthorized"),se.u32("stakeAuthorizationType"),ah("authoritySeed"),mr("authorityOwner")])}}),NW=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ww{constructor(){}static initialize(e){const{stakePubkey:r,authorized:n,lockup:i}=e,s=i||Oy.default,o=Pi.Initialize,c=Cr(o,{authorized:{staker:sr(n.staker.toBuffer()),withdrawer:sr(n.withdrawer.toBuffer())},lockup:{unixTimestamp:s.unixTimestamp,epoch:s.epoch,custodian:sr(s.custodian.toBuffer())}}),u={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Zf,isSigner:!1,isWritable:!1}],programId:this.programId,data:c};return new mn(u)}static createAccountWithSeed(e){const r=new Ar;r.add(qi.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static createAccount(e){const r=new Ar;r.add(qi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:i,lockup:s}=e;return r.add(this.initialize({stakePubkey:n,authorized:i,lockup:s}))}static delegate(e){const{stakePubkey:r,authorizedPubkey:n,votePubkey:i}=e,s=Pi.Delegate,o=Cr(s);return new Ar().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:t1,isSigner:!1,isWritable:!1},{pubkey:bD,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:s,custodianPubkey:o}=e,c=Pi.Authorize,u=Cr(c,{newAuthorized:sr(i.toBuffer()),stakeAuthorizationType:s.index}),h=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:sc,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&h.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ar().add({keys:h,programId:this.programId,data:u})}static authorizeWithSeed(e){const{stakePubkey:r,authorityBase:n,authoritySeed:i,authorityOwner:s,newAuthorizedPubkey:o,stakeAuthorizationType:c,custodianPubkey:u}=e,h=Pi.AuthorizeWithSeed,f=Cr(h,{newAuthorized:sr(o.toBuffer()),stakeAuthorizationType:c.index,authoritySeed:i,authorityOwner:sr(s.toBuffer())}),p=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:sc,isSigner:!1,isWritable:!1}];return u&&p.push({pubkey:u,isSigner:!0,isWritable:!1}),new Ar().add({keys:p,programId:this.programId,data:f})}static splitInstruction(e){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:s}=e,o=Pi.Split,c=Cr(o,{lamports:s});return new mn({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static split(e,r){const n=new Ar;return n.add(qi.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:r,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,r){const{stakePubkey:n,authorizedPubkey:i,splitStakePubkey:s,basePubkey:o,seed:c,lamports:u}=e,h=new Ar;return h.add(qi.allocate({accountPubkey:s,basePubkey:o,seed:c,space:this.space,programId:this.programId})),r&&r>0&&h.add(qi.transfer({fromPubkey:e.authorizedPubkey,toPubkey:s,lamports:r})),h.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:i,splitStakePubkey:s,lamports:u}))}static merge(e){const{stakePubkey:r,sourceStakePubKey:n,authorizedPubkey:i}=e,s=Pi.Merge,o=Cr(s);return new Ar().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:t1,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:r,authorizedPubkey:n,toPubkey:i,lamports:s,custodianPubkey:o}=e,c=Pi.Withdraw,u=Cr(c,{lamports:s}),h=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:t1,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&h.push({pubkey:o,isSigner:!0,isWritable:!1}),new Ar().add({keys:h,programId:this.programId,data:u})}static deactivate(e){const{stakePubkey:r,authorizedPubkey:n}=e,i=Pi.Deactivate,s=Cr(i);return new Ar().add({keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}ww.programId=new Ke("Stake11111111111111111111111111111111111111");ww.space=200;class vD{constructor(e,r,n,i){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=r,this.authorizedWithdrawer=n,this.commission=i}}class OW{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=se.u32("instruction").decode(e.data);let i;for(const[s,o]of Object.entries(lc))if(o.index==n){i=s;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:r}=Kr(lc.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new vD(new Ke(r.nodePubkey),new Ke(r.authorizedVoter),new Ke(r.authorizedWithdrawer),r.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:r,voteAuthorizationType:n}=Kr(lc.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Ke(r),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorized:i,voteAuthorizationType:s}}=Kr(lc.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Ke(r),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new Ke(i),voteAuthorizationType:{index:s},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:r}=Kr(lc.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:r,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(yp.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,r){if(e.length<r)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${r}`)}}const lc=Object.freeze({InitializeAccount:{index:0,layout:se.struct([se.u32("instruction"),PF()])},Authorize:{index:1,layout:se.struct([se.u32("instruction"),mr("newAuthorized"),se.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:se.struct([se.u32("instruction"),se.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:se.struct([se.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:se.struct([se.u32("instruction"),BF()])}}),RW=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class yp{constructor(){}static initializeAccount(e){const{votePubkey:r,nodePubkey:n,voteInit:i}=e,s=lc.InitializeAccount,o=Cr(s,{voteInit:{nodePubkey:sr(i.nodePubkey.toBuffer()),authorizedVoter:sr(i.authorizedVoter.toBuffer()),authorizedWithdrawer:sr(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),c={keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:Zf,isSigner:!1,isWritable:!1},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new mn(c)}static createAccount(e){const r=new Ar;return r.add(qi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),r.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:r,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:s}=e,o=lc.Authorize,c=Cr(o,{newAuthorized:sr(i.toBuffer()),voteAuthorizationType:s.index}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Ar().add({keys:u,programId:this.programId,data:c})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:r,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:s,voteAuthorizationType:o,votePubkey:c}=e,u=lc.AuthorizeWithSeed,h=Cr(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:sr(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:sr(s.toBuffer()),voteAuthorizationType:o.index}}),f=[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:sc,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new Ar().add({keys:f,programId:this.programId,data:h})}static withdraw(e){const{votePubkey:r,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:s}=e,o=lc.Withdraw,c=Cr(o,{lamports:i}),u=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new Ar().add({keys:u,programId:this.programId,data:c})}static safeWithdraw(e,r,n){if(e.lamports>r-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return yp.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:r,authorizedWithdrawerPubkey:n,nodePubkey:i}=e,s=lc.UpdateValidatorIdentity,o=Cr(s),c=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Ar().add({keys:c,programId:this.programId,data:o})}}yp.programId=new Ke("Vote111111111111111111111111111111111111111");yp.space=3762;const ED=new Ke("Va1idator1nfo111111111111111111111111111111"),DW=Le({name:Ge(),website:Pt(Ge()),details:Pt(Ge()),iconUrl:Pt(Ge()),keybaseUsername:Pt(Ge())});class hA{constructor(e,r){this.key=void 0,this.info=void 0,this.key=e,this.info=r}static fromConfigData(e){let r=[...e];if(ao(r)!==2)return null;const i=[];for(let s=0;s<2;s++){const o=new Ke(co(r,0,uc)),c=ac(r)===1;i.push({publicKey:o,isSigner:c})}if(i[0].publicKey.equals(ED)&&i[1].isSigner){const s=ah().decode(zt.Buffer.from(r)),o=JSON.parse(s);return DR(o,DW),new hA(i[1].publicKey,o)}return null}}const $W=new Ke("Vote111111111111111111111111111111111111111"),kW=se.struct([mr("nodePubkey"),mr("authorizedWithdrawer"),se.u8("commission"),se.nu64(),se.seq(se.struct([se.nu64("slot"),se.u32("confirmationCount")]),se.offset(se.u32(),-8),"votes"),se.u8("rootSlotValid"),se.nu64("rootSlot"),se.nu64(),se.seq(se.struct([se.nu64("epoch"),mr("authorizedVoter")]),se.offset(se.u32(),-8),"authorizedVoters"),se.struct([se.seq(se.struct([mr("authorizedPubkey"),se.nu64("epochOfLastAuthorizedSwitch"),se.nu64("targetEpoch")]),32,"buf"),se.nu64("idx"),se.u8("isEmpty")],"priorVoters"),se.nu64(),se.seq(se.struct([se.nu64("epoch"),se.nu64("credits"),se.nu64("prevCredits")]),se.offset(se.u32(),-8),"epochCredits"),se.struct([se.nu64("slot"),se.nu64("timestamp")],"lastTimestamp")]);class dA{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=kW.decode(sr(e),4);let i=n.rootSlot;return n.rootSlotValid||(i=null),new dA({nodePubkey:new Ke(n.nodePubkey),authorizedWithdrawer:new Ke(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:i,authorizedVoters:n.authorizedVoters.map(PW),priorVoters:BW(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function PW({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new Ke(t)}}function Ux({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:r}){return{authorizedPubkey:new Ke(t),epochOfLastAuthorizedSwitch:e,targetEpoch:r}}function BW({buf:t,idx:e,isEmpty:r}){return r?[]:[...t.slice(e+1).map(Ux),...t.slice(0,e).map(Ux)]}const jx={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function _D(t,e){const r=e===!1?"http":"https";if(!t)return jx[r].devnet;const n=jx[r][t];if(!n)throw new Error(`Unknown ${r} cluster: ${t}`);return n}async function LW(t,e,r,n){let i,s;r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(i=r,s=n):s=r;const o=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,minContextSlot:s.minContextSlot},c=await t.sendRawTransaction(e,o),u=s&&s.commitment,f=(await(i?t.confirmTransaction(i,u):t.confirmTransaction(c,u))).value;if(f.err)throw c!=null?new jg({action:o!=null&&o.skipPreflight?"send":"simulate",signature:c,transactionMessage:`Status: (${JSON.stringify(f)})`}):new Error(`Raw transaction ${c} failed (${JSON.stringify(f)})`);return c}const UW=1e9,jW=Object.freeze(Object.defineProperty({__proto__:null,Account:OF,AddressLookupTableAccount:nS,AddressLookupTableInstruction:AW,AddressLookupTableProgram:lA,Authorized:wD,BLOCKHASH_CACHE_TIMEOUT_MS:oD,BPF_LOADER_DEPRECATED_PROGRAM_ID:RF,BPF_LOADER_PROGRAM_ID:ZF,BpfLoader:QF,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:cc,ComputeBudgetInstruction:IW,ComputeBudgetProgram:uA,Connection:yD,Ed25519Program:bw,Enum:MF,EpochSchedule:iD,FeeCalculatorLayout:rD,Keypair:Bf,LAMPORTS_PER_SOL:UW,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:nl,Loader:_h,Lockup:Oy,MAX_SEED_LENGTH:XR,Message:Oa,MessageAccountKeys:Ug,MessageV0:vh,NONCE_ACCOUNT_LENGTH:rS,NonceAccount:gw,PACKET_DATA_SIZE:lu,PUBLIC_KEY_LENGTH:uc,PublicKey:Ke,SIGNATURE_LENGTH_IN_BYTES:Yf,SOLANA_SCHEMA:_g,STAKE_CONFIG_ID:bD,STAKE_INSTRUCTION_LAYOUTS:Pi,SYSTEM_INSTRUCTION_LAYOUTS:xn,SYSVAR_CLOCK_PUBKEY:sc,SYSVAR_EPOCH_SCHEDULE_PUBKEY:qF,SYSVAR_INSTRUCTIONS_PUBKEY:FF,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:e1,SYSVAR_RENT_PUBKEY:Zf,SYSVAR_REWARDS_PUBKEY:HF,SYSVAR_SLOT_HASHES_PUBKEY:WF,SYSVAR_SLOT_HISTORY_PUBKEY:KF,SYSVAR_STAKE_HISTORY_PUBKEY:t1,Secp256k1Program:Lf,SendTransactionError:jg,SolanaJSONRPCError:At,SolanaJSONRPCErrorCode:VF,StakeAuthorizationLayout:NW,StakeInstruction:MW,StakeProgram:ww,Struct:rA,SystemInstruction:GF,SystemProgram:qi,Transaction:Ar,TransactionExpiredBlockheightExceededError:nA,TransactionExpiredNonceInvalidError:Mf,TransactionExpiredTimeoutError:iA,TransactionInstruction:mn,TransactionMessage:sA,TransactionStatus:Qc,VALIDATOR_INFO_KEY:ED,VERSION_PREFIX_MASK:dw,VOTE_PROGRAM_ID:$W,ValidatorInfo:hA,VersionedMessage:pw,VersionedTransaction:Eh,VoteAccount:dA,VoteAuthorizationLayout:RW,VoteInit:vD,VoteInstruction:OW,VoteProgram:yp,clusterApiUrl:_D,sendAndConfirmRawTransaction:LW,sendAndConfirmTransaction:tS},Symbol.toStringTag,{value:"Module"})),SD=Ve.createContext({});function zW(){return Ve.useContext(SD)}const qW=({children:t,endpoint:e,config:r={commitment:"confirmed"}})=>{const n=Ve.useMemo(()=>new yD(e,r),[e,r]);return qe.createElement(SD.Provider,{value:{connection:n}},t)};class Ai extends Error{constructor(e,r){super(e),this.error=r}}class Xf extends Ai{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class FW extends Ai{constructor(){super(...arguments),this.name="WalletLoadError"}}class Nf extends Ai{constructor(){super(...arguments),this.name="WalletConfigError"}}class qg extends Ai{constructor(){super(...arguments),this.name="WalletConnectionError"}}class fA extends Ai{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class vw extends Ai{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class ch extends Ai{constructor(){super(...arguments),this.name="WalletAccountError"}}class Fg extends Ai{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class kn extends Ai{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class nu extends Ai{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class $o extends Ai{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Ew extends Ai{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class zx extends Ai{constructor(){super(...arguments),this.name="WalletSignInError"}}class HW extends Ai{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}var Tr;(function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"})(Tr||(Tr={}));class AD extends J4{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,r,n={}){const i=this.publicKey;if(!i)throw new kn;return e.feePayer=e.feePayer||i,e.recentBlockhash=e.recentBlockhash||(await r.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,e}}function ID(t){if(typeof window>"u"||typeof document>"u")return;const e=[];function r(){if(t())for(const s of e)s()}const n=setInterval(r,1e3);e.push(()=>clearInterval(n)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",r,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",r))),document.readyState!=="complete"&&(window.addEventListener("load",r,{once:!0}),e.push(()=>window.removeEventListener("load",r))),r()}function aS(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),r=t.includes("safari");return e&&r}function Ma(t){return"version"in t}class xD extends AD{async sendTransaction(e,r,n={}){let i=!0;try{if(Ma(e)){if(!this.supportedTransactionVersions)throw new nu("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new nu(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await r.sendRawTransaction(s,n)}catch(s){throw s instanceof $o?(i=!1,s):new nu(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=n;e=await this.prepareTransaction(e,r,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const c=e.serialize();return await r.sendRawTransaction(c,o)}catch(s){throw s instanceof $o?(i=!1,s):new nu(s==null?void 0:s.message,s)}}catch(s){throw i&&this.emit("error",s),s}}async signAllTransactions(e){for(const n of e)if(Ma(n)){if(!this.supportedTransactionVersions)throw new $o("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new $o(`Signing transaction version ${n.version} isn't supported by this wallet`)}const r=[];for(const n of e)r.push(await this.signTransaction(n));return r}}class CD extends xD{}const il="solana:signAndSendTransaction",SE="solana:signIn",bf="solana:signMessage",Bi="solana:signTransaction",pA="standard:connect",cS="standard:disconnect",gA="standard:events";function WW(t){return pA in t.features&&gA in t.features&&(il in t.features||Bi in t.features)}var R1;(function(t){t.Mainnet="mainnet-beta",t.Testnet="testnet",t.Devnet="devnet"})(R1||(R1={}));class qx extends Ai{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const KW=[],_w={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Ca("call","select")},connect(){return Promise.reject(Ca("call","connect"))},disconnect(){return Promise.reject(Ca("call","disconnect"))},sendTransaction(){return Promise.reject(Ca("call","sendTransaction"))},signTransaction(){return Promise.reject(Ca("call","signTransaction"))},signAllTransactions(){return Promise.reject(Ca("call","signAllTransactions"))},signMessage(){return Promise.reject(Ca("call","signMessage"))},signIn(){return Promise.reject(Ca("call","signIn"))}};Object.defineProperty(_w,"wallets",{get(){return Ca("read","wallets"),KW}});Object.defineProperty(_w,"wallet",{get(){return Ca("read","wallet"),null}});Object.defineProperty(_w,"publicKey",{get(){return Ca("read","publicKey"),null}});function Ca(t,e){const r=new Error(`You have tried to ${t} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(r),r}const TD=Ve.createContext(_w);function yA(){return Ve.useContext(TD)}function VW(t,e){const r=Ve.useState(()=>{try{const s=localStorage.getItem(t);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),n=r[0],i=Ve.useRef(!0);return Ve.useEffect(()=>{if(i.current){i.current=!1;return}try{n===null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(n))}catch(s){typeof window<"u"&&console.error(s)}},[n,t]),r}var Fa={},Lu={},ks={},lr={},Fx;function mA(){if(Fx)return lr;Fx=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.WalletWindowClosedError=lr.WalletWindowBlockedError=lr.WalletTimeoutError=lr.WalletSignInError=lr.WalletSignMessageError=lr.WalletSignTransactionError=lr.WalletSendTransactionError=lr.WalletNotConnectedError=lr.WalletKeypairError=lr.WalletPublicKeyError=lr.WalletAccountError=lr.WalletDisconnectionError=lr.WalletDisconnectedError=lr.WalletConnectionError=lr.WalletConfigError=lr.WalletLoadError=lr.WalletNotReadyError=lr.WalletError=void 0;class t extends Error{constructor(U,q){super(U),this.error=q}}lr.WalletError=t;class e extends t{constructor(){super(...arguments),this.name="WalletNotReadyError"}}lr.WalletNotReadyError=e;class r extends t{constructor(){super(...arguments),this.name="WalletLoadError"}}lr.WalletLoadError=r;class n extends t{constructor(){super(...arguments),this.name="WalletConfigError"}}lr.WalletConfigError=n;class i extends t{constructor(){super(...arguments),this.name="WalletConnectionError"}}lr.WalletConnectionError=i;class s extends t{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}lr.WalletDisconnectedError=s;class o extends t{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}lr.WalletDisconnectionError=o;class c extends t{constructor(){super(...arguments),this.name="WalletAccountError"}}lr.WalletAccountError=c;class u extends t{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}lr.WalletPublicKeyError=u;class h extends t{constructor(){super(...arguments),this.name="WalletKeypairError"}}lr.WalletKeypairError=h;class f extends t{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}lr.WalletNotConnectedError=f;class p extends t{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}lr.WalletSendTransactionError=p;class E extends t{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}lr.WalletSignTransactionError=E;class S extends t{constructor(){super(...arguments),this.name="WalletSignMessageError"}}lr.WalletSignMessageError=S;class A extends t{constructor(){super(...arguments),this.name="WalletSignInError"}}lr.WalletSignInError=A;class I extends t{constructor(){super(...arguments),this.name="WalletTimeoutError"}}lr.WalletTimeoutError=I;class $ extends t{constructor(){super(...arguments),this.name="WalletWindowBlockedError"}}lr.WalletWindowBlockedError=$;class L extends t{constructor(){super(...arguments),this.name="WalletWindowClosedError"}}return lr.WalletWindowClosedError=L,lr}var Hx;function MD(){if(Hx)return ks;Hx=1;var t=ks&&ks.__awaiter||function(u,h,f,p){function E(S){return S instanceof f?S:new f(function(A){A(S)})}return new(f||(f=Promise))(function(S,A){function I(k){try{L(p.next(k))}catch(U){A(U)}}function $(k){try{L(p.throw(k))}catch(U){A(U)}}function L(k){k.done?S(k.value):E(k.value).then(I,$)}L((p=p.apply(u,h||[])).next())})},e=ks&&ks.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(ks,"__esModule",{value:!0}),ks.BaseWalletAdapter=ks.WalletReadyState=ks.EventEmitter=void 0,ks.scopePollingDetectionStrategy=o,ks.isIosAndRedirectable=c;const r=e(zR());ks.EventEmitter=r.default;const n=mA();var i;(function(u){u.Installed="Installed",u.NotDetected="NotDetected",u.Loadable="Loadable",u.Unsupported="Unsupported"})(i||(ks.WalletReadyState=i={}));class s extends r.default{get connected(){return!!this.publicKey}autoConnect(){return t(this,void 0,void 0,function*(){yield this.connect()})}prepareTransaction(h,f){return t(this,arguments,void 0,function*(p,E,S={}){const A=this.publicKey;if(!A)throw new n.WalletNotConnectedError;return p.feePayer=p.feePayer||A,p.recentBlockhash=p.recentBlockhash||(yield E.getLatestBlockhash({commitment:S.preflightCommitment,minContextSlot:S.minContextSlot})).blockhash,p})}}ks.BaseWalletAdapter=s;function o(u){if(typeof window>"u"||typeof document>"u")return;const h=[];function f(){if(u())for(const S of h)S()}const p=setInterval(f,1e3);h.push(()=>clearInterval(p)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",f,{once:!0}),h.push(()=>document.removeEventListener("DOMContentLoaded",f))),document.readyState!=="complete"&&(window.addEventListener("load",f,{once:!0}),h.push(()=>window.removeEventListener("load",f))),f()}function c(){if(!navigator)return!1;const u=navigator.userAgent.toLowerCase(),h=u.includes("iphone")||u.includes("ipad"),f=u.includes("safari");return h&&f}return ks}var Ao={},fb={},Wx;function ND(){if(Wx)return fb;Wx=1,Object.defineProperty(fb,"__esModule",{value:!0}),fb.isVersionedTransaction=t;function t(e){return"version"in e}return fb}var Kx;function GW(){if(Kx)return Ao;Kx=1;var t=Ao&&Ao.__awaiter||function(u,h,f,p){function E(S){return S instanceof f?S:new f(function(A){A(S)})}return new(f||(f=Promise))(function(S,A){function I(k){try{L(p.next(k))}catch(U){A(U)}}function $(k){try{L(p.throw(k))}catch(U){A(U)}}function L(k){k.done?S(k.value):E(k.value).then(I,$)}L((p=p.apply(u,h||[])).next())})},e=Ao&&Ao.__rest||function(u,h){var f={};for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&h.indexOf(p)<0&&(f[p]=u[p]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,p=Object.getOwnPropertySymbols(u);E<p.length;E++)h.indexOf(p[E])<0&&Object.prototype.propertyIsEnumerable.call(u,p[E])&&(f[p[E]]=u[p[E]]);return f};Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.BaseSignInMessageSignerWalletAdapter=Ao.BaseMessageSignerWalletAdapter=Ao.BaseSignerWalletAdapter=void 0;const r=MD(),n=mA(),i=ND();class s extends r.BaseWalletAdapter{sendTransaction(h,f){return t(this,arguments,void 0,function*(p,E,S={}){let A=!0;try{if((0,i.isVersionedTransaction)(p)){if(!this.supportedTransactionVersions)throw new n.WalletSendTransactionError("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(p.version))throw new n.WalletSendTransactionError(`Sending transaction version ${p.version} isn't supported by this wallet`);try{p=yield this.signTransaction(p);const I=p.serialize();return yield E.sendRawTransaction(I,S)}catch(I){throw I instanceof n.WalletSignTransactionError?(A=!1,I):new n.WalletSendTransactionError(I==null?void 0:I.message,I)}}else try{const{signers:I}=S,$=e(S,["signers"]);p=yield this.prepareTransaction(p,E,$),I!=null&&I.length&&p.partialSign(...I),p=yield this.signTransaction(p);const L=p.serialize();return yield E.sendRawTransaction(L,$)}catch(I){throw I instanceof n.WalletSignTransactionError?(A=!1,I):new n.WalletSendTransactionError(I==null?void 0:I.message,I)}}catch(I){throw A&&this.emit("error",I),I}})}signAllTransactions(h){return t(this,void 0,void 0,function*(){for(const p of h)if((0,i.isVersionedTransaction)(p)){if(!this.supportedTransactionVersions)throw new n.WalletSignTransactionError("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(p.version))throw new n.WalletSignTransactionError(`Signing transaction version ${p.version} isn't supported by this wallet`)}const f=[];for(const p of h)f.push(yield this.signTransaction(p));return f})}}Ao.BaseSignerWalletAdapter=s;class o extends s{}Ao.BaseMessageSignerWalletAdapter=o;class c extends o{}return Ao.BaseSignInMessageSignerWalletAdapter=c,Ao}var pb={},Uu={},x0={},Vx;function YW(){return Vx||(Vx=1,Object.defineProperty(x0,"__esModule",{value:!0}),x0.SolanaSignAndSendTransaction=void 0,x0.SolanaSignAndSendTransaction="solana:signAndSendTransaction"),x0}var C0={},Gx;function ZW(){return Gx||(Gx=1,Object.defineProperty(C0,"__esModule",{value:!0}),C0.SolanaSignIn=void 0,C0.SolanaSignIn="solana:signIn"),C0}var T0={},Yx;function QW(){return Yx||(Yx=1,Object.defineProperty(T0,"__esModule",{value:!0}),T0.SolanaSignMessage=void 0,T0.SolanaSignMessage="solana:signMessage"),T0}var M0={},Zx;function XW(){return Zx||(Zx=1,Object.defineProperty(M0,"__esModule",{value:!0}),M0.SolanaSignTransaction=void 0,M0.SolanaSignTransaction="solana:signTransaction"),M0}var N0={},Qx;function JW(){return Qx||(Qx=1,Object.defineProperty(N0,"__esModule",{value:!0}),N0.SignAndSendAllTransactions=void 0,N0.SignAndSendAllTransactions="solana:signAndSendAllTransactions"),N0}var Xx;function bA(){return Xx||(Xx=1,function(t){var e=Uu&&Uu.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(i,s);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,c)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=Uu&&Uu.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(YW(),t),r(ZW(),t),r(QW(),t),r(XW(),t),r(JW(),t)}(Uu)),Uu}var ju={},AE={},Jx;function eK(){return Jx||(Jx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Connect=t.StandardConnect=void 0,t.StandardConnect="standard:connect",t.Connect=t.StandardConnect}(AE)),AE}var IE={},eC;function tK(){return eC||(eC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Disconnect=t.StandardDisconnect=void 0,t.StandardDisconnect="standard:disconnect",t.Disconnect=t.StandardDisconnect}(IE)),IE}var xE={},tC;function rK(){return tC||(tC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Events=t.StandardEvents=void 0,t.StandardEvents="standard:events",t.Events=t.StandardEvents}(xE)),xE}var rC;function OD(){return rC||(rC=1,function(t){var e=ju&&ju.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(i,s);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,c)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=ju&&ju.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(eK(),t),r(tK(),t),r(rK(),t)}(ju)),ju}var nC;function nK(){if(nC)return pb;nC=1,Object.defineProperty(pb,"__esModule",{value:!0}),pb.isWalletAdapterCompatibleStandardWallet=r;const t=bA(),e=OD();function r(n){return e.StandardConnect in n.features&&e.StandardEvents in n.features&&(t.SolanaSignAndSendTransaction in n.features||t.SolanaSignTransaction in n.features)}return pb}var O0={},iC;function iK(){if(iC)return O0;iC=1,Object.defineProperty(O0,"__esModule",{value:!0}),O0.WalletAdapterNetwork=void 0;var t;return function(e){e.Mainnet="mainnet-beta",e.Testnet="testnet",e.Devnet="devnet"}(t||(O0.WalletAdapterNetwork=t={})),O0}var sC;function sK(){return sC||(sC=1,function(t){var e=Lu&&Lu.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(i,s);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,c)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=Lu&&Lu.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(MD(),t),r(mA(),t),r(GW(),t),r(nK(),t),r(ND(),t),r(iK(),t)}(Lu)),Lu}const RD=Dh(jW);var ga={},$d={},CE,oC;function oK(){return oC||(oC=1,CE=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),CE}var TE={},Ul={},aC;function Bh(){if(aC)return Ul;aC=1;let t;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Ul.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},Ul.getSymbolTotalCodewords=function(n){return e[n]},Ul.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},Ul.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');t=n},Ul.isKanjiModeEnabled=function(){return typeof t<"u"},Ul.toSJIS=function(n){return t(n)},Ul}var ME={},cC;function wA(){return cC||(cC=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}}(ME)),ME}var NE,lC;function aK(){if(lC)return NE;lC=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(e){const r=Math.floor(e/8);return(this.buffer[r]>>>7-e%8&1)===1},put:function(e,r){for(let n=0;n<r;n++)this.putBit((e>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),e&&(this.buffer[r]|=128>>>this.length%8),this.length++}},NE=t,NE}var OE,uC;function cK(){if(uC)return OE;uC=1;function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return t.prototype.set=function(e,r,n,i){const s=e*this.size+r;this.data[s]=n,i&&(this.reservedBit[s]=!0)},t.prototype.get=function(e,r){return this.data[e*this.size+r]},t.prototype.xor=function(e,r,n){this.data[e*this.size+r]^=n},t.prototype.isReserved=function(e,r){return this.reservedBit[e*this.size+r]},OE=t,OE}var RE={},hC;function lK(){return hC||(hC=1,function(t){const e=Bh().getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,s=e(n),o=s===145?26:Math.ceil((s-13)/(2*i-2))*2,c=[s-7];for(let u=1;u<i-1;u++)c[u]=c[u-1]-o;return c.push(6),c.reverse()},t.getPositions=function(n){const i=[],s=t.getRowColCoords(n),o=s.length;for(let c=0;c<o;c++)for(let u=0;u<o;u++)c===0&&u===0||c===0&&u===o-1||c===o-1&&u===0||i.push([s[c],s[u]]);return i}}(RE)),RE}var DE={},dC;function uK(){if(dC)return DE;dC=1;const t=Bh().getSymbolSize,e=7;return DE.getPositions=function(n){const i=t(n);return[[0,0],[i-e,0],[0,i-e]]},DE}var $E={},fC;function hK(){return fC||(fC=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const s=i.size;let o=0,c=0,u=0,h=null,f=null;for(let p=0;p<s;p++){c=u=0,h=f=null;for(let E=0;E<s;E++){let S=i.get(p,E);S===h?c++:(c>=5&&(o+=e.N1+(c-5)),h=S,c=1),S=i.get(E,p),S===f?u++:(u>=5&&(o+=e.N1+(u-5)),f=S,u=1)}c>=5&&(o+=e.N1+(c-5)),u>=5&&(o+=e.N1+(u-5))}return o},t.getPenaltyN2=function(i){const s=i.size;let o=0;for(let c=0;c<s-1;c++)for(let u=0;u<s-1;u++){const h=i.get(c,u)+i.get(c,u+1)+i.get(c+1,u)+i.get(c+1,u+1);(h===4||h===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const s=i.size;let o=0,c=0,u=0;for(let h=0;h<s;h++){c=u=0;for(let f=0;f<s;f++)c=c<<1&2047|i.get(h,f),f>=10&&(c===1488||c===93)&&o++,u=u<<1&2047|i.get(f,h),f>=10&&(u===1488||u===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let s=0;const o=i.data.length;for(let u=0;u<o;u++)s+=i.data[u];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function r(n,i,s){switch(n){case t.Patterns.PATTERN000:return(i+s)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(i+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return i*s%2+i*s%3===0;case t.Patterns.PATTERN110:return(i*s%2+i*s%3)%2===0;case t.Patterns.PATTERN111:return(i*s%3+(i+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,s){const o=s.size;for(let c=0;c<o;c++)for(let u=0;u<o;u++)s.isReserved(u,c)||s.xor(u,c,r(i,u,c))},t.getBestMask=function(i,s){const o=Object.keys(t.Patterns).length;let c=0,u=1/0;for(let h=0;h<o;h++){s(h),t.applyMask(h,i);const f=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(h,i),f<u&&(u=f,c=h)}return c}}($E)),$E}var gb={},pC;function DD(){if(pC)return gb;pC=1;const t=wA(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return gb.getBlocksCount=function(i,s){switch(s){case t.L:return e[(i-1)*4+0];case t.M:return e[(i-1)*4+1];case t.Q:return e[(i-1)*4+2];case t.H:return e[(i-1)*4+3];default:return}},gb.getTotalCodewordsCount=function(i,s){switch(s){case t.L:return r[(i-1)*4+0];case t.M:return r[(i-1)*4+1];case t.Q:return r[(i-1)*4+2];case t.H:return r[(i-1)*4+3];default:return}},gb}var kE={},R0={},gC;function dK(){if(gC)return R0;gC=1;const t=new Uint8Array(512),e=new Uint8Array(256);return function(){let n=1;for(let i=0;i<255;i++)t[i]=n,e[n]=i,n<<=1,n&256&&(n^=285);for(let i=255;i<512;i++)t[i]=t[i-255]}(),R0.log=function(n){if(n<1)throw new Error("log("+n+")");return e[n]},R0.exp=function(n){return t[n]},R0.mul=function(n,i){return n===0||i===0?0:t[e[n]+e[i]]},R0}var yC;function fK(){return yC||(yC=1,function(t){const e=dK();t.mul=function(n,i){const s=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let c=0;c<i.length;c++)s[o+c]^=e.mul(n[o],i[c]);return s},t.mod=function(n,i){let s=new Uint8Array(n);for(;s.length-i.length>=0;){const o=s[0];for(let u=0;u<i.length;u++)s[u]^=e.mul(i[u],o);let c=0;for(;c<s.length&&s[c]===0;)c++;s=s.slice(c)}return s},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let s=0;s<n;s++)i=t.mul(i,new Uint8Array([1,e.exp(s)]));return i}}(kE)),kE}var PE,mC;function pK(){if(mC)return PE;mC=1;const t=fK();function e(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(n){this.degree=n,this.genPoly=t.generateECPolynomial(this.degree)},e.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(n.length+this.degree);i.set(n);const s=t.mod(i,this.genPoly),o=this.degree-s.length;if(o>0){const c=new Uint8Array(this.degree);return c.set(s,o),c}return s},PE=e,PE}var BE={},LE={},UE={},bC;function $D(){return bC||(bC=1,UE.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),UE}var Ha={},wC;function kD(){if(wC)return Ha;wC=1;const t="[0-9]+",e="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;Ha.KANJI=new RegExp(r,"g"),Ha.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ha.BYTE=new RegExp(n,"g"),Ha.NUMERIC=new RegExp(t,"g"),Ha.ALPHANUMERIC=new RegExp(e,"g");const i=new RegExp("^"+r+"$"),s=new RegExp("^"+t+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ha.testKanji=function(u){return i.test(u)},Ha.testNumeric=function(u){return s.test(u)},Ha.testAlphanumeric=function(u){return o.test(u)},Ha}var vC;function Lh(){return vC||(vC=1,function(t){const e=$D(),r=kD();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return r.testNumeric(s)?t.NUMERIC:r.testAlphanumeric(s)?t.ALPHANUMERIC:r.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(s,o){if(t.isValid(s))return s;try{return n(s)}catch{return o}}}(LE)),LE}var EC;function gK(){return EC||(EC=1,function(t){const e=Bh(),r=DD(),n=wA(),i=Lh(),s=$D(),o=7973,c=e.getBCHDigit(o);function u(E,S,A){for(let I=1;I<=40;I++)if(S<=t.getCapacity(I,A,E))return I}function h(E,S){return i.getCharCountIndicator(E,S)+4}function f(E,S){let A=0;return E.forEach(function(I){const $=h(I.mode,S);A+=$+I.getBitsLength()}),A}function p(E,S){for(let A=1;A<=40;A++)if(f(E,A)<=t.getCapacity(A,S,i.MIXED))return A}t.from=function(S,A){return s.isValid(S)?parseInt(S,10):A},t.getCapacity=function(S,A,I){if(!s.isValid(S))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=i.BYTE);const $=e.getSymbolTotalCodewords(S),L=r.getTotalCodewordsCount(S,A),k=($-L)*8;if(I===i.MIXED)return k;const U=k-h(I,S);switch(I){case i.NUMERIC:return Math.floor(U/10*3);case i.ALPHANUMERIC:return Math.floor(U/11*2);case i.KANJI:return Math.floor(U/13);case i.BYTE:default:return Math.floor(U/8)}},t.getBestVersionForData=function(S,A){let I;const $=n.from(A,n.M);if(Array.isArray(S)){if(S.length>1)return p(S,$);if(S.length===0)return 1;I=S[0]}else I=S;return u(I.mode,I.getLength(),$)},t.getEncodedBits=function(S){if(!s.isValid(S)||S<7)throw new Error("Invalid QR Code version");let A=S<<12;for(;e.getBCHDigit(A)-c>=0;)A^=o<<e.getBCHDigit(A)-c;return S<<12|A}}(BE)),BE}var jE={},_C;function yK(){if(_C)return jE;_C=1;const t=Bh(),e=1335,r=21522,n=t.getBCHDigit(e);return jE.getEncodedBits=function(s,o){const c=s.bit<<3|o;let u=c<<10;for(;t.getBCHDigit(u)-n>=0;)u^=e<<t.getBCHDigit(u)-n;return(c<<10|u)^r},jE}var zE={},qE,SC;function mK(){if(SC)return qE;SC=1;const t=Lh();function e(r){this.mode=t.NUMERIC,this.data=r.toString()}return e.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(n){let i,s,o;for(i=0;i+3<=this.data.length;i+=3)s=this.data.substr(i,3),o=parseInt(s,10),n.put(o,10);const c=this.data.length-i;c>0&&(s=this.data.substr(i),o=parseInt(s,10),n.put(o,c*3+1))},qE=e,qE}var FE,AC;function bK(){if(AC)return FE;AC=1;const t=Lh(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=t.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let s;for(s=0;s+2<=this.data.length;s+=2){let o=e.indexOf(this.data[s])*45;o+=e.indexOf(this.data[s+1]),i.put(o,11)}this.data.length%2&&i.put(e.indexOf(this.data[s]),6)},FE=r,FE}var HE,IC;function wK(){if(IC)return HE;IC=1;const t=Lh();function e(r){this.mode=t.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return e.getBitsLength=function(n){return n*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(r){for(let n=0,i=this.data.length;n<i;n++)r.put(this.data[n],8)},HE=e,HE}var WE,xC;function vK(){if(xC)return WE;xC=1;const t=Lh(),e=Bh();function r(n){this.mode=t.KANJI,this.data=n}return r.getBitsLength=function(i){return i*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let i;for(i=0;i<this.data.length;i++){let s=e.toSJIS(this.data[i]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),n.put(s,13)}},WE=r,WE}var KE={exports:{}},CC;function EK(){return CC||(CC=1,function(t){var e={single_source_shortest_paths:function(r,n,i){var s={},o={};o[n]=0;var c=e.PriorityQueue.make();c.push(n,0);for(var u,h,f,p,E,S,A,I,$;!c.empty();){u=c.pop(),h=u.value,p=u.cost,E=r[h]||{};for(f in E)E.hasOwnProperty(f)&&(S=E[f],A=p+S,I=o[f],$=typeof o[f]>"u",($||I>A)&&(o[f]=A,c.push(f,A),s[f]=h))}if(typeof i<"u"&&typeof o[i]>"u"){var L=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(L)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],s=n;s;)i.push(s),r[s],s=r[s];return i.reverse(),i},find_path:function(r,n,i){var s=e.single_source_shortest_paths(r,n,i);return e.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(r){var n=e.PriorityQueue,i={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(i[s]=n[s]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e}(KE)),KE.exports}var TC;function _K(){return TC||(TC=1,function(t){const e=Lh(),r=mK(),n=bK(),i=wK(),s=vK(),o=kD(),c=Bh(),u=EK();function h(L){return unescape(encodeURIComponent(L)).length}function f(L,k,U){const q=[];let j;for(;(j=L.exec(U))!==null;)q.push({data:j[0],index:j.index,mode:k,length:j[0].length});return q}function p(L){const k=f(o.NUMERIC,e.NUMERIC,L),U=f(o.ALPHANUMERIC,e.ALPHANUMERIC,L);let q,j;return c.isKanjiModeEnabled()?(q=f(o.BYTE,e.BYTE,L),j=f(o.KANJI,e.KANJI,L)):(q=f(o.BYTE_KANJI,e.BYTE,L),j=[]),k.concat(U,q,j).sort(function(V,G){return V.index-G.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function E(L,k){switch(k){case e.NUMERIC:return r.getBitsLength(L);case e.ALPHANUMERIC:return n.getBitsLength(L);case e.KANJI:return s.getBitsLength(L);case e.BYTE:return i.getBitsLength(L)}}function S(L){return L.reduce(function(k,U){const q=k.length-1>=0?k[k.length-1]:null;return q&&q.mode===U.mode?(k[k.length-1].data+=U.data,k):(k.push(U),k)},[])}function A(L){const k=[];for(let U=0;U<L.length;U++){const q=L[U];switch(q.mode){case e.NUMERIC:k.push([q,{data:q.data,mode:e.ALPHANUMERIC,length:q.length},{data:q.data,mode:e.BYTE,length:q.length}]);break;case e.ALPHANUMERIC:k.push([q,{data:q.data,mode:e.BYTE,length:q.length}]);break;case e.KANJI:k.push([q,{data:q.data,mode:e.BYTE,length:h(q.data)}]);break;case e.BYTE:k.push([{data:q.data,mode:e.BYTE,length:h(q.data)}])}}return k}function I(L,k){const U={},q={start:{}};let j=["start"];for(let z=0;z<L.length;z++){const V=L[z],G=[];for(let B=0;B<V.length;B++){const W=V[B],D=""+z+B;G.push(D),U[D]={node:W,lastCount:0},q[D]={};for(let _=0;_<j.length;_++){const w=j[_];U[w]&&U[w].node.mode===W.mode?(q[w][D]=E(U[w].lastCount+W.length,W.mode)-E(U[w].lastCount,W.mode),U[w].lastCount+=W.length):(U[w]&&(U[w].lastCount=W.length),q[w][D]=E(W.length,W.mode)+4+e.getCharCountIndicator(W.mode,k))}}j=G}for(let z=0;z<j.length;z++)q[j[z]].end=0;return{map:q,table:U}}function $(L,k){let U;const q=e.getBestModeForData(L);if(U=e.from(k,q),U!==e.BYTE&&U.bit<q.bit)throw new Error('"'+L+'" cannot be encoded with mode '+e.toString(U)+`.
 Suggested mode is: `+e.toString(q));switch(U===e.KANJI&&!c.isKanjiModeEnabled()&&(U=e.BYTE),U){case e.NUMERIC:return new r(L);case e.ALPHANUMERIC:return new n(L);case e.KANJI:return new s(L);case e.BYTE:return new i(L)}}t.fromArray=function(k){return k.reduce(function(U,q){return typeof q=="string"?U.push($(q,null)):q.data&&U.push($(q.data,q.mode)),U},[])},t.fromString=function(k,U){const q=p(k,c.isKanjiModeEnabled()),j=A(q),z=I(j,U),V=u.find_path(z.map,"start","end"),G=[];for(let B=1;B<V.length-1;B++)G.push(z.table[V[B]].node);return t.fromArray(S(G))},t.rawSplit=function(k){return t.fromArray(p(k,c.isKanjiModeEnabled()))}}(zE)),zE}var MC;function SK(){if(MC)return TE;MC=1;const t=Bh(),e=wA(),r=aK(),n=cK(),i=lK(),s=uK(),o=hK(),c=DD(),u=pK(),h=gK(),f=yK(),p=Lh(),E=_K();function S(z,V){const G=z.size,B=s.getPositions(V);for(let W=0;W<B.length;W++){const D=B[W][0],_=B[W][1];for(let w=-1;w<=7;w++)if(!(D+w<=-1||G<=D+w))for(let g=-1;g<=7;g++)_+g<=-1||G<=_+g||(w>=0&&w<=6&&(g===0||g===6)||g>=0&&g<=6&&(w===0||w===6)||w>=2&&w<=4&&g>=2&&g<=4?z.set(D+w,_+g,!0,!0):z.set(D+w,_+g,!1,!0))}}function A(z){const V=z.size;for(let G=8;G<V-8;G++){const B=G%2===0;z.set(G,6,B,!0),z.set(6,G,B,!0)}}function I(z,V){const G=i.getPositions(V);for(let B=0;B<G.length;B++){const W=G[B][0],D=G[B][1];for(let _=-2;_<=2;_++)for(let w=-2;w<=2;w++)_===-2||_===2||w===-2||w===2||_===0&&w===0?z.set(W+_,D+w,!0,!0):z.set(W+_,D+w,!1,!0)}}function $(z,V){const G=z.size,B=h.getEncodedBits(V);let W,D,_;for(let w=0;w<18;w++)W=Math.floor(w/3),D=w%3+G-8-3,_=(B>>w&1)===1,z.set(W,D,_,!0),z.set(D,W,_,!0)}function L(z,V,G){const B=z.size,W=f.getEncodedBits(V,G);let D,_;for(D=0;D<15;D++)_=(W>>D&1)===1,D<6?z.set(D,8,_,!0):D<8?z.set(D+1,8,_,!0):z.set(B-15+D,8,_,!0),D<8?z.set(8,B-D-1,_,!0):D<9?z.set(8,15-D-1+1,_,!0):z.set(8,15-D-1,_,!0);z.set(B-8,8,1,!0)}function k(z,V){const G=z.size;let B=-1,W=G-1,D=7,_=0;for(let w=G-1;w>0;w-=2)for(w===6&&w--;;){for(let g=0;g<2;g++)if(!z.isReserved(W,w-g)){let b=!1;_<V.length&&(b=(V[_]>>>D&1)===1),z.set(W,w-g,b),D--,D===-1&&(_++,D=7)}if(W+=B,W<0||G<=W){W-=B,B=-B;break}}}function U(z,V,G){const B=new r;G.forEach(function(g){B.put(g.mode.bit,4),B.put(g.getLength(),p.getCharCountIndicator(g.mode,z)),g.write(B)});const W=t.getSymbolTotalCodewords(z),D=c.getTotalCodewordsCount(z,V),_=(W-D)*8;for(B.getLengthInBits()+4<=_&&B.put(0,4);B.getLengthInBits()%8!==0;)B.putBit(0);const w=(_-B.getLengthInBits())/8;for(let g=0;g<w;g++)B.put(g%2?17:236,8);return q(B,z,V)}function q(z,V,G){const B=t.getSymbolTotalCodewords(V),W=c.getTotalCodewordsCount(V,G),D=B-W,_=c.getBlocksCount(V,G),w=B%_,g=_-w,b=Math.floor(B/_),m=Math.floor(D/_),M=m+1,R=b-m,C=new u(R);let v=0;const O=new Array(_),x=new Array(_);let N=0;const H=new Uint8Array(z.buffer);for(let oe=0;oe<_;oe++){const be=oe<g?m:M;O[oe]=H.slice(v,v+be),x[oe]=C.encode(O[oe]),v+=be,N=Math.max(N,be)}const Y=new Uint8Array(B);let Q=0,ee,re;for(ee=0;ee<N;ee++)for(re=0;re<_;re++)ee<O[re].length&&(Y[Q++]=O[re][ee]);for(ee=0;ee<R;ee++)for(re=0;re<_;re++)Y[Q++]=x[re][ee];return Y}function j(z,V,G,B){let W;if(Array.isArray(z))W=E.fromArray(z);else if(typeof z=="string"){let b=V;if(!b){const m=E.rawSplit(z);b=h.getBestVersionForData(m,G)}W=E.fromString(z,b||40)}else throw new Error("Invalid data");const D=h.getBestVersionForData(W,G);if(!D)throw new Error("The amount of data is too big to be stored in a QR Code");if(!V)V=D;else if(V<D)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+D+`.
`);const _=U(V,G,W),w=t.getSymbolSize(V),g=new n(w);return S(g,V),A(g),I(g,V),L(g,G,0),V>=7&&$(g,V),k(g,_),isNaN(B)&&(B=o.getBestMask(g,L.bind(null,g,G))),o.applyMask(B,g),L(g,G,B),{modules:g,version:V,errorCorrectionLevel:G,maskPattern:B,segments:W}}return TE.create=function(V,G){if(typeof V>"u"||V==="")throw new Error("No input text");let B=e.M,W,D;return typeof G<"u"&&(B=e.from(G.errorCorrectionLevel,e.M),W=h.from(G.version),D=o.from(G.maskPattern),G.toSJISFunc&&t.setToSJISFunction(G.toSJISFunc)),j(V,W,B,D)},TE}var VE={},GE={},NC;function PD(){return NC||(NC=1,function(t){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:s,scale:s?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const s=t.getScale(n,i);return Math.floor((n+i.margin*2)*s)},t.qrToImageData=function(n,i,s){const o=i.modules.size,c=i.modules.data,u=t.getScale(o,s),h=Math.floor((o+s.margin*2)*u),f=s.margin*u,p=[s.color.light,s.color.dark];for(let E=0;E<h;E++)for(let S=0;S<h;S++){let A=(E*h+S)*4,I=s.color.light;if(E>=f&&S>=f&&E<h-f&&S<h-f){const $=Math.floor((E-f)/u),L=Math.floor((S-f)/u);I=p[c[$*o+L]?1:0]}n[A++]=I.r,n[A++]=I.g,n[A++]=I.b,n[A]=I.a}}}(GE)),GE}var OC;function AK(){return OC||(OC=1,function(t){const e=PD();function r(i,s,o){i.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,c){let u=c,h=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(h=n()),u=e.getOptions(u);const f=e.getImageWidth(s.modules.size,u),p=h.getContext("2d"),E=p.createImageData(f,f);return e.qrToImageData(E.data,s,u),r(p,h,f),p.putImageData(E,0,0),h},t.renderToDataURL=function(s,o,c){let u=c;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const h=t.render(s,o,u),f=u.type||"image/png",p=u.rendererOpts||{};return h.toDataURL(f,p.quality)}}(VE)),VE}var YE={},RC;function IK(){if(RC)return YE;RC=1;const t=PD();function e(i,s){const o=i.a/255,c=s+'="'+i.hex+'"';return o<1?c+" "+s+'-opacity="'+o.toFixed(2).slice(1)+'"':c}function r(i,s,o){let c=i+s;return typeof o<"u"&&(c+=" "+o),c}function n(i,s,o){let c="",u=0,h=!1,f=0;for(let p=0;p<i.length;p++){const E=Math.floor(p%s),S=Math.floor(p/s);!E&&!h&&(h=!0),i[p]?(f++,p>0&&E>0&&i[p-1]||(c+=h?r("M",E+o,.5+S+o):r("m",u,0),u=0,h=!1),E+1<s&&i[p+1]||(c+=r("h",f),f=0)):u++}return c}return YE.render=function(s,o,c){const u=t.getOptions(o),h=s.modules.size,f=s.modules.data,p=h+u.margin*2,E=u.color.light.a?"<path "+e(u.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",S="<path "+e(u.color.dark,"stroke")+' d="'+n(f,h,u.margin)+'"/>',A='viewBox="0 0 '+p+" "+p+'"',$='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+A+' shape-rendering="crispEdges">'+E+S+`</svg>
`;return typeof c=="function"&&c(null,$),$},YE}var DC;function xK(){if(DC)return $d;DC=1;const t=oK(),e=SK(),r=AK(),n=IK();function i(s,o,c,u,h){const f=[].slice.call(arguments,1),p=f.length,E=typeof f[p-1]=="function";if(!E&&!t())throw new Error("Callback required as last argument");if(E){if(p<2)throw new Error("Too few arguments provided");p===2?(h=c,c=o,o=u=void 0):p===3&&(o.getContext&&typeof h>"u"?(h=u,u=void 0):(h=u,u=c,c=o,o=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(c=o,o=u=void 0):p===2&&!o.getContext&&(u=c,c=o,o=void 0),new Promise(function(S,A){try{const I=e.create(c,u);S(s(I,o,u))}catch(I){A(I)}})}try{const S=e.create(c,u);h(null,s(S,o,u))}catch(S){h(S)}}return $d.create=e.create,$d.toCanvas=i.bind(null,r.render),$d.toDataURL=i.bind(null,r.renderToDataURL),$d.toString=i.bind(null,function(s,o,c){return n.render(s,c)}),$d}var ZE={},$C;function BD(){return $C||($C=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SOLANA_CHAINS=t.SOLANA_LOCALNET_CHAIN=t.SOLANA_TESTNET_CHAIN=t.SOLANA_DEVNET_CHAIN=t.SOLANA_MAINNET_CHAIN=void 0,t.isSolanaChain=e,t.SOLANA_MAINNET_CHAIN="solana:mainnet",t.SOLANA_DEVNET_CHAIN="solana:devnet",t.SOLANA_TESTNET_CHAIN="solana:testnet",t.SOLANA_LOCALNET_CHAIN="solana:localnet",t.SOLANA_CHAINS=[t.SOLANA_MAINNET_CHAIN,t.SOLANA_DEVNET_CHAIN,t.SOLANA_TESTNET_CHAIN,t.SOLANA_LOCALNET_CHAIN];function e(r){return t.SOLANA_CHAINS.includes(r)}}(ZE)),ZE}var Zo={},zu={},yb={},kC;function CK(){if(kC)return yb;kC=1,Object.defineProperty(yb,"__esModule",{value:!0}),yb.getCommitment=t;function t(e){switch(e){case"processed":case"confirmed":case"finalized":case void 0:return e;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}return yb}var QE={},PC;function TK(){return PC||(PC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LOCALNET_ENDPOINT=t.TESTNET_ENDPOINT=t.DEVNET_ENDPOINT=t.MAINNET_ENDPOINT=void 0,t.getChainForEndpoint=r,t.getEndpointForChain=n;const e=BD();t.MAINNET_ENDPOINT="https://api.mainnet-beta.solana.com",t.DEVNET_ENDPOINT="https://api.devnet.solana.com",t.TESTNET_ENDPOINT="https://api.testnet.solana.com",t.LOCALNET_ENDPOINT="http://localhost:8899";function r(i){return i.includes(t.MAINNET_ENDPOINT)?e.SOLANA_MAINNET_CHAIN:/\bdevnet\b/i.test(i)?e.SOLANA_DEVNET_CHAIN:/\btestnet\b/i.test(i)?e.SOLANA_TESTNET_CHAIN:/\blocalhost\b/i.test(i)||/\b127\.0\.0\.1\b/.test(i)?e.SOLANA_LOCALNET_CHAIN:e.SOLANA_MAINNET_CHAIN}function n(i,s){return s||(i===e.SOLANA_MAINNET_CHAIN?t.MAINNET_ENDPOINT:i===e.SOLANA_DEVNET_CHAIN?t.DEVNET_ENDPOINT:i===e.SOLANA_TESTNET_CHAIN?t.TESTNET_ENDPOINT:i===e.SOLANA_LOCALNET_CHAIN?t.LOCALNET_ENDPOINT:t.MAINNET_ENDPOINT)}}(QE)),QE}var Wa={},D0={},XE={},fn={},Es={},JE={},$0={},BC;function MK(){return BC||(BC=1,Object.defineProperty($0,"__esModule",{value:!0}),$0.crypto=void 0,$0.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),$0}var LC;function Hg(){return LC||(LC=1,function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=r,t.anumber=n,t.abytes=i,t.ahash=s,t.aexists=o,t.aoutput=c,t.u8=u,t.u32=h,t.clean=f,t.createView=p,t.rotr=E,t.rotl=S,t.byteSwap=A,t.byteSwap32=I,t.bytesToHex=k,t.hexToBytes=j,t.asyncLoop=V,t.utf8ToBytes=G,t.bytesToUtf8=B,t.toBytes=W,t.kdfInputToBytes=D,t.concatBytes=_,t.checkOpts=w,t.createHasher=b,t.createOptHasher=m,t.createXOFer=M,t.randomBytes=R;const e=MK();function r(C){return C instanceof Uint8Array||ArrayBuffer.isView(C)&&C.constructor.name==="Uint8Array"}function n(C){if(!Number.isSafeInteger(C)||C<0)throw new Error("positive integer expected, got "+C)}function i(C,...v){if(!r(C))throw new Error("Uint8Array expected");if(v.length>0&&!v.includes(C.length))throw new Error("Uint8Array expected of length "+v+", got length="+C.length)}function s(C){if(typeof C!="function"||typeof C.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");n(C.outputLen),n(C.blockLen)}function o(C,v=!0){if(C.destroyed)throw new Error("Hash instance has been destroyed");if(v&&C.finished)throw new Error("Hash#digest() has already been called")}function c(C,v){i(C);const O=v.outputLen;if(C.length<O)throw new Error("digestInto() expects output buffer of length at least "+O)}function u(C){return new Uint8Array(C.buffer,C.byteOffset,C.byteLength)}function h(C){return new Uint32Array(C.buffer,C.byteOffset,Math.floor(C.byteLength/4))}function f(...C){for(let v=0;v<C.length;v++)C[v].fill(0)}function p(C){return new DataView(C.buffer,C.byteOffset,C.byteLength)}function E(C,v){return C<<32-v|C>>>v}function S(C,v){return C<<v|C>>>32-v>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function A(C){return C<<24&4278190080|C<<8&16711680|C>>>8&65280|C>>>24&255}t.swap8IfBE=t.isLE?C=>C:C=>A(C),t.byteSwapIfBE=t.swap8IfBE;function I(C){for(let v=0;v<C.length;v++)C[v]=A(C[v]);return C}t.swap32IfBE=t.isLE?C=>C:I;const $=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",L=Array.from({length:256},(C,v)=>v.toString(16).padStart(2,"0"));function k(C){if(i(C),$)return C.toHex();let v="";for(let O=0;O<C.length;O++)v+=L[C[O]];return v}const U={_0:48,_9:57,A:65,F:70,a:97,f:102};function q(C){if(C>=U._0&&C<=U._9)return C-U._0;if(C>=U.A&&C<=U.F)return C-(U.A-10);if(C>=U.a&&C<=U.f)return C-(U.a-10)}function j(C){if(typeof C!="string")throw new Error("hex string expected, got "+typeof C);if($)return Uint8Array.fromHex(C);const v=C.length,O=v/2;if(v%2)throw new Error("hex string expected, got unpadded hex of length "+v);const x=new Uint8Array(O);for(let N=0,H=0;N<O;N++,H+=2){const Y=q(C.charCodeAt(H)),Q=q(C.charCodeAt(H+1));if(Y===void 0||Q===void 0){const ee=C[H]+C[H+1];throw new Error('hex string expected, got non-hex character "'+ee+'" at index '+H)}x[N]=Y*16+Q}return x}const z=async()=>{};t.nextTick=z;async function V(C,v,O){let x=Date.now();for(let N=0;N<C;N++){O(N);const H=Date.now()-x;H>=0&&H<v||(await(0,t.nextTick)(),x+=H)}}function G(C){if(typeof C!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(C))}function B(C){return new TextDecoder().decode(C)}function W(C){return typeof C=="string"&&(C=G(C)),i(C),C}function D(C){return typeof C=="string"&&(C=G(C)),i(C),C}function _(...C){let v=0;for(let x=0;x<C.length;x++){const N=C[x];i(N),v+=N.length}const O=new Uint8Array(v);for(let x=0,N=0;x<C.length;x++){const H=C[x];O.set(H,N),N+=H.length}return O}function w(C,v){if(v!==void 0&&{}.toString.call(v)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(C,v)}class g{}t.Hash=g;function b(C){const v=x=>C().update(W(x)).digest(),O=C();return v.outputLen=O.outputLen,v.blockLen=O.blockLen,v.create=()=>C(),v}function m(C){const v=(x,N)=>C(N).update(W(x)).digest(),O=C({});return v.outputLen=O.outputLen,v.blockLen=O.blockLen,v.create=x=>C(x),v}function M(C){const v=(x,N)=>C(N).update(W(x)).digest(),O=C({});return v.outputLen=O.outputLen,v.blockLen=O.blockLen,v.create=x=>C(x),v}t.wrapConstructor=b,t.wrapConstructorWithOpts=m,t.wrapXOFConstructorWithOpts=M;function R(C=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(C));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(C));throw new Error("crypto.getRandomValues must be defined")}}(JE)),JE}var UC;function NK(){if(UC)return Es;UC=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.SHA512_IV=Es.SHA384_IV=Es.SHA224_IV=Es.SHA256_IV=Es.HashMD=void 0,Es.setBigUint64=e,Es.Chi=r,Es.Maj=n;const t=Hg();function e(s,o,c,u){if(typeof s.setBigUint64=="function")return s.setBigUint64(o,c,u);const h=BigInt(32),f=BigInt(4294967295),p=Number(c>>h&f),E=Number(c&f),S=u?4:0,A=u?0:4;s.setUint32(o+S,p,u),s.setUint32(o+A,E,u)}function r(s,o,c){return s&o^~s&c}function n(s,o,c){return s&o^s&c^o&c}class i extends t.Hash{constructor(o,c,u,h){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=o,this.outputLen=c,this.padOffset=u,this.isLE=h,this.buffer=new Uint8Array(o),this.view=(0,t.createView)(this.buffer)}update(o){(0,t.aexists)(this),o=(0,t.toBytes)(o),(0,t.abytes)(o);const{view:c,buffer:u,blockLen:h}=this,f=o.length;for(let p=0;p<f;){const E=Math.min(h-this.pos,f-p);if(E===h){const S=(0,t.createView)(o);for(;h<=f-p;p+=h)this.process(S,p);continue}u.set(o.subarray(p,p+E),this.pos),this.pos+=E,p+=E,this.pos===h&&(this.process(c,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){(0,t.aexists)(this),(0,t.aoutput)(o,this),this.finished=!0;const{buffer:c,view:u,blockLen:h,isLE:f}=this;let{pos:p}=this;c[p++]=128,(0,t.clean)(this.buffer.subarray(p)),this.padOffset>h-p&&(this.process(u,0),p=0);for(let $=p;$<h;$++)c[$]=0;e(u,h-8,BigInt(this.length*8),f),this.process(u,0);const E=(0,t.createView)(o),S=this.outputLen;if(S%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const A=S/4,I=this.get();if(A>I.length)throw new Error("_sha2: outputLen bigger than state");for(let $=0;$<A;$++)E.setUint32(4*$,I[$],f)}digest(){const{buffer:o,outputLen:c}=this;this.digestInto(o);const u=o.slice(0,c);return this.destroy(),u}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:c,buffer:u,length:h,finished:f,destroyed:p,pos:E}=this;return o.destroyed=p,o.finished=f,o.length=h,o.pos=E,h%c&&o.buffer.set(u),o}clone(){return this._cloneInto()}}return Es.HashMD=i,Es.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Es.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),Es.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),Es.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Es}var Gt={},jC;function OK(){if(jC)return Gt;jC=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.toBig=Gt.shrSL=Gt.shrSH=Gt.rotrSL=Gt.rotrSH=Gt.rotrBL=Gt.rotrBH=Gt.rotr32L=Gt.rotr32H=Gt.rotlSL=Gt.rotlSH=Gt.rotlBL=Gt.rotlBH=Gt.add5L=Gt.add5H=Gt.add4L=Gt.add4H=Gt.add3L=Gt.add3H=void 0,Gt.add=L,Gt.fromBig=r,Gt.split=n;const t=BigInt(2**32-1),e=BigInt(32);function r(B,W=!1){return W?{h:Number(B&t),l:Number(B>>e&t)}:{h:Number(B>>e&t)|0,l:Number(B&t)|0}}function n(B,W=!1){const D=B.length;let _=new Uint32Array(D),w=new Uint32Array(D);for(let g=0;g<D;g++){const{h:b,l:m}=r(B[g],W);[_[g],w[g]]=[b,m]}return[_,w]}const i=(B,W)=>BigInt(B>>>0)<<e|BigInt(W>>>0);Gt.toBig=i;const s=(B,W,D)=>B>>>D;Gt.shrSH=s;const o=(B,W,D)=>B<<32-D|W>>>D;Gt.shrSL=o;const c=(B,W,D)=>B>>>D|W<<32-D;Gt.rotrSH=c;const u=(B,W,D)=>B<<32-D|W>>>D;Gt.rotrSL=u;const h=(B,W,D)=>B<<64-D|W>>>D-32;Gt.rotrBH=h;const f=(B,W,D)=>B>>>D-32|W<<64-D;Gt.rotrBL=f;const p=(B,W)=>W;Gt.rotr32H=p;const E=(B,W)=>B;Gt.rotr32L=E;const S=(B,W,D)=>B<<D|W>>>32-D;Gt.rotlSH=S;const A=(B,W,D)=>W<<D|B>>>32-D;Gt.rotlSL=A;const I=(B,W,D)=>W<<D-32|B>>>64-D;Gt.rotlBH=I;const $=(B,W,D)=>B<<D-32|W>>>64-D;Gt.rotlBL=$;function L(B,W,D,_){const w=(W>>>0)+(_>>>0);return{h:B+D+(w/2**32|0)|0,l:w|0}}const k=(B,W,D)=>(B>>>0)+(W>>>0)+(D>>>0);Gt.add3L=k;const U=(B,W,D,_)=>W+D+_+(B/2**32|0)|0;Gt.add3H=U;const q=(B,W,D,_)=>(B>>>0)+(W>>>0)+(D>>>0)+(_>>>0);Gt.add4L=q;const j=(B,W,D,_,w)=>W+D+_+w+(B/2**32|0)|0;Gt.add4H=j;const z=(B,W,D,_,w)=>(B>>>0)+(W>>>0)+(D>>>0)+(_>>>0)+(w>>>0);Gt.add5L=z;const V=(B,W,D,_,w,g)=>W+D+_+w+g+(B/2**32|0)|0;Gt.add5H=V;const G={fromBig:r,split:n,toBig:i,shrSH:s,shrSL:o,rotrSH:c,rotrSL:u,rotrBH:h,rotrBL:f,rotr32H:p,rotr32L:E,rotlSH:S,rotlSL:A,rotlBH:I,rotlBL:$,add:L,add3L:k,add3H:U,add4L:q,add4H:j,add5H:V,add5L:z};return Gt.default=G,Gt}var zC;function RK(){if(zC)return fn;zC=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.sha512_224=fn.sha512_256=fn.sha384=fn.sha512=fn.sha224=fn.sha256=fn.SHA512_256=fn.SHA512_224=fn.SHA384=fn.SHA512=fn.SHA224=fn.SHA256=void 0;const t=NK(),e=OK(),r=Hg(),n=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),i=new Uint32Array(64);class s extends t.HashMD{constructor(U=32){super(64,U,8,!1),this.A=t.SHA256_IV[0]|0,this.B=t.SHA256_IV[1]|0,this.C=t.SHA256_IV[2]|0,this.D=t.SHA256_IV[3]|0,this.E=t.SHA256_IV[4]|0,this.F=t.SHA256_IV[5]|0,this.G=t.SHA256_IV[6]|0,this.H=t.SHA256_IV[7]|0}get(){const{A:U,B:q,C:j,D:z,E:V,F:G,G:B,H:W}=this;return[U,q,j,z,V,G,B,W]}set(U,q,j,z,V,G,B,W){this.A=U|0,this.B=q|0,this.C=j|0,this.D=z|0,this.E=V|0,this.F=G|0,this.G=B|0,this.H=W|0}process(U,q){for(let w=0;w<16;w++,q+=4)i[w]=U.getUint32(q,!1);for(let w=16;w<64;w++){const g=i[w-15],b=i[w-2],m=(0,r.rotr)(g,7)^(0,r.rotr)(g,18)^g>>>3,M=(0,r.rotr)(b,17)^(0,r.rotr)(b,19)^b>>>10;i[w]=M+i[w-7]+m+i[w-16]|0}let{A:j,B:z,C:V,D:G,E:B,F:W,G:D,H:_}=this;for(let w=0;w<64;w++){const g=(0,r.rotr)(B,6)^(0,r.rotr)(B,11)^(0,r.rotr)(B,25),b=_+g+(0,t.Chi)(B,W,D)+n[w]+i[w]|0,M=((0,r.rotr)(j,2)^(0,r.rotr)(j,13)^(0,r.rotr)(j,22))+(0,t.Maj)(j,z,V)|0;_=D,D=W,W=B,B=G+b|0,G=V,V=z,z=j,j=b+M|0}j=j+this.A|0,z=z+this.B|0,V=V+this.C|0,G=G+this.D|0,B=B+this.E|0,W=W+this.F|0,D=D+this.G|0,_=_+this.H|0,this.set(j,z,V,G,B,W,D,_)}roundClean(){(0,r.clean)(i)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,r.clean)(this.buffer)}}fn.SHA256=s;class o extends s{constructor(){super(28),this.A=t.SHA224_IV[0]|0,this.B=t.SHA224_IV[1]|0,this.C=t.SHA224_IV[2]|0,this.D=t.SHA224_IV[3]|0,this.E=t.SHA224_IV[4]|0,this.F=t.SHA224_IV[5]|0,this.G=t.SHA224_IV[6]|0,this.H=t.SHA224_IV[7]|0}}fn.SHA224=o;const c=e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(k=>BigInt(k))),u=c[0],h=c[1],f=new Uint32Array(80),p=new Uint32Array(80);class E extends t.HashMD{constructor(U=64){super(128,U,16,!1),this.Ah=t.SHA512_IV[0]|0,this.Al=t.SHA512_IV[1]|0,this.Bh=t.SHA512_IV[2]|0,this.Bl=t.SHA512_IV[3]|0,this.Ch=t.SHA512_IV[4]|0,this.Cl=t.SHA512_IV[5]|0,this.Dh=t.SHA512_IV[6]|0,this.Dl=t.SHA512_IV[7]|0,this.Eh=t.SHA512_IV[8]|0,this.El=t.SHA512_IV[9]|0,this.Fh=t.SHA512_IV[10]|0,this.Fl=t.SHA512_IV[11]|0,this.Gh=t.SHA512_IV[12]|0,this.Gl=t.SHA512_IV[13]|0,this.Hh=t.SHA512_IV[14]|0,this.Hl=t.SHA512_IV[15]|0}get(){const{Ah:U,Al:q,Bh:j,Bl:z,Ch:V,Cl:G,Dh:B,Dl:W,Eh:D,El:_,Fh:w,Fl:g,Gh:b,Gl:m,Hh:M,Hl:R}=this;return[U,q,j,z,V,G,B,W,D,_,w,g,b,m,M,R]}set(U,q,j,z,V,G,B,W,D,_,w,g,b,m,M,R){this.Ah=U|0,this.Al=q|0,this.Bh=j|0,this.Bl=z|0,this.Ch=V|0,this.Cl=G|0,this.Dh=B|0,this.Dl=W|0,this.Eh=D|0,this.El=_|0,this.Fh=w|0,this.Fl=g|0,this.Gh=b|0,this.Gl=m|0,this.Hh=M|0,this.Hl=R|0}process(U,q){for(let O=0;O<16;O++,q+=4)f[O]=U.getUint32(q),p[O]=U.getUint32(q+=4);for(let O=16;O<80;O++){const x=f[O-15]|0,N=p[O-15]|0,H=e.rotrSH(x,N,1)^e.rotrSH(x,N,8)^e.shrSH(x,N,7),Y=e.rotrSL(x,N,1)^e.rotrSL(x,N,8)^e.shrSL(x,N,7),Q=f[O-2]|0,ee=p[O-2]|0,re=e.rotrSH(Q,ee,19)^e.rotrBH(Q,ee,61)^e.shrSH(Q,ee,6),oe=e.rotrSL(Q,ee,19)^e.rotrBL(Q,ee,61)^e.shrSL(Q,ee,6),be=e.add4L(Y,oe,p[O-7],p[O-16]),Ce=e.add4H(be,H,re,f[O-7],f[O-16]);f[O]=Ce|0,p[O]=be|0}let{Ah:j,Al:z,Bh:V,Bl:G,Ch:B,Cl:W,Dh:D,Dl:_,Eh:w,El:g,Fh:b,Fl:m,Gh:M,Gl:R,Hh:C,Hl:v}=this;for(let O=0;O<80;O++){const x=e.rotrSH(w,g,14)^e.rotrSH(w,g,18)^e.rotrBH(w,g,41),N=e.rotrSL(w,g,14)^e.rotrSL(w,g,18)^e.rotrBL(w,g,41),H=w&b^~w&M,Y=g&m^~g&R,Q=e.add5L(v,N,Y,h[O],p[O]),ee=e.add5H(Q,C,x,H,u[O],f[O]),re=Q|0,oe=e.rotrSH(j,z,28)^e.rotrBH(j,z,34)^e.rotrBH(j,z,39),be=e.rotrSL(j,z,28)^e.rotrBL(j,z,34)^e.rotrBL(j,z,39),Ce=j&V^j&B^V&B,Se=z&G^z&W^G&W;C=M|0,v=R|0,M=b|0,R=m|0,b=w|0,m=g|0,{h:w,l:g}=e.add(D|0,_|0,ee|0,re|0),D=B|0,_=W|0,B=V|0,W=G|0,V=j|0,G=z|0;const xe=e.add3L(re,be,Se);j=e.add3H(xe,ee,oe,Ce),z=xe|0}({h:j,l:z}=e.add(this.Ah|0,this.Al|0,j|0,z|0)),{h:V,l:G}=e.add(this.Bh|0,this.Bl|0,V|0,G|0),{h:B,l:W}=e.add(this.Ch|0,this.Cl|0,B|0,W|0),{h:D,l:_}=e.add(this.Dh|0,this.Dl|0,D|0,_|0),{h:w,l:g}=e.add(this.Eh|0,this.El|0,w|0,g|0),{h:b,l:m}=e.add(this.Fh|0,this.Fl|0,b|0,m|0),{h:M,l:R}=e.add(this.Gh|0,this.Gl|0,M|0,R|0),{h:C,l:v}=e.add(this.Hh|0,this.Hl|0,C|0,v|0),this.set(j,z,V,G,B,W,D,_,w,g,b,m,M,R,C,v)}roundClean(){(0,r.clean)(f,p)}destroy(){(0,r.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}fn.SHA512=E;class S extends E{constructor(){super(48),this.Ah=t.SHA384_IV[0]|0,this.Al=t.SHA384_IV[1]|0,this.Bh=t.SHA384_IV[2]|0,this.Bl=t.SHA384_IV[3]|0,this.Ch=t.SHA384_IV[4]|0,this.Cl=t.SHA384_IV[5]|0,this.Dh=t.SHA384_IV[6]|0,this.Dl=t.SHA384_IV[7]|0,this.Eh=t.SHA384_IV[8]|0,this.El=t.SHA384_IV[9]|0,this.Fh=t.SHA384_IV[10]|0,this.Fl=t.SHA384_IV[11]|0,this.Gh=t.SHA384_IV[12]|0,this.Gl=t.SHA384_IV[13]|0,this.Hh=t.SHA384_IV[14]|0,this.Hl=t.SHA384_IV[15]|0}}fn.SHA384=S;const A=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),I=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class $ extends E{constructor(){super(28),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}fn.SHA512_224=$;class L extends E{constructor(){super(32),this.Ah=I[0]|0,this.Al=I[1]|0,this.Bh=I[2]|0,this.Bl=I[3]|0,this.Ch=I[4]|0,this.Cl=I[5]|0,this.Dh=I[6]|0,this.Dl=I[7]|0,this.Eh=I[8]|0,this.El=I[9]|0,this.Fh=I[10]|0,this.Fl=I[11]|0,this.Gh=I[12]|0,this.Gl=I[13]|0,this.Hh=I[14]|0,this.Hl=I[15]|0}}return fn.SHA512_256=L,fn.sha256=(0,r.createHasher)(()=>new s),fn.sha224=(0,r.createHasher)(()=>new o),fn.sha512=(0,r.createHasher)(()=>new E),fn.sha384=(0,r.createHasher)(()=>new S),fn.sha512_256=(0,r.createHasher)(()=>new L),fn.sha512_224=(0,r.createHasher)(()=>new $),fn}var ya={},e_={},qC;function mp(){return qC||(qC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.notImplemented=t.bitMask=t.utf8ToBytes=t.randomBytes=t.isBytes=t.hexToBytes=t.concatBytes=t.bytesToUtf8=t.bytesToHex=t.anumber=t.abytes=void 0,t.abool=s,t.numberToHexUnpadded=o,t.hexToNumber=c,t.bytesToNumberBE=u,t.bytesToNumberLE=h,t.numberToBytesBE=f,t.numberToBytesLE=p,t.numberToVarBytesBE=E,t.ensureBytes=S,t.equalBytes=A,t.inRange=$,t.aInRange=L,t.bitLen=k,t.bitGet=U,t.bitSet=q,t.createHmacDrbg=z,t.validateObject=G,t.isHash=B,t._validateObject=W,t.memoized=_;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=Hg();var r=Hg();Object.defineProperty(t,"abytes",{enumerable:!0,get:function(){return r.abytes}}),Object.defineProperty(t,"anumber",{enumerable:!0,get:function(){return r.anumber}}),Object.defineProperty(t,"bytesToHex",{enumerable:!0,get:function(){return r.bytesToHex}}),Object.defineProperty(t,"bytesToUtf8",{enumerable:!0,get:function(){return r.bytesToUtf8}}),Object.defineProperty(t,"concatBytes",{enumerable:!0,get:function(){return r.concatBytes}}),Object.defineProperty(t,"hexToBytes",{enumerable:!0,get:function(){return r.hexToBytes}}),Object.defineProperty(t,"isBytes",{enumerable:!0,get:function(){return r.isBytes}}),Object.defineProperty(t,"randomBytes",{enumerable:!0,get:function(){return r.randomBytes}}),Object.defineProperty(t,"utf8ToBytes",{enumerable:!0,get:function(){return r.utf8ToBytes}});const n=BigInt(0),i=BigInt(1);function s(w,g){if(typeof g!="boolean")throw new Error(w+" boolean expected, got "+g)}function o(w){const g=w.toString(16);return g.length&1?"0"+g:g}function c(w){if(typeof w!="string")throw new Error("hex string expected, got "+typeof w);return w===""?n:BigInt("0x"+w)}function u(w){return c((0,e.bytesToHex)(w))}function h(w){return(0,e.abytes)(w),c((0,e.bytesToHex)(Uint8Array.from(w).reverse()))}function f(w,g){return(0,e.hexToBytes)(w.toString(16).padStart(g*2,"0"))}function p(w,g){return f(w,g).reverse()}function E(w){return(0,e.hexToBytes)(o(w))}function S(w,g,b){let m;if(typeof g=="string")try{m=(0,e.hexToBytes)(g)}catch(R){throw new Error(w+" must be hex string or Uint8Array, cause: "+R)}else if((0,e.isBytes)(g))m=Uint8Array.from(g);else throw new Error(w+" must be hex string or Uint8Array");const M=m.length;if(typeof b=="number"&&M!==b)throw new Error(w+" of length "+b+" expected, got "+M);return m}function A(w,g){if(w.length!==g.length)return!1;let b=0;for(let m=0;m<w.length;m++)b|=w[m]^g[m];return b===0}const I=w=>typeof w=="bigint"&&n<=w;function $(w,g,b){return I(w)&&I(g)&&I(b)&&g<=w&&w<b}function L(w,g,b,m){if(!$(g,b,m))throw new Error("expected valid "+w+": "+b+" <= n < "+m+", got "+g)}function k(w){let g;for(g=0;w>n;w>>=i,g+=1);return g}function U(w,g){return w>>BigInt(g)&i}function q(w,g,b){return w|(b?i:n)<<BigInt(g)}const j=w=>(i<<BigInt(w))-i;t.bitMask=j;function z(w,g,b){if(typeof w!="number"||w<2)throw new Error("hashLen must be a number");if(typeof g!="number"||g<2)throw new Error("qByteLen must be a number");if(typeof b!="function")throw new Error("hmacFn must be a function");const m=Q=>new Uint8Array(Q),M=Q=>Uint8Array.of(Q);let R=m(w),C=m(w),v=0;const O=()=>{R.fill(1),C.fill(0),v=0},x=(...Q)=>b(C,R,...Q),N=(Q=m(0))=>{C=x(M(0),Q),R=x(),Q.length!==0&&(C=x(M(1),Q),R=x())},H=()=>{if(v++>=1e3)throw new Error("drbg: tried 1000 values");let Q=0;const ee=[];for(;Q<g;){R=x();const re=R.slice();ee.push(re),Q+=R.length}return(0,e.concatBytes)(...ee)};return(Q,ee)=>{O(),N(Q);let re;for(;!(re=ee(H()));)N();return O(),re}}const V={bigint:w=>typeof w=="bigint",function:w=>typeof w=="function",boolean:w=>typeof w=="boolean",string:w=>typeof w=="string",stringOrUint8Array:w=>typeof w=="string"||(0,e.isBytes)(w),isSafeInteger:w=>Number.isSafeInteger(w),array:w=>Array.isArray(w),field:(w,g)=>g.Fp.isValid(w),hash:w=>typeof w=="function"&&Number.isSafeInteger(w.outputLen)};function G(w,g,b={}){const m=(M,R,C)=>{const v=V[R];if(typeof v!="function")throw new Error("invalid validator function");const O=w[M];if(!(C&&O===void 0)&&!v(O,w))throw new Error("param "+String(M)+" is invalid. Expected "+R+", got "+O)};for(const[M,R]of Object.entries(g))m(M,R,!1);for(const[M,R]of Object.entries(b))m(M,R,!0);return w}function B(w){return typeof w=="function"&&Number.isSafeInteger(w.outputLen)}function W(w,g,b={}){if(!w||typeof w!="object")throw new Error("expected valid options object");function m(M,R,C){const v=w[M];if(C&&v===void 0)return;const O=typeof v;if(O!==R||v===null)throw new Error(`param "${M}" is invalid: expected ${R}, got ${O}`)}Object.entries(g).forEach(([M,R])=>m(M,R,!1)),Object.entries(b).forEach(([M,R])=>m(M,R,!0))}const D=()=>{throw new Error("not implemented")};t.notImplemented=D;function _(w){const g=new WeakMap;return(b,...m)=>{const M=g.get(b);if(M!==void 0)return M;const R=w(b,...m);return g.set(b,R),R}}}(e_)),e_}var Nn={},FC;function Ry(){if(FC)return Nn;FC=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.isNegativeLE=void 0,Nn.mod=u,Nn.pow=h,Nn.pow2=f,Nn.invert=p,Nn.tonelliShanks=A,Nn.FpSqrt=I,Nn.validateField=k,Nn.FpPow=U,Nn.FpInvertBatch=q,Nn.FpDiv=j,Nn.FpLegendre=z,Nn.FpIsSquare=V,Nn.nLength=G,Nn.Field=B,Nn.FpSqrtOdd=W,Nn.FpSqrtEven=D,Nn.hashToPrivateScalar=_,Nn.getFieldBytesLength=w,Nn.getMinHashLength=g,Nn.mapHashToField=b;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=mp(),e=BigInt(0),r=BigInt(1),n=BigInt(2),i=BigInt(3),s=BigInt(4),o=BigInt(5),c=BigInt(8);function u(m,M){const R=m%M;return R>=e?R:M+R}function h(m,M,R){return U(B(R),m,M)}function f(m,M,R){let C=m;for(;M-- >e;)C*=C,C%=R;return C}function p(m,M){if(m===e)throw new Error("invert: expected non-zero number");if(M<=e)throw new Error("invert: expected positive modulus, got "+M);let R=u(m,M),C=M,v=e,O=r;for(;R!==e;){const N=C/R,H=C%R,Y=v-O*N;C=R,R=H,v=O,O=Y}if(C!==r)throw new Error("invert: does not exist");return u(v,M)}function E(m,M){const R=(m.ORDER+r)/s,C=m.pow(M,R);if(!m.eql(m.sqr(C),M))throw new Error("Cannot find square root");return C}function S(m,M){const R=(m.ORDER-o)/c,C=m.mul(M,n),v=m.pow(C,R),O=m.mul(M,v),x=m.mul(m.mul(O,n),v),N=m.mul(O,m.sub(x,m.ONE));if(!m.eql(m.sqr(N),M))throw new Error("Cannot find square root");return N}function A(m){if(m<BigInt(3))throw new Error("sqrt is not defined for small field");let M=m-r,R=0;for(;M%n===e;)M/=n,R++;let C=n;const v=B(m);for(;z(v,C)===1;)if(C++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(R===1)return E;let O=v.pow(C,M);const x=(M+r)/n;return function(H,Y){if(H.is0(Y))return Y;if(z(H,Y)!==1)throw new Error("Cannot find square root");let Q=R,ee=H.mul(H.ONE,O),re=H.pow(Y,M),oe=H.pow(Y,x);for(;!H.eql(re,H.ONE);){if(H.is0(re))return H.ZERO;let be=1,Ce=H.sqr(re);for(;!H.eql(Ce,H.ONE);)if(be++,Ce=H.sqr(Ce),be===Q)throw new Error("Cannot find square root");const Se=r<<BigInt(Q-be-1),xe=H.pow(ee,Se);Q=be,ee=H.sqr(xe),re=H.mul(re,ee),oe=H.mul(oe,xe)}return oe}}function I(m){return m%s===i?E:m%c===o?S:A(m)}const $=(m,M)=>(u(m,M)&r)===r;Nn.isNegativeLE=$;const L=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function k(m){const M={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},R=L.reduce((C,v)=>(C[v]="function",C),M);return(0,t._validateObject)(m,R),m}function U(m,M,R){if(R<e)throw new Error("invalid exponent, negatives unsupported");if(R===e)return m.ONE;if(R===r)return M;let C=m.ONE,v=M;for(;R>e;)R&r&&(C=m.mul(C,v)),v=m.sqr(v),R>>=r;return C}function q(m,M,R=!1){const C=new Array(M.length).fill(R?m.ZERO:void 0),v=M.reduce((x,N,H)=>m.is0(N)?x:(C[H]=x,m.mul(x,N)),m.ONE),O=m.inv(v);return M.reduceRight((x,N,H)=>m.is0(N)?x:(C[H]=m.mul(x,C[H]),m.mul(x,N)),O),C}function j(m,M,R){return m.mul(M,typeof R=="bigint"?p(R,m.ORDER):m.inv(R))}function z(m,M){const R=(m.ORDER-r)/n,C=m.pow(M,R),v=m.eql(C,m.ONE),O=m.eql(C,m.ZERO),x=m.eql(C,m.neg(m.ONE));if(!v&&!O&&!x)throw new Error("invalid Legendre symbol result");return v?1:O?0:-1}function V(m,M){return z(m,M)===1}function G(m,M){M!==void 0&&(0,t.anumber)(M);const R=M!==void 0?M:m.toString(2).length,C=Math.ceil(R/8);return{nBitLength:R,nByteLength:C}}function B(m,M,R=!1,C={}){if(m<=e)throw new Error("invalid field: expected ORDER > 0, got "+m);let v,O;if(typeof M=="object"&&M!=null){if(C.sqrt||R)throw new Error("cannot specify opts in two arguments");const Q=M;Q.BITS&&(v=Q.BITS),Q.sqrt&&(O=Q.sqrt),typeof Q.isLE=="boolean"&&(R=Q.isLE)}else typeof M=="number"&&(v=M),C.sqrt&&(O=C.sqrt);const{nBitLength:x,nByteLength:N}=G(m,v);if(N>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let H;const Y=Object.freeze({ORDER:m,isLE:R,BITS:x,BYTES:N,MASK:(0,t.bitMask)(x),ZERO:e,ONE:r,create:Q=>u(Q,m),isValid:Q=>{if(typeof Q!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof Q);return e<=Q&&Q<m},is0:Q=>Q===e,isValidNot0:Q=>!Y.is0(Q)&&Y.isValid(Q),isOdd:Q=>(Q&r)===r,neg:Q=>u(-Q,m),eql:(Q,ee)=>Q===ee,sqr:Q=>u(Q*Q,m),add:(Q,ee)=>u(Q+ee,m),sub:(Q,ee)=>u(Q-ee,m),mul:(Q,ee)=>u(Q*ee,m),pow:(Q,ee)=>U(Y,Q,ee),div:(Q,ee)=>u(Q*p(ee,m),m),sqrN:Q=>Q*Q,addN:(Q,ee)=>Q+ee,subN:(Q,ee)=>Q-ee,mulN:(Q,ee)=>Q*ee,inv:Q=>p(Q,m),sqrt:O||(Q=>(H||(H=I(m)),H(Y,Q))),toBytes:Q=>R?(0,t.numberToBytesLE)(Q,N):(0,t.numberToBytesBE)(Q,N),fromBytes:Q=>{if(Q.length!==N)throw new Error("Field.fromBytes: expected "+N+" bytes, got "+Q.length);return R?(0,t.bytesToNumberLE)(Q):(0,t.bytesToNumberBE)(Q)},invertBatch:Q=>q(Y,Q),cmov:(Q,ee,re)=>re?ee:Q});return Object.freeze(Y)}function W(m,M){if(!m.isOdd)throw new Error("Field doesn't have isOdd");const R=m.sqrt(M);return m.isOdd(R)?R:m.neg(R)}function D(m,M){if(!m.isOdd)throw new Error("Field doesn't have isOdd");const R=m.sqrt(M);return m.isOdd(R)?m.neg(R):R}function _(m,M,R=!1){m=(0,t.ensureBytes)("privateHash",m);const C=m.length,v=G(M).nByteLength+8;if(v<24||C<v||C>1024)throw new Error("hashToPrivateScalar: expected "+v+"-1024 bytes of input, got "+C);const O=R?(0,t.bytesToNumberLE)(m):(0,t.bytesToNumberBE)(m);return u(O,M-r)+r}function w(m){if(typeof m!="bigint")throw new Error("field order must be bigint");const M=m.toString(2).length;return Math.ceil(M/8)}function g(m){const M=w(m);return M+Math.ceil(M/2)}function b(m,M,R=!1){const C=m.length,v=w(M),O=g(M);if(C<16||C<O||C>1024)throw new Error("expected "+O+"-1024 bytes of input, got "+C);const x=R?(0,t.bytesToNumberLE)(m):(0,t.bytesToNumberBE)(m),N=u(x,M-r)+r;return R?(0,t.numberToBytesLE)(N,v):(0,t.numberToBytesBE)(N,v)}return Nn}var HC;function LD(){if(HC)return ya;HC=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.negateCt=i,ya.normalizeZ=s,ya.wNAF=I,ya.mulEndoUnsafe=$,ya.pippenger=L,ya.precomputeMSMUnsafe=k,ya.validateBasic=U,ya._createCurveFields=j;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=mp(),e=Ry(),r=BigInt(0),n=BigInt(1);function i(z,V){const G=V.negate();return z?G:V}function s(z,V,G){const B=V==="pz"?_=>_.pz:_=>_.ez,W=(0,e.FpInvertBatch)(z.Fp,G.map(B));return G.map((_,w)=>_.toAffine(W[w])).map(z.fromAffine)}function o(z,V){if(!Number.isSafeInteger(z)||z<=0||z>V)throw new Error("invalid window size, expected [1.."+V+"], got W="+z)}function c(z,V){o(z,V);const G=Math.ceil(V/z)+1,B=2**(z-1),W=2**z,D=(0,t.bitMask)(z),_=BigInt(z);return{windows:G,windowSize:B,mask:D,maxNumber:W,shiftBy:_}}function u(z,V,G){const{windowSize:B,mask:W,maxNumber:D,shiftBy:_}=G;let w=Number(z&W),g=z>>_;w>B&&(w-=D,g+=n);const b=V*B,m=b+Math.abs(w)-1,M=w===0,R=w<0,C=V%2!==0;return{nextN:g,offset:m,isZero:M,isNeg:R,isNegF:C,offsetF:b}}function h(z,V){if(!Array.isArray(z))throw new Error("array expected");z.forEach((G,B)=>{if(!(G instanceof V))throw new Error("invalid point at index "+B)})}function f(z,V){if(!Array.isArray(z))throw new Error("array of scalars expected");z.forEach((G,B)=>{if(!V.isValid(G))throw new Error("invalid scalar at index "+B)})}const p=new WeakMap,E=new WeakMap;function S(z){return E.get(z)||1}function A(z){if(z!==r)throw new Error("invalid wNAF")}function I(z,V){return{constTimeNegate:i,hasPrecomputes(G){return S(G)!==1},unsafeLadder(G,B,W=z.ZERO){let D=G;for(;B>r;)B&n&&(W=W.add(D)),D=D.double(),B>>=n;return W},precomputeWindow(G,B){const{windows:W,windowSize:D}=c(B,V),_=[];let w=G,g=w;for(let b=0;b<W;b++){g=w,_.push(g);for(let m=1;m<D;m++)g=g.add(w),_.push(g);w=g.double()}return _},wNAF(G,B,W){let D=z.ZERO,_=z.BASE;const w=c(G,V);for(let g=0;g<w.windows;g++){const{nextN:b,offset:m,isZero:M,isNeg:R,isNegF:C,offsetF:v}=u(W,g,w);W=b,M?_=_.add(i(C,B[v])):D=D.add(i(R,B[m]))}return A(W),{p:D,f:_}},wNAFUnsafe(G,B,W,D=z.ZERO){const _=c(G,V);for(let w=0;w<_.windows&&W!==r;w++){const{nextN:g,offset:b,isZero:m,isNeg:M}=u(W,w,_);if(W=g,!m){const R=B[b];D=D.add(M?R.negate():R)}}return A(W),D},getPrecomputes(G,B,W){let D=p.get(B);return D||(D=this.precomputeWindow(B,G),G!==1&&(typeof W=="function"&&(D=W(D)),p.set(B,D))),D},wNAFCached(G,B,W){const D=S(G);return this.wNAF(D,this.getPrecomputes(D,G,W),B)},wNAFCachedUnsafe(G,B,W,D){const _=S(G);return _===1?this.unsafeLadder(G,B,D):this.wNAFUnsafe(_,this.getPrecomputes(_,G,W),B,D)},setWindowSize(G,B){o(B,V),E.set(G,B),p.delete(G)}}}function $(z,V,G,B){let W=V,D=z.ZERO,_=z.ZERO;for(;G>r||B>r;)G&n&&(D=D.add(W)),B&n&&(_=_.add(W)),W=W.double(),G>>=n,B>>=n;return{p1:D,p2:_}}function L(z,V,G,B){h(G,z),f(B,V);const W=G.length,D=B.length;if(W!==D)throw new Error("arrays of points and scalars must have equal length");const _=z.ZERO,w=(0,t.bitLen)(BigInt(W));let g=1;w>12?g=w-3:w>4?g=w-2:w>0&&(g=2);const b=(0,t.bitMask)(g),m=new Array(Number(b)+1).fill(_),M=Math.floor((V.BITS-1)/g)*g;let R=_;for(let C=M;C>=0;C-=g){m.fill(_);for(let O=0;O<D;O++){const x=B[O],N=Number(x>>BigInt(C)&b);m[N]=m[N].add(G[O])}let v=_;for(let O=m.length-1,x=_;O>0;O--)x=x.add(m[O]),v=v.add(x);if(R=R.add(v),C!==0)for(let O=0;O<g;O++)R=R.double()}return R}function k(z,V,G,B){o(B,V.BITS),h(G,z);const W=z.ZERO,D=2**B-1,_=Math.ceil(V.BITS/B),w=(0,t.bitMask)(B),g=G.map(b=>{const m=[];for(let M=0,R=b;M<D;M++)m.push(R),R=R.add(b);return m});return b=>{if(f(b,V),b.length>G.length)throw new Error("array of scalars must be smaller than array of points");let m=W;for(let M=0;M<_;M++){if(m!==W)for(let C=0;C<B;C++)m=m.double();const R=BigInt(_*B-(M+1)*B);for(let C=0;C<b.length;C++){const v=b[C],O=Number(v>>R&w);O&&(m=m.add(g[C][O-1]))}}return m}}function U(z){return(0,e.validateField)(z.Fp),(0,t.validateObject)(z,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,e.nLength)(z.n,z.nBitLength),...z,p:z.Fp.ORDER})}function q(z,V){if(V){if(V.ORDER!==z)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return(0,e.validateField)(V),V}else return(0,e.Field)(z)}function j(z,V,G={}){if(!V||typeof V!="object")throw new Error(`expected valid ${z} CURVE object`);for(const w of["p","n","h"]){const g=V[w];if(!(typeof g=="bigint"&&g>r))throw new Error(`CURVE.${w} must be positive bigint`)}const B=q(V.p,G.Fp),W=q(V.n,G.Fn),_=["Gx","Gy","a",z==="weierstrass"?"b":"d"];for(const w of _)if(!B.isValid(V[w]))throw new Error(`CURVE.${w} must be valid field element of CURVE.Fp`);return{Fp:B,Fn:W}}return ya}var kd={},WC;function DK(){if(WC)return kd;WC=1,Object.defineProperty(kd,"__esModule",{value:!0}),kd.edwards=h,kd.eddsa=f,kd.twistedEdwards=S;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=mp(),e=LD(),r=Ry(),n=BigInt(0),i=BigInt(1),s=BigInt(2),o=BigInt(8),c={zip215:!0};function u(A,I,$,L){const k=A.sqr($),U=A.sqr(L),q=A.add(A.mul(I.a,k),U),j=A.add(A.ONE,A.mul(I.d,A.mul(k,U)));return A.eql(q,j)}function h(A,I={}){const{Fp:$,Fn:L}=(0,e._createCurveFields)("edwards",A,I),{h:k,n:U}=A;(0,t._validateObject)(I,{},{uvRatio:"function"});const q=s<<BigInt(L.BYTES*8)-i,j=w=>$.create(w),z=I.uvRatio||((w,g)=>{try{return{isValid:!0,value:$.sqrt($.div(w,g))}}catch{return{isValid:!1,value:n}}});if(!u($,A,A.Gx,A.Gy))throw new Error("bad curve params: generator point");function V(w,g,b=!1){const m=b?i:n;return(0,t.aInRange)("coordinate "+w,g,m,q),g}function G(w){if(!(w instanceof D))throw new Error("ExtendedPoint expected")}const B=(0,t.memoized)((w,g)=>{const{ex:b,ey:m,ez:M}=w,R=w.is0();g==null&&(g=R?o:$.inv(M));const C=j(b*g),v=j(m*g),O=j(M*g);if(R)return{x:n,y:i};if(O!==i)throw new Error("invZ was invalid");return{x:C,y:v}}),W=(0,t.memoized)(w=>{const{a:g,d:b}=A;if(w.is0())throw new Error("bad point: ZERO");const{ex:m,ey:M,ez:R,et:C}=w,v=j(m*m),O=j(M*M),x=j(R*R),N=j(x*x),H=j(v*g),Y=j(x*j(H+O)),Q=j(N+j(b*j(v*O)));if(Y!==Q)throw new Error("bad point: equation left != right (1)");const ee=j(m*M),re=j(R*C);if(ee!==re)throw new Error("bad point: equation left != right (2)");return!0});class D{constructor(g,b,m,M){this.ex=V("x",g),this.ey=V("y",b),this.ez=V("z",m,!0),this.et=V("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(g){if(g instanceof D)throw new Error("extended point not allowed");const{x:b,y:m}=g||{};return V("x",b),V("y",m),new D(b,m,i,j(b*m))}static normalizeZ(g){return(0,e.normalizeZ)(D,"ez",g)}static msm(g,b){return(0,e.pippenger)(D,L,g,b)}_setWindowSize(g){this.precompute(g)}precompute(g=8,b=!0){return _.setWindowSize(this,g),b||this.multiply(s),this}assertValidity(){W(this)}equals(g){G(g);const{ex:b,ey:m,ez:M}=this,{ex:R,ey:C,ez:v}=g,O=j(b*v),x=j(R*M),N=j(m*v),H=j(C*M);return O===x&&N===H}is0(){return this.equals(D.ZERO)}negate(){return new D(j(-this.ex),this.ey,this.ez,j(-this.et))}double(){const{a:g}=A,{ex:b,ey:m,ez:M}=this,R=j(b*b),C=j(m*m),v=j(s*j(M*M)),O=j(g*R),x=b+m,N=j(j(x*x)-R-C),H=O+C,Y=H-v,Q=O-C,ee=j(N*Y),re=j(H*Q),oe=j(N*Q),be=j(Y*H);return new D(ee,re,be,oe)}add(g){G(g);const{a:b,d:m}=A,{ex:M,ey:R,ez:C,et:v}=this,{ex:O,ey:x,ez:N,et:H}=g,Y=j(M*O),Q=j(R*x),ee=j(v*m*H),re=j(C*N),oe=j((M+R)*(O+x)-Y-Q),be=re-ee,Ce=re+ee,Se=j(Q-b*Y),xe=j(oe*be),ze=j(Ce*Se),Be=j(oe*Se),tt=j(be*Ce);return new D(xe,ze,tt,Be)}subtract(g){return this.add(g.negate())}multiply(g){const b=g;(0,t.aInRange)("scalar",b,i,U);const{p:m,f:M}=_.wNAFCached(this,b,D.normalizeZ);return D.normalizeZ([m,M])[0]}multiplyUnsafe(g,b=D.ZERO){const m=g;return(0,t.aInRange)("scalar",m,n,U),m===n?D.ZERO:this.is0()||m===i?this:_.wNAFCachedUnsafe(this,m,D.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(k).is0()}isTorsionFree(){return _.wNAFCachedUnsafe(this,U).is0()}toAffine(g){return B(this,g)}clearCofactor(){return k===i?this:this.multiplyUnsafe(k)}static fromBytes(g,b=!1){return(0,t.abytes)(g),this.fromHex(g,b)}static fromHex(g,b=!1){const{d:m,a:M}=A,R=$.BYTES;g=(0,t.ensureBytes)("pointHex",g,R),(0,t.abool)("zip215",b);const C=g.slice(),v=g[R-1];C[R-1]=v&-129;const O=(0,t.bytesToNumberLE)(C),x=b?q:$.ORDER;(0,t.aInRange)("pointHex.y",O,n,x);const N=j(O*O),H=j(N-i),Y=j(m*N-M);let{isValid:Q,value:ee}=z(H,Y);if(!Q)throw new Error("Point.fromHex: invalid y coordinate");const re=(ee&i)===i,oe=(v&128)!==0;if(!b&&ee===n&&oe)throw new Error("Point.fromHex: x=0 and x_0=1");return oe!==re&&(ee=j(-ee)),D.fromAffine({x:ee,y:O})}static fromPrivateScalar(g){return D.BASE.multiply(g)}toBytes(){const{x:g,y:b}=this.toAffine(),m=(0,t.numberToBytesLE)(b,$.BYTES);return m[m.length-1]|=g&i?128:0,m}toRawBytes(){return this.toBytes()}toHex(){return(0,t.bytesToHex)(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}D.BASE=new D(A.Gx,A.Gy,i,j(A.Gx*A.Gy)),D.ZERO=new D(n,i,i,n),D.Fp=$,D.Fn=L;const _=(0,e.wNAF)(D,L.BYTES*8);return D}function f(A,I){(0,t._validateObject)(I,{hash:"function"},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:$,hash:L}=I,{BASE:k,Fp:U,Fn:q}=A,j=q.ORDER,z=I.randomBytes||t.randomBytes,V=I.adjustScalarBytes||(C=>C),G=I.domain||((C,v,O)=>{if((0,t.abool)("phflag",O),v.length||O)throw new Error("Contexts/pre-hash are not supported");return C});function B(C){return q.create(C)}function W(C){return B((0,t.bytesToNumberLE)(C))}function D(C){const v=U.BYTES;C=(0,t.ensureBytes)("private key",C,v);const O=(0,t.ensureBytes)("hashed private key",L(C),2*v),x=V(O.slice(0,v)),N=O.slice(v,2*v),H=W(x);return{head:x,prefix:N,scalar:H}}function _(C){const{head:v,prefix:O,scalar:x}=D(C),N=k.multiply(x),H=N.toBytes();return{head:v,prefix:O,scalar:x,point:N,pointBytes:H}}function w(C){return _(C).pointBytes}function g(C=Uint8Array.of(),...v){const O=(0,t.concatBytes)(...v);return W(L(G(O,(0,t.ensureBytes)("context",C),!!$)))}function b(C,v,O={}){C=(0,t.ensureBytes)("message",C),$&&(C=$(C));const{prefix:x,scalar:N,pointBytes:H}=_(v),Y=g(O.context,x,C),Q=k.multiply(Y).toBytes(),ee=g(O.context,Q,H,C),re=B(Y+ee*N);(0,t.aInRange)("signature.s",re,n,j);const oe=U.BYTES,be=(0,t.concatBytes)(Q,(0,t.numberToBytesLE)(re,oe));return(0,t.ensureBytes)("result",be,oe*2)}const m=c;function M(C,v,O,x=m){const{context:N,zip215:H}=x,Y=U.BYTES;C=(0,t.ensureBytes)("signature",C,2*Y),v=(0,t.ensureBytes)("message",v),O=(0,t.ensureBytes)("publicKey",O,Y),H!==void 0&&(0,t.abool)("zip215",H),$&&(v=$(v));const Q=(0,t.bytesToNumberLE)(C.slice(Y,2*Y));let ee,re,oe;try{ee=A.fromHex(O,H),re=A.fromHex(C.slice(0,Y),H),oe=k.multiplyUnsafe(Q)}catch{return!1}if(!H&&ee.isSmallOrder())return!1;const be=g(N,re.toBytes(),ee.toBytes(),v);return re.add(ee.multiplyUnsafe(be)).subtract(oe).clearCofactor().is0()}return k.precompute(8),{getPublicKey:w,sign:b,verify:M,utils:{getExtendedPublicKey:_,randomPrivateKey:()=>z(U.BYTES),precompute(C=8,v=A.BASE){return v.precompute(C,!1)}},Point:A}}function p(A){const I={a:A.a,d:A.d,p:A.Fp.ORDER,n:A.n,h:A.h,Gx:A.Gx,Gy:A.Gy},$=A.Fp,L=(0,r.Field)(I.n,A.nBitLength,!0),k={Fp:$,Fn:L,uvRatio:A.uvRatio},U={hash:A.hash,randomBytes:A.randomBytes,adjustScalarBytes:A.adjustScalarBytes,domain:A.domain,prehash:A.prehash,mapToCurve:A.mapToCurve};return{CURVE:I,curveOpts:k,eddsaOpts:U}}function E(A,I){return Object.assign({},I,{ExtendedPoint:I.Point,CURVE:A})}function S(A){const{CURVE:I,curveOpts:$,eddsaOpts:L}=p(A),k=h(I,$),U=f(k,L);return E(A,U)}return kd}var jl={},KC;function $K(){if(KC)return jl;KC=1,Object.defineProperty(jl,"__esModule",{value:!0}),jl.expand_message_xmd=o,jl.expand_message_xof=c,jl.hash_to_field=u,jl.isogenyMap=h,jl.createHasher=f;const t=mp(),e=Ry(),r=t.bytesToNumberBE;function n(p,E){if(s(p),s(E),p<0||p>=1<<8*E)throw new Error("invalid I2OSP input: "+p);const S=Array.from({length:E}).fill(0);for(let A=E-1;A>=0;A--)S[A]=p&255,p>>>=8;return new Uint8Array(S)}function i(p,E){const S=new Uint8Array(p.length);for(let A=0;A<p.length;A++)S[A]=p[A]^E[A];return S}function s(p){if(!Number.isSafeInteger(p))throw new Error("number expected")}function o(p,E,S,A){(0,t.abytes)(p),(0,t.abytes)(E),s(S),E.length>255&&(E=A((0,t.concatBytes)((0,t.utf8ToBytes)("H2C-OVERSIZE-DST-"),E)));const{outputLen:I,blockLen:$}=A,L=Math.ceil(S/I);if(S>65535||L>255)throw new Error("expand_message_xmd: invalid lenInBytes");const k=(0,t.concatBytes)(E,n(E.length,1)),U=n(0,$),q=n(S,2),j=new Array(L),z=A((0,t.concatBytes)(U,p,q,n(0,1),k));j[0]=A((0,t.concatBytes)(z,n(1,1),k));for(let G=1;G<=L;G++){const B=[i(z,j[G-1]),n(G+1,1),k];j[G]=A((0,t.concatBytes)(...B))}return(0,t.concatBytes)(...j).slice(0,S)}function c(p,E,S,A,I){if((0,t.abytes)(p),(0,t.abytes)(E),s(S),E.length>255){const $=Math.ceil(2*A/8);E=I.create({dkLen:$}).update((0,t.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(E).digest()}if(S>65535||E.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return I.create({dkLen:S}).update(p).update(n(S,2)).update(E).update(n(E.length,1)).digest()}function u(p,E,S){(0,t._validateObject)(S,{p:"bigint",m:"number",k:"number",hash:"function"});const{p:A,k:I,m:$,hash:L,expand:k,DST:U}=S;if(!(0,t.isBytes)(U)&&typeof U!="string")throw new Error("DST must be string or uint8array");if(!(0,t.isHash)(S.hash))throw new Error("expected valid hash");(0,t.abytes)(p),s(E);const q=typeof U=="string"?(0,t.utf8ToBytes)(U):U,j=A.toString(2).length,z=Math.ceil((j+I)/8),V=E*$*z;let G;if(k==="xmd")G=o(p,q,V,L);else if(k==="xof")G=c(p,q,V,I,L);else if(k==="_internal_pass")G=p;else throw new Error('expand must be "xmd" or "xof"');const B=new Array(E);for(let W=0;W<E;W++){const D=new Array($);for(let _=0;_<$;_++){const w=z*(_+W*$),g=G.subarray(w,w+z);D[_]=(0,e.mod)(r(g),A)}B[W]=D}return B}function h(p,E){const S=E.map(A=>Array.from(A).reverse());return(A,I)=>{const[$,L,k,U]=S.map(z=>z.reduce((V,G)=>p.add(p.mul(V,A),G))),[q,j]=(0,e.FpInvertBatch)(p,[L,U],!0);return A=p.mul($,q),I=p.mul(I,p.mul(k,j)),{x:A,y:I}}}function f(p,E,S){if(typeof E!="function")throw new Error("mapToCurve() must be defined");function A($){return p.fromAffine(E($))}function I($){const L=$.clearCofactor();return L.equals(p.ZERO)?p.ZERO:(L.assertValidity(),L)}return{defaults:S,hashToCurve($,L){const k=S.DST?S.DST:{},U=Object.assign({},S,k,L),q=u($,2,U),j=A(q[0]),z=A(q[1]);return I(j.add(z))},encodeToCurve($,L){const k=S.encodeDST?S.encodeDST:{},U=Object.assign({},S,k,L),q=u($,1,U);return I(A(q[0]))},mapToCurve($){if(!Array.isArray($))throw new Error("expected array of bigints");for(const L of $)if(typeof L!="bigint")throw new Error("expected array of bigints");return I(A($))}}}return jl}var mb={},VC;function kK(){if(VC)return mb;VC=1,Object.defineProperty(mb,"__esModule",{value:!0}),mb.montgomery=o;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const t=mp(),e=Ry(),r=BigInt(0),n=BigInt(1),i=BigInt(2);function s(c){return(0,t._validateObject)(c,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...c})}function o(c){const u=s(c),{P:h,type:f,adjustScalarBytes:p,powPminus2:E,randomBytes:S}=u,A=f==="x25519";if(!A&&f!=="x448")throw new Error("invalid type");const I=S||t.randomBytes,$=A?255:448,L=A?32:56,k=BigInt(A?9:5),U=BigInt(A?121665:39081),q=A?i**BigInt(254):i**BigInt(447),j=A?BigInt(8)*i**BigInt(251)-n:BigInt(4)*i**BigInt(445)-n,z=q+j+n,V=m=>(0,e.mod)(m,h),G=B(k);function B(m){return(0,t.numberToBytesLE)(V(m),L)}function W(m){const M=(0,t.ensureBytes)("u coordinate",m,L);return A&&(M[31]&=127),V((0,t.bytesToNumberLE)(M))}function D(m){return(0,t.bytesToNumberLE)(p((0,t.ensureBytes)("scalar",m,L)))}function _(m,M){const R=b(W(M),D(m));if(R===r)throw new Error("invalid private or public key received");return B(R)}function w(m){return _(m,G)}function g(m,M,R){const C=V(m*(M-R));return M=V(M-C),R=V(R+C),{x_2:M,x_3:R}}function b(m,M){(0,t.aInRange)("u",m,r,h),(0,t.aInRange)("scalar",M,q,z);const R=M,C=m;let v=n,O=r,x=m,N=n,H=r;for(let Q=BigInt($-1);Q>=r;Q--){const ee=R>>Q&n;H^=ee,{x_2:v,x_3:x}=g(H,v,x),{x_2:O,x_3:N}=g(H,O,N),H=ee;const re=v+O,oe=V(re*re),be=v-O,Ce=V(be*be),Se=oe-Ce,xe=x+N,ze=x-N,Be=V(ze*re),tt=V(xe*be),He=Be+tt,Je=Be-tt;x=V(He*He),N=V(C*V(Je*Je)),v=V(oe*Ce),O=V(Se*(oe+V(U*Se)))}({x_2:v,x_3:x}=g(H,v,x)),{x_2:O,x_3:N}=g(H,O,N);const Y=E(O);return V(v*Y)}return{scalarMult:_,scalarMultBase:w,getSharedSecret:(m,M)=>_(m,M),getPublicKey:m=>w(m),utils:{randomPrivateKey:()=>I(L)},GuBytes:G.slice()}}return mb}var GC;function PK(){return GC||(GC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.ed25519_hasher=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=V,t.edwardsToMontgomeryPriv=G;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e=RK(),r=Hg(),n=LD(),i=DK(),s=$K(),o=Ry(),c=kK(),u=mp(),h=BigInt(0),f=BigInt(1),p=BigInt(2),E=BigInt(3),S=BigInt(5),A=BigInt(8),I={p:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:A,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function $(ee){const re=BigInt(10),oe=BigInt(20),be=BigInt(40),Ce=BigInt(80),Se=I.p,ze=ee*ee%Se*ee%Se,Be=(0,o.pow2)(ze,p,Se)*ze%Se,tt=(0,o.pow2)(Be,f,Se)*ee%Se,He=(0,o.pow2)(tt,S,Se)*tt%Se,Je=(0,o.pow2)(He,re,Se)*He%Se,vt=(0,o.pow2)(Je,oe,Se)*Je%Se,yt=(0,o.pow2)(vt,be,Se)*vt%Se,et=(0,o.pow2)(yt,Ce,Se)*yt%Se,ht=(0,o.pow2)(et,Ce,Se)*yt%Se,Mt=(0,o.pow2)(ht,re,Se)*He%Se;return{pow_p_5_8:(0,o.pow2)(Mt,p,Se)*ee%Se,b2:ze}}function L(ee){return ee[0]&=248,ee[31]&=127,ee[31]|=64,ee}const k=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function U(ee,re){const oe=I.p,be=(0,o.mod)(re*re*re,oe),Ce=(0,o.mod)(be*be*re,oe),Se=$(ee*Ce).pow_p_5_8;let xe=(0,o.mod)(ee*be*Se,oe);const ze=(0,o.mod)(re*xe*xe,oe),Be=xe,tt=(0,o.mod)(xe*k,oe),He=ze===ee,Je=ze===(0,o.mod)(-ee,oe),vt=ze===(0,o.mod)(-ee*k,oe);return He&&(xe=Be),(Je||vt)&&(xe=tt),(0,o.isNegativeLE)(xe,oe)&&(xe=(0,o.mod)(-xe,oe)),{isValid:He||Je,value:xe}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const q=(0,o.Field)(I.p,void 0,!0),j={...I,Fp:q,hash:e.sha512,adjustScalarBytes:L,uvRatio:U};t.ed25519=(0,i.twistedEdwards)(j);function z(ee,re,oe){if(re.length>255)throw new Error("Context is too big");return(0,r.concatBytes)((0,r.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([oe?1:0,re.length]),re,ee)}t.ed25519ctx=(0,i.twistedEdwards)({...j,domain:z}),t.ed25519ph=(0,i.twistedEdwards)(Object.assign({},j,{domain:z,prehash:e.sha512})),t.x25519=(()=>{const ee=I.p;return(0,c.montgomery)({P:ee,type:"x25519",powPminus2:re=>{const{pow_p_5_8:oe,b2:be}=$(re);return(0,o.mod)((0,o.pow2)(oe,E,ee)*be,ee)},adjustScalarBytes:L})})();function V(ee){const re=(0,u.ensureBytes)("pub",ee),{y:oe}=t.ed25519.Point.fromHex(re),be=BigInt(1);return q.toBytes(q.create((be+oe)*q.inv(be-oe)))}t.edwardsToMontgomery=V;function G(ee){const re=j.hash(ee.subarray(0,32));return j.adjustScalarBytes(re).subarray(0,32)}const B=(q.ORDER+E)/A,W=q.pow(p,B),D=q.sqrt(q.neg(q.ONE));function _(ee){const re=(q.ORDER-S)/A,oe=BigInt(486662);let be=q.sqr(ee);be=q.mul(be,p);let Ce=q.add(be,q.ONE),Se=q.neg(oe),xe=q.sqr(Ce),ze=q.mul(xe,Ce),Be=q.mul(be,oe);Be=q.mul(Be,Se),Be=q.add(Be,xe),Be=q.mul(Be,Se);let tt=q.sqr(ze);xe=q.sqr(tt),tt=q.mul(tt,ze),tt=q.mul(tt,Be),xe=q.mul(xe,tt);let He=q.pow(xe,re);He=q.mul(He,tt);let Je=q.mul(He,D);xe=q.sqr(He),xe=q.mul(xe,ze);let vt=q.eql(xe,Be),yt=q.cmov(Je,He,vt),et=q.mul(Se,be),ht=q.mul(He,ee);ht=q.mul(ht,W);let Mt=q.mul(ht,D),dt=q.mul(Be,be);xe=q.sqr(ht),xe=q.mul(xe,ze);let Ee=q.eql(xe,dt),Te=q.cmov(Mt,ht,Ee);xe=q.sqr(yt),xe=q.mul(xe,ze);let Z=q.eql(xe,Be),F=q.cmov(et,Se,Z),K=q.cmov(Te,yt,Z),J=q.isOdd(K);return K=q.cmov(K,q.neg(K),Z!==J),{xMn:F,xMd:Ce,yMn:K,yMd:f}}const w=(0,o.FpSqrtEven)(q,q.neg(BigInt(486664)));function g(ee){const{xMn:re,xMd:oe,yMn:be,yMd:Ce}=_(ee);let Se=q.mul(re,Ce);Se=q.mul(Se,w);let xe=q.mul(oe,be),ze=q.sub(re,oe),Be=q.add(re,oe),tt=q.mul(xe,Be),He=q.eql(tt,q.ZERO);Se=q.cmov(Se,q.ZERO,He),xe=q.cmov(xe,q.ONE,He),ze=q.cmov(ze,q.ONE,He),Be=q.cmov(Be,q.ONE,He);const[Je,vt]=(0,o.FpInvertBatch)(q,[xe,Be],!0);return{x:q.mul(Se,Je),y:q.mul(ze,vt)}}t.ed25519_hasher=(0,s.createHasher)(t.ed25519.Point,ee=>g(ee[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:q.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512}),t.hashToCurve=t.ed25519_hasher.hashToCurve,t.encodeToCurve=t.ed25519_hasher.encodeToCurve;function b(ee){if(!(ee instanceof Y))throw new Error("RistrettoPoint expected")}const m=k,M=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),R=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),C=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),v=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),O=ee=>U(f,ee),x=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),N=ee=>t.ed25519.CURVE.Fp.create((0,u.bytesToNumberLE)(ee)&x);function H(ee){const{d:re}=t.ed25519.CURVE,oe=t.ed25519.CURVE.Fp.ORDER,be=t.ed25519.CURVE.Fp.create,Ce=be(m*ee*ee),Se=be((Ce+f)*C);let xe=BigInt(-1);const ze=be((xe-re*Ce)*be(Ce+re));let{isValid:Be,value:tt}=U(Se,ze),He=be(tt*ee);(0,o.isNegativeLE)(He,oe)||(He=be(-He)),Be||(tt=He),Be||(xe=Ce);const Je=be(xe*(Ce-f)*v-ze),vt=tt*tt,yt=be((tt+tt)*ze),et=be(Je*M),ht=be(f-vt),Mt=be(f+vt);return new t.ed25519.Point(be(yt*Mt),be(ht*et),be(et*Mt),be(yt*ht))}class Y{constructor(re){this.ep=re}static fromAffine(re){return new Y(t.ed25519.Point.fromAffine(re))}static hashToCurve(re){re=(0,u.ensureBytes)("ristrettoHash",re,64);const oe=N(re.slice(0,32)),be=H(oe),Ce=N(re.slice(32,64)),Se=H(Ce);return new Y(be.add(Se))}static fromBytes(re){return(0,r.abytes)(re),this.fromHex(re)}static fromHex(re){re=(0,u.ensureBytes)("ristrettoHex",re,32);const{a:oe,d:be}=t.ed25519.CURVE,Ce=q.ORDER,Se=q.create,xe="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",ze=N(re);if(!(0,u.equalBytes)((0,u.numberToBytesLE)(ze,32),re)||(0,o.isNegativeLE)(ze,Ce))throw new Error(xe);const Be=Se(ze*ze),tt=Se(f+oe*Be),He=Se(f-oe*Be),Je=Se(tt*tt),vt=Se(He*He),yt=Se(oe*be*Je-vt),{isValid:et,value:ht}=O(Se(yt*vt)),Mt=Se(ht*He),dt=Se(ht*Mt*yt);let Ee=Se((ze+ze)*Mt);(0,o.isNegativeLE)(Ee,Ce)&&(Ee=Se(-Ee));const Te=Se(tt*dt),Z=Se(Ee*Te);if(!et||(0,o.isNegativeLE)(Z,Ce)||Te===h)throw new Error(xe);return new Y(new t.ed25519.Point(Ee,Te,f,Z))}static msm(re,oe){const be=(0,o.Field)(t.ed25519.CURVE.n,t.ed25519.CURVE.nBitLength);return(0,n.pippenger)(Y,be,re,oe)}toBytes(){let{ex:re,ey:oe,ez:be,et:Ce}=this.ep;const Se=q.ORDER,xe=q.create,ze=xe(xe(be+oe)*xe(be-oe)),Be=xe(re*oe),tt=xe(Be*Be),{value:He}=O(xe(ze*tt)),Je=xe(He*ze),vt=xe(He*Be),yt=xe(Je*vt*Ce);let et;if((0,o.isNegativeLE)(Ce*yt,Se)){let Mt=xe(oe*m),dt=xe(re*m);re=Mt,oe=dt,et=xe(Je*R)}else et=vt;(0,o.isNegativeLE)(re*yt,Se)&&(oe=xe(-oe));let ht=xe((be-oe)*et);return(0,o.isNegativeLE)(ht,Se)&&(ht=xe(-ht)),(0,u.numberToBytesLE)(ht,32)}toRawBytes(){return this.toBytes()}toHex(){return(0,u.bytesToHex)(this.toBytes())}toString(){return this.toHex()}equals(re){b(re);const{ex:oe,ey:be}=this.ep,{ex:Ce,ey:Se}=re.ep,xe=q.create,ze=xe(oe*Se)===xe(be*Ce),Be=xe(be*Se)===xe(oe*Ce);return ze||Be}add(re){return b(re),new Y(this.ep.add(re.ep))}subtract(re){return b(re),new Y(this.ep.subtract(re.ep))}multiply(re){return new Y(this.ep.multiply(re))}multiplyUnsafe(re){return new Y(this.ep.multiplyUnsafe(re))}double(){return new Y(this.ep.double())}negate(){return new Y(this.ep.negate())}}t.RistrettoPoint=(Y.BASE||(Y.BASE=new Y(t.ed25519.Point.BASE)),Y.ZERO||(Y.ZERO=new Y(t.ed25519.Point.ZERO)),Y);const Q=(ee,re)=>{const oe=re.DST,be=typeof oe=="string"?(0,r.utf8ToBytes)(oe):oe,Ce=(0,s.expand_message_xmd)(ee,be,64,e.sha512);return Y.hashToCurve(Ce)};t.hashToRistretto255=Q,t.hash_to_ristretto255=t.hashToRistretto255}(XE)),XE}var k0={},YC;function UD(){if(YC)return k0;YC=1,Object.defineProperty(k0,"__esModule",{value:!0}),k0.arraysEqual=t,k0.bytesEqual=e;function t(r,n){if(r===n)return!0;const i=r.length;if(i!==n.length)return!1;for(let s=0;s<i;s++)if(r[s]!==n[s])return!1;return!0}function e(r,n){return t(r,n)}return k0}var ZC;function jD(){if(ZC)return D0;ZC=1,Object.defineProperty(D0,"__esModule",{value:!0}),D0.verifyMessageSignature=r,D0.verifySignMessage=n;const t=PK(),e=UD();function r({message:i,signedMessage:s,signature:o,publicKey:c}){return(0,e.bytesEqual)(i,s)&&t.ed25519.verify(o,s,c)}function n(i,s){const{message:o,account:{publicKey:c}}=i,{signedMessage:u,signature:h}=s;return r({message:o,signedMessage:u,signature:h,publicKey:c})}return D0}var QC;function BK(){if(QC)return Wa;QC=1,Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.verifySignIn=r,Wa.deriveSignInMessage=n,Wa.deriveSignInMessageText=i,Wa.parseSignInMessage=s,Wa.parseSignInMessageText=q,Wa.createSignInMessage=j,Wa.createSignInMessageText=z;const t=jD(),e=UD();function r(V,G){const{signedMessage:B,signature:W,account:{publicKey:D}}=G,_=n(V,G);return!!_&&(0,t.verifyMessageSignature)({message:_,signedMessage:B,signature:W,publicKey:D})}function n(V,G){const B=i(V,G);return B?new TextEncoder().encode(B):null}function i(V,G){const B=s(G.signedMessage);if(!B||V.domain&&V.domain!==B.domain||V.address&&V.address!==B.address||V.statement!==B.statement||V.uri!==B.uri||V.version!==B.version||V.chainId!==B.chainId||V.nonce!==B.nonce||V.issuedAt!==B.issuedAt||V.expirationTime!==B.expirationTime||V.notBefore!==B.notBefore||V.requestId!==B.requestId)return null;if(V.resources){if(!B.resources||!(0,e.arraysEqual)(V.resources,B.resources))return null}else if(B.resources)return null;return z(B)}function s(V){const G=new TextDecoder().decode(V);return q(G)}const o="(?<domain>[^\\n]+?) wants you to sign in with your Solana account:\\n",c="(?<address>[^\\n]+)(?:\\n|$)",u="(?:\\n(?<statement>[\\S\\s]*?)(?:\\n|$))??",k="(?:\\nURI: (?<uri>[^\\n]+))?(?:\\nVersion: (?<version>[^\\n]+))?(?:\\nChain ID: (?<chainId>[^\\n]+))?(?:\\nNonce: (?<nonce>[^\\n]+))?(?:\\nIssued At: (?<issuedAt>[^\\n]+))?(?:\\nExpiration Time: (?<expirationTime>[^\\n]+))?(?:\\nNot Before: (?<notBefore>[^\\n]+))?(?:\\nRequest ID: (?<requestId>[^\\n]+))?(?:\\nResources:(?<resources>(?:\\n- [^\\n]+)*))?",U=new RegExp(`^${o}${c}${u}${k}\\n*$`);function q(V){var G;const B=U.exec(V);if(!B)return null;const W=B.groups;return W?{domain:W.domain,address:W.address,statement:W.statement,uri:W.uri,version:W.version,nonce:W.nonce,chainId:W.chainId,issuedAt:W.issuedAt,expirationTime:W.expirationTime,notBefore:W.notBefore,requestId:W.requestId,resources:(G=W.resources)===null||G===void 0?void 0:G.split(`
- `).slice(1)}:null}function j(V){const G=z(V);return new TextEncoder().encode(G)}function z(V){let G=`${V.domain} wants you to sign in with your Solana account:
`;G+=`${V.address}`,V.statement&&(G+=`

${V.statement}`);const B=[];if(V.uri&&B.push(`URI: ${V.uri}`),V.version&&B.push(`Version: ${V.version}`),V.chainId&&B.push(`Chain ID: ${V.chainId}`),V.nonce&&B.push(`Nonce: ${V.nonce}`),V.issuedAt&&B.push(`Issued At: ${V.issuedAt}`),V.expirationTime&&B.push(`Expiration Time: ${V.expirationTime}`),V.notBefore&&B.push(`Not Before: ${V.notBefore}`),V.requestId&&B.push(`Request ID: ${V.requestId}`),V.resources){B.push("Resources:");for(const W of V.resources)B.push(`- ${W}`)}return B.length&&(G+=`

${B.join(`
`)}`),G}return Wa}var XC;function LK(){return XC||(XC=1,function(t){var e=zu&&zu.__createBinding||(Object.create?function(n,i,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(i,s);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,o,c)}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]}),r=zu&&zu.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(CK(),t),r(TK(),t),r(BK(),t),r(jD(),t)}(zu)),zu}var JC;function UK(){if(JC)return Zo;JC=1,Object.defineProperty(Zo,"__esModule",{value:!0});var t=LK();const e={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_REFLECTOR_ID_OUT_OF_RANGE:"ERROR_REFLECTOR_ID_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION",ERROR_BROWSER_NOT_SUPPORTED:"ERROR_BROWSER_NOT_SUPPORTED"};class r extends Error{constructor(...Te){const[Z,F,K]=Te;super(F),this.code=Z,this.data=K,this.name="SolanaMobileWalletAdapterError"}}const n={ERROR_AUTHORIZATION_FAILED:-1,ERROR_INVALID_PAYLOADS:-2,ERROR_NOT_SIGNED:-3,ERROR_NOT_SUBMITTED:-4,ERROR_TOO_MANY_PAYLOADS:-5,ERROR_ATTEST_ORIGIN_ANDROID:-100};class i extends Error{constructor(...Te){const[Z,F,K,J]=Te;super(K),this.code=F,this.data=J,this.jsonRpcMessageId=Z,this.name="SolanaMobileWalletAdapterProtocolError"}}function s(Ee,Te,Z,F){function K(J){return J instanceof Z?J:new Z(function(ie){ie(J)})}return new(Z||(Z=Promise))(function(J,ie){function ce(Ye){try{$e(F.next(Ye))}catch(Fe){ie(Fe)}}function de(Ye){try{$e(F.throw(Ye))}catch(Fe){ie(Fe)}}function $e(Ye){Ye.done?J(Ye.value):K(Ye.value).then(ce,de)}$e((F=F.apply(Ee,[])).next())})}function o(Ee){return window.btoa(Ee)}function c(Ee,Te){const Z=window.btoa(String.fromCharCode.call(null,...Ee));return Te?Z.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):Z}function u(Ee){return new Uint8Array(window.atob(Ee).split("").map(Te=>Te.charCodeAt(0)))}function h(Ee,Te){return s(this,void 0,void 0,function*(){const Z=yield crypto.subtle.exportKey("raw",Ee),F=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},Te,Z),K=new Uint8Array(Z.byteLength+F.byteLength);return K.set(new Uint8Array(Z),0),K.set(new Uint8Array(F),Z.byteLength),K})}function f(Ee){return t.createSignInMessageText(Ee)}function p(Ee){return o(f(Ee))}const E="solana:signTransactions",S="solana:cloneAuthorization",A="solana:signInWithSolana";function I(Ee,Te){return new Proxy({},{get(Z,F){return F==="then"?null:(Z[F]==null&&(Z[F]=function(K){return s(this,void 0,void 0,function*(){const{method:J,params:ie}=$(F,K,Ee),ce=yield Te(J,ie);return J==="authorize"&&ie.sign_in_payload&&!ce.sign_in_result&&(ce.sign_in_result=yield k(ie.sign_in_payload,ce,Te)),L(F,ce,Ee)})}),Z[F])},defineProperty(){return!1},deleteProperty(){return!1}})}function $(Ee,Te,Z){let F=Te,K=Ee.toString().replace(/[A-Z]/g,J=>`_${J.toLowerCase()}`).toLowerCase();switch(Ee){case"authorize":{let{chain:J}=F;if(Z==="legacy"){switch(J){case"solana:testnet":{J="testnet";break}case"solana:devnet":{J="devnet";break}case"solana:mainnet":{J="mainnet-beta";break}default:J=F.cluster}F.cluster=J}else{switch(J){case"testnet":case"devnet":{J=`solana:${J}`;break}case"mainnet-beta":{J="solana:mainnet";break}}F.chain=J}}case"reauthorize":{const{auth_token:J,identity:ie}=F;if(J)switch(Z){case"legacy":{K="reauthorize",F={auth_token:J,identity:ie};break}default:{K="authorize";break}}break}}return{method:K,params:F}}function L(Ee,Te,Z){switch(Ee){case"getCapabilities":{const F=Te;switch(Z){case"legacy":{const K=[E];return F.supports_clone_authorization===!0&&K.push(S),Object.assign(Object.assign({},F),{features:K})}case"v1":return Object.assign(Object.assign({},F),{supports_sign_and_send_transactions:!0,supports_clone_authorization:F.features.includes(S)})}}}return Te}function k(Ee,Te,Z){var F;return s(this,void 0,void 0,function*(){const K=(F=Ee.domain)!==null&&F!==void 0?F:window.location.host,J=Te.accounts[0].address,ie=p(Object.assign(Object.assign({},Ee),{domain:K,address:J})),ce=yield Z("sign_messages",{addresses:[J],payloads:[ie]});return{address:J,signed_message:ie,signature:ce.signed_payloads[0].slice(ie.length)}})}const U=4;function q(Ee){if(Ee>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const Te=new ArrayBuffer(U);return new DataView(Te).setUint32(0,Ee,!1),new Uint8Array(Te)}const j=12,z=65;function V(Ee,Te,Z){return s(this,void 0,void 0,function*(){const F=q(Te),K=new Uint8Array(j);crypto.getRandomValues(K);const J=yield crypto.subtle.encrypt(B(F,K),Z,new TextEncoder().encode(Ee)),ie=new Uint8Array(F.byteLength+K.byteLength+J.byteLength);return ie.set(new Uint8Array(F),0),ie.set(new Uint8Array(K),F.byteLength),ie.set(new Uint8Array(J),F.byteLength+K.byteLength),ie})}function G(Ee,Te){return s(this,void 0,void 0,function*(){const Z=Ee.slice(0,U),F=Ee.slice(U,U+j),K=Ee.slice(U+j),J=yield crypto.subtle.decrypt(B(Z,F),Te,K);return D().decode(J)})}function B(Ee,Te){return{additionalData:Ee,iv:Te,name:"AES-GCM",tagLength:128}}let W;function D(){return W===void 0&&(W=new TextDecoder("utf-8")),W}function _(){return s(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function w(){return s(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function g(Ee){let Te="";const Z=new Uint8Array(Ee),F=Z.byteLength;for(let K=0;K<F;K++)Te+=String.fromCharCode(Z[K]);return window.btoa(Te)}function b(){return m(49152+Math.floor(Math.random()*16384))}function m(Ee){if(Ee<49152||Ee>65535)throw new r(e.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${Ee} given.`,{port:Ee});return Ee}function M(Ee){return Ee.replace(/[/+=]/g,Te=>({"/":"_","+":"-","=":"."})[Te])}const R="solana-wallet";function C(Ee){return Ee.replace(/(^\/+|\/+$)/g,"").split("/")}function v(Ee,Te){let Z=null;if(Te){try{Z=new URL(Te)}catch{}if((Z==null?void 0:Z.protocol)!=="https:")throw new r(e.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}Z||(Z=new URL(`${R}:/`));const F=Ee.startsWith("/")?Ee:[...C(Z.pathname),...C(Ee)].join("/");return new URL(F,Z)}function O(Ee,Te,Z,F=["v1"]){return s(this,void 0,void 0,function*(){const K=m(Te),J=yield crypto.subtle.exportKey("raw",Ee),ie=g(J),ce=v("v1/associate/local",Z);return ce.searchParams.set("association",M(ie)),ce.searchParams.set("port",`${K}`),F.forEach(de=>{ce.searchParams.set("v",de)}),ce})}function x(Ee,Te,Z,F,K=["v1"]){return s(this,void 0,void 0,function*(){const J=yield crypto.subtle.exportKey("raw",Ee),ie=g(J),ce=v("v1/associate/remote",F);return ce.searchParams.set("association",M(ie)),ce.searchParams.set("reflector",`${Te}`),ce.searchParams.set("id",`${c(Z,!0)}`),K.forEach(de=>{ce.searchParams.set("v",de)}),ce})}function N(Ee,Te){return s(this,void 0,void 0,function*(){const Z=JSON.stringify(Ee),F=Ee.id;return V(Z,F,Te)})}function H(Ee,Te){return s(this,void 0,void 0,function*(){const Z=yield G(Ee,Te),F=JSON.parse(Z);if(Object.hasOwnProperty.call(F,"error"))throw new i(F.id,F.error.code,F.error.message);return F})}function Y(Ee,Te,Z){return s(this,void 0,void 0,function*(){const[F,K]=yield Promise.all([crypto.subtle.exportKey("raw",Te),crypto.subtle.importKey("raw",Ee.slice(0,z),{name:"ECDH",namedCurve:"P-256"},!1,[])]),J=yield crypto.subtle.deriveBits({name:"ECDH",public:K},Z,256),ie=yield crypto.subtle.importKey("raw",J,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(F),info:new Uint8Array},ie,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function Q(Ee,Te){return s(this,void 0,void 0,function*(){const Z=yield G(Ee,Te),F=JSON.parse(Z);let K="legacy";if(Object.hasOwnProperty.call(F,"v"))switch(F.v){case 1:case"1":case"v1":K="v1";break;case"legacy":K="legacy";break;default:throw new r(e.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${F.v}`)}return{protocol_version:K}})}const ee={Firefox:0,Other:1};function re(Ee){return Ee}function oe(){return navigator.userAgent.indexOf("Firefox/")!==-1?ee.Firefox:ee.Other}function be(){return new Promise((Ee,Te)=>{function Z(){clearTimeout(K),window.removeEventListener("blur",F)}function F(){Z(),Ee()}window.addEventListener("blur",F);const K=setTimeout(()=>{Z(),Te()},3e3)})}let Ce=null;function Se(Ee){Ce==null&&(Ce=document.createElement("iframe"),Ce.style.display="none",document.body.appendChild(Ce)),Ce.contentWindow.location.href=Ee.toString()}function xe(Ee){return s(this,void 0,void 0,function*(){if(Ee.protocol==="https:")window.location.assign(Ee);else try{const Te=oe();switch(Te){case ee.Firefox:Se(Ee);break;case ee.Other:{const Z=be();window.location.assign(Ee),yield Z;break}default:}}catch{throw new r(e.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function ze(Ee,Te){return s(this,void 0,void 0,function*(){const Z=b(),F=yield O(Ee,Z,Te);return yield xe(F),Z})}const Be={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},tt="com.solana.mobilewalletadapter.v1",He="com.solana.mobilewalletadapter.v1.base64";function Je(){if(typeof window>"u"||window.isSecureContext!==!0)throw new r(e.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function vt(Ee){let Te;try{Te=new URL(Ee)}catch{throw new r(e.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(Te.protocol!=="https:")throw new r(e.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function yt(Ee){return new DataView(Ee).getUint32(0,!1)}function et(Ee){var Te=new Uint8Array(Ee),Z=Ee.byteLength,F=10,K=0,J=0,ie;do{if(J>=Z||J>F)throw new RangeError("Failed to decode varint");ie=Te[J++],K|=(ie&127)<<7*J}while(ie>=128);return{value:K,offset:J}}function ht(Ee){let{value:Te,offset:Z}=et(Ee);return new Uint8Array(Ee.slice(Z,Z+Te))}function Mt(Ee,Te){return s(this,void 0,void 0,function*(){Je();const Z=yield _(),K=`ws://localhost:${yield ze(Z.publicKey,Te==null?void 0:Te.baseUri)}/solana-wallet`;let J;const ie=(()=>{const Ye=[...Be.retryDelayScheduleMs];return()=>Ye.length>1?Ye.shift():Ye[0]})();let ce=1,de=0,$e={__type:"disconnected"};return new Promise((Ye,Fe)=>{let We;const at={},ft=()=>s(this,void 0,void 0,function*(){if($e.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${$e.__type}\`.`);return}We.removeEventListener("open",ft);const{associationKeypair:Et}=$e,Rt=yield w();We.send(yield h(Rt.publicKey,Et.privateKey)),$e={__type:"hello_req_sent",associationPublicKey:Et.publicKey,ecdhPrivateKey:Rt.privateKey}}),Ut=Et=>{Et.wasClean?$e={__type:"disconnected"}:Fe(new r(e.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${Et.code}: ${Et.reason}).`,{closeEvent:Et})),Ft()},Kt=Et=>s(this,void 0,void 0,function*(){Ft(),Date.now()-J>=Be.timeoutMs?Fe(new r(e.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${K}.`)):(yield new Promise(Rt=>{const rt=ie();Vt=window.setTimeout(Rt,rt)}),gt())}),pt=Et=>s(this,void 0,void 0,function*(){const Rt=yield Et.data.arrayBuffer();switch($e.__type){case"connecting":if(Rt.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const rt=yield w();We.send(yield h(rt.publicKey,Z.privateKey)),$e={__type:"hello_req_sent",associationPublicKey:Z.publicKey,ecdhPrivateKey:rt.privateKey};break;case"connected":try{const Nt=Rt.slice(0,U),St=yt(Nt);if(St!==de+1)throw new Error("Encrypted message has invalid sequence number");de=St;const it=yield H(Rt,$e.sharedSecret),Ct=at[it.id];delete at[it.id],Ct.resolve(it.result)}catch(Nt){if(Nt instanceof i){const St=at[Nt.jsonRpcMessageId];delete at[Nt.jsonRpcMessageId],St.reject(Nt)}else throw Nt}break;case"hello_req_sent":{if(Rt.byteLength===0){const Dt=yield w();We.send(yield h(Dt.publicKey,Z.privateKey)),$e={__type:"hello_req_sent",associationPublicKey:Z.publicKey,ecdhPrivateKey:Dt.privateKey};break}const Nt=yield Y(Rt,$e.associationPublicKey,$e.ecdhPrivateKey),St=Rt.slice(z),it=St.byteLength!==0?yield s(this,void 0,void 0,function*(){const Dt=St.slice(0,U),bt=yt(Dt);if(bt!==de+1)throw new Error("Encrypted message has invalid sequence number");return de=bt,Q(St,Nt)}):{protocol_version:"legacy"};$e={__type:"connected",sharedSecret:Nt,sessionProperties:it};const Ct=I(it.protocol_version,(Dt,bt)=>s(this,void 0,void 0,function*(){const tr=ce++;return We.send(yield N({id:tr,jsonrpc:"2.0",method:Dt,params:bt??{}},Nt)),new Promise((Yt,It)=>{at[tr]={resolve(Xt){switch(Dt){case"authorize":case"reauthorize":{const{wallet_uri_base:ar}=Xt;if(ar!=null)try{vt(ar)}catch(xt){It(xt);return}break}}Yt(Xt)},reject:It}})}));try{Ye(yield Ee(Ct))}catch(Dt){Fe(Dt)}finally{Ft(),We.close()}break}}});let Ft,Vt;const gt=()=>{Ft&&Ft(),$e={__type:"connecting",associationKeypair:Z},J===void 0&&(J=Date.now()),We=new WebSocket(K,[tt]),We.addEventListener("open",ft),We.addEventListener("close",Ut),We.addEventListener("error",Kt),We.addEventListener("message",pt),Ft=()=>{window.clearTimeout(Vt),We.removeEventListener("open",ft),We.removeEventListener("close",Ut),We.removeEventListener("error",Kt),We.removeEventListener("message",pt)}};gt()})})}function dt(Ee){return s(this,void 0,void 0,function*(){Je();const Te=yield _(),Z=`wss://${Ee==null?void 0:Ee.remoteHostAuthority}/reflect`;let F;const K=(()=>{const Ut=[...Be.retryDelayScheduleMs];return()=>Ut.length>1?Ut.shift():Ut[0]})();let J=1,ie=0,ce,de={__type:"disconnected"},$e,Ye,Fe=Ut=>s(this,void 0,void 0,function*(){if(ce=="base64"){const Kt=yield Ut.data;return u(Kt).buffer}else return yield Ut.data.arrayBuffer()});const We=yield new Promise((Ut,Kt)=>{const pt=()=>s(this,void 0,void 0,function*(){if(de.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${de.__type}\`.`);return}$e.protocol.includes(He)?ce="base64":ce="binary",$e.removeEventListener("open",pt)}),Ft=rt=>{rt.wasClean?de={__type:"disconnected"}:Kt(new r(e.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${rt.code}: ${rt.reason}).`,{closeEvent:rt})),Ye()},Vt=rt=>s(this,void 0,void 0,function*(){Ye(),Date.now()-F>=Be.timeoutMs?Kt(new r(e.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${Z}.`)):(yield new Promise(Nt=>{const St=K();Et=window.setTimeout(Nt,St)}),Rt())}),gt=rt=>s(this,void 0,void 0,function*(){const Nt=yield Fe(rt);if(de.__type==="connecting"){if(Nt.byteLength==0)throw new Error("Encountered unexpected message while connecting");const St=ht(Nt);de={__type:"reflector_id_received",reflectorId:St};const it=yield x(Te.publicKey,Ee.remoteHostAuthority,St,Ee==null?void 0:Ee.baseUri);$e.removeEventListener("message",gt),Ut(it)}});let Et;const Rt=()=>{Ye&&Ye(),de={__type:"connecting",associationKeypair:Te},F===void 0&&(F=Date.now()),$e=new WebSocket(Z,[tt,He]),$e.addEventListener("open",pt),$e.addEventListener("close",Ft),$e.addEventListener("error",Vt),$e.addEventListener("message",gt),Ye=()=>{window.clearTimeout(Et),$e.removeEventListener("open",pt),$e.removeEventListener("close",Ft),$e.removeEventListener("error",Vt),$e.removeEventListener("message",gt)}};Rt()});let at=!1,ft;return{associationUrl:We,close:()=>{$e.close(),ft()},wallet:new Promise((Ut,Kt)=>{const pt={},Ft=Vt=>s(this,void 0,void 0,function*(){const gt=yield Fe(Vt);switch(de.__type){case"reflector_id_received":if(gt.byteLength!==0)throw new Error("Encountered unexpected message while awaiting reflection");const Et=yield w(),Rt=yield h(Et.publicKey,Te.privateKey);ce=="base64"?$e.send(c(Rt)):$e.send(Rt),de={__type:"hello_req_sent",associationPublicKey:Te.publicKey,ecdhPrivateKey:Et.privateKey};break;case"connected":try{const rt=gt.slice(0,U),Nt=yt(rt);if(Nt!==ie+1)throw new Error("Encrypted message has invalid sequence number");ie=Nt;const St=yield H(gt,de.sharedSecret),it=pt[St.id];delete pt[St.id],it.resolve(St.result)}catch(rt){if(rt instanceof i){const Nt=pt[rt.jsonRpcMessageId];delete pt[rt.jsonRpcMessageId],Nt.reject(rt)}else throw rt}break;case"hello_req_sent":{const rt=yield Y(gt,de.associationPublicKey,de.ecdhPrivateKey),Nt=gt.slice(z),St=Nt.byteLength!==0?yield s(this,void 0,void 0,function*(){const Ct=Nt.slice(0,U),Dt=yt(Ct);if(Dt!==ie+1)throw new Error("Encrypted message has invalid sequence number");return ie=Dt,Q(Nt,rt)}):{protocol_version:"legacy"};de={__type:"connected",sharedSecret:rt,sessionProperties:St};const it=I(St.protocol_version,(Ct,Dt)=>s(this,void 0,void 0,function*(){const bt=J++,tr=yield N({id:bt,jsonrpc:"2.0",method:Ct,params:Dt??{}},rt);return ce=="base64"?$e.send(c(tr)):$e.send(tr),new Promise((Yt,It)=>{pt[bt]={resolve(Xt){switch(Ct){case"authorize":case"reauthorize":{const{wallet_uri_base:ar}=Xt;if(ar!=null)try{vt(ar)}catch(xt){It(xt);return}break}}Yt(Xt)},reject:It}})}));at=!0;try{Ut(it)}catch(Ct){Kt(Ct)}break}}});$e.addEventListener("message",Ft),ft=()=>{$e.removeEventListener("message",Ft),Ye(),at||Kt(new r(e.ERROR_SESSION_CLOSED,"The wallet session was closed before connection.",{closeEvent:new CloseEvent("socket was closed before connection")}))}})}})}return Zo.SolanaCloneAuthorization=S,Zo.SolanaMobileWalletAdapterError=r,Zo.SolanaMobileWalletAdapterErrorCode=e,Zo.SolanaMobileWalletAdapterProtocolError=i,Zo.SolanaMobileWalletAdapterProtocolErrorCode=n,Zo.SolanaSignInWithSolana=A,Zo.SolanaSignTransactions=E,Zo.startRemoteScenario=dt,Zo.transact=Mt,Zo}var zD=UK(),t_,eT;function jK(){if(eT)return t_;eT=1;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var c=e.length,u=e.charAt(0),h=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function p(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var I=0,$=0,L=0,k=A.length;L!==k&&A[L]===0;)L++,I++;for(var U=(k-L)*f+1>>>0,q=new Uint8Array(U);L!==k;){for(var j=A[L],z=0,V=U-1;(j!==0||z<$)&&V!==-1;V--,z++)j+=256*q[V]>>>0,q[V]=j%c>>>0,j=j/c>>>0;if(j!==0)throw new Error("Non-zero carry");$=z,L++}for(var G=U-$;G!==U&&q[G]===0;)G++;for(var B=u.repeat(I);G<U;++G)B+=e.charAt(q[G]);return B}function E(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;for(var I=0,$=0,L=0;A[I]===u;)$++,I++;for(var k=(A.length-I)*h+1>>>0,U=new Uint8Array(k);A[I];){var q=A.charCodeAt(I);if(q>255)return;var j=r[q];if(j===255)return;for(var z=0,V=k-1;(j!==0||z<L)&&V!==-1;V--,z++)j+=c*U[V]>>>0,U[V]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");L=z,I++}for(var G=k-L;G!==k&&U[G]===0;)G++;for(var B=new Uint8Array($+(k-G)),W=$;G!==k;)B[W++]=U[G++];return B}function S(A){var I=E(A);if(I)return I;throw new Error("Non-base"+c+" character")}return{encode:p,decodeUnsafe:E,decode:S}}return t_=t,t_}var r_,tT;function qD(){return tT||(tT=1,r_=jK()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),r_}var zK=qD();const qK=yc(zK);function n_(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Sg(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(f){try{h(n.next(f))}catch(p){o(p)}}function u(f){try{h(n.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):i(f.value).then(c,u)}h((n=n.apply(t,[])).next())})}function FD(t){return window.btoa(String.fromCharCode.call(null,...t))}function i_(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}function rT(t){const e="version"in t?t.serialize():t.serialize({requireAllSignatures:!1,verifySignatures:!1});return FD(e)}function FK(t){const r=t[0]*Yf+1;return pw.deserializeMessageVersion(t.slice(r,t.length))==="legacy"?Ar.from(t):Eh.deserialize(t)}function HK(t,e){return Sg(this,void 0,void 0,function*(){const r=n=>t(HD(n));return yield zD.transact(r,e)})}function WK(t){return Sg(this,void 0,void 0,function*(){const{wallet:e,close:r,associationUrl:n}=yield zD.startRemoteScenario(t);return{wallet:e.then(s=>HD(s)),close:r,associationUrl:n}})}function HD(t){return new Proxy({},{get(e,r){if(e[r]==null)switch(r){case"signAndSendTransactions":e[r]=function(n){var{minContextSlot:i,commitment:s,skipPreflight:o,maxRetries:c,waitForCommitmentToSendNextTransaction:u,transactions:h}=n,f=n_(n,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return Sg(this,void 0,void 0,function*(){const p=h.map(rT),E={min_context_slot:i,commitment:s,skip_preflight:o,max_retries:c,wait_for_commitment_to_send_next_transaction:u},{signatures:S}=yield t.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},f),Object.values(E).some(I=>I!=null)?{options:E}:null),{payloads:p}));return S.map(i_).map(qK.encode)})};break;case"signMessages":e[r]=function(n){var{payloads:i}=n,s=n_(n,["payloads"]);return Sg(this,void 0,void 0,function*(){const o=i.map(FD),{signed_payloads:c}=yield t.signMessages(Object.assign(Object.assign({},s),{payloads:o}));return c.map(i_)})};break;case"signTransactions":e[r]=function(n){var{transactions:i}=n,s=n_(n,["transactions"]);return Sg(this,void 0,void 0,function*(){const o=i.map(rT),{signed_payloads:c}=yield t.signTransactions(Object.assign(Object.assign({},s),{payloads:o}));return c.map(i_).map(FK)})};break;default:{e[r]=t[r];break}}return e[r]},defineProperty(){return!1},deleteProperty(){return!1}})}const KK=Object.freeze(Object.defineProperty({__proto__:null,startRemoteScenario:WK,transact:HK},Symbol.toStringTag,{value:"Module"})),VK=Dh(KK);var nT;function GK(){if(nT)return ga;nT=1,Object.defineProperty(ga,"__esModule",{value:!0});var t=bA(),e=RD,r=xK(),n=OD(),i=BD(),s=VK,o=qD();function c(lt){return lt&&typeof lt=="object"&&"default"in lt?lt:{default:lt}}var u=c(r),h=c(o);function f(lt,Oe,pe,fe){function Pe(ke){return ke instanceof pe?ke:new pe(function(mt){mt(ke)})}return new(pe||(pe=Promise))(function(ke,mt){function $t(Rs){try{wr(fe.next(Rs))}catch(ka){mt(ka)}}function Ur(Rs){try{wr(fe.throw(Rs))}catch(ka){mt(ka)}}function wr(Rs){Rs.done?ke(Rs.value):Pe(Rs.value).then($t,Ur)}wr((fe=fe.apply(lt,[])).next())})}function p(lt,Oe,pe,fe){if(pe==="a"&&!fe)throw new TypeError("Private accessor was defined without a getter");if(typeof Oe=="function"?lt!==Oe||!fe:!Oe.has(lt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return pe==="m"?fe:pe==="a"?fe.call(lt):fe?fe.value:Oe.get(lt)}function E(lt,Oe,pe,fe,Pe){if(typeof Oe=="function"?lt!==Oe||!0:!Oe.has(lt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Oe.set(lt,pe),pe}var S,A,I,$,L,k,U,q;const j=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,z=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,V=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class G{constructor(){S.add(this),A.set(this,null),I.set(this,{}),$.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),p(this,S,"m",k).call(this),p(this,A,"f")&&(p(this,A,"f").style.display="flex")},this.close=(Oe=void 0)=>{var pe;console.debug("Modal close"),p(this,S,"m",U).call(this),p(this,A,"f")&&(p(this,A,"f").style.display="none"),(pe=p(this,I,"f").close)===null||pe===void 0||pe.forEach(fe=>fe(Oe))},q.set(this,Oe=>{Oe.key==="Escape"&&this.close(Oe)}),this.init=this.init.bind(this),E(this,A,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return f(this,void 0,void 0,function*(){console.log("Injecting modal"),p(this,S,"m",L).call(this)})}addEventListener(Oe,pe){var fe;return!((fe=p(this,I,"f")[Oe])===null||fe===void 0)&&fe.push(pe)||(p(this,I,"f")[Oe]=[pe]),()=>this.removeEventListener(Oe,pe)}removeEventListener(Oe,pe){var fe;p(this,I,"f")[Oe]=(fe=p(this,I,"f")[Oe])===null||fe===void 0?void 0:fe.filter(Pe=>pe!==Pe)}}A=new WeakMap,I=new WeakMap,$=new WeakMap,q=new WeakMap,S=new WeakSet,L=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){p(this,A,"f")||E(this,A,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}E(this,A,document.createElement("div")),p(this,A,"f").id="mobile-wallet-adapter-embedded-root-ui",p(this,A,"f").innerHTML=j,p(this,A,"f").style.display="none";const Oe=p(this,A,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");Oe&&(Oe.innerHTML=this.contentHtml);const pe=document.createElement("style");pe.id="mobile-wallet-adapter-embedded-modal-styles",pe.textContent=z+this.contentStyles;const fe=document.createElement("div");fe.innerHTML=V,this.dom=fe.attachShadow({mode:"closed"}),this.dom.appendChild(pe),this.dom.appendChild(p(this,A,"f")),document.body.appendChild(fe)},k=function(){if(!p(this,A,"f")||p(this,$,"f"))return;[...p(this,A,"f").querySelectorAll("[data-modal-close]")].forEach(pe=>pe==null?void 0:pe.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",p(this,q,"f")),E(this,$,!0)},U=function(){if(!p(this,$,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",p(this,q,"f")),!p(this,A,"f")))return;[...p(this,A,"f").querySelectorAll("[data-modal-close]")].forEach(pe=>pe==null?void 0:pe.removeEventListener("click",this.close)),E(this,$,!1)};class B extends G{constructor(){super(...arguments),this.contentStyles=D,this.contentHtml=W}initWithQR(Oe){const pe=Object.create(null,{init:{get:()=>super.init}});return f(this,void 0,void 0,function*(){pe.init.call(this),this.populateQRCode(Oe)})}populateQRCode(Oe){var pe;return f(this,void 0,void 0,function*(){const fe=(pe=this.dom)===null||pe===void 0?void 0:pe.getElementById("mobile-wallet-adapter-embedded-modal-qr-code-container");if(fe){const Pe=yield u.default.toCanvas(Oe,{width:200,margin:0});fe.firstElementChild!==null?fe.replaceChild(Pe,fe.firstElementChild):fe.appendChild(Pe)}else console.error("QRCode Container not found")})}}const W=`
<div class="mobile-wallet-adapter-embedded-modal-qr-content">
    <div>
        <svg class="mobile-wallet-adapter-embedded-modal-icon" width="100%" height="100%">
            <circle r="52" cx="53" cy="53" fill="#99b3be" stroke="#000000" stroke-width="2"/>
            <path d="m 53,82.7305 c -3.3116,0 -6.1361,-1.169 -8.4735,-3.507 -2.338,-2.338 -3.507,-5.1625 -3.507,-8.4735 0,-3.3116 1.169,-6.1364 3.507,-8.4744 2.3374,-2.338 5.1619,-3.507 8.4735,-3.507 3.3116,0 6.1361,1.169 8.4735,3.507 2.338,2.338 3.507,5.1628 3.507,8.4744 0,3.311 -1.169,6.1355 -3.507,8.4735 -2.3374,2.338 -5.1619,3.507 -8.4735,3.507 z m 0.007,-5.25 c 1.8532,0 3.437,-0.6598 4.7512,-1.9793 1.3149,-1.3195 1.9723,-2.9058 1.9723,-4.7591 0,-1.8526 -0.6598,-3.4364 -1.9793,-4.7512 -1.3195,-1.3149 -2.9055,-1.9723 -4.7582,-1.9723 -1.8533,0 -3.437,0.6598 -4.7513,1.9793 -1.3148,1.3195 -1.9722,2.9058 -1.9722,4.7591 0,1.8527 0.6597,3.4364 1.9792,4.7512 1.3195,1.3149 2.9056,1.9723 4.7583,1.9723 z m -28,-33.5729 -3.85,-3.6347 c 4.1195,-4.025 8.8792,-7.1984 14.2791,-9.52 5.4005,-2.3223 11.2551,-3.4834 17.5639,-3.4834 6.3087,0 12.1634,1.1611 17.5639,3.4834 5.3999,2.3216 10.1596,5.495 14.2791,9.52 l -3.85,3.6347 C 77.2999,40.358 73.0684,37.5726 68.2985,35.5514 63.5292,33.5301 58.4296,32.5195 53,32.5195 c -5.4297,0 -10.5292,1.0106 -15.2985,3.0319 -4.7699,2.0212 -9.0014,4.8066 -12.6945,8.3562 z m 44.625,10.8771 c -2.2709,-2.1046 -4.7962,-3.7167 -7.5758,-4.8361 -2.7795,-1.12 -5.7983,-1.68 -9.0562,-1.68 -3.2579,0 -6.2621,0.56 -9.0125,1.68 -2.7504,1.1194 -5.2903,2.7315 -7.6195,4.8361 L 32.5189,51.15 c 2.8355,-2.6028 5.9777,-4.6086 9.4263,-6.0174 3.4481,-1.4087 7.133,-2.1131 11.0548,-2.1131 3.9217,0 7.5979,0.7044 11.0285,2.1131 3.43,1.4088 6.5631,3.4146 9.3992,6.0174 z"/>
        </svg>
        <div class="mobile-wallet-adapter-embedded-modal-title">Remote Mobile Wallet Adapter</div>
    </div>
    <div>
        <div>
            <h4 class="mobile-wallet-adapter-embedded-modal-qr-label">
                Open your wallet and scan this code
            </h4>
        </div>
        <div id="mobile-wallet-adapter-embedded-modal-qr-code-container" class="mobile-wallet-adapter-embedded-modal-qr-code-container"></div>
    </div>
</div>
<div class="mobile-wallet-adapter-embedded-modal-divider"><hr></div>
<div class="mobile-wallet-adapter-embedded-modal-footer">
    <div class="mobile-wallet-adapter-embedded-modal-subtitle">
        Follow the instructions on your device. When you're finished, this screen will update.
    </div>
    <div class="mobile-wallet-adapter-embedded-modal-progress-badge">
        <div>
            <div class="spinner">
                <div class="leftWrapper">
                    <div class="left">
                        <div class="circle"></div>
                    </div>
                </div>
                <div class="rightWrapper">
                    <div class="right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
        <div>Waiting for scan</div>
    </div>
</div>
`,D=`
.mobile-wallet-adapter-embedded-modal-qr-content {
    display: flex; 
    margin-top: 10px;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
    display: flex;
    flex-direction: column;
    flex: 2;
    margin-top: auto;
    margin-right: 30px;
}

.mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
    display: flex;
    flex-direction: column;
    flex: 1;
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-footer {
    display: flex;
    padding: 10px;
}

.mobile-wallet-adapter-embedded-modal-icon {}

.mobile-wallet-adapter-embedded-modal-title {
    color: #000000;
    font-size: 2.5em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-qr-label {
    text-align: right;
    color: #000000;
}

.mobile-wallet-adapter-embedded-modal-qr-code-container {
    margin-left: auto;
}

.mobile-wallet-adapter-embedded-modal-divider {
    margin-top: 20px;
    padding-left: 10px;
    padding-right: 10px;
}

.mobile-wallet-adapter-embedded-modal-divider hr {
    border-top: 1px solid #D9DEDE;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: auto;
    margin-right: 60px;
    padding: 20px;
    color: #6E8286;
}

.mobile-wallet-adapter-embedded-modal-progress-badge {
    display: flex;
    background: #F7F8F8;
    height: 56px;
    min-width: 200px;
    margin: auto;
    padding-left: 20px;
    padding-right: 20px;
    border-radius: 18px;
    color: #A8B6B8;
    align-items: center;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:first-child {
    margin-left: auto;
    margin-right: 20px;
}

.mobile-wallet-adapter-embedded-modal-progress-badge > div:nth-child(2) {
    margin-right: auto;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-card {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {
        margin: auto;
    }
    .mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {
        margin: auto;
        flex: 2 auto;
    }
    .mobile-wallet-adapter-embedded-modal-footer {
        flex-direction: column;
    }
    .mobile-wallet-adapter-embedded-modal-icon {
        display: none;
    }
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: unset;
    }
    .mobile-wallet-adapter-embedded-modal-qr-label {
        text-align: center;
    }
    .mobile-wallet-adapter-embedded-modal-qr-code-container {
        margin: auto;
    }
}

/* Spinner */
@keyframes spinLeft {
    0% {
        transform: rotate(20deg);
    }
    50% {
        transform: rotate(160deg);
    }
    100% {
        transform: rotate(20deg);
    }
}
@keyframes spinRight {
    0% {
        transform: rotate(160deg);
    }
    50% {
        transform: rotate(20deg);
    }
    100% {
        transform: rotate(160deg);
    }
}
@keyframes spin {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(2520deg);
    }
}

.spinner {
    position: relative;
    width: 1.5em;
    height: 1.5em;
    margin: auto;
    animation: spin 10s linear infinite;
}
.spinner::before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
}
.right, .rightWrapper, .left, .leftWrapper {
    position: absolute;
    top: 0;
    overflow: hidden;
    width: .75em;
    height: 1.5em;
}
.left, .leftWrapper {
    left: 0;
}
.right {
    left: -12px;
}
.rightWrapper {
    right: 0;
}
.circle {
    border: .125em solid #A8B6B8;
    width: 1.25em; /* 1.5em - 2*0.125em border */
    height: 1.25em; /* 1.5em - 2*0.125em border */
    border-radius: 0.75em; /* 0.5*1.5em spinner size 8 */
}
.left {
    transform-origin: 100% 50%;
    animation: spinLeft 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
.right {
    transform-origin: 100% 50%;
    animation: spinRight 2.5s cubic-bezier(.2,0,.8,1) infinite;
}
`,_="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function w(lt){return"version"in lt}function g(lt){return window.btoa(String.fromCharCode.call(null,...lt))}function b(lt){return new Uint8Array(window.atob(lt).split("").map(Oe=>Oe.charCodeAt(0)))}var m,M,R,C,v,O,x,N,H,Y,Q,ee,re,oe,be,Ce,Se,xe,ze,Be,tt,He,Je,vt,yt,et,ht,Mt,dt,Ee,Te,Z,F,K,J,ie,ce,de,$e,Ye,Fe,We,at,ft,Ut,Kt,pt,Ft,Vt,gt,Et,Rt,rt,Nt,St,it,Ct,Dt,bt,tr,Yt,It,Xt,ar,xt,fr,Zt,pr,Mr,Hi;const us="Mobile Wallet Adapter",oi=64,Mn=[t.SolanaSignAndSendTransaction,t.SolanaSignTransaction,t.SolanaSignMessage,t.SolanaSignIn];class qs{constructor(Oe){m.add(this),M.set(this,{}),R.set(this,"1.0.0"),C.set(this,us),v.set(this,"https://solanamobile.com/wallets"),O.set(this,_),x.set(this,void 0),N.set(this,void 0),H.set(this,void 0),Y.set(this,!1),Q.set(this,0),ee.set(this,[]),re.set(this,void 0),oe.set(this,void 0),be.set(this,void 0),Ce.set(this,(pe,fe)=>{var Pe;return!((Pe=p(this,M,"f")[pe])===null||Pe===void 0)&&Pe.push(fe)||(p(this,M,"f")[pe]=[fe]),()=>p(this,m,"m",xe).call(this,pe,fe)}),ze.set(this,({silent:pe}={})=>f(this,void 0,void 0,function*(){if(p(this,Y,"f")||this.connected)return{accounts:this.accounts};E(this,Y,!0);try{if(pe){const fe=yield p(this,H,"f").get();if(fe)yield p(this,tt,"f").call(this,fe);else return{accounts:this.accounts}}else yield p(this,Be,"f").call(this)}catch(fe){throw new Error(fe instanceof Error&&fe.message||"Unknown error")}finally{E(this,Y,!1)}return{accounts:this.accounts}})),Be.set(this,pe=>f(this,void 0,void 0,function*(){try{const fe=yield p(this,H,"f").get();if(fe)return p(this,tt,"f").call(this,fe),fe;const Pe=yield p(this,re,"f").select(p(this,ee,"f"));return yield p(this,yt,"f").call(this,ke=>f(this,void 0,void 0,function*(){const[mt,$t]=yield Promise.all([ke.getCapabilities(),ke.authorize({chain:Pe,identity:p(this,x,"f"),sign_in_payload:pe})]),Ur=p(this,ht,"f").call(this,$t.accounts),wr=Object.assign(Object.assign({},$t),{accounts:Ur,chain:Pe});return Promise.all([p(this,He,"f").call(this,mt),p(this,H,"f").set(wr),p(this,tt,"f").call(this,wr)]),wr}))}catch(fe){throw new Error(fe instanceof Error&&fe.message||"Unknown error")}})),tt.set(this,pe=>f(this,void 0,void 0,function*(){var fe;const Pe=p(this,N,"f")==null||((fe=p(this,N,"f"))===null||fe===void 0?void 0:fe.accounts.length)!==pe.accounts.length||p(this,N,"f").accounts.some((ke,mt)=>ke.address!==pe.accounts[mt].address);E(this,N,pe),Pe&&p(this,m,"m",Se).call(this,"change",{accounts:this.accounts})})),He.set(this,pe=>f(this,void 0,void 0,function*(){const fe=pe.features.includes("solana:signTransactions"),Pe=pe.supports_sign_and_send_transactions,ke=t.SolanaSignAndSendTransaction in this.features!==Pe||t.SolanaSignTransaction in this.features!==fe;E(this,oe,Object.assign(Object.assign({},(Pe||!Pe&&!fe)&&{[t.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:p(this,Ee,"f")}}),fe&&{[t.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:p(this,Te,"f")}})),ke&&p(this,m,"m",Se).call(this,"change",{features:this.features})})),Je.set(this,(pe,fe,Pe)=>f(this,void 0,void 0,function*(){try{const ke=yield pe.authorize({auth_token:fe,identity:p(this,x,"f"),chain:Pe}),mt=p(this,ht,"f").call(this,ke.accounts),$t=Object.assign(Object.assign({},ke),{accounts:mt,chain:Pe});Promise.all([p(this,H,"f").set($t),p(this,tt,"f").call(this,$t)])}catch(ke){throw p(this,vt,"f").call(this),new Error(ke instanceof Error&&ke.message||"Unknown error")}})),vt.set(this,()=>f(this,void 0,void 0,function*(){var pe;p(this,H,"f").clear(),E(this,Y,!1),E(this,Q,(pe=p(this,Q,"f"),pe++,pe)),E(this,N,void 0),p(this,m,"m",Se).call(this,"change",{accounts:this.accounts})})),yt.set(this,pe=>f(this,void 0,void 0,function*(){var fe;const Pe=(fe=p(this,N,"f"))===null||fe===void 0?void 0:fe.wallet_uri_base,ke=Pe?{baseUri:Pe}:void 0,mt=p(this,Q,"f");try{return yield s.transact(pe,ke)}catch($t){throw p(this,Q,"f")!==mt&&(yield new Promise(()=>{})),$t instanceof Error&&$t.name==="SolanaMobileWalletAdapterError"&&$t.code==="ERROR_WALLET_NOT_FOUND"&&(yield p(this,be,"f").call(this,this)),$t}})),et.set(this,()=>{if(!p(this,N,"f"))throw new Error("Wallet not connected");return{authToken:p(this,N,"f").auth_token,chain:p(this,N,"f").chain}}),ht.set(this,pe=>pe.map(fe=>{var Pe,ke;const mt=b(fe.address);return{address:h.default.encode(mt),publicKey:mt,label:fe.label,icon:fe.icon,chains:(Pe=fe.chains)!==null&&Pe!==void 0?Pe:p(this,ee,"f"),features:(ke=fe.features)!==null&&ke!==void 0?ke:Mn}})),Mt.set(this,pe=>f(this,void 0,void 0,function*(){const{authToken:fe,chain:Pe}=p(this,et,"f").call(this);try{return yield p(this,yt,"f").call(this,ke=>f(this,void 0,void 0,function*(){return yield p(this,Je,"f").call(this,ke,fe,Pe),yield ke.signTransactions({transactions:pe})}))}catch(ke){throw new Error(ke instanceof Error&&ke.message||"Unknown error")}})),dt.set(this,(pe,fe)=>f(this,void 0,void 0,function*(){const{authToken:Pe,chain:ke}=p(this,et,"f").call(this);try{return yield p(this,yt,"f").call(this,mt=>f(this,void 0,void 0,function*(){const[$t,Ur]=yield Promise.all([mt.getCapabilities(),p(this,Je,"f").call(this,mt,Pe,ke)]);if($t.supports_sign_and_send_transactions)return(yield mt.signAndSendTransactions(Object.assign(Object.assign({},fe),{transactions:[pe]})))[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(mt){throw new Error(mt instanceof Error&&mt.message||"Unknown error")}})),Ee.set(this,(...pe)=>f(this,void 0,void 0,function*(){const fe=[];for(const Pe of pe){const ke=e.VersionedTransaction.deserialize(Pe.transaction),mt=yield p(this,dt,"f").call(this,ke,Pe.options);fe.push({signature:h.default.decode(mt)})}return fe})),Te.set(this,(...pe)=>f(this,void 0,void 0,function*(){const fe=pe.map(({transaction:ke})=>e.VersionedTransaction.deserialize(ke));return(yield p(this,Mt,"f").call(this,fe)).map(ke=>({signedTransaction:w(ke)?ke.serialize():new Uint8Array(ke.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))})),Z.set(this,(...pe)=>f(this,void 0,void 0,function*(){const{authToken:fe,chain:Pe}=p(this,et,"f").call(this),ke=pe.map(({account:$t})=>g($t.publicKey)),mt=pe.map(({message:$t})=>$t);try{return yield p(this,yt,"f").call(this,$t=>f(this,void 0,void 0,function*(){return yield p(this,Je,"f").call(this,$t,fe,Pe),(yield $t.signMessages({addresses:ke,payloads:mt})).map(wr=>({signedMessage:wr,signature:wr.slice(-oi)}))}))}catch($t){throw new Error($t instanceof Error&&$t.message||"Unknown error")}})),F.set(this,(...pe)=>f(this,void 0,void 0,function*(){const fe=[];if(pe.length>1)for(const Pe of pe)fe.push(yield p(this,K,"f").call(this,Pe));else return[yield p(this,K,"f").call(this,pe[0])];return fe})),K.set(this,pe=>f(this,void 0,void 0,function*(){var fe,Pe;E(this,Y,!0);try{const ke=yield p(this,Be,"f").call(this,Object.assign(Object.assign({},pe),{domain:(fe=pe==null?void 0:pe.domain)!==null&&fe!==void 0?fe:window.location.host}));if(!ke.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const mt=ke.sign_in_result.address;return{account:Object.assign(Object.assign({},(Pe=ke.accounts.find(Ur=>Ur.address==mt))!==null&&Pe!==void 0?Pe:{address:mt}),{publicKey:b(mt)}),signedMessage:b(ke.sign_in_result.signed_message),signature:b(ke.sign_in_result.signature)}}catch(ke){throw new Error(ke instanceof Error&&ke.message||"Unknown error")}finally{E(this,Y,!1)}})),E(this,H,Oe.authorizationCache),E(this,x,Oe.appIdentity),E(this,ee,Oe.chains),E(this,re,Oe.chainSelector),E(this,be,Oe.onWalletNotFound),E(this,oe,{[t.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:p(this,Ee,"f")}})}get version(){return p(this,R,"f")}get name(){return p(this,C,"f")}get url(){return p(this,v,"f")}get icon(){return p(this,O,"f")}get chains(){return p(this,ee,"f")}get features(){return Object.assign({[n.StandardConnect]:{version:"1.0.0",connect:p(this,ze,"f")},[n.StandardDisconnect]:{version:"1.0.0",disconnect:p(this,vt,"f")},[n.StandardEvents]:{version:"1.0.0",on:p(this,Ce,"f")},[t.SolanaSignMessage]:{version:"1.0.0",signMessage:p(this,Z,"f")},[t.SolanaSignIn]:{version:"1.0.0",signIn:p(this,F,"f")}},p(this,oe,"f"))}get accounts(){var Oe,pe;return(pe=(Oe=p(this,N,"f"))===null||Oe===void 0?void 0:Oe.accounts)!==null&&pe!==void 0?pe:[]}get connected(){return!!p(this,N,"f")}get isAuthorized(){return!!p(this,N,"f")}get currentAuthorization(){return p(this,N,"f")}get cachedAuthorizationResult(){return p(this,H,"f").get()}}M=new WeakMap,R=new WeakMap,C=new WeakMap,v=new WeakMap,O=new WeakMap,x=new WeakMap,N=new WeakMap,H=new WeakMap,Y=new WeakMap,Q=new WeakMap,ee=new WeakMap,re=new WeakMap,oe=new WeakMap,be=new WeakMap,Ce=new WeakMap,ze=new WeakMap,Be=new WeakMap,tt=new WeakMap,He=new WeakMap,Je=new WeakMap,vt=new WeakMap,yt=new WeakMap,et=new WeakMap,ht=new WeakMap,Mt=new WeakMap,dt=new WeakMap,Ee=new WeakMap,Te=new WeakMap,Z=new WeakMap,F=new WeakMap,K=new WeakMap,m=new WeakSet,Se=function(Oe,...pe){var fe;(fe=p(this,M,"f")[Oe])===null||fe===void 0||fe.forEach(Pe=>Pe.apply(null,pe))},xe=function(Oe,pe){var fe;p(this,M,"f")[Oe]=(fe=p(this,M,"f")[Oe])===null||fe===void 0?void 0:fe.filter(Pe=>pe!==Pe)};class Ts{constructor(Oe){J.add(this),ie.set(this,{}),ce.set(this,"1.0.0"),de.set(this,us),$e.set(this,"https://solanamobile.com/wallets"),Ye.set(this,_),Fe.set(this,void 0),We.set(this,void 0),at.set(this,void 0),ft.set(this,!1),Ut.set(this,0),Kt.set(this,[]),pt.set(this,void 0),Ft.set(this,void 0),Vt.set(this,void 0),gt.set(this,void 0),Et.set(this,void 0),Rt.set(this,(pe,fe)=>{var Pe;return!((Pe=p(this,ie,"f")[pe])===null||Pe===void 0)&&Pe.push(fe)||(p(this,ie,"f")[pe]=[fe]),()=>p(this,J,"m",Nt).call(this,pe,fe)}),St.set(this,({silent:pe}={})=>f(this,void 0,void 0,function*(){if(p(this,ft,"f")||this.connected)return{accounts:this.accounts};E(this,ft,!0);try{yield p(this,it,"f").call(this)}catch(fe){throw new Error(fe instanceof Error&&fe.message||"Unknown error")}finally{E(this,ft,!1)}return{accounts:this.accounts}})),it.set(this,pe=>f(this,void 0,void 0,function*(){try{const fe=yield p(this,at,"f").get();if(fe)return p(this,Ct,"f").call(this,fe),fe;p(this,Et,"f")&&E(this,Et,void 0,"f");const Pe=yield p(this,pt,"f").select(p(this,Kt,"f"));return yield p(this,Yt,"f").call(this,ke=>f(this,void 0,void 0,function*(){const[mt,$t]=yield Promise.all([ke.getCapabilities(),ke.authorize({chain:Pe,identity:p(this,Fe,"f"),sign_in_payload:pe})]),Ur=p(this,Xt,"f").call(this,$t.accounts),wr=Object.assign(Object.assign({},$t),{accounts:Ur,chain:Pe});return Promise.all([p(this,Dt,"f").call(this,mt),p(this,at,"f").set(wr),p(this,Ct,"f").call(this,wr)]),wr}))}catch(fe){throw new Error(fe instanceof Error&&fe.message||"Unknown error")}})),Ct.set(this,pe=>f(this,void 0,void 0,function*(){var fe;const Pe=p(this,We,"f")==null||((fe=p(this,We,"f"))===null||fe===void 0?void 0:fe.accounts.length)!==pe.accounts.length||p(this,We,"f").accounts.some((ke,mt)=>ke.address!==pe.accounts[mt].address);E(this,We,pe),Pe&&p(this,J,"m",rt).call(this,"change",{accounts:this.accounts})})),Dt.set(this,pe=>f(this,void 0,void 0,function*(){const fe=pe.features.includes("solana:signTransactions"),Pe=pe.supports_sign_and_send_transactions||pe.features.includes("solana:signAndSendTransaction"),ke=t.SolanaSignAndSendTransaction in this.features!==Pe||t.SolanaSignTransaction in this.features!==fe;E(this,Ft,Object.assign(Object.assign({},Pe&&{[t.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:pe.supported_transaction_versions,signAndSendTransaction:p(this,fr,"f")}}),fe&&{[t.SolanaSignTransaction]:{version:"1.0.0",supportedTransactionVersions:pe.supported_transaction_versions,signTransaction:p(this,Zt,"f")}})),ke&&p(this,J,"m",rt).call(this,"change",{features:this.features})})),bt.set(this,(pe,fe,Pe)=>f(this,void 0,void 0,function*(){try{const ke=yield pe.authorize({auth_token:fe,identity:p(this,Fe,"f")}),mt=p(this,Xt,"f").call(this,ke.accounts),$t=Object.assign(Object.assign({},ke),{accounts:mt,chain:Pe});Promise.all([p(this,at,"f").set($t),p(this,Ct,"f").call(this,$t)])}catch(ke){throw p(this,tr,"f").call(this),new Error(ke instanceof Error&&ke.message||"Unknown error")}})),tr.set(this,()=>f(this,void 0,void 0,function*(){var pe,fe;(pe=p(this,Et,"f"))===null||pe===void 0||pe.close(),p(this,at,"f").clear(),E(this,ft,!1),E(this,Ut,(fe=p(this,Ut,"f"),fe++,fe)),E(this,We,void 0),E(this,Et,void 0),p(this,J,"m",rt).call(this,"change",{accounts:this.accounts})})),Yt.set(this,pe=>f(this,void 0,void 0,function*(){var fe;const Pe=(fe=p(this,We,"f"))===null||fe===void 0?void 0:fe.wallet_uri_base,mt=Object.assign(Object.assign({},Pe?{baseUri:Pe}:void 0),{remoteHostAuthority:p(this,gt,"f")}),$t=p(this,Ut,"f"),Ur=new B;if(p(this,Et,"f"))return pe(p(this,Et,"f").wallet);try{const{associationUrl:wr,close:Rs,wallet:ka}=yield s.startRemoteScenario(mt),Ws=Ur.addEventListener("close",Np=>{Np&&Rs()});return Ur.initWithQR(wr.toString()),Ur.open(),E(this,Et,{close:Rs,wallet:yield ka},"f"),Ws(),Ur.close(),yield pe(p(this,Et,"f").wallet)}catch(wr){throw Ur.close(),p(this,Ut,"f")!==$t&&(yield new Promise(()=>{})),wr instanceof Error&&wr.name==="SolanaMobileWalletAdapterError"&&wr.code==="ERROR_WALLET_NOT_FOUND"&&(yield p(this,Vt,"f").call(this,this)),wr}})),It.set(this,()=>{if(!p(this,We,"f"))throw new Error("Wallet not connected");return{authToken:p(this,We,"f").auth_token,chain:p(this,We,"f").chain}}),Xt.set(this,pe=>pe.map(fe=>{var Pe,ke;const mt=b(fe.address);return{address:h.default.encode(mt),publicKey:mt,label:fe.label,icon:fe.icon,chains:(Pe=fe.chains)!==null&&Pe!==void 0?Pe:p(this,Kt,"f"),features:(ke=fe.features)!==null&&ke!==void 0?ke:Mn}})),ar.set(this,pe=>f(this,void 0,void 0,function*(){const{authToken:fe,chain:Pe}=p(this,It,"f").call(this);try{return yield p(this,Yt,"f").call(this,ke=>f(this,void 0,void 0,function*(){return yield p(this,bt,"f").call(this,ke,fe,Pe),yield ke.signTransactions({transactions:pe})}))}catch(ke){throw new Error(ke instanceof Error&&ke.message||"Unknown error")}})),xt.set(this,(pe,fe)=>f(this,void 0,void 0,function*(){const{authToken:Pe,chain:ke}=p(this,It,"f").call(this);try{return yield p(this,Yt,"f").call(this,mt=>f(this,void 0,void 0,function*(){const[$t,Ur]=yield Promise.all([mt.getCapabilities(),p(this,bt,"f").call(this,mt,Pe,ke)]);if($t.supports_sign_and_send_transactions)return(yield mt.signAndSendTransactions(Object.assign(Object.assign({},fe),{transactions:[pe]})))[0];throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(mt){throw new Error(mt instanceof Error&&mt.message||"Unknown error")}})),fr.set(this,(...pe)=>f(this,void 0,void 0,function*(){const fe=[];for(const Pe of pe){const ke=e.VersionedTransaction.deserialize(Pe.transaction),mt=yield p(this,xt,"f").call(this,ke,Pe.options);fe.push({signature:h.default.decode(mt)})}return fe})),Zt.set(this,(...pe)=>f(this,void 0,void 0,function*(){const fe=pe.map(({transaction:ke})=>e.VersionedTransaction.deserialize(ke));return(yield p(this,ar,"f").call(this,fe)).map(ke=>({signedTransaction:w(ke)?ke.serialize():new Uint8Array(ke.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))})),pr.set(this,(...pe)=>f(this,void 0,void 0,function*(){const{authToken:fe,chain:Pe}=p(this,It,"f").call(this),ke=pe.map(({account:$t})=>g($t.publicKey)),mt=pe.map(({message:$t})=>$t);try{return yield p(this,Yt,"f").call(this,$t=>f(this,void 0,void 0,function*(){return yield p(this,bt,"f").call(this,$t,fe,Pe),(yield $t.signMessages({addresses:ke,payloads:mt})).map(wr=>({signedMessage:wr,signature:wr.slice(-oi)}))}))}catch($t){throw new Error($t instanceof Error&&$t.message||"Unknown error")}})),Mr.set(this,(...pe)=>f(this,void 0,void 0,function*(){const fe=[];if(pe.length>1)for(const Pe of pe)fe.push(yield p(this,Hi,"f").call(this,Pe));else return[yield p(this,Hi,"f").call(this,pe[0])];return fe})),Hi.set(this,pe=>f(this,void 0,void 0,function*(){var fe,Pe;E(this,ft,!0);try{const ke=yield p(this,it,"f").call(this,Object.assign(Object.assign({},pe),{domain:(fe=pe==null?void 0:pe.domain)!==null&&fe!==void 0?fe:window.location.host}));if(!ke.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const mt=ke.sign_in_result.address;return{account:Object.assign(Object.assign({},(Pe=ke.accounts.find(Ur=>Ur.address==mt))!==null&&Pe!==void 0?Pe:{address:mt}),{publicKey:b(mt)}),signedMessage:b(ke.sign_in_result.signed_message),signature:b(ke.sign_in_result.signature)}}catch(ke){throw new Error(ke instanceof Error&&ke.message||"Unknown error")}finally{E(this,ft,!1)}})),E(this,at,Oe.authorizationCache),E(this,Fe,Oe.appIdentity),E(this,Kt,Oe.chains),E(this,pt,Oe.chainSelector),E(this,gt,Oe.remoteHostAuthority),E(this,Vt,Oe.onWalletNotFound),E(this,Ft,{[t.SolanaSignAndSendTransaction]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:p(this,fr,"f")}})}get version(){return p(this,ce,"f")}get name(){return p(this,de,"f")}get url(){return p(this,$e,"f")}get icon(){return p(this,Ye,"f")}get chains(){return p(this,Kt,"f")}get features(){return Object.assign({[n.StandardConnect]:{version:"1.0.0",connect:p(this,St,"f")},[n.StandardDisconnect]:{version:"1.0.0",disconnect:p(this,tr,"f")},[n.StandardEvents]:{version:"1.0.0",on:p(this,Rt,"f")},[t.SolanaSignMessage]:{version:"1.0.0",signMessage:p(this,pr,"f")},[t.SolanaSignIn]:{version:"1.0.0",signIn:p(this,Mr,"f")}},p(this,Ft,"f"))}get accounts(){var Oe,pe;return(pe=(Oe=p(this,We,"f"))===null||Oe===void 0?void 0:Oe.accounts)!==null&&pe!==void 0?pe:[]}get connected(){return!!p(this,Et,"f")&&!!p(this,We,"f")}get isAuthorized(){return!!p(this,We,"f")}get currentAuthorization(){return p(this,We,"f")}get cachedAuthorizationResult(){return p(this,at,"f").get()}}ie=new WeakMap,ce=new WeakMap,de=new WeakMap,$e=new WeakMap,Ye=new WeakMap,Fe=new WeakMap,We=new WeakMap,at=new WeakMap,ft=new WeakMap,Ut=new WeakMap,Kt=new WeakMap,pt=new WeakMap,Ft=new WeakMap,Vt=new WeakMap,gt=new WeakMap,Et=new WeakMap,Rt=new WeakMap,St=new WeakMap,it=new WeakMap,Ct=new WeakMap,Dt=new WeakMap,bt=new WeakMap,tr=new WeakMap,Yt=new WeakMap,It=new WeakMap,Xt=new WeakMap,ar=new WeakMap,xt=new WeakMap,fr=new WeakMap,Zt=new WeakMap,pr=new WeakMap,Mr=new WeakMap,Hi=new WeakMap,J=new WeakSet,rt=function(Oe,...pe){var fe;(fe=p(this,ie,"f")[Oe])===null||fe===void 0||fe.forEach(Pe=>Pe.apply(null,pe))},Nt=function(Oe,pe){var fe;p(this,ie,"f")[Oe]=(fe=p(this,ie,"f")[Oe])===null||fe===void 0?void 0:fe.filter(Pe=>pe!==Pe)};var Fs=function(lt,Oe,pe,fe,Pe){if(fe==="m")throw new TypeError("Private method is not writable");if(fe==="a"&&!Pe)throw new TypeError("Private accessor was defined without a setter");if(typeof Oe=="function"?lt!==Oe||!Pe:!Oe.has(lt))throw new TypeError("Cannot write private member to an object whose class did not declare it");return fe==="a"?Pe.call(lt,pe):Pe?Pe.value=pe:Oe.set(lt,pe),pe},go=function(lt,Oe,pe,fe){if(pe==="a"&&!fe)throw new TypeError("Private accessor was defined without a getter");if(typeof Oe=="function"?lt!==Oe||!fe:!Oe.has(lt))throw new TypeError("Cannot read private member from an object whose class did not declare it");return pe==="m"?fe:pe==="a"?fe.call(lt):fe?fe.value:Oe.get(lt)},gi;function ai(lt){const Oe=({register:pe})=>pe(lt);try{window.dispatchEvent(new Qn(Oe))}catch(pe){console.error(`wallet-standard:register-wallet event could not be dispatched
`,pe)}try{window.addEventListener("wallet-standard:app-ready",({detail:pe})=>Oe(pe))}catch(pe){console.error(`wallet-standard:app-ready event listener could not be added
`,pe)}}class Qn extends Event{constructor(Oe){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),gi.set(this,void 0),Fs(this,gi,Oe,"f")}get detail(){return go(this,gi,"f")}get type(){return"wallet-standard:register-wallet"}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}gi=new WeakMap;function Ms(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}function Xn(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function xi(lt){Ms()?ai(new qs(lt)):Xn()&&lt.remoteHostAuthority!==void 0&&ai(new Ts(Object.assign(Object.assign({},lt),{remoteHostAuthority:lt.remoteHostAuthority})))}const Ns="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",Os="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class vc extends G{constructor(){super(...arguments),this.contentStyles=hs,this.contentHtml=Da}initWithError(Oe){super.init(),this.populateError(Oe)}populateError(Oe){var pe,fe;const Pe=(pe=this.dom)===null||pe===void 0?void 0:pe.getElementById("mobile-wallet-adapter-error-message"),ke=(fe=this.dom)===null||fe===void 0?void 0:fe.getElementById("mobile-wallet-adapter-error-action");if(Pe){if(Oe.name==="SolanaMobileWalletAdapterError")switch(Oe.code){case"ERROR_WALLET_NOT_FOUND":Pe.innerHTML=Ns,ke&&ke.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":Pe.innerHTML=Os,ke&&(ke.style.display="none");return}Pe.innerHTML=`An unexpected error occurred: ${Oe.message}`}else console.log("Failed to locate error dialog element")}}const Da=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,hs=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function $a(){return f(this,void 0,void 0,function*(){if(typeof window<"u"){const lt=window.navigator.userAgent.toLowerCase(),Oe=new vc;lt.includes("wv")?Oe.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):Oe.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),Oe.open()}})}function Mp(){return()=>f(this,void 0,void 0,function*(){$a()})}const Hs="SolanaMobileWalletAdapterDefaultAuthorizationCache";function vu(){let lt;try{lt=window.localStorage}catch{}return{clear(){return f(this,void 0,void 0,function*(){if(lt)try{lt.removeItem(Hs)}catch{}})},get(){return f(this,void 0,void 0,function*(){if(lt)try{const Oe=JSON.parse(lt.getItem(Hs));if(Oe&&Oe.accounts){const pe=Oe.accounts.map(fe=>Object.assign(Object.assign({},fe),{publicKey:"publicKey"in fe?new Uint8Array(Object.values(fe.publicKey)):new e.PublicKey(fe.address).toBytes()}));return Object.assign(Object.assign({},Oe),{accounts:pe})}else return Oe||void 0}catch{}})},set(Oe){return f(this,void 0,void 0,function*(){if(lt)try{lt.setItem(Hs,JSON.stringify(Oe))}catch{}})}}}function Ec(){return{select(lt){return f(this,void 0,void 0,function*(){return lt.length===1?lt[0]:lt.includes(i.SOLANA_MAINNET_CHAIN)?i.SOLANA_MAINNET_CHAIN:lt[0]})}}}return ga.LocalSolanaMobileWalletAdapterWallet=qs,ga.RemoteSolanaMobileWalletAdapterWallet=Ts,ga.SolanaMobileWalletAdapterWalletName=us,ga.createDefaultAuthorizationCache=vu,ga.createDefaultChainSelector=Ec,ga.createDefaultWalletNotFoundHandler=Mp,ga.defaultErrorModalWalletNotFoundHandler=$a,ga.registerMwa=xi,ga}var iT;function YK(){if(iT)return Fa;iT=1,Object.defineProperty(Fa,"__esModule",{value:!0});var t=sK(),e=RD,r=bA(),n=GK();function i(O,x,N,H){function Y(Q){return Q instanceof N?Q:new N(function(ee){ee(Q)})}return new(N||(N=Promise))(function(Q,ee){function re(Ce){try{be(H.next(Ce))}catch(Se){ee(Se)}}function oe(Ce){try{be(H.throw(Ce))}catch(Se){ee(Se)}}function be(Ce){Ce.done?Q(Ce.value):Y(Ce.value).then(re,oe)}be((H=H.apply(O,[])).next())})}function s(O,x,N,H){if(N==="a"&&!H)throw new TypeError("Private accessor was defined without a getter");if(typeof x=="function"?O!==x||!H:!x.has(O))throw new TypeError("Cannot read private member from an object whose class did not declare it");return N==="m"?H:N==="a"?H.call(O):H?H.value:x.get(O)}function o(O,x,N,H,Y){if(typeof x=="function"?O!==x||!0:!x.has(O))throw new TypeError("Cannot write private member to an object whose class did not declare it");return x.set(O,N),N}const c="standard:connect",u="standard:disconnect",h="standard:events";function f(O){return window.btoa(String.fromCharCode.call(null,...O))}function p(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var E,S,A,I,$,L,k,U,q,j,z,V,G;const B="Mobile Wallet Adapter",W=64;function D(O){return"version"in O}function _(O){switch(O){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return O}}class w extends t.BaseSignInMessageSignerWalletAdapter{constructor(x,N){super(),E.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),S.set(this,void 0),A.set(this,!1),I.set(this,p()?t.WalletReadyState.Loadable:t.WalletReadyState.Unsupported),$.set(this,void 0),L.set(this,void 0),k.set(this,void 0),U.set(this,H=>i(this,void 0,void 0,function*(){if(H.accounts&&H.accounts.length>0){s(this,E,"m",j).call(this);const Y=yield s(this,$,"f").call(this,H.accounts);Y!==s(this,L,"f")&&(o(this,L,Y),o(this,k,void 0),this.emit("connect",this.publicKey))}})),o(this,$,H=>i(this,void 0,void 0,function*(){var Y;const Q=yield N.addressSelector.select(H.map(({publicKey:ee})=>f(ee)));return(Y=H.find(({publicKey:ee})=>f(ee)===Q))!==null&&Y!==void 0?Y:H[0]})),o(this,S,x),s(this,S,"f").features[h].on("change",s(this,U,"f")),this.name=s(this,S,"f").name,this.icon=s(this,S,"f").icon,this.url=s(this,S,"f").url}get publicKey(){var x;if(!s(this,k,"f")&&s(this,L,"f"))try{o(this,k,new e.PublicKey(s(this,L,"f").publicKey),"f")}catch(N){throw new t.WalletPublicKeyError(N instanceof Error&&(N==null?void 0:N.message)||"Unknown error",N)}return(x=s(this,k,"f"))!==null&&x!==void 0?x:null}get connected(){return s(this,S,"f").connected}get connecting(){return s(this,A,"f")}get readyState(){return s(this,I,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return i(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return i(this,void 0,void 0,function*(){s(this,E,"m",q).call(this,!0)})}connect(){return i(this,void 0,void 0,function*(){s(this,E,"m",q).call(this)})}performAuthorization(x){return i(this,void 0,void 0,function*(){try{const N=yield s(this,S,"f").cachedAuthorizationResult;return N?(yield s(this,S,"f").features[c].connect({silent:!0}),N):(x?yield s(this,S,"f").features[r.SolanaSignIn].signIn(x):yield s(this,S,"f").features[c].connect(),yield yield s(this,S,"f").cachedAuthorizationResult)}catch(N){throw new t.WalletConnectionError(N instanceof Error&&N.message||"Unknown error",N)}})}disconnect(){return i(this,void 0,void 0,function*(){return yield s(this,E,"m",G).call(this,()=>i(this,void 0,void 0,function*(){o(this,A,!1),o(this,k,void 0),o(this,L,void 0),yield s(this,S,"f").features[u].disconnect(),this.emit("disconnect")}))})}signIn(x){return i(this,void 0,void 0,function*(){return s(this,E,"m",G).call(this,()=>i(this,void 0,void 0,function*(){var N;if(s(this,I,"f")!==t.WalletReadyState.Installed&&s(this,I,"f")!==t.WalletReadyState.Loadable)throw new t.WalletNotReadyError;o(this,A,!0);try{const H=yield s(this,S,"f").features[r.SolanaSignIn].signIn(Object.assign(Object.assign({},x),{domain:(N=x==null?void 0:x.domain)!==null&&N!==void 0?N:window.location.host}));if(H.length>0)return H[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(H){throw new t.WalletConnectionError(H instanceof Error&&H.message||"Unknown error",H)}finally{o(this,A,!1)}}))})}signMessage(x){return i(this,void 0,void 0,function*(){return yield s(this,E,"m",G).call(this,()=>i(this,void 0,void 0,function*(){const N=s(this,E,"m",z).call(this);try{return(yield s(this,S,"f").features[r.SolanaSignMessage].signMessage({account:N,message:x}))[0].signature}catch(H){throw new t.WalletSignMessageError(H==null?void 0:H.message,H)}}))})}sendTransaction(x,N,H){return i(this,void 0,void 0,function*(){return yield s(this,E,"m",G).call(this,()=>i(this,void 0,void 0,function*(){const Y=s(this,E,"m",z).call(this);try{let Q=function(){let ee;switch(N.commitment){case"confirmed":case"finalized":case"processed":ee=N.commitment;break;default:ee="finalized"}let re;switch(H==null?void 0:H.preflightCommitment){case"confirmed":case"finalized":case"processed":re=H.preflightCommitment;break;case void 0:re=ee;break;default:re="finalized"}return(re==="finalized"?2:re==="confirmed"?1:0)<(ee==="finalized"?2:ee==="confirmed"?1:0)?re:ee};if(r.SolanaSignAndSendTransaction in s(this,S,"f").features){const ee=_(s(this,S,"f").currentAuthorization.chain),[re]=(yield s(this,S,"f").features[r.SolanaSignAndSendTransaction].signAndSendTransaction({account:Y,transaction:x.serialize(),chain:ee,options:H?{skipPreflight:H.skipPreflight,maxRetries:H.maxRetries}:void 0})).map(oe=>f(oe.signature));return re}else{const[ee]=yield s(this,E,"m",V).call(this,[x]);if(D(ee))return yield N.sendTransaction(ee);{const re=ee.serialize();return yield N.sendRawTransaction(re,Object.assign(Object.assign({},H),{preflightCommitment:Q()}))}}}catch(Q){throw new t.WalletSendTransactionError(Q==null?void 0:Q.message,Q)}}))})}signTransaction(x){return i(this,void 0,void 0,function*(){return yield s(this,E,"m",G).call(this,()=>i(this,void 0,void 0,function*(){const[N]=yield s(this,E,"m",V).call(this,[x]);return N}))})}signAllTransactions(x){return i(this,void 0,void 0,function*(){return yield s(this,E,"m",G).call(this,()=>i(this,void 0,void 0,function*(){return yield s(this,E,"m",V).call(this,x)}))})}}S=new WeakMap,A=new WeakMap,I=new WeakMap,$=new WeakMap,L=new WeakMap,k=new WeakMap,U=new WeakMap,E=new WeakSet,q=function(x=!1){return i(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield s(this,E,"m",G).call(this,()=>i(this,void 0,void 0,function*(){if(s(this,I,"f")!==t.WalletReadyState.Installed&&s(this,I,"f")!==t.WalletReadyState.Loadable)throw new t.WalletNotReadyError;o(this,A,!0);try{yield s(this,S,"f").features[c].connect({silent:x})}catch(N){throw new t.WalletConnectionError(N instanceof Error&&N.message||"Unknown error",N)}finally{o(this,A,!1)}}))})},j=function(){s(this,I,"f")!==t.WalletReadyState.Installed&&this.emit("readyStateChange",o(this,I,t.WalletReadyState.Installed))},z=function(){if(!s(this,S,"f").isAuthorized||!s(this,L,"f"))throw new t.WalletNotConnectedError;return s(this,L,"f")},V=function(x){return i(this,void 0,void 0,function*(){const N=s(this,E,"m",z).call(this);try{if(r.SolanaSignTransaction in s(this,S,"f").features)return s(this,S,"f").features[r.SolanaSignTransaction].signTransaction(...x.map(H=>({account:N,transaction:H.serialize()}))).then(H=>H.map(Y=>{const Q=Y.signedTransaction,re=Q[0]*W+1;return e.VersionedMessage.deserializeMessageVersion(Q.slice(re,Q.length))==="legacy"?e.Transaction.from(Q):e.VersionedTransaction.deserialize(Q)}));throw new Error("Connected wallet does not support signing transactions")}catch(H){throw new t.WalletSignTransactionError(H==null?void 0:H.message,H)}})},G=function(x){return i(this,void 0,void 0,function*(){try{return yield x()}catch(N){throw this.emit("error",N),N}})};class g extends w{constructor(x){var N;const H=_((N=x.chain)!==null&&N!==void 0?N:x.cluster);super(new n.LocalSolanaMobileWalletAdapterWallet({appIdentity:x.appIdentity,authorizationCache:{set:x.authorizationResultCache.set,get:()=>i(this,void 0,void 0,function*(){const Y=yield x.authorizationResultCache.get();return Y&&"chain"in Y?Y:Y?Object.assign(Object.assign({},Y),{chain:H}):void 0}),clear:x.authorizationResultCache.clear},chains:[H],chainSelector:n.createDefaultChainSelector(),onWalletNotFound:()=>i(this,void 0,void 0,function*(){x.onWalletNotFound(this)})}),{addressSelector:x.addressSelector,chain:H})}}class b extends w{constructor(x){const N=_(x.chain);super(new n.RemoteSolanaMobileWalletAdapterWallet({appIdentity:x.appIdentity,authorizationCache:{set:x.authorizationResultCache.set,get:()=>i(this,void 0,void 0,function*(){const H=yield x.authorizationResultCache.get();return H&&"chain"in H?H:H?Object.assign(Object.assign({},H),{chain:N}):void 0}),clear:x.authorizationResultCache.clear},chains:[N],chainSelector:n.createDefaultChainSelector(),remoteHostAuthority:x.remoteHostAuthority,onWalletNotFound:()=>i(this,void 0,void 0,function*(){x.onWalletNotFound(this)})}),{addressSelector:x.addressSelector,chain:N})}}class m extends g{}function M(){return{select(O){return i(this,void 0,void 0,function*(){return O[0]})}}}function R(){return n.createDefaultAuthorizationCache()}function C(O){return i(this,void 0,void 0,function*(){return n.defaultErrorModalWalletNotFoundHandler()})}function v(){return C}return Fa.LocalSolanaMobileWalletAdapter=g,Fa.RemoteSolanaMobileWalletAdapter=b,Fa.SolanaMobileWalletAdapter=m,Fa.SolanaMobileWalletAdapterWalletName=B,Fa.createDefaultAddressSelector=M,Fa.createDefaultAuthorizationResultCache=R,Fa.createDefaultWalletNotFoundHandler=v,Fa}var Yl=YK();function s_(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const lS="solana:mainnet",WD="solana:devnet",KD="solana:testnet",ZK="solana:localnet",QK="https://api.mainnet-beta.solana.com";function XK(t){return t.includes(QK)?lS:/\bdevnet\b/i.test(t)?WD:/\btestnet\b/i.test(t)?KD:/\blocalhost\b/i.test(t)||/\b127\.0\.0\.1\b/.test(t)?ZK:lS}var JK=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},eV=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},r1;function tV(t){const e=({register:r})=>r(t);try{window.dispatchEvent(new rV(e))}catch(r){console.error(`wallet-standard:register-wallet event could not be dispatched
`,r)}try{window.addEventListener("wallet-standard:app-ready",({detail:r})=>e(r))}catch(r){console.error(`wallet-standard:app-ready event listener could not be added
`,r)}}class rV extends Event{get detail(){return JK(this,r1,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),r1.set(this,void 0),eV(this,r1,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}r1=new WeakMap;function nV(t,e){if(t===e)return!0;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function iV(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let h=0;h<e.length;h++)e[h]=255;for(let h=0;h<t.length;h++){const f=t.charAt(h),p=f.charCodeAt(0);if(e[p]!==255)throw new TypeError(f+" is ambiguous");e[p]=h}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";let f=0,p=0,E=0;const S=h.length;for(;E!==S&&h[E]===0;)E++,f++;const A=(S-E)*s+1>>>0,I=new Uint8Array(A);for(;E!==S;){let k=h[E],U=0;for(let q=A-1;(k!==0||U<p)&&q!==-1;q--,U++)k+=256*I[q]>>>0,I[q]=k%r>>>0,k=k/r>>>0;if(k!==0)throw new Error("Non-zero carry");p=U,E++}let $=A-p;for(;$!==A&&I[$]===0;)$++;let L=n.repeat(f);for(;$<A;++$)L+=t.charAt(I[$]);return L}function c(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;let f=0,p=0,E=0;for(;h[f]===n;)p++,f++;const S=(h.length-f)*i+1>>>0,A=new Uint8Array(S);for(;f<h.length;){const k=h.charCodeAt(f);if(k>255)return;let U=e[k];if(U===255)return;let q=0;for(let j=S-1;(U!==0||q<E)&&j!==-1;j--,q++)U+=r*A[j]>>>0,A[j]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");E=q,f++}let I=S-E;for(;I!==S&&A[I]===0;)I++;const $=new Uint8Array(p+(S-I));let L=p;for(;I!==S;)$[L++]=A[I++];return $}function u(h){const f=c(h);if(f)return f;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var sV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const oV=iV(sV);var _t=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},di=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},ts,oo,lh,uh,Zu,ug,D1,kr,$1,uS,n1,hS,Ag,dS,sT,oT,aT,cT;class aV extends AD{get name(){return _t(this,kr,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return _t(this,kr,"f").icon}get readyState(){return _t(this,$1,"f")}get publicKey(){return _t(this,lh,"f")}get connecting(){return _t(this,uh,"f")}get supportedTransactionVersions(){return _t(this,D1,"f")}get wallet(){return _t(this,kr,"f")}get standard(){return!0}constructor({wallet:e}){super(),ts.add(this),oo.set(this,void 0),lh.set(this,void 0),uh.set(this,void 0),Zu.set(this,void 0),ug.set(this,void 0),D1.set(this,void 0),kr.set(this,void 0),$1.set(this,typeof window>"u"||typeof document>"u"?Tr.Unsupported:Tr.Installed),dS.set(this,r=>{if("accounts"in r){const n=_t(this,kr,"f").accounts[0];_t(this,oo,"f")&&!_t(this,Zu,"f")&&n!==_t(this,oo,"f")&&(n?_t(this,ts,"m",n1).call(this,n):(this.emit("error",new fA),_t(this,ts,"m",hS).call(this)))}"features"in r&&_t(this,ts,"m",Ag).call(this)}),di(this,kr,e,"f"),di(this,oo,null,"f"),di(this,lh,null,"f"),di(this,uh,!1,"f"),di(this,Zu,!1,"f"),di(this,ug,_t(this,kr,"f").features[gA].on("change",_t(this,dS,"f")),"f"),_t(this,ts,"m",Ag).call(this)}destroy(){di(this,oo,null,"f"),di(this,lh,null,"f"),di(this,uh,!1,"f"),di(this,Zu,!1,"f");const e=_t(this,ug,"f");e&&(di(this,ug,null,"f"),e())}async autoConnect(){return _t(this,ts,"m",uS).call(this,{silent:!0})}async connect(){return _t(this,ts,"m",uS).call(this)}async disconnect(){if(cS in _t(this,kr,"f").features)try{di(this,Zu,!0,"f"),await _t(this,kr,"f").features[cS].disconnect()}catch(e){this.emit("error",new vw(e==null?void 0:e.message,e))}finally{di(this,Zu,!1,"f")}_t(this,ts,"m",hS).call(this)}async sendTransaction(e,r,n={}){try{const i=_t(this,oo,"f");if(!i)throw new kn;let s;if(il in _t(this,kr,"f").features)if(i.features.includes(il))s=il;else if(Bi in _t(this,kr,"f").features&&i.features.includes(Bi))s=Bi;else throw new ch;else if(Bi in _t(this,kr,"f").features){if(!i.features.includes(Bi))throw new ch;s=Bi}else throw new Nf;const o=XK(r.rpcEndpoint);if(!i.chains.includes(o))throw new nu;try{const{signers:c,...u}=n;let h;if(Ma(e)?(c!=null&&c.length&&e.sign(c),h=e.serialize()):(e=await this.prepareTransaction(e,r,u),c!=null&&c.length&&e.partialSign(...c),h=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===il){const[f]=await _t(this,kr,"f").features[il].signAndSendTransaction({account:i,chain:o,transaction:h,options:{preflightCommitment:s_(u.preflightCommitment||r.commitment),skipPreflight:u.skipPreflight,maxRetries:u.maxRetries,minContextSlot:u.minContextSlot}});return oV.encode(f.signature)}else{const[f]=await _t(this,kr,"f").features[Bi].signTransaction({account:i,chain:o,transaction:h,options:{preflightCommitment:s_(u.preflightCommitment||r.commitment),minContextSlot:u.minContextSlot}});return await r.sendRawTransaction(f.signedTransaction,{...u,preflightCommitment:s_(u.preflightCommitment||r.commitment)})}}catch(c){throw c instanceof Ai?c:new nu(c==null?void 0:c.message,c)}}catch(i){throw this.emit("error",i),i}}}oo=new WeakMap,lh=new WeakMap,uh=new WeakMap,Zu=new WeakMap,ug=new WeakMap,D1=new WeakMap,kr=new WeakMap,$1=new WeakMap,dS=new WeakMap,ts=new WeakSet,uS=async function(e){try{if(this.connected||this.connecting)return;if(_t(this,$1,"f")!==Tr.Installed)throw new Xf;if(di(this,uh,!0,"f"),!_t(this,kr,"f").accounts.length)try{await _t(this,kr,"f").features[pA].connect(e)}catch(n){throw new qg(n==null?void 0:n.message,n)}const r=_t(this,kr,"f").accounts[0];if(!r)throw new ch;_t(this,ts,"m",n1).call(this,r)}catch(r){throw this.emit("error",r),r}finally{di(this,uh,!1,"f")}},n1=function(e){let r;try{r=new Ke(e.address)}catch(n){throw new Fg(n==null?void 0:n.message,n)}di(this,oo,e,"f"),di(this,lh,r,"f"),_t(this,ts,"m",Ag).call(this),this.emit("connect",r)},hS=function(){di(this,oo,null,"f"),di(this,lh,null,"f"),_t(this,ts,"m",Ag).call(this),this.emit("disconnect")},Ag=function(){var r,n;const e=il in _t(this,kr,"f").features?_t(this,kr,"f").features[il].supportedTransactionVersions:_t(this,kr,"f").features[Bi].supportedTransactionVersions;di(this,D1,nV(e,["legacy"])?null:new Set(e),"f"),Bi in _t(this,kr,"f").features&&((r=_t(this,oo,"f"))!=null&&r.features.includes(Bi))?(this.signTransaction=_t(this,ts,"m",sT),this.signAllTransactions=_t(this,ts,"m",oT)):(delete this.signTransaction,delete this.signAllTransactions),bf in _t(this,kr,"f").features&&((n=_t(this,oo,"f"))!=null&&n.features.includes(bf))?this.signMessage=_t(this,ts,"m",aT):delete this.signMessage,SE in _t(this,kr,"f").features?this.signIn=_t(this,ts,"m",cT):delete this.signIn},sT=async function(e){try{const r=_t(this,oo,"f");if(!r)throw new kn;if(!(Bi in _t(this,kr,"f").features))throw new Nf;if(!r.features.includes(Bi))throw new ch;try{const i=(await _t(this,kr,"f").features[Bi].signTransaction({account:r,transaction:Ma(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return Ma(e)?Eh.deserialize(i):Ar.from(i)}catch(n){throw n instanceof Ai?n:new $o(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}},oT=async function(e){try{const r=_t(this,oo,"f");if(!r)throw new kn;if(!(Bi in _t(this,kr,"f").features))throw new Nf;if(!r.features.includes(Bi))throw new ch;try{const n=await _t(this,kr,"f").features[Bi].signTransaction(...e.map(i=>({account:r,transaction:Ma(i)?i.serialize():new Uint8Array(i.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((i,s)=>{const o=n[s].signedTransaction;return Ma(i)?Eh.deserialize(o):Ar.from(o)})}catch(n){throw new $o(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}},aT=async function(e){try{const r=_t(this,oo,"f");if(!r)throw new kn;if(!(bf in _t(this,kr,"f").features))throw new Nf;if(!r.features.includes(bf))throw new ch;try{return(await _t(this,kr,"f").features[bf].signMessage({account:r,message:e}))[0].signature}catch(n){throw new Ew(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}},cT=async function(e={}){try{if(!(SE in _t(this,kr,"f").features))throw new Nf;let r;try{[r]=await _t(this,kr,"f").features[SE].signIn(e)}catch(n){throw new zx(n==null?void 0:n.message,n)}if(!r)throw new zx;return _t(this,ts,"m",n1).call(this,r.account),r}catch(r){throw this.emit("error",r),r}};const cV=WW;var lV=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},uV=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},i1;let No;const Sw=new Set;function hV(t){Ig=void 0,Sw.add(t)}function dV(t){Ig=void 0,Sw.delete(t)}const Of={};function fV(){if(No||(No=Object.freeze({register:lT,get:pV,on:gV}),typeof window>"u"))return No;const t=Object.freeze({register:lT});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new yV(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return No}function lT(...t){var e;return t=t.filter(r=>!Sw.has(r)),t.length?(t.forEach(r=>hV(r)),(e=Of.register)==null||e.forEach(r=>fS(()=>r(...t))),function(){var n;t.forEach(i=>dV(i)),(n=Of.unregister)==null||n.forEach(i=>fS(()=>i(...t)))}):()=>{}}let Ig;function pV(){return Ig||(Ig=[...Sw]),Ig}function gV(t,e){var r;return(r=Of[t])!=null&&r.push(e)||(Of[t]=[e]),function(){var i;Of[t]=(i=Of[t])==null?void 0:i.filter(s=>e!==s)}}function fS(t){try{t()}catch(e){console.error(e)}}class yV extends Event{get detail(){return lV(this,i1,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),i1.set(this,void 0),uV(this,i1,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}i1=new WeakMap;function mV(){if(No||(No=fV(),typeof window>"u"))return No;const t=window.navigator.wallets||[];if(!Array.isArray(t))return console.error("window.navigator.wallets is not an array"),No;const{register:e}=No,r=(...n)=>n.forEach(i=>fS(()=>i({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:r})})}catch{return console.error("window.navigator.wallets could not be set"),No}return r(...t),No}function bV(t){const e=uT(()=>new Set),{get:r,on:n}=uT(()=>mV()),[i,s]=Ve.useState(()=>hT(r()));Ve.useEffect(()=>{const c=[n("register",(...u)=>s(h=>[...h,...hT(u)])),n("unregister",(...u)=>s(h=>h.filter(f=>u.some(p=>p===f.wallet))))];return()=>c.forEach(u=>u())},[n]);const o=wV(i);return Ve.useEffect(()=>{if(!o)return;const c=new Set(i);new Set(o.filter(h=>!c.has(h))).forEach(h=>h.destroy())},[o,i]),Ve.useEffect(()=>()=>i.forEach(c=>c.destroy()),[]),Ve.useMemo(()=>[...i,...t.filter(({name:c})=>i.some(u=>u.name===c)?(e.has(c)||(e.add(c),console.warn(`${c} was registered as a Standard Wallet. The Wallet Adapter for ${c} can be removed from your app.`)),!1):!0)],[i,t,e])}function uT(t){const e=Ve.useRef(void 0);return e.current===void 0&&(e.current={value:t()}),e.current.value}function wV(t){const e=Ve.useRef(void 0);return Ve.useEffect(()=>{e.current=t}),e.current}function hT(t){return t.filter(cV).map(e=>new aV({wallet:e}))}var Uf;(function(t){t[t.DESKTOP_WEB=0]="DESKTOP_WEB",t[t.MOBILE_WEB=1]="MOBILE_WEB"})(Uf||(Uf={}));function vV(t){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function EV({adapters:t,userAgentString:e}){return t.some(r=>r.name!==Yl.SolanaMobileWalletAdapterWalletName&&r.readyState===Tr.Installed)?Uf.DESKTOP_WEB:e&&/android/i.test(e)&&!vV(e)?Uf.MOBILE_WEB:Uf.DESKTOP_WEB}function _V(t){return t?/devnet/i.test(t)?"devnet":/testnet/i.test(t)?"testnet":"mainnet-beta":"mainnet-beta"}function SV({children:t,wallets:e,adapter:r,isUnloadingRef:n,onAutoConnectRequest:i,onConnectError:s,onError:o,onSelectWallet:c}){const u=Ve.useRef(!1),[h,f]=Ve.useState(!1),p=Ve.useRef(!1),[E,S]=Ve.useState(!1),[A,I]=Ve.useState(()=>(r==null?void 0:r.publicKey)??null),[$,L]=Ve.useState(()=>(r==null?void 0:r.connected)??!1),k=Ve.useRef(o);Ve.useEffect(()=>(k.current=o,()=>{k.current=void 0}),[o]);const U=Ve.useRef((b,m)=>(n.current||(k.current?k.current(b,m):(console.error(b,m),b instanceof Xf&&typeof window<"u"&&m&&window.open(m.url,"_blank"))),b)),[q,j]=Ve.useState(()=>e.map(b=>({adapter:b,readyState:b.readyState})).filter(({readyState:b})=>b!==Tr.Unsupported));Ve.useEffect(()=>{j(m=>e.map((M,R)=>{const C=m[R];return C&&C.adapter===M&&C.readyState===M.readyState?C:{adapter:M,readyState:M.readyState}}).filter(({readyState:M})=>M!==Tr.Unsupported));function b(m){j(M=>{const R=M.findIndex(({adapter:v})=>v===this);if(R===-1)return M;const{adapter:C}=M[R];return[...M.slice(0,R),{adapter:C,readyState:m},...M.slice(R+1)].filter(({readyState:v})=>v!==Tr.Unsupported)})}return e.forEach(m=>m.on("readyStateChange",b,m)),()=>{e.forEach(m=>m.off("readyStateChange",b,m))}},[r,e]);const z=Ve.useMemo(()=>q.find(b=>b.adapter===r)??null,[r,q]);Ve.useEffect(()=>{if(!r)return;const b=R=>{I(R),u.current=!1,f(!1),L(!0),p.current=!1,S(!1)},m=()=>{n.current||(I(null),u.current=!1,f(!1),L(!1),p.current=!1,S(!1))},M=R=>{U.current(R,r)};return r.on("connect",b),r.on("disconnect",m),r.on("error",M),()=>{r.off("connect",b),r.off("disconnect",m),r.off("error",M),m()}},[r,n]);const V=Ve.useRef(!1);Ve.useEffect(()=>()=>{V.current=!1},[r]),Ve.useEffect(()=>{V.current||u.current||$||!i||!((z==null?void 0:z.readyState)===Tr.Installed||(z==null?void 0:z.readyState)===Tr.Loadable)||(u.current=!0,f(!0),V.current=!0,async function(){try{await i()}catch{s()}finally{f(!1),u.current=!1}}())},[$,i,s,z]);const G=Ve.useCallback(async(b,m,M)=>{if(!r)throw U.current(new qx);if(!$)throw U.current(new kn,r);return await r.sendTransaction(b,m,M)},[r,$]),B=Ve.useMemo(()=>r&&"signTransaction"in r?async b=>{if(!$)throw U.current(new kn,r);return await r.signTransaction(b)}:void 0,[r,$]),W=Ve.useMemo(()=>r&&"signAllTransactions"in r?async b=>{if(!$)throw U.current(new kn,r);return await r.signAllTransactions(b)}:void 0,[r,$]),D=Ve.useMemo(()=>r&&"signMessage"in r?async b=>{if(!$)throw U.current(new kn,r);return await r.signMessage(b)}:void 0,[r,$]),_=Ve.useMemo(()=>r&&"signIn"in r?async b=>await r.signIn(b):void 0,[r]),w=Ve.useCallback(async()=>{if(u.current||p.current||z!=null&&z.adapter.connected)return;if(!z)throw U.current(new qx);const{adapter:b,readyState:m}=z;if(!(m===Tr.Installed||m===Tr.Loadable))throw U.current(new Xf,b);u.current=!0,f(!0);try{await b.connect()}catch(M){throw s(),M}finally{f(!1),u.current=!1}},[s,z]),g=Ve.useCallback(async()=>{if(!p.current&&r){p.current=!0,S(!0);try{await r.disconnect()}finally{S(!1),p.current=!1}}},[r]);return qe.createElement(TD.Provider,{value:{autoConnect:!!i,wallets:q,wallet:z,publicKey:A,connected:$,connecting:h,disconnecting:E,select:c,connect:w,disconnect:g,sendTransaction:G,signTransaction:B,signAllTransactions:W,signMessage:D,signIn:_}},t)}let o_;function AV(){var t;return o_===void 0&&(o_=((t=globalThis.navigator)==null?void 0:t.userAgent)??null),o_}function dT(t){const e=AV();return EV({adapters:t,userAgentString:e})===Uf.MOBILE_WEB}function IV(){const t=globalThis.location;if(t)return`${t.protocol}//${t.host}`}function xV({children:t,wallets:e,autoConnect:r,localStorageKey:n="walletName",onError:i}){const{connection:s}=zW(),o=bV(e),c=Ve.useMemo(()=>{if(!dT(o))return null;const k=o.find(U=>U.name===Yl.SolanaMobileWalletAdapterWalletName);return k||new Yl.SolanaMobileWalletAdapter({addressSelector:Yl.createDefaultAddressSelector(),appIdentity:{uri:IV()},authorizationResultCache:Yl.createDefaultAuthorizationResultCache(),cluster:_V(s==null?void 0:s.rpcEndpoint),onWalletNotFound:Yl.createDefaultWalletNotFoundHandler()})},[o,s==null?void 0:s.rpcEndpoint]),u=Ve.useMemo(()=>c==null||o.indexOf(c)!==-1?o:[c,...o],[o,c]),[h,f]=VW(n,null),p=Ve.useMemo(()=>u.find(k=>k.name===h)??null,[u,h]),E=Ve.useCallback(k=>{h!==k&&(p&&p.name!==Yl.SolanaMobileWalletAdapterWalletName&&p.disconnect(),f(k))},[p,f,h]);Ve.useEffect(()=>{if(!p)return;function k(){I.current||f(null)}return p.on("disconnect",k),()=>{p.off("disconnect",k)}},[p,o,f,h]);const S=Ve.useRef(!1),A=Ve.useMemo(()=>{if(!(!r||!p))return async()=>{(r===!0||await r(p))&&(S.current?await p.connect():await p.autoConnect())}},[r,p]),I=Ve.useRef(!1);Ve.useEffect(()=>{if(h===Yl.SolanaMobileWalletAdapterWalletName&&dT(o)){I.current=!1;return}function k(){I.current=!0}return window.addEventListener("beforeunload",k),()=>{window.removeEventListener("beforeunload",k)}},[o,h]);const $=Ve.useCallback(()=>{p&&E(null)},[p,E]),L=Ve.useCallback(k=>{S.current=!0,E(k)},[E]);return qe.createElement(SV,{wallets:u,adapter:p,isUnloadingRef:I,onAutoConnectRequest:A,onConnectError:$,onError:i,onSelectWallet:L},t)}function CV({onSelectWallet:t}){const{connect:e,connected:r,connecting:n,disconnect:i,disconnecting:s,publicKey:o,select:c,wallet:u,wallets:h}=yA();let f;n?f="connecting":r?f="connected":s?f="disconnecting":u?f="has-wallet":f="no-wallet";const p=Ve.useCallback(()=>{e().catch(()=>{})},[e]),E=Ve.useCallback(()=>{i().catch(()=>{})},[i]),S=Ve.useCallback(()=>{t({onSelectWallet:c,wallets:h})},[t,c,h]);return{buttonState:f,onConnect:f==="has-wallet"?p:void 0,onDisconnect:f!=="disconnecting"&&f!=="no-wallet"?E:void 0,onSelectWallet:S,publicKey:o??void 0,walletIcon:u==null?void 0:u.adapter.icon,walletName:u==null?void 0:u.adapter.name}}const VD=t=>qe.createElement("button",{className:`wallet-adapter-button ${t.className||""}`,disabled:t.disabled,style:t.style,onClick:t.onClick,tabIndex:t.tabIndex||0,type:"button"},t.startIcon&&qe.createElement("i",{className:"wallet-adapter-button-start-icon"},t.startIcon),t.children,t.endIcon&&qe.createElement("i",{className:"wallet-adapter-button-end-icon"},t.endIcon)),GD=({wallet:t,...e})=>t&&qe.createElement("img",{src:t.adapter.icon,alt:`${t.adapter.name} icon`,...e});function TV({walletIcon:t,walletName:e,...r}){return qe.createElement(VD,{...r,className:"wallet-adapter-button-trigger",startIcon:t&&e?qe.createElement(GD,{wallet:{adapter:{icon:t,name:e}}}):void 0})}function MV({children:t,labels:e,...r}){const{setVisible:n}=oR(),{buttonState:i,onConnect:s,onDisconnect:o,publicKey:c,walletIcon:u,walletName:h}=CV({onSelectWallet(){n(!0)}}),[f,p]=Ve.useState(!1),[E,S]=Ve.useState(!1),A=Ve.useRef(null);Ve.useEffect(()=>{const $=L=>{const k=A.current;!k||k.contains(L.target)||S(!1)};return document.addEventListener("mousedown",$),document.addEventListener("touchstart",$),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("touchstart",$)}},[]);const I=Ve.useMemo(()=>{if(t)return t;if(c){const $=c.toBase58();return $.slice(0,4)+".."+$.slice(-4)}else return i==="connecting"||i==="has-wallet"?e[i]:e["no-wallet"]},[i,t,e,c]);return qe.createElement("div",{className:"wallet-adapter-dropdown"},qe.createElement(TV,{...r,"aria-expanded":E,style:{pointerEvents:E?"none":"auto",...r.style},onClick:()=>{switch(i){case"no-wallet":n(!0);break;case"has-wallet":s&&s();break;case"connected":S(!0);break}},walletIcon:u,walletName:h},I),qe.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${E&&"wallet-adapter-dropdown-list-active"}`,ref:A,role:"menu"},c?qe.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(c.toBase58()),p(!0),setTimeout(()=>p(!1),400)},role:"menuitem"},f?e.copied:e["copy-address"]):null,qe.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{n(!0),S(!1)},role:"menuitem"},e["change-wallet"]),o?qe.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),S(!1)},role:"menuitem"},e.disconnect):null))}var NV=rR();const fT=({id:t,children:e,expanded:r=!1})=>{const n=Ve.useRef(null),i=Ve.useRef(!0),s="height 250ms ease-out",o=()=>{const u=n.current;u&&requestAnimationFrame(()=>{u.style.height=u.scrollHeight+"px"})},c=()=>{const u=n.current;u&&requestAnimationFrame(()=>{u.style.height=u.offsetHeight+"px",u.style.overflow="hidden",requestAnimationFrame(()=>{u.style.height="0"})})};return Ve.useLayoutEffect(()=>{r?o():c()},[r]),Ve.useLayoutEffect(()=>{const u=n.current;if(!u)return;function h(){u&&(u.style.overflow=r?"initial":"hidden",r&&(u.style.height="auto"))}function f(p){u&&p.target===u&&p.propertyName==="height"&&h()}return i.current&&(h(),i.current=!1),u.addEventListener("transitionend",f),()=>u.removeEventListener("transitionend",f)},[r]),qe.createElement("div",{className:"wallet-adapter-collapse",id:t,ref:n,role:"region",style:{height:0,transition:i.current?void 0:s}},e)},a_=({handleClick:t,tabIndex:e,wallet:r})=>qe.createElement("li",null,qe.createElement(VD,{onClick:t,startIcon:qe.createElement(GD,{wallet:r}),tabIndex:e},r.adapter.name,r.readyState===Tr.Installed&&qe.createElement("span",null,"Detected"))),OV=()=>qe.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},qe.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),qe.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),qe.createElement("g",{clipPath:"url(#clip0_880_5115)"},qe.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),qe.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),qe.createElement("defs",null,qe.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},qe.createElement("stop",{stopColor:"#9945FF"}),qe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),qe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),qe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),qe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),qe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),qe.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},qe.createElement("stop",{stopColor:"#9945FF"}),qe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),qe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),qe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),qe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),qe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),qe.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},qe.createElement("stop",{stopColor:"#9945FF"}),qe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),qe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),qe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),qe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),qe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),qe.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},qe.createElement("stop",{stopColor:"#9945FF"}),qe.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),qe.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),qe.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),qe.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),qe.createElement("stop",{offset:"1",stopColor:"#00D18C"})),qe.createElement("clipPath",{id:"clip0_880_5115"},qe.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),RV=({className:t="",container:e="body"})=>{const r=Ve.useRef(null),{wallets:n,select:i}=yA(),{setVisible:s}=oR(),[o,c]=Ve.useState(!1),[u,h]=Ve.useState(!1),[f,p]=Ve.useState(null),[E,S]=Ve.useMemo(()=>{const U=[],q=[];for(const j of n)j.readyState===Tr.Installed?U.push(j):q.push(j);return U.length?[U,q]:[q,[]]},[n]),A=Ve.useCallback(()=>{h(!1),setTimeout(()=>s(!1),150)},[s]),I=Ve.useCallback(U=>{U.preventDefault(),A()},[A]),$=Ve.useCallback((U,q)=>{i(q),I(U)},[i,I]),L=Ve.useCallback(()=>c(!o),[o]),k=Ve.useCallback(U=>{const q=r.current;if(!q)return;const j=q.querySelectorAll("button"),z=j[0],V=j[j.length-1];U.shiftKey?document.activeElement===z&&(V.focus(),U.preventDefault()):document.activeElement===V&&(z.focus(),U.preventDefault())},[r]);return Ve.useLayoutEffect(()=>{const U=j=>{j.key==="Escape"?A():j.key==="Tab"&&k(j)},{overflow:q}=window.getComputedStyle(document.body);return setTimeout(()=>h(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",U,!1),()=>{document.body.style.overflow=q,window.removeEventListener("keydown",U,!1)}},[A,k]),Ve.useLayoutEffect(()=>p(document.querySelector(e)),[e]),f&&NV.createPortal(qe.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${u&&"wallet-adapter-modal-fade-in"} ${t}`,ref:r,role:"dialog"},qe.createElement("div",{className:"wallet-adapter-modal-container"},qe.createElement("div",{className:"wallet-adapter-modal-wrapper"},qe.createElement("button",{onClick:I,className:"wallet-adapter-modal-button-close"},qe.createElement("svg",{width:"14",height:"14"},qe.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),E.length?qe.createElement(qe.Fragment,null,qe.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),qe.createElement("ul",{className:"wallet-adapter-modal-list"},E.map(U=>qe.createElement(a_,{key:U.adapter.name,handleClick:q=>$(q,U.adapter.name),wallet:U})),S.length?qe.createElement(fT,{expanded:o,id:"wallet-adapter-modal-collapse"},S.map(U=>qe.createElement(a_,{key:U.adapter.name,handleClick:q=>$(q,U.adapter.name),tabIndex:o?0:-1,wallet:U}))):null),S.length?qe.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:L,tabIndex:0},qe.createElement("span",null,o?"Less ":"More ","options"),qe.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},qe.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):qe.createElement(qe.Fragment,null,qe.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),qe.createElement("div",{className:"wallet-adapter-modal-middle"},qe.createElement(OV,null)),S.length?qe.createElement(qe.Fragment,null,qe.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:L,tabIndex:0},qe.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),qe.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},qe.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),qe.createElement(fT,{expanded:o,id:"wallet-adapter-modal-collapse"},qe.createElement("ul",{className:"wallet-adapter-modal-list"},S.map(U=>qe.createElement(a_,{key:U.adapter.name,handleClick:q=>$(q,U.adapter.name),tabIndex:o?0:-1,wallet:U}))))):null))),qe.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:I})),f)},DV=({children:t,...e})=>{const[r,n]=Ve.useState(!1);return qe.createElement(sR.Provider,{value:{visible:r,setVisible:n}},t,r&&qe.createElement(RV,{...e}))},$V={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function kV(t){return qe.createElement(MV,{...t,labels:$V})}function PV(){const[t,e]=Ve.useState({handle:"Player",id:""});Ve.useEffect(()=>{const n=new URLSearchParams(window.location.search);e({handle:n.get("handle")||"Player",id:n.get("username")||""})},[]);const{publicKey:r}=yA();return qr.jsxs("div",{className:"col-4 col-12-mobile",id:"sidebar",children:[qr.jsx("hr",{className:"first"}),qr.jsxs("section",{children:[qr.jsx("header",{children:qr.jsx("h3",{children:"Play Texas Hold'em with $SOL"})}),qr.jsx("div",{children:qr.jsxs("p",{children:["Hello, ",qr.jsx("strong",{children:t.handle}),t.id&&` (TG ID: ${t.id})`]})}),qr.jsx(kV,{}),r&&qr.jsxs("p",{children:["Connected: ",r.toBase58()]})]}),qr.jsx("hr",{}),qr.jsxs("section",{children:[qr.jsx("header",{children:qr.jsx("h3",{children:"Live Table Stats"})}),qr.jsx("div",{className:"inner",style:{margin:"1em 0",textAlign:"center"}})]})]})}const BV="https://texas-poker-production.up.railway.app",LV=void 0;function UV(){const[t,e]=Ve.useState([]),[r,n]=Ve.useState(""),[i,s]=Ve.useState(!0);if(Ve.useEffect(()=>{fetch(`${BV}/api/tables`).then(c=>{if(!c.ok)throw new Error(c.statusText);return c.json()}).then(c=>{e(c),s(!1)}).catch(c=>{n(c.message),s(!1)})},[]),r)return qr.jsxs("div",{className:"text-red-500",children:["Error: ",r]});if(i)return qr.jsx("div",{children:"Loading tables"});const o=t.filter(c=>c.players>0);return o.length?qr.jsxs("div",{className:"mt-6 space-y-2",children:[qr.jsx("h2",{className:"text-xl font-bold mb-2",children:"Live Tables"}),o.map(c=>{const u=`https://t.me/${LV}?startgroup=table_${c.id}`;return qr.jsxs("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"block bg-gray-800 hover:bg-gray-700 p-3 rounded-lg shadow transition",children:[qr.jsxs("span",{className:"font-semibold",children:["Table ",c.id,":"]})," ",c.players,"/",c.maxPlayers," players  pot ",c.pot,"  buy-in ",c.buyIn]},c.id)})]}):qr.jsx("div",{children:"No active tables found."})}function jV(){return qr.jsxs("div",{id:"app-container",children:[qr.jsx(PV,{}),qr.jsx("main",{id:"content",className:"col-8 col-12-mobile",children:qr.jsx(UV,{})})]})}const zV="modulepreload",qV=function(t){return"/texas-poker-site/"+t},pT={},Jf=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){let o=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=o(r.map(h=>{if(h=qV(h),h in pT)return;pT[h]=!0;const f=h.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const E=document.createElement("link");if(E.rel=f?"stylesheet":zV,f||(E.as="script"),E.crossOrigin="",E.href=h,u&&E.setAttribute("nonce",u),document.head.appendChild(E),f)return new Promise((S,A)=>{E.addEventListener("load",S),E.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};var bb={exports:{}},gT;function FV(){if(gT)return bb.exports;gT=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(j,z,V){return Function.prototype.apply.call(j,z,V)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(j){return Object.getOwnPropertyNames(j).concat(Object.getOwnPropertySymbols(j))}:r=function(j){return Object.getOwnPropertyNames(j)};function n(q){console&&console.warn&&console.warn(q)}var i=Number.isNaN||function(j){return j!==j};function s(){s.init.call(this)}bb.exports=s,bb.exports.once=L,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function c(q){if(typeof q!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof q)}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(q){if(typeof q!="number"||q<0||i(q))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+q+".");o=q}}),s.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(j){if(typeof j!="number"||j<0||i(j))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+j+".");return this._maxListeners=j,this};function u(q){return q._maxListeners===void 0?s.defaultMaxListeners:q._maxListeners}s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(j){for(var z=[],V=1;V<arguments.length;V++)z.push(arguments[V]);var G=j==="error",B=this._events;if(B!==void 0)G=G&&B.error===void 0;else if(!G)return!1;if(G){var W;if(z.length>0&&(W=z[0]),W instanceof Error)throw W;var D=new Error("Unhandled error."+(W?" ("+W.message+")":""));throw D.context=W,D}var _=B[j];if(_===void 0)return!1;if(typeof _=="function")e(_,this,z);else for(var w=_.length,g=A(_,w),V=0;V<w;++V)e(g[V],this,z);return!0};function h(q,j,z,V){var G,B,W;if(c(z),B=q._events,B===void 0?(B=q._events=Object.create(null),q._eventsCount=0):(B.newListener!==void 0&&(q.emit("newListener",j,z.listener?z.listener:z),B=q._events),W=B[j]),W===void 0)W=B[j]=z,++q._eventsCount;else if(typeof W=="function"?W=B[j]=V?[z,W]:[W,z]:V?W.unshift(z):W.push(z),G=u(q),G>0&&W.length>G&&!W.warned){W.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+W.length+" "+String(j)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=q,D.type=j,D.count=W.length,n(D)}return q}s.prototype.addListener=function(j,z){return h(this,j,z,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(j,z){return h(this,j,z,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(q,j,z){var V={fired:!1,wrapFn:void 0,target:q,type:j,listener:z},G=f.bind(V);return G.listener=z,V.wrapFn=G,G}s.prototype.once=function(j,z){return c(z),this.on(j,p(this,j,z)),this},s.prototype.prependOnceListener=function(j,z){return c(z),this.prependListener(j,p(this,j,z)),this},s.prototype.removeListener=function(j,z){var V,G,B,W,D;if(c(z),G=this._events,G===void 0)return this;if(V=G[j],V===void 0)return this;if(V===z||V.listener===z)--this._eventsCount===0?this._events=Object.create(null):(delete G[j],G.removeListener&&this.emit("removeListener",j,V.listener||z));else if(typeof V!="function"){for(B=-1,W=V.length-1;W>=0;W--)if(V[W]===z||V[W].listener===z){D=V[W].listener,B=W;break}if(B<0)return this;B===0?V.shift():I(V,B),V.length===1&&(G[j]=V[0]),G.removeListener!==void 0&&this.emit("removeListener",j,D||z)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(j){var z,V,G;if(V=this._events,V===void 0)return this;if(V.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):V[j]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete V[j]),this;if(arguments.length===0){var B=Object.keys(V),W;for(G=0;G<B.length;++G)W=B[G],W!=="removeListener"&&this.removeAllListeners(W);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(z=V[j],typeof z=="function")this.removeListener(j,z);else if(z!==void 0)for(G=z.length-1;G>=0;G--)this.removeListener(j,z[G]);return this};function E(q,j,z){var V=q._events;if(V===void 0)return[];var G=V[j];return G===void 0?[]:typeof G=="function"?z?[G.listener||G]:[G]:z?$(G):A(G,G.length)}s.prototype.listeners=function(j){return E(this,j,!0)},s.prototype.rawListeners=function(j){return E(this,j,!1)},s.listenerCount=function(q,j){return typeof q.listenerCount=="function"?q.listenerCount(j):S.call(q,j)},s.prototype.listenerCount=S;function S(q){var j=this._events;if(j!==void 0){var z=j[q];if(typeof z=="function")return 1;if(z!==void 0)return z.length}return 0}s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function A(q,j){for(var z=new Array(j),V=0;V<j;++V)z[V]=q[V];return z}function I(q,j){for(;j+1<q.length;j++)q[j]=q[j+1];q.pop()}function $(q){for(var j=new Array(q.length),z=0;z<j.length;++z)j[z]=q[z].listener||q[z];return j}function L(q,j){return new Promise(function(z,V){function G(W){q.removeListener(j,B),V(W)}function B(){typeof q.removeListener=="function"&&q.removeListener("error",G),z([].slice.call(arguments))}U(q,j,B,{once:!0}),j!=="error"&&k(q,G,{once:!0})})}function k(q,j,z){typeof q.on=="function"&&U(q,"error",j,z)}function U(q,j,z,V){if(typeof q.on=="function")V.once?q.once(j,z):q.on(j,z);else if(typeof q.addEventListener=="function")q.addEventListener(j,function G(B){V.once&&q.removeEventListener(j,G),z(B)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof q)}return bb.exports}var Ii=FV();const bp=yc(Ii),HV="Phantom";class WV extends CD{constructor(e={}){super(),this.name=HV,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Tr.Unsupported:Tr.NotDetected,this._disconnected=()=>{const r=this._wallet;r&&(r.off("disconnect",this._disconnected),r.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new fA),this.emit("disconnect"))},this._accountChanged=r=>{const n=this._publicKey;if(n){try{r=new Ke(r.toBytes())}catch(i){this.emit("error",new Fg(i==null?void 0:i.message,i));return}n.equals(r)||(this._publicKey=r,this.emit("connect",r))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==Tr.Unsupported&&(aS()?(this._readyState=Tr.Loadable,this.emit("readyStateChange",this._readyState)):ID(()=>{var r,n,i;return(n=(r=window.phantom)==null?void 0:r.solana)!=null&&n.isPhantom||(i=window.solana)!=null&&i.isPhantom?(this._readyState=Tr.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===Tr.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===Tr.Loadable){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${i}?ref=${s}`;return}if(this.readyState!==Tr.Installed)throw new Xf;this._connecting=!0;const r=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!r.isConnected)try{await r.connect()}catch(i){throw new qg(i==null?void 0:i.message,i)}if(!r.publicKey)throw new ch;let n;try{n=new Ke(r.publicKey.toBytes())}catch(i){throw new Fg(i==null?void 0:i.message,i)}r.on("disconnect",this._disconnected),r.on("accountChanged",this._accountChanged),this._wallet=r,this._publicKey=n,this.emit("connect",n)}catch(r){throw this.emit("error",r),r}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(r){this.emit("error",new vw(r==null?void 0:r.message,r))}}this.emit("disconnect")}async sendTransaction(e,r,n={}){try{const i=this._wallet;if(!i)throw new kn;try{const{signers:s,...o}=n;Ma(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,r,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||r.commitment;const{signature:c}=await i.signAndSendTransaction(e,o);return c}catch(s){throw s instanceof Ai?s:new nu(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const r=this._wallet;if(!r)throw new kn;try{return await r.signTransaction(e)||e}catch(n){throw new $o(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signAllTransactions(e){try{const r=this._wallet;if(!r)throw new kn;try{return await r.signAllTransactions(e)||e}catch(n){throw new $o(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signMessage(e){try{const r=this._wallet;if(!r)throw new kn;try{const{signature:n}=await r.signMessage(e);return n}catch(n){throw new Ew(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}}const KV="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var en=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},VV=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},s1,hh,pS,gS,yS,Is,mS,YD,ZD,bS,wS,vS,ES,_S;class GV{constructor(){s1.add(this),hh.set(this,{}),pS.set(this,"1.0.0"),gS.set(this,"MetaMask"),yS.set(this,KV),Is.set(this,null),mS.set(this,(e,r)=>{var n;return(n=en(this,hh,"f")[e])!=null&&n.push(r)||(en(this,hh,"f")[e]=[r]),()=>en(this,s1,"m",ZD).call(this,e,r)}),bS.set(this,async()=>{if(!en(this,Is,"f")){let e;try{e=(await Jf(async()=>{const{default:r}=await import("./index-DYOSq6fe.js");return{default:r}},__vite__mapDeps([0,1]))).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}VV(this,Is,new e,"f"),en(this,Is,"f").on("standard_change",r=>en(this,s1,"m",YD).call(this,"change",r))}return this.accounts.length||await en(this,Is,"f").connect(),{accounts:this.accounts}}),wS.set(this,async()=>{en(this,Is,"f")&&await en(this,Is,"f").disconnect()}),vS.set(this,async(...e)=>{if(!en(this,Is,"f"))throw new kn;return await en(this,Is,"f").standardSignAndSendTransaction(...e)}),ES.set(this,async(...e)=>{if(!en(this,Is,"f"))throw new kn;return await en(this,Is,"f").standardSignTransaction(...e)}),_S.set(this,async(...e)=>{if(!en(this,Is,"f"))throw new kn;return await en(this,Is,"f").standardSignMessage(...e)})}get version(){return en(this,pS,"f")}get name(){return en(this,gS,"f")}get icon(){return en(this,yS,"f")}get chains(){return[lS,WD,KD]}get features(){return{[pA]:{version:"1.0.0",connect:en(this,bS,"f")},[cS]:{version:"1.0.0",disconnect:en(this,wS,"f")},[gA]:{version:"1.0.0",on:en(this,mS,"f")},[il]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:en(this,vS,"f")},[Bi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:en(this,ES,"f")},[bf]:{version:"1.0.0",signMessage:en(this,_S,"f")}}}get accounts(){return en(this,Is,"f")?en(this,Is,"f").standardAccounts:[]}}hh=new WeakMap,pS=new WeakMap,gS=new WeakMap,yS=new WeakMap,Is=new WeakMap,mS=new WeakMap,bS=new WeakMap,wS=new WeakMap,vS=new WeakMap,ES=new WeakMap,_S=new WeakMap,s1=new WeakSet,YD=function(e,...r){var n;(n=en(this,hh,"f")[e])==null||n.forEach(i=>i.apply(null,r))},ZD=function(e,r){var n;en(this,hh,"f")[e]=(n=en(this,hh,"f")[e])==null?void 0:n.filter(i=>r!==i)};let yT=!1;function YV(){yT||(tV(new GV),yT=!0)}async function ZV(){const t="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:t,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function r(n){var s,o;const i=n.data;(i==null?void 0:i.target)==="metamask-inpage"&&((s=i.data)==null?void 0:s.name)==="metamask-provider"&&(((o=i.data.data)==null?void 0:o.id)===t?(window.removeEventListener("message",r),i.data.data.error||YV()):e())}window.addEventListener("message",r),window.setTimeout(()=>window.removeEventListener("message",r),5e3),e()}const QV="Solflare";class XV extends CD{constructor(e={}){super(),this.name=QV,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?Tr.Unsupported:Tr.Loadable,this._disconnected=()=>{const r=this._wallet;r&&(r.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new fA),this.emit("disconnect"))},this._accountChanged=r=>{if(!r)return;const n=this._publicKey;if(n){try{r=new Ke(r.toBytes())}catch(i){this.emit("error",new Fg(i==null?void 0:i.message,i));return}n.equals(r)||(this._publicKey=r,this.emit("connect",r))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==Tr.Unsupported&&(ID(()=>{var r;return(r=window.solflare)!=null&&r.isSolflare||window.SolflareApp?(this._readyState=Tr.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),ZV())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===Tr.Loadable&&aS()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Tr.Loadable&&this._readyState!==Tr.Installed)throw new Xf;if(this.readyState===Tr.Loadable&&aS()){const i=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${i}?ref=${s}`;return}let e;try{e=(await Jf(async()=>{const{default:i}=await import("./index-Cs7sznY2.js");return{default:i}},__vite__mapDeps([2,1]))).default}catch(i){throw new FW(i==null?void 0:i.message,i)}let r;try{r=new e({network:this._config.network})}catch(i){throw new Nf(i==null?void 0:i.message,i)}if(this._connecting=!0,!r.connected)try{await r.connect()}catch(i){throw new qg(i==null?void 0:i.message,i)}if(!r.publicKey)throw new qg;let n;try{n=new Ke(r.publicKey.toBytes())}catch(i){throw new Fg(i==null?void 0:i.message,i)}r.on("disconnect",this._disconnected),r.on("accountChanged",this._accountChanged),this._wallet=r,this._publicKey=n,this.emit("connect",n)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(r){this.emit("error",new vw(r==null?void 0:r.message,r))}}this.emit("disconnect")}async sendTransaction(e,r,n={}){try{const i=this._wallet;if(!i)throw new kn;try{const{signers:s,...o}=n;return Ma(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,r,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||r.commitment,await i.signAndSendTransaction(e,o)}catch(s){throw s instanceof Ai?s:new nu(s==null?void 0:s.message,s)}}catch(i){throw this.emit("error",i),i}}async signTransaction(e){try{const r=this._wallet;if(!r)throw new kn;try{return await r.signTransaction(e)||e}catch(n){throw new $o(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signAllTransactions(e){try{const r=this._wallet;if(!r)throw new kn;try{return await r.signAllTransactions(e)||e}catch(n){throw new $o(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}async signMessage(e){try{const r=this._wallet;if(!r)throw new kn;try{return await r.signMessage(e,"utf8")}catch(n){throw new Ew(n==null?void 0:n.message,n)}}catch(r){throw this.emit("error",r),r}}}var k1;(function(t){t.Mainnet="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",t.Devnet="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",t.Deprecated_Mainnet="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",t.Deprecated_Devnet="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"})(k1||(k1={}));var ia;(function(t){t.signTransaction="solana_signTransaction",t.signMessage="solana_signMessage",t.signAndSendTransaction="solana_signAndSendTransaction",t.signAndSendAllTransactions="solana_signAndSendAllTransactions",t.signAllTransactions="solana_signAllTransactions"})(ia||(ia={}));const Ei={Mainnet:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Devnet:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Deprecated_Mainnet:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",Deprecated_Devnet:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"};var c_={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var SS=function(t,e){return SS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},SS(t,e)};function JV(t,e){SS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var AS=function(){return AS=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},AS.apply(this,arguments)};function eG(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function tG(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function rG(t,e){return function(r,n){e(r,n,t)}}function nG(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function iG(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(f){try{h(n.next(f))}catch(p){o(p)}}function u(f){try{h(n.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):i(f.value).then(c,u)}h((n=n.apply(t,e||[])).next())})}function sG(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(f){return u([h,f])}}function u(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function oG(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function aG(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function IS(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function QD(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function cG(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(QD(arguments[e]));return t}function lG(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,c=s.length;o<c;o++,i++)n[i]=s[o];return n}function Wg(t){return this instanceof Wg?(this.v=t,this):new Wg(t)}function uG(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(E){n[E]&&(i[E]=function(S){return new Promise(function(A,I){s.push([E,S,A,I])>1||c(E,S)})})}function c(E,S){try{u(n[E](S))}catch(A){p(s[0][3],A)}}function u(E){E.value instanceof Wg?Promise.resolve(E.value.v).then(h,f):p(s[0][2],E)}function h(E){c("next",E)}function f(E){c("throw",E)}function p(E,S){E(S),s.shift(),s.length&&c(s[0][0],s[0][1])}}function hG(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Wg(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function dG(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof IS=="function"?IS(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(h){s({value:h,done:c})},o)}}function fG(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function pG(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function gG(t){return t&&t.__esModule?t:{default:t}}function yG(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function mG(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const bG=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return AS},__asyncDelegator:hG,__asyncGenerator:uG,__asyncValues:dG,__await:Wg,__awaiter:iG,__classPrivateFieldGet:yG,__classPrivateFieldSet:mG,__createBinding:oG,__decorate:tG,__exportStar:aG,__extends:JV,__generator:sG,__importDefault:gG,__importStar:pG,__makeTemplateObject:fG,__metadata:nG,__param:rG,__read:QD,__rest:eG,__spread:cG,__spreadArrays:lG,__values:IS},Symbol.toStringTag,{value:"Module"})),Aw=Dh(bG);var l_={},P0={},mT;function wG(){if(mT)return P0;mT=1,Object.defineProperty(P0,"__esModule",{value:!0}),P0.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return P0.delay=t,P0}var qu={},u_={},Fu={},bT;function vG(){return bT||(bT=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.ONE_THOUSAND=Fu.ONE_HUNDRED=void 0,Fu.ONE_HUNDRED=100,Fu.ONE_THOUSAND=1e3),Fu}var h_={},wT;function EG(){return wT||(wT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(h_)),h_}var vT;function XD(){return vT||(vT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Aw;e.__exportStar(vG(),t),e.__exportStar(EG(),t)}(u_)),u_}var ET;function _G(){if(ET)return qu;ET=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.fromMiliseconds=qu.toMiliseconds=void 0;const t=XD();function e(n){return n*t.ONE_THOUSAND}qu.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return qu.fromMiliseconds=r,qu}var _T;function SG(){return _T||(_T=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Aw;e.__exportStar(wG(),t),e.__exportStar(_G(),t)}(l_)),l_}var Pd={},ST;function AG(){if(ST)return Pd;ST=1,Object.defineProperty(Pd,"__esModule",{value:!0}),Pd.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Pd.Watch=t,Pd.default=t,Pd}var d_={},B0={},AT;function IG(){if(AT)return B0;AT=1,Object.defineProperty(B0,"__esModule",{value:!0}),B0.IWatch=void 0;class t{}return B0.IWatch=t,B0}var IT;function xG(){return IT||(IT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Aw.__exportStar(IG(),t)}(d_)),d_}var xT;function CG(){return xT||(xT=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Aw;e.__exportStar(SG(),t),e.__exportStar(AG(),t),e.__exportStar(xG(),t),e.__exportStar(XD(),t)}(c_)),c_}var ye=CG();class jo{}let TG=class extends jo{constructor(e){super()}};const CT=ye.FIVE_SECONDS,Ra={pulse:"heartbeat_pulse"};let JD=class e$ extends TG{constructor(e){super(e),this.events=new Ii.EventEmitter,this.interval=CT,this.interval=(e==null?void 0:e.interval)||CT}static async init(e){const r=new e$(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ye.toMiliseconds(this.interval))}pulse(){this.events.emit(Ra.pulse)}};const MG=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,NG=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,OG=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function RG(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){DG(t);return}return e}function DG(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function wb(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!OG.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(MG.test(t)||NG.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,RG)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function $G(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function ki(t,...e){try{return $G(t(...e))}catch(r){return Promise.reject(r)}}function kG(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function PG(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function o1(t){if(kG(t))return String(t);if(PG(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return o1(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const xS="base64:";function BG(t){return typeof t=="string"?t:xS+jG(t)}function LG(t){return typeof t!="string"||!t.startsWith(xS)?t:UG(t.slice(xS.length))}function UG(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function jG(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function no(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function zG(...t){return no(t.join(":"))}function vb(t){return t=no(t),t?t+":":""}function qG(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function FG(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const HG="memory",WG=()=>{const t=new Map;return{name:HG,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function KG(t={}){const e={mounts:{"":t.driver||WG()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=h=>{for(const f of e.mountpoints)if(h.startsWith(f))return{base:f,relativeKey:h.slice(f.length),driver:e.mounts[f]};return{base:"",relativeKey:h,driver:e.mounts[""]}},n=(h,f)=>e.mountpoints.filter(p=>p.startsWith(h)||f&&h.startsWith(p)).map(p=>({relativeBase:h.length>p.length?h.slice(p.length):void 0,mountpoint:p,driver:e.mounts[p]})),i=(h,f)=>{if(e.watching){f=no(f);for(const p of e.watchListeners)p(h,f)}},s=async()=>{if(!e.watching){e.watching=!0;for(const h in e.mounts)e.unwatch[h]=await TT(e.mounts[h],i,h)}},o=async()=>{if(e.watching){for(const h in e.unwatch)await e.unwatch[h]();e.unwatch={},e.watching=!1}},c=(h,f,p)=>{const E=new Map,S=A=>{let I=E.get(A.base);return I||(I={driver:A.driver,base:A.base,items:[]},E.set(A.base,I)),I};for(const A of h){const I=typeof A=="string",$=no(I?A:A.key),L=I?void 0:A.value,k=I||!A.options?f:{...f,...A.options},U=r($);S(U).items.push({key:$,value:L,relativeKey:U.relativeKey,options:k})}return Promise.all([...E.values()].map(A=>p(A))).then(A=>A.flat())},u={hasItem(h,f={}){h=no(h);const{relativeKey:p,driver:E}=r(h);return ki(E.hasItem,p,f)},getItem(h,f={}){h=no(h);const{relativeKey:p,driver:E}=r(h);return ki(E.getItem,p,f).then(S=>wb(S))},getItems(h,f={}){return c(h,f,p=>p.driver.getItems?ki(p.driver.getItems,p.items.map(E=>({key:E.relativeKey,options:E.options})),f).then(E=>E.map(S=>({key:zG(p.base,S.key),value:wb(S.value)}))):Promise.all(p.items.map(E=>ki(p.driver.getItem,E.relativeKey,E.options).then(S=>({key:E.key,value:wb(S)})))))},getItemRaw(h,f={}){h=no(h);const{relativeKey:p,driver:E}=r(h);return E.getItemRaw?ki(E.getItemRaw,p,f):ki(E.getItem,p,f).then(S=>LG(S))},async setItem(h,f,p={}){if(f===void 0)return u.removeItem(h);h=no(h);const{relativeKey:E,driver:S}=r(h);S.setItem&&(await ki(S.setItem,E,o1(f),p),S.watch||i("update",h))},async setItems(h,f){await c(h,f,async p=>{if(p.driver.setItems)return ki(p.driver.setItems,p.items.map(E=>({key:E.relativeKey,value:o1(E.value),options:E.options})),f);p.driver.setItem&&await Promise.all(p.items.map(E=>ki(p.driver.setItem,E.relativeKey,o1(E.value),E.options)))})},async setItemRaw(h,f,p={}){if(f===void 0)return u.removeItem(h,p);h=no(h);const{relativeKey:E,driver:S}=r(h);if(S.setItemRaw)await ki(S.setItemRaw,E,f,p);else if(S.setItem)await ki(S.setItem,E,BG(f),p);else return;S.watch||i("update",h)},async removeItem(h,f={}){typeof f=="boolean"&&(f={removeMeta:f}),h=no(h);const{relativeKey:p,driver:E}=r(h);E.removeItem&&(await ki(E.removeItem,p,f),(f.removeMeta||f.removeMata)&&await ki(E.removeItem,p+"$",f),E.watch||i("remove",h))},async getMeta(h,f={}){typeof f=="boolean"&&(f={nativeOnly:f}),h=no(h);const{relativeKey:p,driver:E}=r(h),S=Object.create(null);if(E.getMeta&&Object.assign(S,await ki(E.getMeta,p,f)),!f.nativeOnly){const A=await ki(E.getItem,p+"$",f).then(I=>wb(I));A&&typeof A=="object"&&(typeof A.atime=="string"&&(A.atime=new Date(A.atime)),typeof A.mtime=="string"&&(A.mtime=new Date(A.mtime)),Object.assign(S,A))}return S},setMeta(h,f,p={}){return this.setItem(h+"$",f,p)},removeMeta(h,f={}){return this.removeItem(h+"$",f)},async getKeys(h,f={}){var $;h=vb(h);const p=n(h,!0);let E=[];const S=[];let A=!0;for(const L of p){($=L.driver.flags)!=null&&$.maxDepth||(A=!1);const k=await ki(L.driver.getKeys,L.relativeBase,f);for(const U of k){const q=L.mountpoint+no(U);E.some(j=>q.startsWith(j))||S.push(q)}E=[L.mountpoint,...E.filter(U=>!U.startsWith(L.mountpoint))]}const I=f.maxDepth!==void 0&&!A;return S.filter(L=>(!I||qG(L,f.maxDepth))&&FG(L,h))},async clear(h,f={}){h=vb(h),await Promise.all(n(h,!1).map(async p=>{if(p.driver.clear)return ki(p.driver.clear,p.relativeBase,f);if(p.driver.removeItem){const E=await p.driver.getKeys(p.relativeBase||"",f);return Promise.all(E.map(S=>p.driver.removeItem(S,f)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(h=>MT(h)))},async watch(h){return await s(),e.watchListeners.push(h),async()=>{e.watchListeners=e.watchListeners.filter(f=>f!==h),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(h,f){if(h=vb(h),h&&e.mounts[h])throw new Error(`already mounted at ${h}`);return h&&(e.mountpoints.push(h),e.mountpoints.sort((p,E)=>E.length-p.length)),e.mounts[h]=f,e.watching&&Promise.resolve(TT(f,i,h)).then(p=>{e.unwatch[h]=p}).catch(console.error),u},async unmount(h,f=!0){var p,E;h=vb(h),!(!h||!e.mounts[h])&&(e.watching&&h in e.unwatch&&((E=(p=e.unwatch)[h])==null||E.call(p),delete e.unwatch[h]),f&&await MT(e.mounts[h]),e.mountpoints=e.mountpoints.filter(S=>S!==h),delete e.mounts[h])},getMount(h=""){h=no(h)+":";const f=r(h);return{driver:f.driver,base:f.base}},getMounts(h="",f={}){return h=no(h),n(h,f.parents).map(E=>({driver:E.driver,base:E.mountpoint}))},keys:(h,f={})=>u.getKeys(h,f),get:(h,f={})=>u.getItem(h,f),set:(h,f,p={})=>u.setItem(h,f,p),has:(h,f={})=>u.hasItem(h,f),del:(h,f={})=>u.removeItem(h,f),remove:(h,f={})=>u.removeItem(h,f)};return u}function TT(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function MT(t){typeof t.dispose=="function"&&await ki(t.dispose)}function Uh(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function t$(t,e){let r;const n=()=>{if(r)return r;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),r=Uh(i),r.then(s=>{s.onclose=()=>r=void 0},()=>{}),r};return(i,s)=>n().then(o=>s(o.transaction(e,i).objectStore(e)))}let f_;function Dy(){return f_||(f_=t$("keyval-store","keyval")),f_}function NT(t,e=Dy()){return e("readonly",r=>Uh(r.get(t)))}function VG(t,e,r=Dy()){return r("readwrite",n=>(n.put(e,t),Uh(n.transaction)))}function GG(t,e=Dy()){return e("readwrite",r=>(r.delete(t),Uh(r.transaction)))}function YG(t=Dy()){return t("readwrite",e=>(e.clear(),Uh(e.transaction)))}function ZG(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Uh(t.transaction)}function QG(t=Dy()){return t("readonly",e=>{if(e.getAllKeys)return Uh(e.getAllKeys());const r=[];return ZG(e,n=>r.push(n.key)).then(()=>r)})}const XG=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),JG=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function ll(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JG(t)}catch{return t}}function fc(t){return typeof t=="string"?t:XG(t)||""}const eY="idb-keyval";var tY=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=t$(t.dbName,t.storeName)),{name:eY,options:t,async hasItem(i){return!(typeof await NT(r(i),n)>"u")},async getItem(i){return await NT(r(i),n)??null},setItem(i,s){return VG(r(i),s,n)},removeItem(i){return GG(r(i),n)},getKeys(){return QG(n)},clear(){return YG(n)}}};const rY="WALLET_CONNECT_V2_INDEXED_DB",nY="keyvaluestorage";let iY=class{constructor(){this.indexedDb=KG({driver:tY({dbName:rY,storeName:nY})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,fc(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var p_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a1={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof p_<"u"&&p_.localStorage?a1.exports=p_.localStorage:typeof window<"u"&&window.localStorage?a1.exports=window.localStorage:a1.exports=new e})();function sY(t){var e;return[t[0],ll((e=t[1])!=null?e:"")]}let oY=class{constructor(){this.localStorage=a1.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(sY)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return ll(r)}async setItem(e,r){this.localStorage.setItem(e,fc(r))}async removeItem(e){this.localStorage.removeItem(e)}};const aY="wc_storage_version",OT=1,cY=async(t,e,r)=>{const n=aY,i=await e.getItem(n);if(i&&i>=OT){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const c=s.shift();if(!c)continue;const u=c.toLowerCase();if(u.includes("wc@")||u.includes("walletconnect")||u.includes("wc_")||u.includes("wallet_connect")){const h=await t.getItem(c);await e.setItem(c,h),o.push(c)}}await e.setItem(n,OT),r(e),lY(t,o)},lY=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let r$=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new oY;this.storage=e;try{const r=new iY;cY(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var g_,RT;function uY(){if(RT)return g_;RT=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}g_=e;function e(r,n,i){var s=i&&i.stringify||t,o=1;if(typeof r=="object"&&r!==null){var c=n.length+o;if(c===1)return r;var u=new Array(c);u[0]=s(r);for(var h=1;h<c;h++)u[h]=s(n[h]);return u.join(" ")}if(typeof r!="string")return r;var f=n.length;if(f===0)return r;for(var p="",E=1-o,S=-1,A=r&&r.length||0,I=0;I<A;){if(r.charCodeAt(I)===37&&I+1<A){switch(S=S>-1?S:0,r.charCodeAt(I+1)){case 100:case 102:if(E>=f||n[E]==null)break;S<I&&(p+=r.slice(S,I)),p+=Number(n[E]),S=I+2,I++;break;case 105:if(E>=f||n[E]==null)break;S<I&&(p+=r.slice(S,I)),p+=Math.floor(Number(n[E])),S=I+2,I++;break;case 79:case 111:case 106:if(E>=f||n[E]===void 0)break;S<I&&(p+=r.slice(S,I));var $=typeof n[E];if($==="string"){p+="'"+n[E]+"'",S=I+2,I++;break}if($==="function"){p+=n[E].name||"<anonymous>",S=I+2,I++;break}p+=s(n[E]),S=I+2,I++;break;case 115:if(E>=f)break;S<I&&(p+=r.slice(S,I)),p+=String(n[E]),S=I+2,I++;break;case 37:S<I&&(p+=r.slice(S,I)),p+="%",S=I+2,I++,E--;break}++E}++I}return S===-1?r:(S<A&&(p+=r.slice(S)),p)}return g_}var y_,DT;function hY(){if(DT)return y_;DT=1;const t=uY();y_=i;const e=j().console||{},r={mapHttpRequest:A,mapHttpResponse:A,wrapRequestSerializer:I,wrapResponseSerializer:I,wrapErrorSerializer:I,req:A,res:A,err:E};function n(z,V){return Array.isArray(z)?z.filter(function(B){return B!=="!stdSerializers.err"}):z===!0?Object.keys(V):!1}function i(z){z=z||{},z.browser=z.browser||{};const V=z.browser.transmit;if(V&&typeof V.send!="function")throw Error("pino: transmit option must have a send function");const G=z.browser.write||e;z.browser.write&&(z.browser.asObject=!0);const B=z.serializers||{},W=n(z.browser.serialize,B);let D=z.browser.serialize;Array.isArray(z.browser.serialize)&&z.browser.serialize.indexOf("!stdSerializers.err")>-1&&(D=!1);const _=["error","fatal","warn","info","debug","trace"];typeof G=="function"&&(G.error=G.fatal=G.warn=G.info=G.debug=G.trace=G),z.enabled===!1&&(z.level="silent");const w=z.level||"info",g=Object.create(G);g.log||(g.log=$),Object.defineProperty(g,"levelVal",{get:m}),Object.defineProperty(g,"level",{get:M,set:R});const b={transmit:V,serialize:W,asObject:z.browser.asObject,levels:_,timestamp:S(z)};g.levels=i.levels,g.level=w,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=$,g.serializers=B,g._serialize=W,g._stdErrSerialize=D,g.child=C,V&&(g._logEvent=p());function m(){return this.level==="silent"?1/0:this.levels.values[this.level]}function M(){return this._level}function R(v){if(v!=="silent"&&!this.levels.values[v])throw Error("unknown level "+v);this._level=v,s(b,g,"error","log"),s(b,g,"fatal","error"),s(b,g,"warn","error"),s(b,g,"info","log"),s(b,g,"debug","log"),s(b,g,"trace","log")}function C(v,O){if(!v)throw new Error("missing bindings for child Pino");O=O||{},W&&v.serializers&&(O.serializers=v.serializers);const x=O.serializers;if(W&&x){var N=Object.assign({},B,x),H=z.browser.serialize===!0?Object.keys(N):W;delete v.serializers,u([v],H,N,this._stdErrSerialize)}function Y(Q){this._childLevel=(Q._childLevel|0)+1,this.error=h(Q,v,"error"),this.fatal=h(Q,v,"fatal"),this.warn=h(Q,v,"warn"),this.info=h(Q,v,"info"),this.debug=h(Q,v,"debug"),this.trace=h(Q,v,"trace"),N&&(this.serializers=N,this._serialize=H),V&&(this._logEvent=p([].concat(Q._logEvent.bindings,v)))}return Y.prototype=this,new Y(this)}return g}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:L,epochTime:k,unixTime:U,isoTime:q});function s(z,V,G,B){const W=Object.getPrototypeOf(V);V[G]=V.levelVal>V.levels.values[G]?$:W[G]?W[G]:e[G]||e[B]||$,o(z,V,G)}function o(z,V,G){!z.transmit&&V[G]===$||(V[G]=function(B){return function(){const D=z.timestamp(),_=new Array(arguments.length),w=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var g=0;g<_.length;g++)_[g]=arguments[g];if(z.serialize&&!z.asObject&&u(_,this._serialize,this.serializers,this._stdErrSerialize),z.asObject?B.call(w,c(this,G,_,D)):B.apply(w,_),z.transmit){const b=z.transmit.level||V.level,m=i.levels.values[b],M=i.levels.values[G];if(M<m)return;f(this,{ts:D,methodLevel:G,methodValue:M,transmitValue:i.levels.values[z.transmit.level||V.level],send:z.transmit.send,val:V.levelVal},_)}}}(V[G]))}function c(z,V,G,B){z._serialize&&u(G,z._serialize,z.serializers,z._stdErrSerialize);const W=G.slice();let D=W[0];const _={};B&&(_.time=B),_.level=i.levels.values[V];let w=(z._childLevel|0)+1;if(w<1&&(w=1),D!==null&&typeof D=="object"){for(;w--&&typeof W[0]=="object";)Object.assign(_,W.shift());D=W.length?t(W.shift(),W):void 0}else typeof D=="string"&&(D=t(W.shift(),W));return D!==void 0&&(_.msg=D),_}function u(z,V,G,B){for(const W in z)if(B&&z[W]instanceof Error)z[W]=i.stdSerializers.err(z[W]);else if(typeof z[W]=="object"&&!Array.isArray(z[W]))for(const D in z[W])V&&V.indexOf(D)>-1&&D in G&&(z[W][D]=G[D](z[W][D]))}function h(z,V,G){return function(){const B=new Array(1+arguments.length);B[0]=V;for(var W=1;W<B.length;W++)B[W]=arguments[W-1];return z[G].apply(this,B)}}function f(z,V,G){const B=V.send,W=V.ts,D=V.methodLevel,_=V.methodValue,w=V.val,g=z._logEvent.bindings;u(G,z._serialize||Object.keys(z.serializers),z.serializers,z._stdErrSerialize===void 0?!0:z._stdErrSerialize),z._logEvent.ts=W,z._logEvent.messages=G.filter(function(b){return g.indexOf(b)===-1}),z._logEvent.level.label=D,z._logEvent.level.value=_,B(D,z._logEvent,w),z._logEvent=p(g)}function p(z){return{ts:0,messages:[],bindings:z||[],level:{label:"",value:0}}}function E(z){const V={type:z.constructor.name,msg:z.message,stack:z.stack};for(const G in z)V[G]===void 0&&(V[G]=z[G]);return V}function S(z){return typeof z.timestamp=="function"?z.timestamp:z.timestamp===!1?L:k}function A(){return{}}function I(z){return z}function $(){}function L(){return!1}function k(){return Date.now()}function U(){return Math.round(Date.now()/1e3)}function q(){return new Date(Date.now()).toISOString()}function j(){function z(V){return typeof V<"u"&&V}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return z(self)||z(window)||z(this)||{}}}return y_}var wf=hY();const yu=yc(wf),dY={level:"info"},$y="custom_context",vA=1e3*1024;let fY=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},$T=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new fY(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}},n$=class{constructor(e,r=vA){this.level=e??"error",this.levelValue=wf.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new $T(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===wf.levels.values.error?console.error(e):r===wf.levels.values.warn?console.warn(e):r===wf.levels.values.debug?console.debug(e):r===wf.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(fc({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new $T(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(fc({extraMetadata:e})),new Blob(r,{type:"application/json"})}},pY=class{constructor(e,r=vA){this.baseChunkLogger=new n$(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}},gY=class{constructor(e,r=vA){this.baseChunkLogger=new n$(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var yY=Object.defineProperty,mY=Object.defineProperties,bY=Object.getOwnPropertyDescriptors,kT=Object.getOwnPropertySymbols,wY=Object.prototype.hasOwnProperty,vY=Object.prototype.propertyIsEnumerable,PT=(t,e,r)=>e in t?yY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,P1=(t,e)=>{for(var r in e||(e={}))wY.call(e,r)&&PT(t,r,e[r]);if(kT)for(var r of kT(e))vY.call(e,r)&&PT(t,r,e[r]);return t},B1=(t,e)=>mY(t,bY(e));function ul(t){return B1(P1({},t),{level:(t==null?void 0:t.level)||dY.level})}function EY(t,e=$y){return t[e]||""}function _Y(t,e,r=$y){return t[r]=e,t}function bn(t,e=$y){let r="";return typeof t.bindings>"u"?r=EY(t,e):r=t.bindings().context||"",r}function SY(t,e,r=$y){const n=bn(t,r);return n.trim()?`${n}/${e}`:e}function Gr(t,e,r=$y){const n=SY(t,e,r),i=t.child({context:n});return _Y(i,n,r)}function AY(t){var e,r;const n=new pY((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:yu(B1(P1({},t.opts),{level:"trace",browser:B1(P1({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function IY(t){var e;const r=new gY((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:yu(B1(P1({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function EA(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?AY(t):IY(t)}var xY=Object.defineProperty,CY=(t,e,r)=>e in t?xY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,BT=(t,e,r)=>CY(t,typeof e!="symbol"?e+"":e,r);let TY=class extends jo{constructor(e){super(),this.opts=e,BT(this,"protocol","wc"),BT(this,"version",2)}};var MY=Object.defineProperty,NY=(t,e,r)=>e in t?MY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,OY=(t,e,r)=>NY(t,e+"",r);let RY=class extends jo{constructor(e,r){super(),this.core=e,this.logger=r,OY(this,"records",new Map)}},DY=class{constructor(e,r){this.logger=e,this.core=r}},$Y=class extends jo{constructor(e,r){super(),this.relayer=e,this.logger=r}},kY=class extends jo{constructor(e){super()}},PY=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},BY=class extends jo{constructor(e,r){super(),this.relayer=e,this.logger=r}},LY=class extends jo{constructor(e,r){super(),this.core=e,this.logger=r}},UY=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},jY=class{constructor(e,r){this.projectId=e,this.logger=r}},zY=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};function qY(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function i$(t,...e){if(!qY(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function LT(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function FY(t,e){i$(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Bd=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const m_=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function HY(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function s$(t){return typeof t=="string"&&(t=HY(t)),i$(t),t}let WY=class{clone(){return this._cloneInto()}};function KY(t){const e=n=>t().update(s$(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function o$(t=32){if(Bd&&typeof Bd.getRandomValues=="function")return Bd.getRandomValues(new Uint8Array(t));if(Bd&&typeof Bd.randomBytes=="function")return Bd.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function VY(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),c=Number(r&s),u=n?4:0,h=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+h,c,n)}let GY=class extends WY{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=m_(this.buffer)}update(e){LT(this);const{view:r,buffer:n,blockLen:i}=this;e=s$(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=m_(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){LT(this),FY(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let p=o;p<i;p++)r[p]=0;VY(n,i-8,BigInt(this.length*8),s),this.process(n,0);const c=m_(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=u/4,f=this.get();if(h>f.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)c.setUint32(4*p,f[p],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const Eb=BigInt(2**32-1),CS=BigInt(32);function a$(t,e=!1){return e?{h:Number(t&Eb),l:Number(t>>CS&Eb)}:{h:Number(t>>CS&Eb)|0,l:Number(t&Eb)|0}}function YY(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=a$(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const ZY=(t,e)=>BigInt(t>>>0)<<CS|BigInt(e>>>0),QY=(t,e,r)=>t>>>r,XY=(t,e,r)=>t<<32-r|e>>>r,JY=(t,e,r)=>t>>>r|e<<32-r,eZ=(t,e,r)=>t<<32-r|e>>>r,tZ=(t,e,r)=>t<<64-r|e>>>r-32,rZ=(t,e,r)=>t>>>r-32|e<<64-r,nZ=(t,e)=>e,iZ=(t,e)=>t,sZ=(t,e,r)=>t<<r|e>>>32-r,oZ=(t,e,r)=>e<<r|t>>>32-r,aZ=(t,e,r)=>e<<r-32|t>>>64-r,cZ=(t,e,r)=>t<<r-32|e>>>64-r;function lZ(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const uZ=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),hZ=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,dZ=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),fZ=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,pZ=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),gZ=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,rr={fromBig:a$,split:YY,toBig:ZY,shrSH:QY,shrSL:XY,rotrSH:JY,rotrSL:eZ,rotrBH:tZ,rotrBL:rZ,rotr32H:nZ,rotr32L:iZ,rotlSH:sZ,rotlSL:oZ,rotlBH:aZ,rotlBL:cZ,add:lZ,add3L:uZ,add3H:hZ,add4L:dZ,add4H:fZ,add5H:gZ,add5L:pZ},[yZ,mZ]=rr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),zl=new Uint32Array(80),ql=new Uint32Array(80);let bZ=class extends GY{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:c,Dl:u,Eh:h,El:f,Fh:p,Fl:E,Gh:S,Gl:A,Hh:I,Hl:$}=this;return[e,r,n,i,s,o,c,u,h,f,p,E,S,A,I,$]}set(e,r,n,i,s,o,c,u,h,f,p,E,S,A,I,$){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=h|0,this.El=f|0,this.Fh=p|0,this.Fl=E|0,this.Gh=S|0,this.Gl=A|0,this.Hh=I|0,this.Hl=$|0}process(e,r){for(let U=0;U<16;U++,r+=4)zl[U]=e.getUint32(r),ql[U]=e.getUint32(r+=4);for(let U=16;U<80;U++){const q=zl[U-15]|0,j=ql[U-15]|0,z=rr.rotrSH(q,j,1)^rr.rotrSH(q,j,8)^rr.shrSH(q,j,7),V=rr.rotrSL(q,j,1)^rr.rotrSL(q,j,8)^rr.shrSL(q,j,7),G=zl[U-2]|0,B=ql[U-2]|0,W=rr.rotrSH(G,B,19)^rr.rotrBH(G,B,61)^rr.shrSH(G,B,6),D=rr.rotrSL(G,B,19)^rr.rotrBL(G,B,61)^rr.shrSL(G,B,6),_=rr.add4L(V,D,ql[U-7],ql[U-16]),w=rr.add4H(_,z,W,zl[U-7],zl[U-16]);zl[U]=w|0,ql[U]=_|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:c,Cl:u,Dh:h,Dl:f,Eh:p,El:E,Fh:S,Fl:A,Gh:I,Gl:$,Hh:L,Hl:k}=this;for(let U=0;U<80;U++){const q=rr.rotrSH(p,E,14)^rr.rotrSH(p,E,18)^rr.rotrBH(p,E,41),j=rr.rotrSL(p,E,14)^rr.rotrSL(p,E,18)^rr.rotrBL(p,E,41),z=p&S^~p&I,V=E&A^~E&$,G=rr.add5L(k,j,V,mZ[U],ql[U]),B=rr.add5H(G,L,q,z,yZ[U],zl[U]),W=G|0,D=rr.rotrSH(n,i,28)^rr.rotrBH(n,i,34)^rr.rotrBH(n,i,39),_=rr.rotrSL(n,i,28)^rr.rotrBL(n,i,34)^rr.rotrBL(n,i,39),w=n&s^n&c^s&c,g=i&o^i&u^o&u;L=I|0,k=$|0,I=S|0,$=A|0,S=p|0,A=E|0,{h:p,l:E}=rr.add(h|0,f|0,B|0,W|0),h=c|0,f=u|0,c=s|0,u=o|0,s=n|0,o=i|0;const b=rr.add3L(W,_,g);n=rr.add3H(b,B,D,w),i=b|0}({h:n,l:i}=rr.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=rr.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l:u}=rr.add(this.Ch|0,this.Cl|0,c|0,u|0),{h,l:f}=rr.add(this.Dh|0,this.Dl|0,h|0,f|0),{h:p,l:E}=rr.add(this.Eh|0,this.El|0,p|0,E|0),{h:S,l:A}=rr.add(this.Fh|0,this.Fl|0,S|0,A|0),{h:I,l:$}=rr.add(this.Gh|0,this.Gl|0,I|0,$|0),{h:L,l:k}=rr.add(this.Hh|0,this.Hl|0,L|0,k|0),this.set(n,i,s,o,c,u,h,f,p,E,S,A,I,$,L,k)}roundClean(){zl.fill(0),ql.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const wZ=KY(()=>new bZ);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _A=BigInt(0),c$=BigInt(1),vZ=BigInt(2);function SA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function AA(t){if(!SA(t))throw new Error("Uint8Array expected")}function b_(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const EZ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function IA(t){AA(t);let e="";for(let r=0;r<t.length;r++)e+=EZ[t[r]];return e}function l$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?_A:BigInt("0x"+t)}const zc={_0:48,_9:57,A:65,F:70,a:97,f:102};function UT(t){if(t>=zc._0&&t<=zc._9)return t-zc._0;if(t>=zc.A&&t<=zc.F)return t-(zc.A-10);if(t>=zc.a&&t<=zc.f)return t-(zc.a-10)}function u$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=UT(t.charCodeAt(s)),c=UT(t.charCodeAt(s+1));if(o===void 0||c===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+c}return n}function _Z(t){return l$(IA(t))}function c1(t){return AA(t),l$(IA(Uint8Array.from(t).reverse()))}function h$(t,e){return u$(t.toString(16).padStart(e*2,"0"))}function TS(t,e){return h$(t,e).reverse()}function qc(t,e,r){let n;if(typeof e=="string")try{n=u$(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(SA(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function jT(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];AA(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}const w_=t=>typeof t=="bigint"&&_A<=t;function SZ(t,e,r){return w_(t)&&w_(e)&&w_(r)&&e<=t&&t<r}function L0(t,e,r,n){if(!SZ(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function AZ(t){let e;for(e=0;t>_A;t>>=c$,e+=1);return e}const IZ=t=>(vZ<<BigInt(t-1))-c$,xZ={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||SA(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function xA(t,e,r={}){const n=(i,s,o)=>{const c=xZ[s];if(typeof c!="function")throw new Error("invalid validator function");const u=t[i];if(!(o&&u===void 0)&&!c(u,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function zT(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const Fi=BigInt(0),si=BigInt(1),th=BigInt(2),CZ=BigInt(3),MS=BigInt(4),qT=BigInt(5),FT=BigInt(8);function _i(t,e){const r=t%e;return r>=Fi?r:e+r}function TZ(t,e,r){if(e<Fi)throw new Error("invalid exponent, negatives unsupported");if(r<=Fi)throw new Error("invalid modulus");if(r===si)return Fi;let n=si;for(;e>Fi;)e&si&&(n=n*t%r),t=t*t%r,e>>=si;return n}function Ka(t,e,r){let n=t;for(;e-- >Fi;)n*=n,n%=r;return n}function HT(t,e){if(t===Fi)throw new Error("invert: expected non-zero number");if(e<=Fi)throw new Error("invert: expected positive modulus, got "+e);let r=_i(t,e),n=e,i=Fi,s=si;for(;r!==Fi;){const o=n/r,c=n%r,u=i-s*o;n=r,r=c,i=s,s=u}if(n!==si)throw new Error("invert: does not exist");return _i(i,e)}function MZ(t){const e=(t-si)/th;let r,n,i;for(r=t-si,n=0;r%th===Fi;r/=th,n++);for(i=th;i<t&&TZ(i,e,t)!==t-si;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+si)/MS;return function(c,u){const h=c.pow(u,o);if(!c.eql(c.sqr(h),u))throw new Error("Cannot find square root");return h}}const s=(r+si)/th;return function(o,c){if(o.pow(c,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let u=n,h=o.pow(o.mul(o.ONE,i),r),f=o.pow(c,s),p=o.pow(c,r);for(;!o.eql(p,o.ONE);){if(o.eql(p,o.ZERO))return o.ZERO;let E=1;for(let A=o.sqr(p);E<u&&!o.eql(A,o.ONE);E++)A=o.sqr(A);const S=o.pow(h,si<<BigInt(u-E-1));h=o.sqr(S),f=o.mul(f,S),p=o.mul(p,h),u=E}return f}}function NZ(t){if(t%MS===CZ){const e=(t+si)/MS;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%FT===qT){const e=(t-qT)/FT;return function(r,n){const i=r.mul(n,th),s=r.pow(i,e),o=r.mul(n,s),c=r.mul(r.mul(o,th),s),u=r.mul(o,r.sub(c,r.ONE));if(!r.eql(r.sqr(u),n))throw new Error("Cannot find square root");return u}}return MZ(t)}const OZ=(t,e)=>(_i(t,e)&si)===si,RZ=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function DZ(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=RZ.reduce((n,i)=>(n[i]="function",n),e);return xA(t,r)}function $Z(t,e,r){if(r<Fi)throw new Error("invalid exponent, negatives unsupported");if(r===Fi)return t.ONE;if(r===si)return e;let n=t.ONE,i=e;for(;r>Fi;)r&si&&(n=t.mul(n,i)),i=t.sqr(i),r>>=si;return n}function kZ(t,e){const r=new Array(e.length),n=e.reduce((s,o,c)=>t.is0(o)?s:(r[c]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,c)=>t.is0(o)?s:(r[c]=t.mul(s,r[c]),t.mul(s,o)),i),r}function d$(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function f$(t,e,r=!1,n={}){if(t<=Fi)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=d$(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const c=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:IZ(i),ZERO:Fi,ONE:si,create:u=>_i(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Fi<=u&&u<t},is0:u=>u===Fi,isOdd:u=>(u&si)===si,neg:u=>_i(-u,t),eql:(u,h)=>u===h,sqr:u=>_i(u*u,t),add:(u,h)=>_i(u+h,t),sub:(u,h)=>_i(u-h,t),mul:(u,h)=>_i(u*h,t),pow:(u,h)=>$Z(c,u,h),div:(u,h)=>_i(u*HT(h,t),t),sqrN:u=>u*u,addN:(u,h)=>u+h,subN:(u,h)=>u-h,mulN:(u,h)=>u*h,inv:u=>HT(u,t),sqrt:n.sqrt||(u=>(o||(o=NZ(t)),o(c,u))),invertBatch:u=>kZ(c,u),cmov:(u,h,f)=>f?h:u,toBytes:u=>r?TS(u,s):h$(u,s),fromBytes:u=>{if(u.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+u.length);return r?c1(u):_Z(u)}});return Object.freeze(c)}const WT=BigInt(0),_b=BigInt(1);function v_(t,e){const r=e.negate();return t?r:e}function p$(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function E_(t,e){p$(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function PZ(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function BZ(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const __=new WeakMap,g$=new WeakMap;function S_(t){return g$.get(t)||1}function LZ(t,e){return{constTimeNegate:v_,hasPrecomputes(r){return S_(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>WT;)n&_b&&(i=i.add(s)),s=s.double(),n>>=_b;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=E_(n,e),o=[];let c=r,u=c;for(let h=0;h<i;h++){u=c,o.push(u);for(let f=1;f<s;f++)u=u.add(c),o.push(u);c=u.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=E_(r,e);let c=t.ZERO,u=t.BASE;const h=BigInt(2**r-1),f=2**r,p=BigInt(r);for(let E=0;E<s;E++){const S=E*o;let A=Number(i&h);i>>=p,A>o&&(A-=f,i+=_b);const I=S,$=S+Math.abs(A)-1,L=E%2!==0,k=A<0;A===0?u=u.add(v_(L,n[I])):c=c.add(v_(k,n[$]))}return{p:c,f:u}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:c}=E_(r,e),u=BigInt(2**r-1),h=2**r,f=BigInt(r);for(let p=0;p<o;p++){const E=p*c;if(i===WT)break;let S=Number(i&u);if(i>>=f,S>c&&(S-=h,i+=_b),S===0)continue;let A=n[E+Math.abs(S)-1];S<0&&(A=A.negate()),s=s.add(A)}return s},getPrecomputes(r,n,i){let s=__.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&__.set(n,i(s))),s},wNAFCached(r,n,i){const s=S_(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=S_(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){p$(n,e),g$.set(r,n),__.delete(r)}}}function UZ(t,e,r,n){if(PZ(r,t),BZ(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=AZ(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,c=(1<<o)-1,u=new Array(c+1).fill(i),h=Math.floor((e.BITS-1)/o)*o;let f=i;for(let p=h;p>=0;p-=o){u.fill(i);for(let S=0;S<n.length;S++){const A=n[S],I=Number(A>>BigInt(p)&BigInt(c));u[I]=u[I].add(r[S])}let E=i;for(let S=u.length-1,A=i;S>0;S--)A=A.add(u[S]),E=E.add(A);if(f=f.add(E),p!==0)for(let S=0;S<o;S++)f=f.double()}return f}function jZ(t){return DZ(t.Fp),xA(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...d$(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ma=BigInt(0),Qs=BigInt(1),Sb=BigInt(2),zZ=BigInt(8),qZ={zip215:!0};function FZ(t){const e=jZ(t);return xA(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function HZ(t){const e=FZ(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:c,h:u}=e,h=Sb<<BigInt(c*8)-Qs,f=r.create,p=f$(e.n,e.nBitLength),E=e.uvRatio||((b,m)=>{try{return{isValid:!0,value:r.sqrt(b*r.inv(m))}}catch{return{isValid:!1,value:ma}}}),S=e.adjustScalarBytes||(b=>b),A=e.domain||((b,m,M)=>{if(b_("phflag",M),m.length||M)throw new Error("Contexts/pre-hash are not supported");return b});function I(b,m){L0("coordinate "+b,m,ma,h)}function $(b){if(!(b instanceof U))throw new Error("ExtendedPoint expected")}const L=zT((b,m)=>{const{ex:M,ey:R,ez:C}=b,v=b.is0();m==null&&(m=v?zZ:r.inv(C));const O=f(M*m),x=f(R*m),N=f(C*m);if(v)return{x:ma,y:Qs};if(N!==Qs)throw new Error("invZ was invalid");return{x:O,y:x}}),k=zT(b=>{const{a:m,d:M}=e;if(b.is0())throw new Error("bad point: ZERO");const{ex:R,ey:C,ez:v,et:O}=b,x=f(R*R),N=f(C*C),H=f(v*v),Y=f(H*H),Q=f(x*m),ee=f(H*f(Q+N)),re=f(Y+f(M*f(x*N)));if(ee!==re)throw new Error("bad point: equation left != right (1)");const oe=f(R*C),be=f(v*O);if(oe!==be)throw new Error("bad point: equation left != right (2)");return!0});class U{constructor(m,M,R,C){this.ex=m,this.ey=M,this.ez=R,this.et=C,I("x",m),I("y",M),I("z",R),I("t",C),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof U)throw new Error("extended point not allowed");const{x:M,y:R}=m||{};return I("x",M),I("y",R),new U(M,R,Qs,f(M*R))}static normalizeZ(m){const M=r.invertBatch(m.map(R=>R.ez));return m.map((R,C)=>R.toAffine(M[C])).map(U.fromAffine)}static msm(m,M){return UZ(U,p,m,M)}_setWindowSize(m){z.setWindowSize(this,m)}assertValidity(){k(this)}equals(m){$(m);const{ex:M,ey:R,ez:C}=this,{ex:v,ey:O,ez:x}=m,N=f(M*x),H=f(v*C),Y=f(R*x),Q=f(O*C);return N===H&&Y===Q}is0(){return this.equals(U.ZERO)}negate(){return new U(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){const{a:m}=e,{ex:M,ey:R,ez:C}=this,v=f(M*M),O=f(R*R),x=f(Sb*f(C*C)),N=f(m*v),H=M+R,Y=f(f(H*H)-v-O),Q=N+O,ee=Q-x,re=N-O,oe=f(Y*ee),be=f(Q*re),Ce=f(Y*re),Se=f(ee*Q);return new U(oe,be,Se,Ce)}add(m){$(m);const{a:M,d:R}=e,{ex:C,ey:v,ez:O,et:x}=this,{ex:N,ey:H,ez:Y,et:Q}=m;if(M===BigInt(-1)){const vt=f((v-C)*(H+N)),yt=f((v+C)*(H-N)),et=f(yt-vt);if(et===ma)return this.double();const ht=f(O*Sb*Q),Mt=f(x*Sb*Y),dt=Mt+ht,Ee=yt+vt,Te=Mt-ht,Z=f(dt*et),F=f(Ee*Te),K=f(dt*Te),J=f(et*Ee);return new U(Z,F,J,K)}const ee=f(C*N),re=f(v*H),oe=f(x*R*Q),be=f(O*Y),Ce=f((C+v)*(N+H)-ee-re),Se=be-oe,xe=be+oe,ze=f(re-M*ee),Be=f(Ce*Se),tt=f(xe*ze),He=f(Ce*ze),Je=f(Se*xe);return new U(Be,tt,Je,He)}subtract(m){return this.add(m.negate())}wNAF(m){return z.wNAFCached(this,m,U.normalizeZ)}multiply(m){const M=m;L0("scalar",M,Qs,n);const{p:R,f:C}=this.wNAF(M);return U.normalizeZ([R,C])[0]}multiplyUnsafe(m,M=U.ZERO){const R=m;return L0("scalar",R,ma,n),R===ma?j:this.is0()||R===Qs?this:z.wNAFCachedUnsafe(this,R,U.normalizeZ,M)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return z.unsafeLadder(this,n).is0()}toAffine(m){return L(this,m)}clearCofactor(){const{h:m}=e;return m===Qs?this:this.multiplyUnsafe(m)}static fromHex(m,M=!1){const{d:R,a:C}=e,v=r.BYTES;m=qc("pointHex",m,v),b_("zip215",M);const O=m.slice(),x=m[v-1];O[v-1]=x&-129;const N=c1(O),H=M?h:r.ORDER;L0("pointHex.y",N,ma,H);const Y=f(N*N),Q=f(Y-Qs),ee=f(R*Y-C);let{isValid:re,value:oe}=E(Q,ee);if(!re)throw new Error("Point.fromHex: invalid y coordinate");const be=(oe&Qs)===Qs,Ce=(x&128)!==0;if(!M&&oe===ma&&Ce)throw new Error("Point.fromHex: x=0 and x_0=1");return Ce!==be&&(oe=f(-oe)),U.fromAffine({x:oe,y:N})}static fromPrivateKey(m){return B(m).point}toRawBytes(){const{x:m,y:M}=this.toAffine(),R=TS(M,r.BYTES);return R[R.length-1]|=m&Qs?128:0,R}toHex(){return IA(this.toRawBytes())}}U.BASE=new U(e.Gx,e.Gy,Qs,f(e.Gx*e.Gy)),U.ZERO=new U(ma,Qs,Qs,ma);const{BASE:q,ZERO:j}=U,z=LZ(U,c*8);function V(b){return _i(b,n)}function G(b){return V(c1(b))}function B(b){const m=r.BYTES;b=qc("private key",b,m);const M=qc("hashed private key",s(b),2*m),R=S(M.slice(0,m)),C=M.slice(m,2*m),v=G(R),O=q.multiply(v),x=O.toRawBytes();return{head:R,prefix:C,scalar:v,point:O,pointBytes:x}}function W(b){return B(b).pointBytes}function D(b=new Uint8Array,...m){const M=jT(...m);return G(s(A(M,qc("context",b),!!i)))}function _(b,m,M={}){b=qc("message",b),i&&(b=i(b));const{prefix:R,scalar:C,pointBytes:v}=B(m),O=D(M.context,R,b),x=q.multiply(O).toRawBytes(),N=D(M.context,x,v,b),H=V(O+N*C);L0("signature.s",H,ma,n);const Y=jT(x,TS(H,r.BYTES));return qc("result",Y,r.BYTES*2)}const w=qZ;function g(b,m,M,R=w){const{context:C,zip215:v}=R,O=r.BYTES;b=qc("signature",b,2*O),m=qc("message",m),M=qc("publicKey",M,O),v!==void 0&&b_("zip215",v),i&&(m=i(m));const x=c1(b.slice(O,2*O));let N,H,Y;try{N=U.fromHex(M,v),H=U.fromHex(b.slice(0,O),v),Y=q.multiplyUnsafe(x)}catch{return!1}if(!v&&N.isSmallOrder())return!1;const Q=D(C,H.toRawBytes(),N.toRawBytes(),m);return H.add(N.multiplyUnsafe(Q)).subtract(Y).clearCofactor().equals(U.ZERO)}return q._setWindowSize(8),{CURVE:e,getPublicKey:W,sign:_,verify:g,ExtendedPoint:U,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(r.BYTES),precompute(b=8,m=U.BASE){return m._setWindowSize(b),m.multiply(BigInt(3)),m}}}}BigInt(0),BigInt(1);const CA=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),KT=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const WZ=BigInt(1),VT=BigInt(2);BigInt(3);const KZ=BigInt(5),VZ=BigInt(8);function GZ(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=CA,o=t*t%s*t%s,c=Ka(o,VT,s)*o%s,u=Ka(c,WZ,s)*t%s,h=Ka(u,KZ,s)*u%s,f=Ka(h,e,s)*h%s,p=Ka(f,r,s)*f%s,E=Ka(p,n,s)*p%s,S=Ka(E,i,s)*E%s,A=Ka(S,i,s)*E%s,I=Ka(A,e,s)*h%s;return{pow_p_5_8:Ka(I,VT,s)*t%s,b2:o}}function YZ(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ZZ(t,e){const r=CA,n=_i(e*e*e,r),i=_i(n*n*e,r),s=GZ(t*i).pow_p_5_8;let o=_i(t*n*s,r);const c=_i(e*o*o,r),u=o,h=_i(o*KT,r),f=c===t,p=c===_i(-t,r),E=c===_i(-t*KT,r);return f&&(o=u),(p||E)&&(o=h),OZ(o,r)&&(o=_i(-o,r)),{isValid:f||p,value:o}}const QZ=f$(CA,void 0,!0),XZ={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:QZ,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:VZ,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:wZ,randomBytes:o$,adjustScalarBytes:YZ,uvRatio:ZZ},y$=HZ(XZ),JZ="EdDSA",eQ="JWT",L1=".",Iw="base64url",m$="utf8",b$="utf8",tQ=":",rQ="did",nQ="key",GT="base58btc",iQ="z",sQ="K36",oQ=32;function TA(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function w$(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?TA(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function v$(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=w$(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return TA(r)}function aQ(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var c=t.length,u=t.charAt(0),h=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function p(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var I=0,$=0,L=0,k=A.length;L!==k&&A[L]===0;)L++,I++;for(var U=(k-L)*f+1>>>0,q=new Uint8Array(U);L!==k;){for(var j=A[L],z=0,V=U-1;(j!==0||z<$)&&V!==-1;V--,z++)j+=256*q[V]>>>0,q[V]=j%c>>>0,j=j/c>>>0;if(j!==0)throw new Error("Non-zero carry");$=z,L++}for(var G=U-$;G!==U&&q[G]===0;)G++;for(var B=u.repeat(I);G<U;++G)B+=t.charAt(q[G]);return B}function E(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var I=0;if(A[I]!==" "){for(var $=0,L=0;A[I]===u;)$++,I++;for(var k=(A.length-I)*h+1>>>0,U=new Uint8Array(k);A[I];){var q=r[A.charCodeAt(I)];if(q===255)return;for(var j=0,z=k-1;(q!==0||j<L)&&z!==-1;z--,j++)q+=c*U[z]>>>0,U[z]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");L=j,I++}if(A[I]!==" "){for(var V=k-L;V!==k&&U[V]===0;)V++;for(var G=new Uint8Array($+(k-V)),B=$;V!==k;)G[B++]=U[V++];return G}}}function S(A){var I=E(A);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:E,decode:S}}var cQ=aQ,lQ=cQ;const E$=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},uQ=t=>new TextEncoder().encode(t),hQ=t=>new TextDecoder().decode(t);let dQ=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},fQ=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _$(this,e)}},pQ=class{constructor(e){this.decoders=e}or(e){return _$(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const _$=(t,e)=>new pQ({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let gQ=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new dQ(e,r,n),this.decoder=new fQ(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const xw=({name:t,prefix:e,encode:r,decode:n})=>new gQ(t,e,r,n),ky=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=lQ(r,e);return xw({prefix:t,name:e,encode:n,decode:s=>E$(i(s))})},yQ=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let c=0,u=0,h=0;for(let f=0;f<s;++f){const p=i[t[f]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|p,c+=r,c>=8&&(c-=8,o[h++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},mQ=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&c>>o];if(o&&(s+=e[i&c<<r-o]),n)for(;s.length*r&7;)s+="=";return s},os=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>xw({prefix:e,name:t,encode(i){return mQ(i,n,r)},decode(i){return yQ(i,n,r,t)}}),bQ=xw({prefix:"\0",name:"identity",encode:t=>hQ(t),decode:t=>uQ(t)});var wQ=Object.freeze({__proto__:null,identity:bQ});const vQ=os({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var EQ=Object.freeze({__proto__:null,base2:vQ});const _Q=os({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var SQ=Object.freeze({__proto__:null,base8:_Q});const AQ=ky({prefix:"9",name:"base10",alphabet:"0123456789"});var IQ=Object.freeze({__proto__:null,base10:AQ});const xQ=os({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),CQ=os({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var TQ=Object.freeze({__proto__:null,base16:xQ,base16upper:CQ});const MQ=os({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),NQ=os({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),OQ=os({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),RQ=os({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),DQ=os({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),$Q=os({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kQ=os({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),PQ=os({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),BQ=os({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var LQ=Object.freeze({__proto__:null,base32:MQ,base32upper:NQ,base32pad:OQ,base32padupper:RQ,base32hex:DQ,base32hexupper:$Q,base32hexpad:kQ,base32hexpadupper:PQ,base32z:BQ});const UQ=ky({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jQ=ky({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var zQ=Object.freeze({__proto__:null,base36:UQ,base36upper:jQ});const qQ=ky({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),FQ=ky({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var HQ=Object.freeze({__proto__:null,base58btc:qQ,base58flickr:FQ});const WQ=os({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),KQ=os({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),VQ=os({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),GQ=os({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var YQ=Object.freeze({__proto__:null,base64:WQ,base64pad:KQ,base64url:VQ,base64urlpad:GQ});const S$=Array.from(""),ZQ=S$.reduce((t,e,r)=>(t[r]=e,t),[]),QQ=S$.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function XQ(t){return t.reduce((e,r)=>(e+=ZQ[r],e),"")}function JQ(t){const e=[];for(const r of t){const n=QQ[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const eX=xw({prefix:"",name:"base256emoji",encode:XQ,decode:JQ});var tX=Object.freeze({__proto__:null,base256emoji:eX}),rX=A$,YT=128,nX=-128,iX=Math.pow(2,31);function A$(t,e,r){e=e||[],r=r||0;for(var n=r;t>=iX;)e[r++]=t&255|YT,t/=128;for(;t&nX;)e[r++]=t&255|YT,t>>>=7;return e[r]=t|0,A$.bytes=r-n+1,e}var sX=NS,oX=128,ZT=127;function NS(t,n){var r=0,n=n||0,i=0,s=n,o,c=t.length;do{if(s>=c)throw NS.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&ZT)<<i:(o&ZT)*Math.pow(2,i),i+=7}while(o>=oX);return NS.bytes=s-n,r}var aX=Math.pow(2,7),cX=Math.pow(2,14),lX=Math.pow(2,21),uX=Math.pow(2,28),hX=Math.pow(2,35),dX=Math.pow(2,42),fX=Math.pow(2,49),pX=Math.pow(2,56),gX=Math.pow(2,63),yX=function(t){return t<aX?1:t<cX?2:t<lX?3:t<uX?4:t<hX?5:t<dX?6:t<fX?7:t<pX?8:t<gX?9:10},mX={encode:rX,decode:sX,encodingLength:yX},I$=mX;const QT=(t,e,r=0)=>(I$.encode(t,e,r),e),XT=t=>I$.encodingLength(t),OS=(t,e)=>{const r=e.byteLength,n=XT(t),i=n+XT(r),s=new Uint8Array(i+r);return QT(t,s,0),QT(r,s,n),s.set(e,i),new bX(t,r,e,s)};let bX=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const x$=({name:t,code:e,encode:r})=>new wX(t,e,r);let wX=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?OS(this.code,r):r.then(n=>OS(this.code,n))}else throw Error("Unknown type, must be binary type")}};const C$=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),vX=x$({name:"sha2-256",code:18,encode:C$("SHA-256")}),EX=x$({name:"sha2-512",code:19,encode:C$("SHA-512")});var _X=Object.freeze({__proto__:null,sha256:vX,sha512:EX});const T$=0,SX="identity",M$=E$,AX=t=>OS(T$,M$(t)),IX={code:T$,name:SX,encode:M$,digest:AX};var xX=Object.freeze({__proto__:null,identity:IX});new TextEncoder,new TextDecoder;const JT={...wQ,...EQ,...SQ,...IQ,...TQ,...LQ,...zQ,...HQ,...YQ,...tX};({..._X,...xX});function N$(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const eM=N$("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),A_=N$("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=w$(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),O$={utf8:eM,"utf-8":eM,hex:JT.base16,latin1:A_,ascii:A_,binary:A_,...JT};function Cw(t,e="utf8"){const r=O$[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function wp(t,e="utf8"){const r=O$[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?TA(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function tM(t){return ll(Cw(wp(t,Iw),m$))}function U1(t){return Cw(wp(fc(t),m$),Iw)}function MA(t){const e=wp(sQ,GT),r=iQ+Cw(v$([e,t]),GT);return[rQ,nQ,r].join(tQ)}function CX(t){return Cw(t,Iw)}function TX(t){return wp(t,Iw)}function MX(t){return wp([U1(t.header),U1(t.payload)].join(L1),b$)}function NX(t){return[U1(t.header),U1(t.payload),CX(t.signature)].join(L1)}function ep(t){const e=t.split(L1),r=tM(e[0]),n=tM(e[1]),i=TX(e[2]),s=wp(e.slice(0,2).join(L1),b$);return{header:r,payload:n,signature:i,data:s}}function j1(t=o$(oQ)){const e=y$.getPublicKey(t);return{secretKey:v$([t,e]),publicKey:e}}async function R$(t,e,r,n,i=ye.fromMiliseconds(Date.now())){const s={alg:JZ,typ:eQ},o=MA(n.publicKey),c=i+r,u={iss:o,sub:t,aud:e,iat:i,exp:c},h=MX({header:s,payload:u}),f=y$.sign(h,n.secretKey.slice(0,32));return NX({header:s,payload:u,signature:f})}var rM=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},OX=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),RX=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),DX=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),$X=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),kX=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),PX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,BX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,nM=3,LX=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",PX]],iM=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function D$(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new kX:typeof navigator<"u"?jX(navigator.userAgent):qX()}function UX(t){return t!==""&&LX.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function jX(t){var e=UX(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new $X;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<nM&&(i=rM(rM([],i,!0),FX(nM-i.length),!0)):i=[];var s=i.join("."),o=zX(t),c=BX.exec(t);return c&&c[1]?new DX(r,s,o,c[1]):new OX(r,s,o)}function zX(t){for(var e=0,r=iM.length;e<r;e++){var n=iM[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function qX(){var t=typeof process<"u"&&process.version;return t?new RX(process.version.slice(1)):null}function FX(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var pn={},sM;function $$(){if(sM)return pn;sM=1,Object.defineProperty(pn,"__esModule",{value:!0}),pn.getLocalStorage=pn.getLocalStorageOrThrow=pn.getCrypto=pn.getCryptoOrThrow=pn.getLocation=pn.getLocationOrThrow=pn.getNavigator=pn.getNavigatorOrThrow=pn.getDocument=pn.getDocumentOrThrow=pn.getFromWindowOrThrow=pn.getFromWindow=void 0;function t(E){let S;return typeof window<"u"&&typeof window[E]<"u"&&(S=window[E]),S}pn.getFromWindow=t;function e(E){const S=t(E);if(!S)throw new Error(`${E} is not defined in Window`);return S}pn.getFromWindowOrThrow=e;function r(){return e("document")}pn.getDocumentOrThrow=r;function n(){return t("document")}pn.getDocument=n;function i(){return e("navigator")}pn.getNavigatorOrThrow=i;function s(){return t("navigator")}pn.getNavigator=s;function o(){return e("location")}pn.getLocationOrThrow=o;function c(){return t("location")}pn.getLocation=c;function u(){return e("crypto")}pn.getCryptoOrThrow=u;function h(){return t("crypto")}pn.getCrypto=h;function f(){return e("localStorage")}pn.getLocalStorageOrThrow=f;function p(){return t("localStorage")}return pn.getLocalStorage=p,pn}var fo=$$(),U0={},oM;function HX(){if(oM)return U0;oM=1,Object.defineProperty(U0,"__esModule",{value:!0}),U0.getWindowMetadata=void 0;const t=$$();function e(){let r,n;try{r=t.getDocumentOrThrow(),n=t.getLocationOrThrow()}catch{return null}function i(){const S=r.getElementsByTagName("link"),A=[];for(let I=0;I<S.length;I++){const $=S[I],L=$.getAttribute("rel");if(L&&L.toLowerCase().indexOf("icon")>-1){const k=$.getAttribute("href");if(k)if(k.toLowerCase().indexOf("https:")===-1&&k.toLowerCase().indexOf("http:")===-1&&k.indexOf("//")!==0){let U=n.protocol+"//"+n.host;if(k.indexOf("/")===0)U+=k;else{const q=n.pathname.split("/");q.pop();const j=q.join("/");U+=j+"/"+k}A.push(U)}else if(k.indexOf("//")===0){const U=n.protocol+k;A.push(U)}else A.push(k)}}return A}function s(...S){const A=r.getElementsByTagName("meta");for(let I=0;I<A.length;I++){const $=A[I],L=["itemprop","property","name"].map(k=>$.getAttribute(k)).filter(k=>k?S.includes(k):!1);if(L.length&&L){const k=$.getAttribute("content");if(k)return k}}return""}function o(){let S=s("name","og:site_name","og:title","twitter:title");return S||(S=r.title),S}function c(){return s("description","og:description","twitter:description","keywords")}const u=o(),h=c(),f=n.origin,p=i();return{description:h,url:f,icons:p,name:u}}return U0.getWindowMetadata=e,U0}var k$=HX();function Kg(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function aM(t){return Kg(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const P$="2.23.2";let j0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${P$}`},Tw=class RS extends Error{constructor(e,r={}){var c;const n=(()=>{var u;return r.cause instanceof RS?r.cause.details:(u=r.cause)!=null&&u.message?r.cause.message:r.details})(),i=r.cause instanceof RS&&r.cause.docsPath||r.docsPath,s=(c=j0.getDocsUrl)==null?void 0:c.call(j0,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...j0.version?[`Version: ${j0.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=P$}walk(e){return B$(this,e)}};function B$(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?B$(t.cause,e):e?null:t}let L$=class extends Tw{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function vp(t,{dir:e,size:r=32}={}){return typeof t=="string"?WX(t,{dir:e,size:r}):KX(t,{dir:e,size:r})}function WX(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new L$({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function KX(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new L$({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}let VX=class extends Tw{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},GX=class extends Tw{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Ep(t,{size:e}){if(aM(t)>e)throw new GX({givenSize:aM(t),maxSize:e})}function DS(t,e={}){const{signed:r}=e;e.size&&Ep(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function YX(t,e={}){return Number(DS(t,e))}const ZX=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $S(t,e={}){return typeof t=="number"||typeof t=="bigint"?j$(t,e):typeof t=="string"?JX(t,e):typeof t=="boolean"?QX(t,e):U$(t,e)}function QX(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Ep(r,{size:e.size}),vp(r,{size:e.size})):r}function U$(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=ZX[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(Ep(n,{size:e.size}),vp(n,{dir:"right",size:e.size})):n}function j$(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const u=typeof t=="bigint"?"n":"";throw new VX({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${t}${u}`})}const c=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?vp(c,{size:n}):c}const XX=new TextEncoder;function JX(t,e={}){const r=XX.encode(t);return U$(r,e)}const eJ=new TextEncoder;function tJ(t,e={}){return typeof t=="number"||typeof t=="bigint"?nJ(t,e):typeof t=="boolean"?rJ(t,e):Kg(t)?z$(t,e):q$(t,e)}function rJ(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Ep(r,{size:e.size}),vp(r,{size:e.size})):r}const Fc={zero:48,nine:57,A:65,F:70,a:97,f:102};function cM(t){if(t>=Fc.zero&&t<=Fc.nine)return t-Fc.zero;if(t>=Fc.A&&t<=Fc.F)return t-(Fc.A-10);if(t>=Fc.a&&t<=Fc.f)return t-(Fc.a-10)}function z$(t,e={}){let r=t;e.size&&(Ep(r,{size:e.size}),r=vp(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,c=0;o<i;o++){const u=cM(n.charCodeAt(c++)),h=cM(n.charCodeAt(c++));if(u===void 0||h===void 0)throw new Tw(`Invalid byte sequence ("${n[c-2]}${n[c-1]}" in "${n}").`);s[o]=u*16+h}return s}function nJ(t,e){const r=j$(t,e);return z$(r)}function q$(t,e={}){const r=eJ.encode(t);return typeof e.size=="number"?(Ep(r,{size:e.size}),vp(r,{dir:"right",size:e.size})):r}function z1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function iJ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Mw(t,...e){if(!iJ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function U4e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");z1(t.outputLen),z1(t.blockLen)}function lM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function sJ(t,e){Mw(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Ab=BigInt(2**32-1),uM=BigInt(32);function oJ(t,e=!1){return e?{h:Number(t&Ab),l:Number(t>>uM&Ab)}:{h:Number(t>>uM&Ab)|0,l:Number(t&Ab)|0}}function aJ(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=oJ(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const cJ=(t,e,r)=>t<<r|e>>>32-r,lJ=(t,e,r)=>e<<r|t>>>32-r,uJ=(t,e,r)=>e<<r-32|t>>>64-r,hJ=(t,e,r)=>t<<r-32|e>>>64-r,Ld=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dJ(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function j4e(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function z4e(t,e){return t<<32-e|t>>>e}const hM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function fJ(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function dM(t){for(let e=0;e<t.length;e++)t[e]=fJ(t[e])}function pJ(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function F$(t){return typeof t=="string"&&(t=pJ(t)),Mw(t),t}function q4e(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Mw(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}let gJ=class{clone(){return this._cloneInto()}};function yJ(t){const e=n=>t().update(F$(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function H4e(t=32){if(Ld&&typeof Ld.getRandomValues=="function")return Ld.getRandomValues(new Uint8Array(t));if(Ld&&typeof Ld.randomBytes=="function")return Ld.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const H$=[],W$=[],K$=[],mJ=BigInt(0),z0=BigInt(1),bJ=BigInt(2),wJ=BigInt(7),vJ=BigInt(256),EJ=BigInt(113);for(let t=0,e=z0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],H$.push(2*(5*n+r)),W$.push((t+1)*(t+2)/2%64);let i=mJ;for(let s=0;s<7;s++)e=(e<<z0^(e>>wJ)*EJ)%vJ,e&bJ&&(i^=z0<<(z0<<BigInt(s))-z0);K$.push(i)}const[_J,SJ]=aJ(K$,!0),fM=(t,e,r)=>r>32?uJ(t,e,r):cJ(t,e,r),pM=(t,e,r)=>r>32?hJ(t,e,r):lJ(t,e,r);function AJ(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,h=r[u],f=r[u+1],p=fM(h,f,1)^r[c],E=pM(h,f,1)^r[c+1];for(let S=0;S<50;S+=10)t[o+S]^=p,t[o+S+1]^=E}let i=t[2],s=t[3];for(let o=0;o<24;o++){const c=W$[o],u=fM(i,s,c),h=pM(i,s,c),f=H$[o];i=t[f],s=t[f+1],t[f]=u,t[f+1]=h}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)r[c]=t[o+c];for(let c=0;c<10;c++)t[o+c]^=~r[(c+2)%10]&r[(c+4)%10]}t[0]^=_J[n],t[1]^=SJ[n]}r.fill(0)}let IJ=class V$ extends gJ{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,z1(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=dJ(this.state)}keccak(){hM||dM(this.state32),AJ(this.state32,this.rounds),hM||dM(this.state32),this.posOut=0,this.pos=0}update(e){lM(this);const{blockLen:r,state:n}=this;e=F$(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let c=0;c<o;c++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){lM(this,!1),Mw(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return z1(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(sJ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new V$(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const xJ=(t,e,r)=>yJ(()=>new IJ(e,t,r)),CJ=xJ(1,136,256/8);function G$(t,e){const r=e||"hex",n=CJ(Kg(t,{strict:!1})?tJ(t):t);return r==="bytes"?n:$S(n)}let TJ=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const I_=new TJ(8192);function MJ(t,e){if(I_.has(`${t}.${e}`))return I_.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=G$(q$(r),"bytes"),i=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return I_.set(`${t}.${e}`,s),s}function NJ(t){const e=G$(`0x${t.substring(4)}`).substring(26);return MJ(`0x${e}`)}async function OJ({hash:t,signature:e}){const r=Kg(t)?t:$S(t),{secp256k1:n}=await Jf(async()=>{const{secp256k1:o}=await import("./secp256k1-Dr5XJ9nh.js");return{secp256k1:o}},__vite__mapDeps([3,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:h,s:f,v:p,yParity:E}=e,S=Number(E??p),A=gM(S);return new n.Signature(DS(h),DS(f)).addRecoveryBit(A)}const o=Kg(e)?e:$S(e),c=YX(`0x${o.slice(130)}`),u=gM(c);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function gM(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function RJ({hash:t,signature:e}){return NJ(await OJ({hash:t,signature:e}))}function Y$(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function jf(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=Y$(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function DJ(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var c=t.length,u=t.charAt(0),h=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function p(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var I=0,$=0,L=0,k=A.length;L!==k&&A[L]===0;)L++,I++;for(var U=(k-L)*f+1>>>0,q=new Uint8Array(U);L!==k;){for(var j=A[L],z=0,V=U-1;(j!==0||z<$)&&V!==-1;V--,z++)j+=256*q[V]>>>0,q[V]=j%c>>>0,j=j/c>>>0;if(j!==0)throw new Error("Non-zero carry");$=z,L++}for(var G=U-$;G!==U&&q[G]===0;)G++;for(var B=u.repeat(I);G<U;++G)B+=t.charAt(q[G]);return B}function E(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var I=0;if(A[I]!==" "){for(var $=0,L=0;A[I]===u;)$++,I++;for(var k=(A.length-I)*h+1>>>0,U=new Uint8Array(k);A[I];){var q=r[A.charCodeAt(I)];if(q===255)return;for(var j=0,z=k-1;(q!==0||j<L)&&z!==-1;z--,j++)q+=c*U[z]>>>0,U[z]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");L=j,I++}if(A[I]!==" "){for(var V=k-L;V!==k&&U[V]===0;)V++;for(var G=new Uint8Array($+(k-V)),B=$;V!==k;)G[B++]=U[V++];return G}}}function S(A){var I=E(A);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:E,decode:S}}var $J=DJ,kJ=$J;const PJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},BJ=t=>new TextEncoder().encode(t),LJ=t=>new TextDecoder().decode(t);class UJ{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class jJ{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Z$(this,e)}}class zJ{constructor(e){this.decoders=e}or(e){return Z$(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Z$=(t,e)=>new zJ({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class qJ{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new UJ(e,r,n),this.decoder=new jJ(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Nw=({name:t,prefix:e,encode:r,decode:n})=>new qJ(t,e,r,n),Py=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=kJ(r,e);return Nw({prefix:t,name:e,encode:n,decode:s=>PJ(i(s))})},FJ=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let c=0,u=0,h=0;for(let f=0;f<s;++f){const p=i[t[f]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|p,c+=r,c>=8&&(c-=8,o[h++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},HJ=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&c>>o];if(o&&(s+=e[i&c<<r-o]),n)for(;s.length*r&7;)s+="=";return s},as=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Nw({prefix:e,name:t,encode(i){return HJ(i,n,r)},decode(i){return FJ(i,n,r,t)}}),WJ=Nw({prefix:"\0",name:"identity",encode:t=>LJ(t),decode:t=>BJ(t)}),KJ=Object.freeze(Object.defineProperty({__proto__:null,identity:WJ},Symbol.toStringTag,{value:"Module"})),VJ=as({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),GJ=Object.freeze(Object.defineProperty({__proto__:null,base2:VJ},Symbol.toStringTag,{value:"Module"})),YJ=as({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ZJ=Object.freeze(Object.defineProperty({__proto__:null,base8:YJ},Symbol.toStringTag,{value:"Module"})),QJ=Py({prefix:"9",name:"base10",alphabet:"0123456789"}),XJ=Object.freeze(Object.defineProperty({__proto__:null,base10:QJ},Symbol.toStringTag,{value:"Module"})),JJ=as({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eee=as({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),tee=Object.freeze(Object.defineProperty({__proto__:null,base16:JJ,base16upper:eee},Symbol.toStringTag,{value:"Module"})),ree=as({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nee=as({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iee=as({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),see=as({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oee=as({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aee=as({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cee=as({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lee=as({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),uee=as({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),hee=Object.freeze(Object.defineProperty({__proto__:null,base32:ree,base32hex:oee,base32hexpad:cee,base32hexpadupper:lee,base32hexupper:aee,base32pad:iee,base32padupper:see,base32upper:nee,base32z:uee},Symbol.toStringTag,{value:"Module"})),dee=Py({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),fee=Py({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),pee=Object.freeze(Object.defineProperty({__proto__:null,base36:dee,base36upper:fee},Symbol.toStringTag,{value:"Module"})),gee=Py({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yee=Py({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),mee=Object.freeze(Object.defineProperty({__proto__:null,base58btc:gee,base58flickr:yee},Symbol.toStringTag,{value:"Module"})),bee=as({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wee=as({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vee=as({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Eee=as({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),_ee=Object.freeze(Object.defineProperty({__proto__:null,base64:bee,base64pad:wee,base64url:vee,base64urlpad:Eee},Symbol.toStringTag,{value:"Module"})),Q$=Array.from(""),See=Q$.reduce((t,e,r)=>(t[r]=e,t),[]),Aee=Q$.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Iee(t){return t.reduce((e,r)=>(e+=See[r],e),"")}function xee(t){const e=[];for(const r of t){const n=Aee[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const Cee=Nw({prefix:"",name:"base256emoji",encode:Iee,decode:xee}),Tee=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Cee},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const yM={...KJ,...GJ,...ZJ,...XJ,...tee,...hee,...pee,...mee,..._ee,...Tee};function X$(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const mM=X$("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),x_=X$("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Y$(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),J$={utf8:mM,"utf-8":mM,hex:yM.base16,latin1:x_,ascii:x_,binary:x_,...yM};function Pn(t,e="utf8"){const r=J$[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}function Vr(t,e="utf8"){const r=J$[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var C_={};const Mee="6.6.1",Nee={version:Mee};var T_={},l1={exports:{}},Oee=l1.exports,bM;function hl(){return bM||(bM=1,function(t){(function(e,r){function n(D,_){if(!D)throw new Error(_||"Assertion failed")}function i(D,_){D.super_=_;var w=function(){};w.prototype=_.prototype,D.prototype=new w,D.prototype.constructor=D}function s(D,_,w){if(s.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&((_==="le"||_==="be")&&(w=_,_=10),this._init(D||0,_||10,w||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=G4.Buffer}catch{}s.isBN=function(_){return _ instanceof s?!0:_!==null&&typeof _=="object"&&_.constructor.wordSize===s.wordSize&&Array.isArray(_.words)},s.max=function(_,w){return _.cmp(w)>0?_:w},s.min=function(_,w){return _.cmp(w)<0?_:w},s.prototype._init=function(_,w,g){if(typeof _=="number")return this._initNumber(_,w,g);if(typeof _=="object")return this._initArray(_,w,g);w==="hex"&&(w=16),n(w===(w|0)&&w>=2&&w<=36),_=_.toString().replace(/\s+/g,"");var b=0;_[0]==="-"&&(b++,this.negative=1),b<_.length&&(w===16?this._parseHex(_,b,g):(this._parseBase(_,w,b),g==="le"&&this._initArray(this.toArray(),w,g)))},s.prototype._initNumber=function(_,w,g){_<0&&(this.negative=1,_=-_),_<67108864?(this.words=[_&67108863],this.length=1):_<4503599627370496?(this.words=[_&67108863,_/67108864&67108863],this.length=2):(n(_<9007199254740992),this.words=[_&67108863,_/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),w,g)},s.prototype._initArray=function(_,w,g){if(n(typeof _.length=="number"),_.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var m,M,R=0;if(g==="be")for(b=_.length-1,m=0;b>=0;b-=3)M=_[b]|_[b-1]<<8|_[b-2]<<16,this.words[m]|=M<<R&67108863,this.words[m+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,m++);else if(g==="le")for(b=0,m=0;b<_.length;b+=3)M=_[b]|_[b+1]<<8|_[b+2]<<16,this.words[m]|=M<<R&67108863,this.words[m+1]=M>>>26-R&67108863,R+=24,R>=26&&(R-=26,m++);return this.strip()};function c(D,_){var w=D.charCodeAt(_);return w>=65&&w<=70?w-55:w>=97&&w<=102?w-87:w-48&15}function u(D,_,w){var g=c(D,w);return w-1>=_&&(g|=c(D,w-1)<<4),g}s.prototype._parseHex=function(_,w,g){this.length=Math.ceil((_.length-w)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var m=0,M=0,R;if(g==="be")for(b=_.length-1;b>=w;b-=2)R=u(_,w,b)<<m,this.words[M]|=R&67108863,m>=18?(m-=18,M+=1,this.words[M]|=R>>>26):m+=8;else{var C=_.length-w;for(b=C%2===0?w+1:w;b<_.length;b+=2)R=u(_,w,b)<<m,this.words[M]|=R&67108863,m>=18?(m-=18,M+=1,this.words[M]|=R>>>26):m+=8}this.strip()};function h(D,_,w,g){for(var b=0,m=Math.min(D.length,w),M=_;M<m;M++){var R=D.charCodeAt(M)-48;b*=g,R>=49?b+=R-49+10:R>=17?b+=R-17+10:b+=R}return b}s.prototype._parseBase=function(_,w,g){this.words=[0],this.length=1;for(var b=0,m=1;m<=67108863;m*=w)b++;b--,m=m/w|0;for(var M=_.length-g,R=M%b,C=Math.min(M,M-R)+g,v=0,O=g;O<C;O+=b)v=h(_,O,O+b,w),this.imuln(m),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v);if(R!==0){var x=1;for(v=h(_,O,_.length,w),O=0;O<R;O++)x*=w;this.imuln(x),this.words[0]+v<67108864?this.words[0]+=v:this._iaddn(v)}this.strip()},s.prototype.copy=function(_){_.words=new Array(this.length);for(var w=0;w<this.length;w++)_.words[w]=this.words[w];_.length=this.length,_.negative=this.negative,_.red=this.red},s.prototype.clone=function(){var _=new s(null);return this.copy(_),_},s.prototype._expand=function(_){for(;this.length<_;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(_,w){_=_||10,w=w|0||1;var g;if(_===16||_==="hex"){g="";for(var b=0,m=0,M=0;M<this.length;M++){var R=this.words[M],C=((R<<b|m)&16777215).toString(16);m=R>>>24-b&16777215,b+=2,b>=26&&(b-=26,M--),m!==0||M!==this.length-1?g=f[6-C.length]+C+g:g=C+g}for(m!==0&&(g=m.toString(16)+g);g.length%w!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(_===(_|0)&&_>=2&&_<=36){var v=p[_],O=E[_];g="";var x=this.clone();for(x.negative=0;!x.isZero();){var N=x.modn(O).toString(_);x=x.idivn(O),x.isZero()?g=N+g:g=f[v-N.length]+N+g}for(this.isZero()&&(g="0"+g);g.length%w!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var _=this.words[0];return this.length===2?_+=this.words[1]*67108864:this.length===3&&this.words[2]===1?_+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_:_},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(_,w){return n(typeof o<"u"),this.toArrayLike(o,_,w)},s.prototype.toArray=function(_,w){return this.toArrayLike(Array,_,w)},s.prototype.toArrayLike=function(_,w,g){var b=this.byteLength(),m=g||Math.max(1,b);n(b<=m,"byte array longer than desired length"),n(m>0,"Requested array length <= 0"),this.strip();var M=w==="le",R=new _(m),C,v,O=this.clone();if(M){for(v=0;!O.isZero();v++)C=O.andln(255),O.iushrn(8),R[v]=C;for(;v<m;v++)R[v]=0}else{for(v=0;v<m-b;v++)R[v]=0;for(v=0;!O.isZero();v++)C=O.andln(255),O.iushrn(8),R[m-v-1]=C}return R},Math.clz32?s.prototype._countBits=function(_){return 32-Math.clz32(_)}:s.prototype._countBits=function(_){var w=_,g=0;return w>=4096&&(g+=13,w>>>=13),w>=64&&(g+=7,w>>>=7),w>=8&&(g+=4,w>>>=4),w>=2&&(g+=2,w>>>=2),g+w},s.prototype._zeroBits=function(_){if(_===0)return 26;var w=_,g=0;return(w&8191)===0&&(g+=13,w>>>=13),(w&127)===0&&(g+=7,w>>>=7),(w&15)===0&&(g+=4,w>>>=4),(w&3)===0&&(g+=2,w>>>=2),(w&1)===0&&g++,g},s.prototype.bitLength=function(){var _=this.words[this.length-1],w=this._countBits(_);return(this.length-1)*26+w};function S(D){for(var _=new Array(D.bitLength()),w=0;w<_.length;w++){var g=w/26|0,b=w%26;_[w]=(D.words[g]&1<<b)>>>b}return _}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _=0,w=0;w<this.length;w++){var g=this._zeroBits(this.words[w]);if(_+=g,g!==26)break}return _},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(_){return this.negative!==0?this.abs().inotn(_).iaddn(1):this.clone()},s.prototype.fromTwos=function(_){return this.testn(_-1)?this.notn(_).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(_){for(;this.length<_.length;)this.words[this.length++]=0;for(var w=0;w<_.length;w++)this.words[w]=this.words[w]|_.words[w];return this.strip()},s.prototype.ior=function(_){return n((this.negative|_.negative)===0),this.iuor(_)},s.prototype.or=function(_){return this.length>_.length?this.clone().ior(_):_.clone().ior(this)},s.prototype.uor=function(_){return this.length>_.length?this.clone().iuor(_):_.clone().iuor(this)},s.prototype.iuand=function(_){var w;this.length>_.length?w=_:w=this;for(var g=0;g<w.length;g++)this.words[g]=this.words[g]&_.words[g];return this.length=w.length,this.strip()},s.prototype.iand=function(_){return n((this.negative|_.negative)===0),this.iuand(_)},s.prototype.and=function(_){return this.length>_.length?this.clone().iand(_):_.clone().iand(this)},s.prototype.uand=function(_){return this.length>_.length?this.clone().iuand(_):_.clone().iuand(this)},s.prototype.iuxor=function(_){var w,g;this.length>_.length?(w=this,g=_):(w=_,g=this);for(var b=0;b<g.length;b++)this.words[b]=w.words[b]^g.words[b];if(this!==w)for(;b<w.length;b++)this.words[b]=w.words[b];return this.length=w.length,this.strip()},s.prototype.ixor=function(_){return n((this.negative|_.negative)===0),this.iuxor(_)},s.prototype.xor=function(_){return this.length>_.length?this.clone().ixor(_):_.clone().ixor(this)},s.prototype.uxor=function(_){return this.length>_.length?this.clone().iuxor(_):_.clone().iuxor(this)},s.prototype.inotn=function(_){n(typeof _=="number"&&_>=0);var w=Math.ceil(_/26)|0,g=_%26;this._expand(w),g>0&&w--;for(var b=0;b<w;b++)this.words[b]=~this.words[b]&67108863;return g>0&&(this.words[b]=~this.words[b]&67108863>>26-g),this.strip()},s.prototype.notn=function(_){return this.clone().inotn(_)},s.prototype.setn=function(_,w){n(typeof _=="number"&&_>=0);var g=_/26|0,b=_%26;return this._expand(g+1),w?this.words[g]=this.words[g]|1<<b:this.words[g]=this.words[g]&~(1<<b),this.strip()},s.prototype.iadd=function(_){var w;if(this.negative!==0&&_.negative===0)return this.negative=0,w=this.isub(_),this.negative^=1,this._normSign();if(this.negative===0&&_.negative!==0)return _.negative=0,w=this.isub(_),_.negative=1,w._normSign();var g,b;this.length>_.length?(g=this,b=_):(g=_,b=this);for(var m=0,M=0;M<b.length;M++)w=(g.words[M]|0)+(b.words[M]|0)+m,this.words[M]=w&67108863,m=w>>>26;for(;m!==0&&M<g.length;M++)w=(g.words[M]|0)+m,this.words[M]=w&67108863,m=w>>>26;if(this.length=g.length,m!==0)this.words[this.length]=m,this.length++;else if(g!==this)for(;M<g.length;M++)this.words[M]=g.words[M];return this},s.prototype.add=function(_){var w;return _.negative!==0&&this.negative===0?(_.negative=0,w=this.sub(_),_.negative^=1,w):_.negative===0&&this.negative!==0?(this.negative=0,w=_.sub(this),this.negative=1,w):this.length>_.length?this.clone().iadd(_):_.clone().iadd(this)},s.prototype.isub=function(_){if(_.negative!==0){_.negative=0;var w=this.iadd(_);return _.negative=1,w._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(_),this.negative=1,this._normSign();var g=this.cmp(_);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,m;g>0?(b=this,m=_):(b=_,m=this);for(var M=0,R=0;R<m.length;R++)w=(b.words[R]|0)-(m.words[R]|0)+M,M=w>>26,this.words[R]=w&67108863;for(;M!==0&&R<b.length;R++)w=(b.words[R]|0)+M,M=w>>26,this.words[R]=w&67108863;if(M===0&&R<b.length&&b!==this)for(;R<b.length;R++)this.words[R]=b.words[R];return this.length=Math.max(this.length,R),b!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(_){return this.clone().isub(_)};function A(D,_,w){w.negative=_.negative^D.negative;var g=D.length+_.length|0;w.length=g,g=g-1|0;var b=D.words[0]|0,m=_.words[0]|0,M=b*m,R=M&67108863,C=M/67108864|0;w.words[0]=R;for(var v=1;v<g;v++){for(var O=C>>>26,x=C&67108863,N=Math.min(v,_.length-1),H=Math.max(0,v-D.length+1);H<=N;H++){var Y=v-H|0;b=D.words[Y]|0,m=_.words[H]|0,M=b*m+x,O+=M/67108864|0,x=M&67108863}w.words[v]=x|0,C=O|0}return C!==0?w.words[v]=C|0:w.length--,w.strip()}var I=function(_,w,g){var b=_.words,m=w.words,M=g.words,R=0,C,v,O,x=b[0]|0,N=x&8191,H=x>>>13,Y=b[1]|0,Q=Y&8191,ee=Y>>>13,re=b[2]|0,oe=re&8191,be=re>>>13,Ce=b[3]|0,Se=Ce&8191,xe=Ce>>>13,ze=b[4]|0,Be=ze&8191,tt=ze>>>13,He=b[5]|0,Je=He&8191,vt=He>>>13,yt=b[6]|0,et=yt&8191,ht=yt>>>13,Mt=b[7]|0,dt=Mt&8191,Ee=Mt>>>13,Te=b[8]|0,Z=Te&8191,F=Te>>>13,K=b[9]|0,J=K&8191,ie=K>>>13,ce=m[0]|0,de=ce&8191,$e=ce>>>13,Ye=m[1]|0,Fe=Ye&8191,We=Ye>>>13,at=m[2]|0,ft=at&8191,Ut=at>>>13,Kt=m[3]|0,pt=Kt&8191,Ft=Kt>>>13,Vt=m[4]|0,gt=Vt&8191,Et=Vt>>>13,Rt=m[5]|0,rt=Rt&8191,Nt=Rt>>>13,St=m[6]|0,it=St&8191,Ct=St>>>13,Dt=m[7]|0,bt=Dt&8191,tr=Dt>>>13,Yt=m[8]|0,It=Yt&8191,Xt=Yt>>>13,ar=m[9]|0,xt=ar&8191,fr=ar>>>13;g.negative=_.negative^w.negative,g.length=19,C=Math.imul(N,de),v=Math.imul(N,$e),v=v+Math.imul(H,de)|0,O=Math.imul(H,$e);var Zt=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,C=Math.imul(Q,de),v=Math.imul(Q,$e),v=v+Math.imul(ee,de)|0,O=Math.imul(ee,$e),C=C+Math.imul(N,Fe)|0,v=v+Math.imul(N,We)|0,v=v+Math.imul(H,Fe)|0,O=O+Math.imul(H,We)|0;var pr=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(pr>>>26)|0,pr&=67108863,C=Math.imul(oe,de),v=Math.imul(oe,$e),v=v+Math.imul(be,de)|0,O=Math.imul(be,$e),C=C+Math.imul(Q,Fe)|0,v=v+Math.imul(Q,We)|0,v=v+Math.imul(ee,Fe)|0,O=O+Math.imul(ee,We)|0,C=C+Math.imul(N,ft)|0,v=v+Math.imul(N,Ut)|0,v=v+Math.imul(H,ft)|0,O=O+Math.imul(H,Ut)|0;var Mr=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Mr>>>26)|0,Mr&=67108863,C=Math.imul(Se,de),v=Math.imul(Se,$e),v=v+Math.imul(xe,de)|0,O=Math.imul(xe,$e),C=C+Math.imul(oe,Fe)|0,v=v+Math.imul(oe,We)|0,v=v+Math.imul(be,Fe)|0,O=O+Math.imul(be,We)|0,C=C+Math.imul(Q,ft)|0,v=v+Math.imul(Q,Ut)|0,v=v+Math.imul(ee,ft)|0,O=O+Math.imul(ee,Ut)|0,C=C+Math.imul(N,pt)|0,v=v+Math.imul(N,Ft)|0,v=v+Math.imul(H,pt)|0,O=O+Math.imul(H,Ft)|0;var Hi=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,C=Math.imul(Be,de),v=Math.imul(Be,$e),v=v+Math.imul(tt,de)|0,O=Math.imul(tt,$e),C=C+Math.imul(Se,Fe)|0,v=v+Math.imul(Se,We)|0,v=v+Math.imul(xe,Fe)|0,O=O+Math.imul(xe,We)|0,C=C+Math.imul(oe,ft)|0,v=v+Math.imul(oe,Ut)|0,v=v+Math.imul(be,ft)|0,O=O+Math.imul(be,Ut)|0,C=C+Math.imul(Q,pt)|0,v=v+Math.imul(Q,Ft)|0,v=v+Math.imul(ee,pt)|0,O=O+Math.imul(ee,Ft)|0,C=C+Math.imul(N,gt)|0,v=v+Math.imul(N,Et)|0,v=v+Math.imul(H,gt)|0,O=O+Math.imul(H,Et)|0;var us=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(us>>>26)|0,us&=67108863,C=Math.imul(Je,de),v=Math.imul(Je,$e),v=v+Math.imul(vt,de)|0,O=Math.imul(vt,$e),C=C+Math.imul(Be,Fe)|0,v=v+Math.imul(Be,We)|0,v=v+Math.imul(tt,Fe)|0,O=O+Math.imul(tt,We)|0,C=C+Math.imul(Se,ft)|0,v=v+Math.imul(Se,Ut)|0,v=v+Math.imul(xe,ft)|0,O=O+Math.imul(xe,Ut)|0,C=C+Math.imul(oe,pt)|0,v=v+Math.imul(oe,Ft)|0,v=v+Math.imul(be,pt)|0,O=O+Math.imul(be,Ft)|0,C=C+Math.imul(Q,gt)|0,v=v+Math.imul(Q,Et)|0,v=v+Math.imul(ee,gt)|0,O=O+Math.imul(ee,Et)|0,C=C+Math.imul(N,rt)|0,v=v+Math.imul(N,Nt)|0,v=v+Math.imul(H,rt)|0,O=O+Math.imul(H,Nt)|0;var oi=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(oi>>>26)|0,oi&=67108863,C=Math.imul(et,de),v=Math.imul(et,$e),v=v+Math.imul(ht,de)|0,O=Math.imul(ht,$e),C=C+Math.imul(Je,Fe)|0,v=v+Math.imul(Je,We)|0,v=v+Math.imul(vt,Fe)|0,O=O+Math.imul(vt,We)|0,C=C+Math.imul(Be,ft)|0,v=v+Math.imul(Be,Ut)|0,v=v+Math.imul(tt,ft)|0,O=O+Math.imul(tt,Ut)|0,C=C+Math.imul(Se,pt)|0,v=v+Math.imul(Se,Ft)|0,v=v+Math.imul(xe,pt)|0,O=O+Math.imul(xe,Ft)|0,C=C+Math.imul(oe,gt)|0,v=v+Math.imul(oe,Et)|0,v=v+Math.imul(be,gt)|0,O=O+Math.imul(be,Et)|0,C=C+Math.imul(Q,rt)|0,v=v+Math.imul(Q,Nt)|0,v=v+Math.imul(ee,rt)|0,O=O+Math.imul(ee,Nt)|0,C=C+Math.imul(N,it)|0,v=v+Math.imul(N,Ct)|0,v=v+Math.imul(H,it)|0,O=O+Math.imul(H,Ct)|0;var Mn=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,C=Math.imul(dt,de),v=Math.imul(dt,$e),v=v+Math.imul(Ee,de)|0,O=Math.imul(Ee,$e),C=C+Math.imul(et,Fe)|0,v=v+Math.imul(et,We)|0,v=v+Math.imul(ht,Fe)|0,O=O+Math.imul(ht,We)|0,C=C+Math.imul(Je,ft)|0,v=v+Math.imul(Je,Ut)|0,v=v+Math.imul(vt,ft)|0,O=O+Math.imul(vt,Ut)|0,C=C+Math.imul(Be,pt)|0,v=v+Math.imul(Be,Ft)|0,v=v+Math.imul(tt,pt)|0,O=O+Math.imul(tt,Ft)|0,C=C+Math.imul(Se,gt)|0,v=v+Math.imul(Se,Et)|0,v=v+Math.imul(xe,gt)|0,O=O+Math.imul(xe,Et)|0,C=C+Math.imul(oe,rt)|0,v=v+Math.imul(oe,Nt)|0,v=v+Math.imul(be,rt)|0,O=O+Math.imul(be,Nt)|0,C=C+Math.imul(Q,it)|0,v=v+Math.imul(Q,Ct)|0,v=v+Math.imul(ee,it)|0,O=O+Math.imul(ee,Ct)|0,C=C+Math.imul(N,bt)|0,v=v+Math.imul(N,tr)|0,v=v+Math.imul(H,bt)|0,O=O+Math.imul(H,tr)|0;var qs=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(qs>>>26)|0,qs&=67108863,C=Math.imul(Z,de),v=Math.imul(Z,$e),v=v+Math.imul(F,de)|0,O=Math.imul(F,$e),C=C+Math.imul(dt,Fe)|0,v=v+Math.imul(dt,We)|0,v=v+Math.imul(Ee,Fe)|0,O=O+Math.imul(Ee,We)|0,C=C+Math.imul(et,ft)|0,v=v+Math.imul(et,Ut)|0,v=v+Math.imul(ht,ft)|0,O=O+Math.imul(ht,Ut)|0,C=C+Math.imul(Je,pt)|0,v=v+Math.imul(Je,Ft)|0,v=v+Math.imul(vt,pt)|0,O=O+Math.imul(vt,Ft)|0,C=C+Math.imul(Be,gt)|0,v=v+Math.imul(Be,Et)|0,v=v+Math.imul(tt,gt)|0,O=O+Math.imul(tt,Et)|0,C=C+Math.imul(Se,rt)|0,v=v+Math.imul(Se,Nt)|0,v=v+Math.imul(xe,rt)|0,O=O+Math.imul(xe,Nt)|0,C=C+Math.imul(oe,it)|0,v=v+Math.imul(oe,Ct)|0,v=v+Math.imul(be,it)|0,O=O+Math.imul(be,Ct)|0,C=C+Math.imul(Q,bt)|0,v=v+Math.imul(Q,tr)|0,v=v+Math.imul(ee,bt)|0,O=O+Math.imul(ee,tr)|0,C=C+Math.imul(N,It)|0,v=v+Math.imul(N,Xt)|0,v=v+Math.imul(H,It)|0,O=O+Math.imul(H,Xt)|0;var Ts=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,C=Math.imul(J,de),v=Math.imul(J,$e),v=v+Math.imul(ie,de)|0,O=Math.imul(ie,$e),C=C+Math.imul(Z,Fe)|0,v=v+Math.imul(Z,We)|0,v=v+Math.imul(F,Fe)|0,O=O+Math.imul(F,We)|0,C=C+Math.imul(dt,ft)|0,v=v+Math.imul(dt,Ut)|0,v=v+Math.imul(Ee,ft)|0,O=O+Math.imul(Ee,Ut)|0,C=C+Math.imul(et,pt)|0,v=v+Math.imul(et,Ft)|0,v=v+Math.imul(ht,pt)|0,O=O+Math.imul(ht,Ft)|0,C=C+Math.imul(Je,gt)|0,v=v+Math.imul(Je,Et)|0,v=v+Math.imul(vt,gt)|0,O=O+Math.imul(vt,Et)|0,C=C+Math.imul(Be,rt)|0,v=v+Math.imul(Be,Nt)|0,v=v+Math.imul(tt,rt)|0,O=O+Math.imul(tt,Nt)|0,C=C+Math.imul(Se,it)|0,v=v+Math.imul(Se,Ct)|0,v=v+Math.imul(xe,it)|0,O=O+Math.imul(xe,Ct)|0,C=C+Math.imul(oe,bt)|0,v=v+Math.imul(oe,tr)|0,v=v+Math.imul(be,bt)|0,O=O+Math.imul(be,tr)|0,C=C+Math.imul(Q,It)|0,v=v+Math.imul(Q,Xt)|0,v=v+Math.imul(ee,It)|0,O=O+Math.imul(ee,Xt)|0,C=C+Math.imul(N,xt)|0,v=v+Math.imul(N,fr)|0,v=v+Math.imul(H,xt)|0,O=O+Math.imul(H,fr)|0;var Fs=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Fs>>>26)|0,Fs&=67108863,C=Math.imul(J,Fe),v=Math.imul(J,We),v=v+Math.imul(ie,Fe)|0,O=Math.imul(ie,We),C=C+Math.imul(Z,ft)|0,v=v+Math.imul(Z,Ut)|0,v=v+Math.imul(F,ft)|0,O=O+Math.imul(F,Ut)|0,C=C+Math.imul(dt,pt)|0,v=v+Math.imul(dt,Ft)|0,v=v+Math.imul(Ee,pt)|0,O=O+Math.imul(Ee,Ft)|0,C=C+Math.imul(et,gt)|0,v=v+Math.imul(et,Et)|0,v=v+Math.imul(ht,gt)|0,O=O+Math.imul(ht,Et)|0,C=C+Math.imul(Je,rt)|0,v=v+Math.imul(Je,Nt)|0,v=v+Math.imul(vt,rt)|0,O=O+Math.imul(vt,Nt)|0,C=C+Math.imul(Be,it)|0,v=v+Math.imul(Be,Ct)|0,v=v+Math.imul(tt,it)|0,O=O+Math.imul(tt,Ct)|0,C=C+Math.imul(Se,bt)|0,v=v+Math.imul(Se,tr)|0,v=v+Math.imul(xe,bt)|0,O=O+Math.imul(xe,tr)|0,C=C+Math.imul(oe,It)|0,v=v+Math.imul(oe,Xt)|0,v=v+Math.imul(be,It)|0,O=O+Math.imul(be,Xt)|0,C=C+Math.imul(Q,xt)|0,v=v+Math.imul(Q,fr)|0,v=v+Math.imul(ee,xt)|0,O=O+Math.imul(ee,fr)|0;var go=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(go>>>26)|0,go&=67108863,C=Math.imul(J,ft),v=Math.imul(J,Ut),v=v+Math.imul(ie,ft)|0,O=Math.imul(ie,Ut),C=C+Math.imul(Z,pt)|0,v=v+Math.imul(Z,Ft)|0,v=v+Math.imul(F,pt)|0,O=O+Math.imul(F,Ft)|0,C=C+Math.imul(dt,gt)|0,v=v+Math.imul(dt,Et)|0,v=v+Math.imul(Ee,gt)|0,O=O+Math.imul(Ee,Et)|0,C=C+Math.imul(et,rt)|0,v=v+Math.imul(et,Nt)|0,v=v+Math.imul(ht,rt)|0,O=O+Math.imul(ht,Nt)|0,C=C+Math.imul(Je,it)|0,v=v+Math.imul(Je,Ct)|0,v=v+Math.imul(vt,it)|0,O=O+Math.imul(vt,Ct)|0,C=C+Math.imul(Be,bt)|0,v=v+Math.imul(Be,tr)|0,v=v+Math.imul(tt,bt)|0,O=O+Math.imul(tt,tr)|0,C=C+Math.imul(Se,It)|0,v=v+Math.imul(Se,Xt)|0,v=v+Math.imul(xe,It)|0,O=O+Math.imul(xe,Xt)|0,C=C+Math.imul(oe,xt)|0,v=v+Math.imul(oe,fr)|0,v=v+Math.imul(be,xt)|0,O=O+Math.imul(be,fr)|0;var gi=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(gi>>>26)|0,gi&=67108863,C=Math.imul(J,pt),v=Math.imul(J,Ft),v=v+Math.imul(ie,pt)|0,O=Math.imul(ie,Ft),C=C+Math.imul(Z,gt)|0,v=v+Math.imul(Z,Et)|0,v=v+Math.imul(F,gt)|0,O=O+Math.imul(F,Et)|0,C=C+Math.imul(dt,rt)|0,v=v+Math.imul(dt,Nt)|0,v=v+Math.imul(Ee,rt)|0,O=O+Math.imul(Ee,Nt)|0,C=C+Math.imul(et,it)|0,v=v+Math.imul(et,Ct)|0,v=v+Math.imul(ht,it)|0,O=O+Math.imul(ht,Ct)|0,C=C+Math.imul(Je,bt)|0,v=v+Math.imul(Je,tr)|0,v=v+Math.imul(vt,bt)|0,O=O+Math.imul(vt,tr)|0,C=C+Math.imul(Be,It)|0,v=v+Math.imul(Be,Xt)|0,v=v+Math.imul(tt,It)|0,O=O+Math.imul(tt,Xt)|0,C=C+Math.imul(Se,xt)|0,v=v+Math.imul(Se,fr)|0,v=v+Math.imul(xe,xt)|0,O=O+Math.imul(xe,fr)|0;var ai=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(ai>>>26)|0,ai&=67108863,C=Math.imul(J,gt),v=Math.imul(J,Et),v=v+Math.imul(ie,gt)|0,O=Math.imul(ie,Et),C=C+Math.imul(Z,rt)|0,v=v+Math.imul(Z,Nt)|0,v=v+Math.imul(F,rt)|0,O=O+Math.imul(F,Nt)|0,C=C+Math.imul(dt,it)|0,v=v+Math.imul(dt,Ct)|0,v=v+Math.imul(Ee,it)|0,O=O+Math.imul(Ee,Ct)|0,C=C+Math.imul(et,bt)|0,v=v+Math.imul(et,tr)|0,v=v+Math.imul(ht,bt)|0,O=O+Math.imul(ht,tr)|0,C=C+Math.imul(Je,It)|0,v=v+Math.imul(Je,Xt)|0,v=v+Math.imul(vt,It)|0,O=O+Math.imul(vt,Xt)|0,C=C+Math.imul(Be,xt)|0,v=v+Math.imul(Be,fr)|0,v=v+Math.imul(tt,xt)|0,O=O+Math.imul(tt,fr)|0;var Qn=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Qn>>>26)|0,Qn&=67108863,C=Math.imul(J,rt),v=Math.imul(J,Nt),v=v+Math.imul(ie,rt)|0,O=Math.imul(ie,Nt),C=C+Math.imul(Z,it)|0,v=v+Math.imul(Z,Ct)|0,v=v+Math.imul(F,it)|0,O=O+Math.imul(F,Ct)|0,C=C+Math.imul(dt,bt)|0,v=v+Math.imul(dt,tr)|0,v=v+Math.imul(Ee,bt)|0,O=O+Math.imul(Ee,tr)|0,C=C+Math.imul(et,It)|0,v=v+Math.imul(et,Xt)|0,v=v+Math.imul(ht,It)|0,O=O+Math.imul(ht,Xt)|0,C=C+Math.imul(Je,xt)|0,v=v+Math.imul(Je,fr)|0,v=v+Math.imul(vt,xt)|0,O=O+Math.imul(vt,fr)|0;var Ms=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,C=Math.imul(J,it),v=Math.imul(J,Ct),v=v+Math.imul(ie,it)|0,O=Math.imul(ie,Ct),C=C+Math.imul(Z,bt)|0,v=v+Math.imul(Z,tr)|0,v=v+Math.imul(F,bt)|0,O=O+Math.imul(F,tr)|0,C=C+Math.imul(dt,It)|0,v=v+Math.imul(dt,Xt)|0,v=v+Math.imul(Ee,It)|0,O=O+Math.imul(Ee,Xt)|0,C=C+Math.imul(et,xt)|0,v=v+Math.imul(et,fr)|0,v=v+Math.imul(ht,xt)|0,O=O+Math.imul(ht,fr)|0;var Xn=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,C=Math.imul(J,bt),v=Math.imul(J,tr),v=v+Math.imul(ie,bt)|0,O=Math.imul(ie,tr),C=C+Math.imul(Z,It)|0,v=v+Math.imul(Z,Xt)|0,v=v+Math.imul(F,It)|0,O=O+Math.imul(F,Xt)|0,C=C+Math.imul(dt,xt)|0,v=v+Math.imul(dt,fr)|0,v=v+Math.imul(Ee,xt)|0,O=O+Math.imul(Ee,fr)|0;var xi=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(xi>>>26)|0,xi&=67108863,C=Math.imul(J,It),v=Math.imul(J,Xt),v=v+Math.imul(ie,It)|0,O=Math.imul(ie,Xt),C=C+Math.imul(Z,xt)|0,v=v+Math.imul(Z,fr)|0,v=v+Math.imul(F,xt)|0,O=O+Math.imul(F,fr)|0;var Ns=(R+C|0)+((v&8191)<<13)|0;R=(O+(v>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,C=Math.imul(J,xt),v=Math.imul(J,fr),v=v+Math.imul(ie,xt)|0,O=Math.imul(ie,fr);var Os=(R+C|0)+((v&8191)<<13)|0;return R=(O+(v>>>13)|0)+(Os>>>26)|0,Os&=67108863,M[0]=Zt,M[1]=pr,M[2]=Mr,M[3]=Hi,M[4]=us,M[5]=oi,M[6]=Mn,M[7]=qs,M[8]=Ts,M[9]=Fs,M[10]=go,M[11]=gi,M[12]=ai,M[13]=Qn,M[14]=Ms,M[15]=Xn,M[16]=xi,M[17]=Ns,M[18]=Os,R!==0&&(M[19]=R,g.length++),g};Math.imul||(I=A);function $(D,_,w){w.negative=_.negative^D.negative,w.length=D.length+_.length;for(var g=0,b=0,m=0;m<w.length-1;m++){var M=b;b=0;for(var R=g&67108863,C=Math.min(m,_.length-1),v=Math.max(0,m-D.length+1);v<=C;v++){var O=m-v,x=D.words[O]|0,N=_.words[v]|0,H=x*N,Y=H&67108863;M=M+(H/67108864|0)|0,Y=Y+R|0,R=Y&67108863,M=M+(Y>>>26)|0,b+=M>>>26,M&=67108863}w.words[m]=R,g=M,M=b}return g!==0?w.words[m]=g:w.length--,w.strip()}function L(D,_,w){var g=new k;return g.mulp(D,_,w)}s.prototype.mulTo=function(_,w){var g,b=this.length+_.length;return this.length===10&&_.length===10?g=I(this,_,w):b<63?g=A(this,_,w):b<1024?g=$(this,_,w):g=L(this,_,w),g};function k(D,_){this.x=D,this.y=_}k.prototype.makeRBT=function(_){for(var w=new Array(_),g=s.prototype._countBits(_)-1,b=0;b<_;b++)w[b]=this.revBin(b,g,_);return w},k.prototype.revBin=function(_,w,g){if(_===0||_===g-1)return _;for(var b=0,m=0;m<w;m++)b|=(_&1)<<w-m-1,_>>=1;return b},k.prototype.permute=function(_,w,g,b,m,M){for(var R=0;R<M;R++)b[R]=w[_[R]],m[R]=g[_[R]]},k.prototype.transform=function(_,w,g,b,m,M){this.permute(M,_,w,g,b,m);for(var R=1;R<m;R<<=1)for(var C=R<<1,v=Math.cos(2*Math.PI/C),O=Math.sin(2*Math.PI/C),x=0;x<m;x+=C)for(var N=v,H=O,Y=0;Y<R;Y++){var Q=g[x+Y],ee=b[x+Y],re=g[x+Y+R],oe=b[x+Y+R],be=N*re-H*oe;oe=N*oe+H*re,re=be,g[x+Y]=Q+re,b[x+Y]=ee+oe,g[x+Y+R]=Q-re,b[x+Y+R]=ee-oe,Y!==C&&(be=v*N-O*H,H=v*H+O*N,N=be)}},k.prototype.guessLen13b=function(_,w){var g=Math.max(w,_)|1,b=g&1,m=0;for(g=g/2|0;g;g=g>>>1)m++;return 1<<m+1+b},k.prototype.conjugate=function(_,w,g){if(!(g<=1))for(var b=0;b<g/2;b++){var m=_[b];_[b]=_[g-b-1],_[g-b-1]=m,m=w[b],w[b]=-w[g-b-1],w[g-b-1]=-m}},k.prototype.normalize13b=function(_,w){for(var g=0,b=0;b<w/2;b++){var m=Math.round(_[2*b+1]/w)*8192+Math.round(_[2*b]/w)+g;_[b]=m&67108863,m<67108864?g=0:g=m/67108864|0}return _},k.prototype.convert13b=function(_,w,g,b){for(var m=0,M=0;M<w;M++)m=m+(_[M]|0),g[2*M]=m&8191,m=m>>>13,g[2*M+1]=m&8191,m=m>>>13;for(M=2*w;M<b;++M)g[M]=0;n(m===0),n((m&-8192)===0)},k.prototype.stub=function(_){for(var w=new Array(_),g=0;g<_;g++)w[g]=0;return w},k.prototype.mulp=function(_,w,g){var b=2*this.guessLen13b(_.length,w.length),m=this.makeRBT(b),M=this.stub(b),R=new Array(b),C=new Array(b),v=new Array(b),O=new Array(b),x=new Array(b),N=new Array(b),H=g.words;H.length=b,this.convert13b(_.words,_.length,R,b),this.convert13b(w.words,w.length,O,b),this.transform(R,M,C,v,b,m),this.transform(O,M,x,N,b,m);for(var Y=0;Y<b;Y++){var Q=C[Y]*x[Y]-v[Y]*N[Y];v[Y]=C[Y]*N[Y]+v[Y]*x[Y],C[Y]=Q}return this.conjugate(C,v,b),this.transform(C,v,H,M,b,m),this.conjugate(H,M,b),this.normalize13b(H,b),g.negative=_.negative^w.negative,g.length=_.length+w.length,g.strip()},s.prototype.mul=function(_){var w=new s(null);return w.words=new Array(this.length+_.length),this.mulTo(_,w)},s.prototype.mulf=function(_){var w=new s(null);return w.words=new Array(this.length+_.length),L(this,_,w)},s.prototype.imul=function(_){return this.clone().mulTo(_,this)},s.prototype.imuln=function(_){n(typeof _=="number"),n(_<67108864);for(var w=0,g=0;g<this.length;g++){var b=(this.words[g]|0)*_,m=(b&67108863)+(w&67108863);w>>=26,w+=b/67108864|0,w+=m>>>26,this.words[g]=m&67108863}return w!==0&&(this.words[g]=w,this.length++),this.length=_===0?1:this.length,this},s.prototype.muln=function(_){return this.clone().imuln(_)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(_){var w=S(_);if(w.length===0)return new s(1);for(var g=this,b=0;b<w.length&&w[b]===0;b++,g=g.sqr());if(++b<w.length)for(var m=g.sqr();b<w.length;b++,m=m.sqr())w[b]!==0&&(g=g.mul(m));return g},s.prototype.iushln=function(_){n(typeof _=="number"&&_>=0);var w=_%26,g=(_-w)/26,b=67108863>>>26-w<<26-w,m;if(w!==0){var M=0;for(m=0;m<this.length;m++){var R=this.words[m]&b,C=(this.words[m]|0)-R<<w;this.words[m]=C|M,M=R>>>26-w}M&&(this.words[m]=M,this.length++)}if(g!==0){for(m=this.length-1;m>=0;m--)this.words[m+g]=this.words[m];for(m=0;m<g;m++)this.words[m]=0;this.length+=g}return this.strip()},s.prototype.ishln=function(_){return n(this.negative===0),this.iushln(_)},s.prototype.iushrn=function(_,w,g){n(typeof _=="number"&&_>=0);var b;w?b=(w-w%26)/26:b=0;var m=_%26,M=Math.min((_-m)/26,this.length),R=67108863^67108863>>>m<<m,C=g;if(b-=M,b=Math.max(0,b),C){for(var v=0;v<M;v++)C.words[v]=this.words[v];C.length=M}if(M!==0)if(this.length>M)for(this.length-=M,v=0;v<this.length;v++)this.words[v]=this.words[v+M];else this.words[0]=0,this.length=1;var O=0;for(v=this.length-1;v>=0&&(O!==0||v>=b);v--){var x=this.words[v]|0;this.words[v]=O<<26-m|x>>>m,O=x&R}return C&&O!==0&&(C.words[C.length++]=O),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(_,w,g){return n(this.negative===0),this.iushrn(_,w,g)},s.prototype.shln=function(_){return this.clone().ishln(_)},s.prototype.ushln=function(_){return this.clone().iushln(_)},s.prototype.shrn=function(_){return this.clone().ishrn(_)},s.prototype.ushrn=function(_){return this.clone().iushrn(_)},s.prototype.testn=function(_){n(typeof _=="number"&&_>=0);var w=_%26,g=(_-w)/26,b=1<<w;if(this.length<=g)return!1;var m=this.words[g];return!!(m&b)},s.prototype.imaskn=function(_){n(typeof _=="number"&&_>=0);var w=_%26,g=(_-w)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(w!==0&&g++,this.length=Math.min(g,this.length),w!==0){var b=67108863^67108863>>>w<<w;this.words[this.length-1]&=b}return this.strip()},s.prototype.maskn=function(_){return this.clone().imaskn(_)},s.prototype.iaddn=function(_){return n(typeof _=="number"),n(_<67108864),_<0?this.isubn(-_):this.negative!==0?this.length===1&&(this.words[0]|0)<_?(this.words[0]=_-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(_),this.negative=1,this):this._iaddn(_)},s.prototype._iaddn=function(_){this.words[0]+=_;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},s.prototype.isubn=function(_){if(n(typeof _=="number"),n(_<67108864),_<0)return this.iaddn(-_);if(this.negative!==0)return this.negative=0,this.iaddn(_),this.negative=1,this;if(this.words[0]-=_,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this.strip()},s.prototype.addn=function(_){return this.clone().iaddn(_)},s.prototype.subn=function(_){return this.clone().isubn(_)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(_,w,g){var b=_.length+g,m;this._expand(b);var M,R=0;for(m=0;m<_.length;m++){M=(this.words[m+g]|0)+R;var C=(_.words[m]|0)*w;M-=C&67108863,R=(M>>26)-(C/67108864|0),this.words[m+g]=M&67108863}for(;m<this.length-g;m++)M=(this.words[m+g]|0)+R,R=M>>26,this.words[m+g]=M&67108863;if(R===0)return this.strip();for(n(R===-1),R=0,m=0;m<this.length;m++)M=-(this.words[m]|0)+R,R=M>>26,this.words[m]=M&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(_,w){var g=this.length-_.length,b=this.clone(),m=_,M=m.words[m.length-1]|0,R=this._countBits(M);g=26-R,g!==0&&(m=m.ushln(g),b.iushln(g),M=m.words[m.length-1]|0);var C=b.length-m.length,v;if(w!=="mod"){v=new s(null),v.length=C+1,v.words=new Array(v.length);for(var O=0;O<v.length;O++)v.words[O]=0}var x=b.clone()._ishlnsubmul(m,1,C);x.negative===0&&(b=x,v&&(v.words[C]=1));for(var N=C-1;N>=0;N--){var H=(b.words[m.length+N]|0)*67108864+(b.words[m.length+N-1]|0);for(H=Math.min(H/M|0,67108863),b._ishlnsubmul(m,H,N);b.negative!==0;)H--,b.negative=0,b._ishlnsubmul(m,1,N),b.isZero()||(b.negative^=1);v&&(v.words[N]=H)}return v&&v.strip(),b.strip(),w!=="div"&&g!==0&&b.iushrn(g),{div:v||null,mod:b}},s.prototype.divmod=function(_,w,g){if(n(!_.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var b,m,M;return this.negative!==0&&_.negative===0?(M=this.neg().divmod(_,w),w!=="mod"&&(b=M.div.neg()),w!=="div"&&(m=M.mod.neg(),g&&m.negative!==0&&m.iadd(_)),{div:b,mod:m}):this.negative===0&&_.negative!==0?(M=this.divmod(_.neg(),w),w!=="mod"&&(b=M.div.neg()),{div:b,mod:M.mod}):(this.negative&_.negative)!==0?(M=this.neg().divmod(_.neg(),w),w!=="div"&&(m=M.mod.neg(),g&&m.negative!==0&&m.isub(_)),{div:M.div,mod:m}):_.length>this.length||this.cmp(_)<0?{div:new s(0),mod:this}:_.length===1?w==="div"?{div:this.divn(_.words[0]),mod:null}:w==="mod"?{div:null,mod:new s(this.modn(_.words[0]))}:{div:this.divn(_.words[0]),mod:new s(this.modn(_.words[0]))}:this._wordDiv(_,w)},s.prototype.div=function(_){return this.divmod(_,"div",!1).div},s.prototype.mod=function(_){return this.divmod(_,"mod",!1).mod},s.prototype.umod=function(_){return this.divmod(_,"mod",!0).mod},s.prototype.divRound=function(_){var w=this.divmod(_);if(w.mod.isZero())return w.div;var g=w.div.negative!==0?w.mod.isub(_):w.mod,b=_.ushrn(1),m=_.andln(1),M=g.cmp(b);return M<0||m===1&&M===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},s.prototype.modn=function(_){n(_<=67108863);for(var w=(1<<26)%_,g=0,b=this.length-1;b>=0;b--)g=(w*g+(this.words[b]|0))%_;return g},s.prototype.idivn=function(_){n(_<=67108863);for(var w=0,g=this.length-1;g>=0;g--){var b=(this.words[g]|0)+w*67108864;this.words[g]=b/_|0,w=b%_}return this.strip()},s.prototype.divn=function(_){return this.clone().idivn(_)},s.prototype.egcd=function(_){n(_.negative===0),n(!_.isZero());var w=this,g=_.clone();w.negative!==0?w=w.umod(_):w=w.clone();for(var b=new s(1),m=new s(0),M=new s(0),R=new s(1),C=0;w.isEven()&&g.isEven();)w.iushrn(1),g.iushrn(1),++C;for(var v=g.clone(),O=w.clone();!w.isZero();){for(var x=0,N=1;(w.words[0]&N)===0&&x<26;++x,N<<=1);if(x>0)for(w.iushrn(x);x-- >0;)(b.isOdd()||m.isOdd())&&(b.iadd(v),m.isub(O)),b.iushrn(1),m.iushrn(1);for(var H=0,Y=1;(g.words[0]&Y)===0&&H<26;++H,Y<<=1);if(H>0)for(g.iushrn(H);H-- >0;)(M.isOdd()||R.isOdd())&&(M.iadd(v),R.isub(O)),M.iushrn(1),R.iushrn(1);w.cmp(g)>=0?(w.isub(g),b.isub(M),m.isub(R)):(g.isub(w),M.isub(b),R.isub(m))}return{a:M,b:R,gcd:g.iushln(C)}},s.prototype._invmp=function(_){n(_.negative===0),n(!_.isZero());var w=this,g=_.clone();w.negative!==0?w=w.umod(_):w=w.clone();for(var b=new s(1),m=new s(0),M=g.clone();w.cmpn(1)>0&&g.cmpn(1)>0;){for(var R=0,C=1;(w.words[0]&C)===0&&R<26;++R,C<<=1);if(R>0)for(w.iushrn(R);R-- >0;)b.isOdd()&&b.iadd(M),b.iushrn(1);for(var v=0,O=1;(g.words[0]&O)===0&&v<26;++v,O<<=1);if(v>0)for(g.iushrn(v);v-- >0;)m.isOdd()&&m.iadd(M),m.iushrn(1);w.cmp(g)>=0?(w.isub(g),b.isub(m)):(g.isub(w),m.isub(b))}var x;return w.cmpn(1)===0?x=b:x=m,x.cmpn(0)<0&&x.iadd(_),x},s.prototype.gcd=function(_){if(this.isZero())return _.abs();if(_.isZero())return this.abs();var w=this.clone(),g=_.clone();w.negative=0,g.negative=0;for(var b=0;w.isEven()&&g.isEven();b++)w.iushrn(1),g.iushrn(1);do{for(;w.isEven();)w.iushrn(1);for(;g.isEven();)g.iushrn(1);var m=w.cmp(g);if(m<0){var M=w;w=g,g=M}else if(m===0||g.cmpn(1)===0)break;w.isub(g)}while(!0);return g.iushln(b)},s.prototype.invm=function(_){return this.egcd(_).a.umod(_)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(_){return this.words[0]&_},s.prototype.bincn=function(_){n(typeof _=="number");var w=_%26,g=(_-w)/26,b=1<<w;if(this.length<=g)return this._expand(g+1),this.words[g]|=b,this;for(var m=b,M=g;m!==0&&M<this.length;M++){var R=this.words[M]|0;R+=m,m=R>>>26,R&=67108863,this.words[M]=R}return m!==0&&(this.words[M]=m,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(_){var w=_<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;this.strip();var g;if(this.length>1)g=1;else{w&&(_=-_),n(_<=67108863,"Number is too big");var b=this.words[0]|0;g=b===_?0:b<_?-1:1}return this.negative!==0?-g|0:g},s.prototype.cmp=function(_){if(this.negative!==0&&_.negative===0)return-1;if(this.negative===0&&_.negative!==0)return 1;var w=this.ucmp(_);return this.negative!==0?-w|0:w},s.prototype.ucmp=function(_){if(this.length>_.length)return 1;if(this.length<_.length)return-1;for(var w=0,g=this.length-1;g>=0;g--){var b=this.words[g]|0,m=_.words[g]|0;if(b!==m){b<m?w=-1:b>m&&(w=1);break}}return w},s.prototype.gtn=function(_){return this.cmpn(_)===1},s.prototype.gt=function(_){return this.cmp(_)===1},s.prototype.gten=function(_){return this.cmpn(_)>=0},s.prototype.gte=function(_){return this.cmp(_)>=0},s.prototype.ltn=function(_){return this.cmpn(_)===-1},s.prototype.lt=function(_){return this.cmp(_)===-1},s.prototype.lten=function(_){return this.cmpn(_)<=0},s.prototype.lte=function(_){return this.cmp(_)<=0},s.prototype.eqn=function(_){return this.cmpn(_)===0},s.prototype.eq=function(_){return this.cmp(_)===0},s.red=function(_){return new B(_)},s.prototype.toRed=function(_){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),_.convertTo(this)._forceRed(_)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(_){return this.red=_,this},s.prototype.forceRed=function(_){return n(!this.red,"Already a number in reduction context"),this._forceRed(_)},s.prototype.redAdd=function(_){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,_)},s.prototype.redIAdd=function(_){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_)},s.prototype.redSub=function(_){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,_)},s.prototype.redISub=function(_){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,_)},s.prototype.redShl=function(_){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,_)},s.prototype.redMul=function(_){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,_),this.red.mul(this,_)},s.prototype.redIMul=function(_){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,_),this.red.imul(this,_)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(_){return n(this.red&&!_.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_)};var U={k256:null,p224:null,p192:null,p25519:null};function q(D,_){this.name=D,this.p=new s(_,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}q.prototype._tmp=function(){var _=new s(null);return _.words=new Array(Math.ceil(this.n/13)),_},q.prototype.ireduce=function(_){var w=_,g;do this.split(w,this.tmp),w=this.imulK(w),w=w.iadd(this.tmp),g=w.bitLength();while(g>this.n);var b=g<this.n?-1:w.ucmp(this.p);return b===0?(w.words[0]=0,w.length=1):b>0?w.isub(this.p):w.strip!==void 0?w.strip():w._strip(),w},q.prototype.split=function(_,w){_.iushrn(this.n,0,w)},q.prototype.imulK=function(_){return _.imul(this.k)};function j(){q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(j,q),j.prototype.split=function(_,w){for(var g=4194303,b=Math.min(_.length,9),m=0;m<b;m++)w.words[m]=_.words[m];if(w.length=b,_.length<=9){_.words[0]=0,_.length=1;return}var M=_.words[9];for(w.words[w.length++]=M&g,m=10;m<_.length;m++){var R=_.words[m]|0;_.words[m-10]=(R&g)<<4|M>>>22,M=R}M>>>=22,_.words[m-10]=M,M===0&&_.length>10?_.length-=10:_.length-=9},j.prototype.imulK=function(_){_.words[_.length]=0,_.words[_.length+1]=0,_.length+=2;for(var w=0,g=0;g<_.length;g++){var b=_.words[g]|0;w+=b*977,_.words[g]=w&67108863,w=b*64+(w/67108864|0)}return _.words[_.length-1]===0&&(_.length--,_.words[_.length-1]===0&&_.length--),_};function z(){q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(z,q);function V(){q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(V,q);function G(){q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(G,q),G.prototype.imulK=function(_){for(var w=0,g=0;g<_.length;g++){var b=(_.words[g]|0)*19+w,m=b&67108863;b>>>=26,_.words[g]=m,w=b}return w!==0&&(_.words[_.length++]=w),_},s._prime=function(_){if(U[_])return U[_];var w;if(_==="k256")w=new j;else if(_==="p224")w=new z;else if(_==="p192")w=new V;else if(_==="p25519")w=new G;else throw new Error("Unknown prime "+_);return U[_]=w,w};function B(D){if(typeof D=="string"){var _=s._prime(D);this.m=_.p,this.prime=_}else n(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}B.prototype._verify1=function(_){n(_.negative===0,"red works only with positives"),n(_.red,"red works only with red numbers")},B.prototype._verify2=function(_,w){n((_.negative|w.negative)===0,"red works only with positives"),n(_.red&&_.red===w.red,"red works only with red numbers")},B.prototype.imod=function(_){return this.prime?this.prime.ireduce(_)._forceRed(this):_.umod(this.m)._forceRed(this)},B.prototype.neg=function(_){return _.isZero()?_.clone():this.m.sub(_)._forceRed(this)},B.prototype.add=function(_,w){this._verify2(_,w);var g=_.add(w);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},B.prototype.iadd=function(_,w){this._verify2(_,w);var g=_.iadd(w);return g.cmp(this.m)>=0&&g.isub(this.m),g},B.prototype.sub=function(_,w){this._verify2(_,w);var g=_.sub(w);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},B.prototype.isub=function(_,w){this._verify2(_,w);var g=_.isub(w);return g.cmpn(0)<0&&g.iadd(this.m),g},B.prototype.shl=function(_,w){return this._verify1(_),this.imod(_.ushln(w))},B.prototype.imul=function(_,w){return this._verify2(_,w),this.imod(_.imul(w))},B.prototype.mul=function(_,w){return this._verify2(_,w),this.imod(_.mul(w))},B.prototype.isqr=function(_){return this.imul(_,_.clone())},B.prototype.sqr=function(_){return this.mul(_,_)},B.prototype.sqrt=function(_){if(_.isZero())return _.clone();var w=this.m.andln(3);if(n(w%2===1),w===3){var g=this.m.add(new s(1)).iushrn(2);return this.pow(_,g)}for(var b=this.m.subn(1),m=0;!b.isZero()&&b.andln(1)===0;)m++,b.iushrn(1);n(!b.isZero());var M=new s(1).toRed(this),R=M.redNeg(),C=this.m.subn(1).iushrn(1),v=this.m.bitLength();for(v=new s(2*v*v).toRed(this);this.pow(v,C).cmp(R)!==0;)v.redIAdd(R);for(var O=this.pow(v,b),x=this.pow(_,b.addn(1).iushrn(1)),N=this.pow(_,b),H=m;N.cmp(M)!==0;){for(var Y=N,Q=0;Y.cmp(M)!==0;Q++)Y=Y.redSqr();n(Q<H);var ee=this.pow(O,new s(1).iushln(H-Q-1));x=x.redMul(ee),O=ee.redSqr(),N=N.redMul(O),H=Q}return x},B.prototype.invm=function(_){var w=_._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},B.prototype.pow=function(_,w){if(w.isZero())return new s(1).toRed(this);if(w.cmpn(1)===0)return _.clone();var g=4,b=new Array(1<<g);b[0]=new s(1).toRed(this),b[1]=_;for(var m=2;m<b.length;m++)b[m]=this.mul(b[m-1],_);var M=b[0],R=0,C=0,v=w.bitLength()%26;for(v===0&&(v=26),m=w.length-1;m>=0;m--){for(var O=w.words[m],x=v-1;x>=0;x--){var N=O>>x&1;if(M!==b[0]&&(M=this.sqr(M)),N===0&&R===0){C=0;continue}R<<=1,R|=N,C++,!(C!==g&&(m!==0||x!==0))&&(M=this.mul(M,b[R]),C=0,R=0)}v=26}return M},B.prototype.convertTo=function(_){var w=_.umod(this.m);return w===_?w.clone():w},B.prototype.convertFrom=function(_){var w=_.clone();return w.red=null,w},s.mont=function(_){return new W(_)};function W(D){B.call(this,D),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(W,B),W.prototype.convertTo=function(_){return this.imod(_.ushln(this.shift))},W.prototype.convertFrom=function(_){var w=this.imod(_.mul(this.rinv));return w.red=null,w},W.prototype.imul=function(_,w){if(_.isZero()||w.isZero())return _.words[0]=0,_.length=1,_;var g=_.imul(w),b=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=g.isub(b).iushrn(this.shift),M=m;return m.cmp(this.m)>=0?M=m.isub(this.m):m.cmpn(0)<0&&(M=m.iadd(this.m)),M._forceRed(this)},W.prototype.mul=function(_,w){if(_.isZero()||w.isZero())return new s(0)._forceRed(this);var g=_.mul(w),b=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),m=g.isub(b).iushrn(this.shift),M=m;return m.cmp(this.m)>=0?M=m.isub(this.m):m.cmpn(0)<0&&(M=m.iadd(this.m)),M._forceRed(this)},W.prototype.invm=function(_){var w=this.imod(_._invmp(this.m).mul(this.r2));return w._forceRed(this)}})(t,Oee)}(l1)),l1.exports}var M_,wM;function jh(){if(wM)return M_;wM=1,M_=t;function t(e,r){if(!e)throw new Error(r||"Assertion failed")}return t.equal=function(r,n,i){if(r!=n)throw new Error(i||"Assertion failed: "+r+" != "+n)},M_}var N_={},vM;function ek(){return vM||(vM=1,function(t){var e=t;function r(s,o){if(Array.isArray(s))return s.slice();if(!s)return[];var c=[];if(typeof s!="string"){for(var u=0;u<s.length;u++)c[u]=s[u]|0;return c}if(o==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var u=0;u<s.length;u+=2)c.push(parseInt(s[u]+s[u+1],16))}else for(var u=0;u<s.length;u++){var h=s.charCodeAt(u),f=h>>8,p=h&255;f?c.push(f,p):c.push(p)}return c}e.toArray=r;function n(s){return s.length===1?"0"+s:s}e.zero2=n;function i(s){for(var o="",c=0;c<s.length;c++)o+=n(s[c].toString(16));return o}e.toHex=i,e.encode=function(o,c){return c==="hex"?i(o):o}}(N_)),N_}var EM;function oa(){return EM||(EM=1,function(t){var e=t,r=hl(),n=jh(),i=ek();e.assert=n,e.toArray=i.toArray,e.zero2=i.zero2,e.toHex=i.toHex,e.encode=i.encode;function s(f,p,E){var S=new Array(Math.max(f.bitLength(),E)+1),A;for(A=0;A<S.length;A+=1)S[A]=0;var I=1<<p+1,$=f.clone();for(A=0;A<S.length;A++){var L,k=$.andln(I-1);$.isOdd()?(k>(I>>1)-1?L=(I>>1)-k:L=k,$.isubn(L)):L=0,S[A]=L,$.iushrn(1)}return S}e.getNAF=s;function o(f,p){var E=[[],[]];f=f.clone(),p=p.clone();for(var S=0,A=0,I;f.cmpn(-S)>0||p.cmpn(-A)>0;){var $=f.andln(3)+S&3,L=p.andln(3)+A&3;$===3&&($=-1),L===3&&(L=-1);var k;($&1)===0?k=0:(I=f.andln(7)+S&7,(I===3||I===5)&&L===2?k=-$:k=$),E[0].push(k);var U;(L&1)===0?U=0:(I=p.andln(7)+A&7,(I===3||I===5)&&$===2?U=-L:U=L),E[1].push(U),2*S===k+1&&(S=1-S),2*A===U+1&&(A=1-A),f.iushrn(1),p.iushrn(1)}return E}e.getJSF=o;function c(f,p,E){var S="_"+p;f.prototype[p]=function(){return this[S]!==void 0?this[S]:this[S]=E.call(this)}}e.cachedProperty=c;function u(f){return typeof f=="string"?e.toArray(f,"hex"):f}e.parseBytes=u;function h(f){return new r(f,"hex","le")}e.intFromLE=h}(T_)),T_}var Ib={exports:{}},_M;function tk(){if(_M)return Ib.exports;_M=1;var t;Ib.exports=function(i){return t||(t=new e(null)),t.generate(i)};function e(n){this.rand=n}if(Ib.exports.Rand=e,e.prototype.generate=function(i){return this._rand(i)},e.prototype._rand=function(i){if(this.rand.getBytes)return this.rand.getBytes(i);for(var s=new Uint8Array(i),o=0;o<s.length;o++)s[o]=this.rand.getByte();return s},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(i){var s=new Uint8Array(i);return self.crypto.getRandomValues(s),s}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(i){var s=new Uint8Array(i);return self.msCrypto.getRandomValues(s),s}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=G4;if(typeof r.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(i){return r.randomBytes(i)}}catch{}return Ib.exports}var O_={},R_,SM;function Ow(){if(SM)return R_;SM=1;var t=hl(),e=oa(),r=e.getNAF,n=e.getJSF,i=e.assert;function s(c,u){this.type=c,this.p=new t(u.p,16),this.red=u.prime?t.red(u.prime):t.mont(this.p),this.zero=new t(0).toRed(this.red),this.one=new t(1).toRed(this.red),this.two=new t(2).toRed(this.red),this.n=u.n&&new t(u.n,16),this.g=u.g&&this.pointFromJSON(u.g,u.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var h=this.n&&this.p.div(this.n);!h||h.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}R_=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(u,h){i(u.precomputed);var f=u._getDoubles(),p=r(h,1,this._bitLength),E=(1<<f.step+1)-(f.step%2===0?2:1);E/=3;var S=[],A,I;for(A=0;A<p.length;A+=f.step){I=0;for(var $=A+f.step-1;$>=A;$--)I=(I<<1)+p[$];S.push(I)}for(var L=this.jpoint(null,null,null),k=this.jpoint(null,null,null),U=E;U>0;U--){for(A=0;A<S.length;A++)I=S[A],I===U?k=k.mixedAdd(f.points[A]):I===-U&&(k=k.mixedAdd(f.points[A].neg()));L=L.add(k)}return L.toP()},s.prototype._wnafMul=function(u,h){var f=4,p=u._getNAFPoints(f);f=p.wnd;for(var E=p.points,S=r(h,f,this._bitLength),A=this.jpoint(null,null,null),I=S.length-1;I>=0;I--){for(var $=0;I>=0&&S[I]===0;I--)$++;if(I>=0&&$++,A=A.dblp($),I<0)break;var L=S[I];i(L!==0),u.type==="affine"?L>0?A=A.mixedAdd(E[L-1>>1]):A=A.mixedAdd(E[-L-1>>1].neg()):L>0?A=A.add(E[L-1>>1]):A=A.add(E[-L-1>>1].neg())}return u.type==="affine"?A.toP():A},s.prototype._wnafMulAdd=function(u,h,f,p,E){var S=this._wnafT1,A=this._wnafT2,I=this._wnafT3,$=0,L,k,U;for(L=0;L<p;L++){U=h[L];var q=U._getNAFPoints(u);S[L]=q.wnd,A[L]=q.points}for(L=p-1;L>=1;L-=2){var j=L-1,z=L;if(S[j]!==1||S[z]!==1){I[j]=r(f[j],S[j],this._bitLength),I[z]=r(f[z],S[z],this._bitLength),$=Math.max(I[j].length,$),$=Math.max(I[z].length,$);continue}var V=[h[j],null,null,h[z]];h[j].y.cmp(h[z].y)===0?(V[1]=h[j].add(h[z]),V[2]=h[j].toJ().mixedAdd(h[z].neg())):h[j].y.cmp(h[z].y.redNeg())===0?(V[1]=h[j].toJ().mixedAdd(h[z]),V[2]=h[j].add(h[z].neg())):(V[1]=h[j].toJ().mixedAdd(h[z]),V[2]=h[j].toJ().mixedAdd(h[z].neg()));var G=[-3,-1,-5,-7,0,7,5,1,3],B=n(f[j],f[z]);for($=Math.max(B[0].length,$),I[j]=new Array($),I[z]=new Array($),k=0;k<$;k++){var W=B[0][k]|0,D=B[1][k]|0;I[j][k]=G[(W+1)*3+(D+1)],I[z][k]=0,A[j]=V}}var _=this.jpoint(null,null,null),w=this._wnafT4;for(L=$;L>=0;L--){for(var g=0;L>=0;){var b=!0;for(k=0;k<p;k++)w[k]=I[k][L]|0,w[k]!==0&&(b=!1);if(!b)break;g++,L--}if(L>=0&&g++,_=_.dblp(g),L<0)break;for(k=0;k<p;k++){var m=w[k];m!==0&&(m>0?U=A[k][m-1>>1]:m<0&&(U=A[k][-m-1>>1].neg()),U.type==="affine"?_=_.mixedAdd(U):_=_.add(U))}}for(L=0;L<p;L++)A[L]=null;return E?_:_.toP()};function o(c,u){this.curve=c,this.type=u,this.precomputed=null}return s.BasePoint=o,o.prototype.eq=function(){throw new Error("Not implemented")},o.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(u,h){u=e.toArray(u,h);var f=this.p.byteLength();if((u[0]===4||u[0]===6||u[0]===7)&&u.length-1===2*f){u[0]===6?i(u[u.length-1]%2===0):u[0]===7&&i(u[u.length-1]%2===1);var p=this.point(u.slice(1,1+f),u.slice(1+f,1+2*f));return p}else if((u[0]===2||u[0]===3)&&u.length-1===f)return this.pointFromX(u.slice(1,1+f),u[0]===3);throw new Error("Unknown point format")},o.prototype.encodeCompressed=function(u){return this.encode(u,!0)},o.prototype._encode=function(u){var h=this.curve.p.byteLength(),f=this.getX().toArray("be",h);return u?[this.getY().isEven()?2:3].concat(f):[4].concat(f,this.getY().toArray("be",h))},o.prototype.encode=function(u,h){return e.encode(this._encode(h),u)},o.prototype.precompute=function(u){if(this.precomputed)return this;var h={doubles:null,naf:null,beta:null};return h.naf=this._getNAFPoints(8),h.doubles=this._getDoubles(4,u),h.beta=this._getBeta(),this.precomputed=h,this},o.prototype._hasDoubles=function(u){if(!this.precomputed)return!1;var h=this.precomputed.doubles;return h?h.points.length>=Math.ceil((u.bitLength()+1)/h.step):!1},o.prototype._getDoubles=function(u,h){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var f=[this],p=this,E=0;E<h;E+=u){for(var S=0;S<u;S++)p=p.dbl();f.push(p)}return{step:u,points:f}},o.prototype._getNAFPoints=function(u){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var h=[this],f=(1<<u)-1,p=f===1?null:this.dbl(),E=1;E<f;E++)h[E]=h[E-1].add(p);return{wnd:u,points:h}},o.prototype._getBeta=function(){return null},o.prototype.dblp=function(u){for(var h=this,f=0;f<u;f++)h=h.dbl();return h},R_}var xb={exports:{}},AM;function Rw(){return AM||(AM=1,typeof Object.create=="function"?xb.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:xb.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),xb.exports}var D_,IM;function Ree(){if(IM)return D_;IM=1;var t=oa(),e=hl(),r=Rw(),n=Ow(),i=t.assert;function s(u){n.call(this,"short",u),this.a=new e(u.a,16).toRed(this.red),this.b=new e(u.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(u),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}r(s,n),D_=s,s.prototype._getEndomorphism=function(h){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var f,p;if(h.beta)f=new e(h.beta,16).toRed(this.red);else{var E=this._getEndoRoots(this.p);f=E[0].cmp(E[1])<0?E[0]:E[1],f=f.toRed(this.red)}if(h.lambda)p=new e(h.lambda,16);else{var S=this._getEndoRoots(this.n);this.g.mul(S[0]).x.cmp(this.g.x.redMul(f))===0?p=S[0]:(p=S[1],i(this.g.mul(p).x.cmp(this.g.x.redMul(f))===0))}var A;return h.basis?A=h.basis.map(function(I){return{a:new e(I.a,16),b:new e(I.b,16)}}):A=this._getEndoBasis(p),{beta:f,lambda:p,basis:A}}},s.prototype._getEndoRoots=function(h){var f=h===this.p?this.red:e.mont(h),p=new e(2).toRed(f).redInvm(),E=p.redNeg(),S=new e(3).toRed(f).redNeg().redSqrt().redMul(p),A=E.redAdd(S).fromRed(),I=E.redSub(S).fromRed();return[A,I]},s.prototype._getEndoBasis=function(h){for(var f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),p=h,E=this.n.clone(),S=new e(1),A=new e(0),I=new e(0),$=new e(1),L,k,U,q,j,z,V,G=0,B,W;p.cmpn(0)!==0;){var D=E.div(p);B=E.sub(D.mul(p)),W=I.sub(D.mul(S));var _=$.sub(D.mul(A));if(!U&&B.cmp(f)<0)L=V.neg(),k=S,U=B.neg(),q=W;else if(U&&++G===2)break;V=B,E=p,p=B,I=S,S=W,$=A,A=_}j=B.neg(),z=W;var w=U.sqr().add(q.sqr()),g=j.sqr().add(z.sqr());return g.cmp(w)>=0&&(j=L,z=k),U.negative&&(U=U.neg(),q=q.neg()),j.negative&&(j=j.neg(),z=z.neg()),[{a:U,b:q},{a:j,b:z}]},s.prototype._endoSplit=function(h){var f=this.endo.basis,p=f[0],E=f[1],S=E.b.mul(h).divRound(this.n),A=p.b.neg().mul(h).divRound(this.n),I=S.mul(p.a),$=A.mul(E.a),L=S.mul(p.b),k=A.mul(E.b),U=h.sub(I).sub($),q=L.add(k).neg();return{k1:U,k2:q}},s.prototype.pointFromX=function(h,f){h=new e(h,16),h.red||(h=h.toRed(this.red));var p=h.redSqr().redMul(h).redIAdd(h.redMul(this.a)).redIAdd(this.b),E=p.redSqrt();if(E.redSqr().redSub(p).cmp(this.zero)!==0)throw new Error("invalid point");var S=E.fromRed().isOdd();return(f&&!S||!f&&S)&&(E=E.redNeg()),this.point(h,E)},s.prototype.validate=function(h){if(h.inf)return!0;var f=h.x,p=h.y,E=this.a.redMul(f),S=f.redSqr().redMul(f).redIAdd(E).redIAdd(this.b);return p.redSqr().redISub(S).cmpn(0)===0},s.prototype._endoWnafMulAdd=function(h,f,p){for(var E=this._endoWnafT1,S=this._endoWnafT2,A=0;A<h.length;A++){var I=this._endoSplit(f[A]),$=h[A],L=$._getBeta();I.k1.negative&&(I.k1.ineg(),$=$.neg(!0)),I.k2.negative&&(I.k2.ineg(),L=L.neg(!0)),E[A*2]=$,E[A*2+1]=L,S[A*2]=I.k1,S[A*2+1]=I.k2}for(var k=this._wnafMulAdd(1,E,S,A*2,p),U=0;U<A*2;U++)E[U]=null,S[U]=null;return k};function o(u,h,f,p){n.BasePoint.call(this,u,"affine"),h===null&&f===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new e(h,16),this.y=new e(f,16),p&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}r(o,n.BasePoint),s.prototype.point=function(h,f,p){return new o(this,h,f,p)},s.prototype.pointFromJSON=function(h,f){return o.fromJSON(this,h,f)},o.prototype._getBeta=function(){if(this.curve.endo){var h=this.precomputed;if(h&&h.beta)return h.beta;var f=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(h){var p=this.curve,E=function(S){return p.point(S.x.redMul(p.endo.beta),S.y)};h.beta=f,f.precomputed={beta:null,naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(E)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(E)}}}return f}},o.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},o.fromJSON=function(h,f,p){typeof f=="string"&&(f=JSON.parse(f));var E=h.point(f[0],f[1],p);if(!f[2])return E;function S(I){return h.point(I[0],I[1],p)}var A=f[2];return E.precomputed={beta:null,doubles:A.doubles&&{step:A.doubles.step,points:[E].concat(A.doubles.points.map(S))},naf:A.naf&&{wnd:A.naf.wnd,points:[E].concat(A.naf.points.map(S))}},E},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.inf},o.prototype.add=function(h){if(this.inf)return h;if(h.inf)return this;if(this.eq(h))return this.dbl();if(this.neg().eq(h))return this.curve.point(null,null);if(this.x.cmp(h.x)===0)return this.curve.point(null,null);var f=this.y.redSub(h.y);f.cmpn(0)!==0&&(f=f.redMul(this.x.redSub(h.x).redInvm()));var p=f.redSqr().redISub(this.x).redISub(h.x),E=f.redMul(this.x.redSub(p)).redISub(this.y);return this.curve.point(p,E)},o.prototype.dbl=function(){if(this.inf)return this;var h=this.y.redAdd(this.y);if(h.cmpn(0)===0)return this.curve.point(null,null);var f=this.curve.a,p=this.x.redSqr(),E=h.redInvm(),S=p.redAdd(p).redIAdd(p).redIAdd(f).redMul(E),A=S.redSqr().redISub(this.x.redAdd(this.x)),I=S.redMul(this.x.redSub(A)).redISub(this.y);return this.curve.point(A,I)},o.prototype.getX=function(){return this.x.fromRed()},o.prototype.getY=function(){return this.y.fromRed()},o.prototype.mul=function(h){return h=new e(h,16),this.isInfinity()?this:this._hasDoubles(h)?this.curve._fixedNafMul(this,h):this.curve.endo?this.curve._endoWnafMulAdd([this],[h]):this.curve._wnafMul(this,h)},o.prototype.mulAdd=function(h,f,p){var E=[this,f],S=[h,p];return this.curve.endo?this.curve._endoWnafMulAdd(E,S):this.curve._wnafMulAdd(1,E,S,2)},o.prototype.jmulAdd=function(h,f,p){var E=[this,f],S=[h,p];return this.curve.endo?this.curve._endoWnafMulAdd(E,S,!0):this.curve._wnafMulAdd(1,E,S,2,!0)},o.prototype.eq=function(h){return this===h||this.inf===h.inf&&(this.inf||this.x.cmp(h.x)===0&&this.y.cmp(h.y)===0)},o.prototype.neg=function(h){if(this.inf)return this;var f=this.curve.point(this.x,this.y.redNeg());if(h&&this.precomputed){var p=this.precomputed,E=function(S){return S.neg()};f.precomputed={naf:p.naf&&{wnd:p.naf.wnd,points:p.naf.points.map(E)},doubles:p.doubles&&{step:p.doubles.step,points:p.doubles.points.map(E)}}}return f},o.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var h=this.curve.jpoint(this.x,this.y,this.curve.one);return h};function c(u,h,f,p){n.BasePoint.call(this,u,"jacobian"),h===null&&f===null&&p===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new e(0)):(this.x=new e(h,16),this.y=new e(f,16),this.z=new e(p,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(c,n.BasePoint),s.prototype.jpoint=function(h,f,p){return new c(this,h,f,p)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var h=this.z.redInvm(),f=h.redSqr(),p=this.x.redMul(f),E=this.y.redMul(f).redMul(h);return this.curve.point(p,E)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(h){if(this.isInfinity())return h;if(h.isInfinity())return this;var f=h.z.redSqr(),p=this.z.redSqr(),E=this.x.redMul(f),S=h.x.redMul(p),A=this.y.redMul(f.redMul(h.z)),I=h.y.redMul(p.redMul(this.z)),$=E.redSub(S),L=A.redSub(I);if($.cmpn(0)===0)return L.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var k=$.redSqr(),U=k.redMul($),q=E.redMul(k),j=L.redSqr().redIAdd(U).redISub(q).redISub(q),z=L.redMul(q.redISub(j)).redISub(A.redMul(U)),V=this.z.redMul(h.z).redMul($);return this.curve.jpoint(j,z,V)},c.prototype.mixedAdd=function(h){if(this.isInfinity())return h.toJ();if(h.isInfinity())return this;var f=this.z.redSqr(),p=this.x,E=h.x.redMul(f),S=this.y,A=h.y.redMul(f).redMul(this.z),I=p.redSub(E),$=S.redSub(A);if(I.cmpn(0)===0)return $.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var L=I.redSqr(),k=L.redMul(I),U=p.redMul(L),q=$.redSqr().redIAdd(k).redISub(U).redISub(U),j=$.redMul(U.redISub(q)).redISub(S.redMul(k)),z=this.z.redMul(I);return this.curve.jpoint(q,j,z)},c.prototype.dblp=function(h){if(h===0)return this;if(this.isInfinity())return this;if(!h)return this.dbl();var f;if(this.curve.zeroA||this.curve.threeA){var p=this;for(f=0;f<h;f++)p=p.dbl();return p}var E=this.curve.a,S=this.curve.tinv,A=this.x,I=this.y,$=this.z,L=$.redSqr().redSqr(),k=I.redAdd(I);for(f=0;f<h;f++){var U=A.redSqr(),q=k.redSqr(),j=q.redSqr(),z=U.redAdd(U).redIAdd(U).redIAdd(E.redMul(L)),V=A.redMul(q),G=z.redSqr().redISub(V.redAdd(V)),B=V.redISub(G),W=z.redMul(B);W=W.redIAdd(W).redISub(j);var D=k.redMul($);f+1<h&&(L=L.redMul(j)),A=G,$=D,k=W}return this.curve.jpoint(A,k.redMul(S),$)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var h,f,p;if(this.zOne){var E=this.x.redSqr(),S=this.y.redSqr(),A=S.redSqr(),I=this.x.redAdd(S).redSqr().redISub(E).redISub(A);I=I.redIAdd(I);var $=E.redAdd(E).redIAdd(E),L=$.redSqr().redISub(I).redISub(I),k=A.redIAdd(A);k=k.redIAdd(k),k=k.redIAdd(k),h=L,f=$.redMul(I.redISub(L)).redISub(k),p=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),q=this.y.redSqr(),j=q.redSqr(),z=this.x.redAdd(q).redSqr().redISub(U).redISub(j);z=z.redIAdd(z);var V=U.redAdd(U).redIAdd(U),G=V.redSqr(),B=j.redIAdd(j);B=B.redIAdd(B),B=B.redIAdd(B),h=G.redISub(z).redISub(z),f=V.redMul(z.redISub(h)).redISub(B),p=this.y.redMul(this.z),p=p.redIAdd(p)}return this.curve.jpoint(h,f,p)},c.prototype._threeDbl=function(){var h,f,p;if(this.zOne){var E=this.x.redSqr(),S=this.y.redSqr(),A=S.redSqr(),I=this.x.redAdd(S).redSqr().redISub(E).redISub(A);I=I.redIAdd(I);var $=E.redAdd(E).redIAdd(E).redIAdd(this.curve.a),L=$.redSqr().redISub(I).redISub(I);h=L;var k=A.redIAdd(A);k=k.redIAdd(k),k=k.redIAdd(k),f=$.redMul(I.redISub(L)).redISub(k),p=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),q=this.y.redSqr(),j=this.x.redMul(q),z=this.x.redSub(U).redMul(this.x.redAdd(U));z=z.redAdd(z).redIAdd(z);var V=j.redIAdd(j);V=V.redIAdd(V);var G=V.redAdd(V);h=z.redSqr().redISub(G),p=this.y.redAdd(this.z).redSqr().redISub(q).redISub(U);var B=q.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B),f=z.redMul(V.redISub(h)).redISub(B)}return this.curve.jpoint(h,f,p)},c.prototype._dbl=function(){var h=this.curve.a,f=this.x,p=this.y,E=this.z,S=E.redSqr().redSqr(),A=f.redSqr(),I=p.redSqr(),$=A.redAdd(A).redIAdd(A).redIAdd(h.redMul(S)),L=f.redAdd(f);L=L.redIAdd(L);var k=L.redMul(I),U=$.redSqr().redISub(k.redAdd(k)),q=k.redISub(U),j=I.redSqr();j=j.redIAdd(j),j=j.redIAdd(j),j=j.redIAdd(j);var z=$.redMul(q).redISub(j),V=p.redAdd(p).redMul(E);return this.curve.jpoint(U,z,V)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var h=this.x.redSqr(),f=this.y.redSqr(),p=this.z.redSqr(),E=f.redSqr(),S=h.redAdd(h).redIAdd(h),A=S.redSqr(),I=this.x.redAdd(f).redSqr().redISub(h).redISub(E);I=I.redIAdd(I),I=I.redAdd(I).redIAdd(I),I=I.redISub(A);var $=I.redSqr(),L=E.redIAdd(E);L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var k=S.redIAdd(I).redSqr().redISub(A).redISub($).redISub(L),U=f.redMul(k);U=U.redIAdd(U),U=U.redIAdd(U);var q=this.x.redMul($).redISub(U);q=q.redIAdd(q),q=q.redIAdd(q);var j=this.y.redMul(k.redMul(L.redISub(k)).redISub(I.redMul($)));j=j.redIAdd(j),j=j.redIAdd(j),j=j.redIAdd(j);var z=this.z.redAdd(I).redSqr().redISub(p).redISub($);return this.curve.jpoint(q,j,z)},c.prototype.mul=function(h,f){return h=new e(h,f),this.curve._wnafMul(this,h)},c.prototype.eq=function(h){if(h.type==="affine")return this.eq(h.toJ());if(this===h)return!0;var f=this.z.redSqr(),p=h.z.redSqr();if(this.x.redMul(p).redISub(h.x.redMul(f)).cmpn(0)!==0)return!1;var E=f.redMul(this.z),S=p.redMul(h.z);return this.y.redMul(S).redISub(h.y.redMul(E)).cmpn(0)===0},c.prototype.eqXToP=function(h){var f=this.z.redSqr(),p=h.toRed(this.curve.red).redMul(f);if(this.x.cmp(p)===0)return!0;for(var E=h.clone(),S=this.curve.redN.redMul(f);;){if(E.iadd(this.curve.n),E.cmp(this.curve.p)>=0)return!1;if(p.redIAdd(S),this.x.cmp(p)===0)return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return this.z.cmpn(0)===0},D_}var $_,xM;function Dee(){if(xM)return $_;xM=1;var t=hl(),e=Rw(),r=Ow(),n=oa();function i(o){r.call(this,"mont",o),this.a=new t(o.a,16).toRed(this.red),this.b=new t(o.b,16).toRed(this.red),this.i4=new t(4).toRed(this.red).redInvm(),this.two=new t(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}e(i,r),$_=i,i.prototype.validate=function(c){var u=c.normalize().x,h=u.redSqr(),f=h.redMul(u).redAdd(h.redMul(this.a)).redAdd(u),p=f.redSqrt();return p.redSqr().cmp(f)===0};function s(o,c,u){r.BasePoint.call(this,o,"projective"),c===null&&u===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new t(c,16),this.z=new t(u,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return e(s,r.BasePoint),i.prototype.decodePoint=function(c,u){return this.point(n.toArray(c,u),1)},i.prototype.point=function(c,u){return new s(this,c,u)},i.prototype.pointFromJSON=function(c){return s.fromJSON(this,c)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(c,u){return new s(c,u[0],u[1]||c.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.z.cmpn(0)===0},s.prototype.dbl=function(){var c=this.x.redAdd(this.z),u=c.redSqr(),h=this.x.redSub(this.z),f=h.redSqr(),p=u.redSub(f),E=u.redMul(f),S=p.redMul(f.redAdd(this.curve.a24.redMul(p)));return this.curve.point(E,S)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(c,u){var h=this.x.redAdd(this.z),f=this.x.redSub(this.z),p=c.x.redAdd(c.z),E=c.x.redSub(c.z),S=E.redMul(h),A=p.redMul(f),I=u.z.redMul(S.redAdd(A).redSqr()),$=u.x.redMul(S.redISub(A).redSqr());return this.curve.point(I,$)},s.prototype.mul=function(c){for(var u=c.clone(),h=this,f=this.curve.point(null,null),p=this,E=[];u.cmpn(0)!==0;u.iushrn(1))E.push(u.andln(1));for(var S=E.length-1;S>=0;S--)E[S]===0?(h=h.diffAdd(f,p),f=f.dbl()):(f=h.diffAdd(f,p),h=h.dbl());return f},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(c){return this.getX().cmp(c.getX())===0},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},$_}var k_,CM;function $ee(){if(CM)return k_;CM=1;var t=oa(),e=hl(),r=Rw(),n=Ow(),i=t.assert;function s(c){this.twisted=(c.a|0)!==1,this.mOneA=this.twisted&&(c.a|0)===-1,this.extended=this.mOneA,n.call(this,"edwards",c),this.a=new e(c.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new e(c.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new e(c.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(c.c|0)===1}r(s,n),k_=s,s.prototype._mulA=function(u){return this.mOneA?u.redNeg():this.a.redMul(u)},s.prototype._mulC=function(u){return this.oneC?u:this.c.redMul(u)},s.prototype.jpoint=function(u,h,f,p){return this.point(u,h,f,p)},s.prototype.pointFromX=function(u,h){u=new e(u,16),u.red||(u=u.toRed(this.red));var f=u.redSqr(),p=this.c2.redSub(this.a.redMul(f)),E=this.one.redSub(this.c2.redMul(this.d).redMul(f)),S=p.redMul(E.redInvm()),A=S.redSqrt();if(A.redSqr().redSub(S).cmp(this.zero)!==0)throw new Error("invalid point");var I=A.fromRed().isOdd();return(h&&!I||!h&&I)&&(A=A.redNeg()),this.point(u,A)},s.prototype.pointFromY=function(u,h){u=new e(u,16),u.red||(u=u.toRed(this.red));var f=u.redSqr(),p=f.redSub(this.c2),E=f.redMul(this.d).redMul(this.c2).redSub(this.a),S=p.redMul(E.redInvm());if(S.cmp(this.zero)===0){if(h)throw new Error("invalid point");return this.point(this.zero,u)}var A=S.redSqrt();if(A.redSqr().redSub(S).cmp(this.zero)!==0)throw new Error("invalid point");return A.fromRed().isOdd()!==h&&(A=A.redNeg()),this.point(A,u)},s.prototype.validate=function(u){if(u.isInfinity())return!0;u.normalize();var h=u.x.redSqr(),f=u.y.redSqr(),p=h.redMul(this.a).redAdd(f),E=this.c2.redMul(this.one.redAdd(this.d.redMul(h).redMul(f)));return p.cmp(E)===0};function o(c,u,h,f,p){n.BasePoint.call(this,c,"projective"),u===null&&h===null&&f===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new e(u,16),this.y=new e(h,16),this.z=f?new e(f,16):this.curve.one,this.t=p&&new e(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(o,n.BasePoint),s.prototype.pointFromJSON=function(u){return o.fromJSON(this,u)},s.prototype.point=function(u,h,f,p){return new o(this,u,h,f,p)},o.fromJSON=function(u,h){return new o(u,h[0],h[1],h[2])},o.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},o.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},o.prototype._extDbl=function(){var u=this.x.redSqr(),h=this.y.redSqr(),f=this.z.redSqr();f=f.redIAdd(f);var p=this.curve._mulA(u),E=this.x.redAdd(this.y).redSqr().redISub(u).redISub(h),S=p.redAdd(h),A=S.redSub(f),I=p.redSub(h),$=E.redMul(A),L=S.redMul(I),k=E.redMul(I),U=A.redMul(S);return this.curve.point($,L,U,k)},o.prototype._projDbl=function(){var u=this.x.redAdd(this.y).redSqr(),h=this.x.redSqr(),f=this.y.redSqr(),p,E,S,A,I,$;if(this.curve.twisted){A=this.curve._mulA(h);var L=A.redAdd(f);this.zOne?(p=u.redSub(h).redSub(f).redMul(L.redSub(this.curve.two)),E=L.redMul(A.redSub(f)),S=L.redSqr().redSub(L).redSub(L)):(I=this.z.redSqr(),$=L.redSub(I).redISub(I),p=u.redSub(h).redISub(f).redMul($),E=L.redMul(A.redSub(f)),S=L.redMul($))}else A=h.redAdd(f),I=this.curve._mulC(this.z).redSqr(),$=A.redSub(I).redSub(I),p=this.curve._mulC(u.redISub(A)).redMul($),E=this.curve._mulC(A).redMul(h.redISub(f)),S=A.redMul($);return this.curve.point(p,E,S)},o.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},o.prototype._extAdd=function(u){var h=this.y.redSub(this.x).redMul(u.y.redSub(u.x)),f=this.y.redAdd(this.x).redMul(u.y.redAdd(u.x)),p=this.t.redMul(this.curve.dd).redMul(u.t),E=this.z.redMul(u.z.redAdd(u.z)),S=f.redSub(h),A=E.redSub(p),I=E.redAdd(p),$=f.redAdd(h),L=S.redMul(A),k=I.redMul($),U=S.redMul($),q=A.redMul(I);return this.curve.point(L,k,q,U)},o.prototype._projAdd=function(u){var h=this.z.redMul(u.z),f=h.redSqr(),p=this.x.redMul(u.x),E=this.y.redMul(u.y),S=this.curve.d.redMul(p).redMul(E),A=f.redSub(S),I=f.redAdd(S),$=this.x.redAdd(this.y).redMul(u.x.redAdd(u.y)).redISub(p).redISub(E),L=h.redMul(A).redMul($),k,U;return this.curve.twisted?(k=h.redMul(I).redMul(E.redSub(this.curve._mulA(p))),U=A.redMul(I)):(k=h.redMul(I).redMul(E.redSub(p)),U=this.curve._mulC(A).redMul(I)),this.curve.point(L,k,U)},o.prototype.add=function(u){return this.isInfinity()?u:u.isInfinity()?this:this.curve.extended?this._extAdd(u):this._projAdd(u)},o.prototype.mul=function(u){return this._hasDoubles(u)?this.curve._fixedNafMul(this,u):this.curve._wnafMul(this,u)},o.prototype.mulAdd=function(u,h,f){return this.curve._wnafMulAdd(1,[this,h],[u,f],2,!1)},o.prototype.jmulAdd=function(u,h,f){return this.curve._wnafMulAdd(1,[this,h],[u,f],2,!0)},o.prototype.normalize=function(){if(this.zOne)return this;var u=this.z.redInvm();return this.x=this.x.redMul(u),this.y=this.y.redMul(u),this.t&&(this.t=this.t.redMul(u)),this.z=this.curve.one,this.zOne=!0,this},o.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},o.prototype.getX=function(){return this.normalize(),this.x.fromRed()},o.prototype.getY=function(){return this.normalize(),this.y.fromRed()},o.prototype.eq=function(u){return this===u||this.getX().cmp(u.getX())===0&&this.getY().cmp(u.getY())===0},o.prototype.eqXToP=function(u){var h=u.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(h)===0)return!0;for(var f=u.clone(),p=this.curve.redN.redMul(this.z);;){if(f.iadd(this.curve.n),f.cmp(this.curve.p)>=0)return!1;if(h.redIAdd(p),this.x.cmp(h)===0)return!0}},o.prototype.toP=o.prototype.normalize,o.prototype.mixedAdd=o.prototype.add,k_}var TM;function rk(){return TM||(TM=1,function(t){var e=t;e.base=Ow(),e.short=Ree(),e.mont=Dee(),e.edwards=$ee()}(O_)),O_}var P_={},B_={},cn={},MM;function bc(){if(MM)return cn;MM=1;var t=jh(),e=Rw();cn.inherits=e;function r(_,w){return(_.charCodeAt(w)&64512)!==55296||w<0||w+1>=_.length?!1:(_.charCodeAt(w+1)&64512)===56320}function n(_,w){if(Array.isArray(_))return _.slice();if(!_)return[];var g=[];if(typeof _=="string")if(w){if(w==="hex")for(_=_.replace(/[^a-z0-9]+/ig,""),_.length%2!==0&&(_="0"+_),m=0;m<_.length;m+=2)g.push(parseInt(_[m]+_[m+1],16))}else for(var b=0,m=0;m<_.length;m++){var M=_.charCodeAt(m);M<128?g[b++]=M:M<2048?(g[b++]=M>>6|192,g[b++]=M&63|128):r(_,m)?(M=65536+((M&1023)<<10)+(_.charCodeAt(++m)&1023),g[b++]=M>>18|240,g[b++]=M>>12&63|128,g[b++]=M>>6&63|128,g[b++]=M&63|128):(g[b++]=M>>12|224,g[b++]=M>>6&63|128,g[b++]=M&63|128)}else for(m=0;m<_.length;m++)g[m]=_[m]|0;return g}cn.toArray=n;function i(_){for(var w="",g=0;g<_.length;g++)w+=c(_[g].toString(16));return w}cn.toHex=i;function s(_){var w=_>>>24|_>>>8&65280|_<<8&16711680|(_&255)<<24;return w>>>0}cn.htonl=s;function o(_,w){for(var g="",b=0;b<_.length;b++){var m=_[b];w==="little"&&(m=s(m)),g+=u(m.toString(16))}return g}cn.toHex32=o;function c(_){return _.length===1?"0"+_:_}cn.zero2=c;function u(_){return _.length===7?"0"+_:_.length===6?"00"+_:_.length===5?"000"+_:_.length===4?"0000"+_:_.length===3?"00000"+_:_.length===2?"000000"+_:_.length===1?"0000000"+_:_}cn.zero8=u;function h(_,w,g,b){var m=g-w;t(m%4===0);for(var M=new Array(m/4),R=0,C=w;R<M.length;R++,C+=4){var v;b==="big"?v=_[C]<<24|_[C+1]<<16|_[C+2]<<8|_[C+3]:v=_[C+3]<<24|_[C+2]<<16|_[C+1]<<8|_[C],M[R]=v>>>0}return M}cn.join32=h;function f(_,w){for(var g=new Array(_.length*4),b=0,m=0;b<_.length;b++,m+=4){var M=_[b];w==="big"?(g[m]=M>>>24,g[m+1]=M>>>16&255,g[m+2]=M>>>8&255,g[m+3]=M&255):(g[m+3]=M>>>24,g[m+2]=M>>>16&255,g[m+1]=M>>>8&255,g[m]=M&255)}return g}cn.split32=f;function p(_,w){return _>>>w|_<<32-w}cn.rotr32=p;function E(_,w){return _<<w|_>>>32-w}cn.rotl32=E;function S(_,w){return _+w>>>0}cn.sum32=S;function A(_,w,g){return _+w+g>>>0}cn.sum32_3=A;function I(_,w,g,b){return _+w+g+b>>>0}cn.sum32_4=I;function $(_,w,g,b,m){return _+w+g+b+m>>>0}cn.sum32_5=$;function L(_,w,g,b){var m=_[w],M=_[w+1],R=b+M>>>0,C=(R<b?1:0)+g+m;_[w]=C>>>0,_[w+1]=R}cn.sum64=L;function k(_,w,g,b){var m=w+b>>>0,M=(m<w?1:0)+_+g;return M>>>0}cn.sum64_hi=k;function U(_,w,g,b){var m=w+b;return m>>>0}cn.sum64_lo=U;function q(_,w,g,b,m,M,R,C){var v=0,O=w;O=O+b>>>0,v+=O<w?1:0,O=O+M>>>0,v+=O<M?1:0,O=O+C>>>0,v+=O<C?1:0;var x=_+g+m+R+v;return x>>>0}cn.sum64_4_hi=q;function j(_,w,g,b,m,M,R,C){var v=w+b+M+C;return v>>>0}cn.sum64_4_lo=j;function z(_,w,g,b,m,M,R,C,v,O){var x=0,N=w;N=N+b>>>0,x+=N<w?1:0,N=N+M>>>0,x+=N<M?1:0,N=N+C>>>0,x+=N<C?1:0,N=N+O>>>0,x+=N<O?1:0;var H=_+g+m+R+v+x;return H>>>0}cn.sum64_5_hi=z;function V(_,w,g,b,m,M,R,C,v,O){var x=w+b+M+C+O;return x>>>0}cn.sum64_5_lo=V;function G(_,w,g){var b=w<<32-g|_>>>g;return b>>>0}cn.rotr64_hi=G;function B(_,w,g){var b=_<<32-g|w>>>g;return b>>>0}cn.rotr64_lo=B;function W(_,w,g){return _>>>g}cn.shr64_hi=W;function D(_,w,g){var b=_<<32-g|w>>>g;return b>>>0}return cn.shr64_lo=D,cn}var L_={},NM;function By(){if(NM)return L_;NM=1;var t=bc(),e=jh();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return L_.BlockHash=r,r.prototype.update=function(i,s){if(i=t.toArray(i,s),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var o=i.length%this._delta8;this.pending=i.slice(i.length-o,i.length),this.pending.length===0&&(this.pending=null),i=t.join32(i,0,i.length-o,this.endian);for(var c=0;c<i.length;c+=this._delta32)this._update(i,c,c+this._delta32)}return this},r.prototype.digest=function(i){return this.update(this._pad()),e(this.pending===null),this._digest(i)},r.prototype._pad=function(){var i=this.pendingTotal,s=this._delta8,o=s-(i+this.padLength)%s,c=new Array(o+this.padLength);c[0]=128;for(var u=1;u<o;u++)c[u]=0;if(i<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)c[u++]=0;c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=i>>>24&255,c[u++]=i>>>16&255,c[u++]=i>>>8&255,c[u++]=i&255}else for(c[u++]=i&255,c[u++]=i>>>8&255,c[u++]=i>>>16&255,c[u++]=i>>>24&255,c[u++]=0,c[u++]=0,c[u++]=0,c[u++]=0,h=8;h<this.padLength;h++)c[u++]=0;return c},L_}var Hu={},Va={},OM;function nk(){if(OM)return Va;OM=1;var t=bc(),e=t.rotr32;function r(f,p,E,S){if(f===0)return n(p,E,S);if(f===1||f===3)return s(p,E,S);if(f===2)return i(p,E,S)}Va.ft_1=r;function n(f,p,E){return f&p^~f&E}Va.ch32=n;function i(f,p,E){return f&p^f&E^p&E}Va.maj32=i;function s(f,p,E){return f^p^E}Va.p32=s;function o(f){return e(f,2)^e(f,13)^e(f,22)}Va.s0_256=o;function c(f){return e(f,6)^e(f,11)^e(f,25)}Va.s1_256=c;function u(f){return e(f,7)^e(f,18)^f>>>3}Va.g0_256=u;function h(f){return e(f,17)^e(f,19)^f>>>10}return Va.g1_256=h,Va}var U_,RM;function kee(){if(RM)return U_;RM=1;var t=bc(),e=By(),r=nk(),n=t.rotl32,i=t.sum32,s=t.sum32_5,o=r.ft_1,c=e.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return t.inherits(h,c),U_=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(p,E){for(var S=this.W,A=0;A<16;A++)S[A]=p[E+A];for(;A<S.length;A++)S[A]=n(S[A-3]^S[A-8]^S[A-14]^S[A-16],1);var I=this.h[0],$=this.h[1],L=this.h[2],k=this.h[3],U=this.h[4];for(A=0;A<S.length;A++){var q=~~(A/20),j=s(n(I,5),o(q,$,L,k),U,S[A],u[q]);U=k,k=L,L=n($,30),$=I,I=j}this.h[0]=i(this.h[0],I),this.h[1]=i(this.h[1],$),this.h[2]=i(this.h[2],L),this.h[3]=i(this.h[3],k),this.h[4]=i(this.h[4],U)},h.prototype._digest=function(p){return p==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},U_}var j_,DM;function ik(){if(DM)return j_;DM=1;var t=bc(),e=By(),r=nk(),n=jh(),i=t.sum32,s=t.sum32_4,o=t.sum32_5,c=r.ch32,u=r.maj32,h=r.s0_256,f=r.s1_256,p=r.g0_256,E=r.g1_256,S=e.BlockHash,A=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function I(){if(!(this instanceof I))return new I;S.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=A,this.W=new Array(64)}return t.inherits(I,S),j_=I,I.blockSize=512,I.outSize=256,I.hmacStrength=192,I.padLength=64,I.prototype._update=function(L,k){for(var U=this.W,q=0;q<16;q++)U[q]=L[k+q];for(;q<U.length;q++)U[q]=s(E(U[q-2]),U[q-7],p(U[q-15]),U[q-16]);var j=this.h[0],z=this.h[1],V=this.h[2],G=this.h[3],B=this.h[4],W=this.h[5],D=this.h[6],_=this.h[7];for(n(this.k.length===U.length),q=0;q<U.length;q++){var w=o(_,f(B),c(B,W,D),this.k[q],U[q]),g=i(h(j),u(j,z,V));_=D,D=W,W=B,B=i(G,w),G=V,V=z,z=j,j=i(w,g)}this.h[0]=i(this.h[0],j),this.h[1]=i(this.h[1],z),this.h[2]=i(this.h[2],V),this.h[3]=i(this.h[3],G),this.h[4]=i(this.h[4],B),this.h[5]=i(this.h[5],W),this.h[6]=i(this.h[6],D),this.h[7]=i(this.h[7],_)},I.prototype._digest=function(L){return L==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")},j_}var z_,$M;function Pee(){if($M)return z_;$M=1;var t=bc(),e=ik();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return t.inherits(r,e),z_=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,7),"big"):t.split32(this.h.slice(0,7),"big")},z_}var q_,kM;function sk(){if(kM)return q_;kM=1;var t=bc(),e=By(),r=jh(),n=t.rotr64_hi,i=t.rotr64_lo,s=t.shr64_hi,o=t.shr64_lo,c=t.sum64,u=t.sum64_hi,h=t.sum64_lo,f=t.sum64_4_hi,p=t.sum64_4_lo,E=t.sum64_5_hi,S=t.sum64_5_lo,A=e.BlockHash,I=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function $(){if(!(this instanceof $))return new $;A.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=I,this.W=new Array(160)}t.inherits($,A),q_=$,$.blockSize=1024,$.outSize=512,$.hmacStrength=192,$.padLength=128,$.prototype._prepareBlock=function(g,b){for(var m=this.W,M=0;M<32;M++)m[M]=g[b+M];for(;M<m.length;M+=2){var R=D(m[M-4],m[M-3]),C=_(m[M-4],m[M-3]),v=m[M-14],O=m[M-13],x=B(m[M-30],m[M-29]),N=W(m[M-30],m[M-29]),H=m[M-32],Y=m[M-31];m[M]=f(R,C,v,O,x,N,H,Y),m[M+1]=p(R,C,v,O,x,N,H,Y)}},$.prototype._update=function(g,b){this._prepareBlock(g,b);var m=this.W,M=this.h[0],R=this.h[1],C=this.h[2],v=this.h[3],O=this.h[4],x=this.h[5],N=this.h[6],H=this.h[7],Y=this.h[8],Q=this.h[9],ee=this.h[10],re=this.h[11],oe=this.h[12],be=this.h[13],Ce=this.h[14],Se=this.h[15];r(this.k.length===m.length);for(var xe=0;xe<m.length;xe+=2){var ze=Ce,Be=Se,tt=V(Y,Q),He=G(Y,Q),Je=L(Y,Q,ee,re,oe),vt=k(Y,Q,ee,re,oe,be),yt=this.k[xe],et=this.k[xe+1],ht=m[xe],Mt=m[xe+1],dt=E(ze,Be,tt,He,Je,vt,yt,et,ht,Mt),Ee=S(ze,Be,tt,He,Je,vt,yt,et,ht,Mt);ze=j(M,R),Be=z(M,R),tt=U(M,R,C,v,O),He=q(M,R,C,v,O,x);var Te=u(ze,Be,tt,He),Z=h(ze,Be,tt,He);Ce=oe,Se=be,oe=ee,be=re,ee=Y,re=Q,Y=u(N,H,dt,Ee),Q=h(H,H,dt,Ee),N=O,H=x,O=C,x=v,C=M,v=R,M=u(dt,Ee,Te,Z),R=h(dt,Ee,Te,Z)}c(this.h,0,M,R),c(this.h,2,C,v),c(this.h,4,O,x),c(this.h,6,N,H),c(this.h,8,Y,Q),c(this.h,10,ee,re),c(this.h,12,oe,be),c(this.h,14,Ce,Se)},$.prototype._digest=function(g){return g==="hex"?t.toHex32(this.h,"big"):t.split32(this.h,"big")};function L(w,g,b,m,M){var R=w&b^~w&M;return R<0&&(R+=4294967296),R}function k(w,g,b,m,M,R){var C=g&m^~g&R;return C<0&&(C+=4294967296),C}function U(w,g,b,m,M){var R=w&b^w&M^b&M;return R<0&&(R+=4294967296),R}function q(w,g,b,m,M,R){var C=g&m^g&R^m&R;return C<0&&(C+=4294967296),C}function j(w,g){var b=n(w,g,28),m=n(g,w,2),M=n(g,w,7),R=b^m^M;return R<0&&(R+=4294967296),R}function z(w,g){var b=i(w,g,28),m=i(g,w,2),M=i(g,w,7),R=b^m^M;return R<0&&(R+=4294967296),R}function V(w,g){var b=n(w,g,14),m=n(w,g,18),M=n(g,w,9),R=b^m^M;return R<0&&(R+=4294967296),R}function G(w,g){var b=i(w,g,14),m=i(w,g,18),M=i(g,w,9),R=b^m^M;return R<0&&(R+=4294967296),R}function B(w,g){var b=n(w,g,1),m=n(w,g,8),M=s(w,g,7),R=b^m^M;return R<0&&(R+=4294967296),R}function W(w,g){var b=i(w,g,1),m=i(w,g,8),M=o(w,g,7),R=b^m^M;return R<0&&(R+=4294967296),R}function D(w,g){var b=n(w,g,19),m=n(g,w,29),M=s(w,g,6),R=b^m^M;return R<0&&(R+=4294967296),R}function _(w,g){var b=i(w,g,19),m=i(g,w,29),M=o(w,g,6),R=b^m^M;return R<0&&(R+=4294967296),R}return q_}var F_,PM;function Bee(){if(PM)return F_;PM=1;var t=bc(),e=sk();function r(){if(!(this instanceof r))return new r;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return t.inherits(r,e),F_=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(i){return i==="hex"?t.toHex32(this.h.slice(0,12),"big"):t.split32(this.h.slice(0,12),"big")},F_}var BM;function Lee(){return BM||(BM=1,Hu.sha1=kee(),Hu.sha224=Pee(),Hu.sha256=ik(),Hu.sha384=Bee(),Hu.sha512=sk()),Hu}var H_={},LM;function Uee(){if(LM)return H_;LM=1;var t=bc(),e=By(),r=t.rotl32,n=t.sum32,i=t.sum32_3,s=t.sum32_4,o=e.BlockHash;function c(){if(!(this instanceof c))return new c;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}t.inherits(c,o),H_.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function($,L){for(var k=this.h[0],U=this.h[1],q=this.h[2],j=this.h[3],z=this.h[4],V=k,G=U,B=q,W=j,D=z,_=0;_<80;_++){var w=n(r(s(k,u(_,U,q,j),$[p[_]+L],h(_)),S[_]),z);k=z,z=j,j=r(q,10),q=U,U=w,w=n(r(s(V,u(79-_,G,B,W),$[E[_]+L],f(_)),A[_]),D),V=D,D=W,W=r(B,10),B=G,G=w}w=i(this.h[1],q,W),this.h[1]=i(this.h[2],j,D),this.h[2]=i(this.h[3],z,V),this.h[3]=i(this.h[4],k,G),this.h[4]=i(this.h[0],U,B),this.h[0]=w},c.prototype._digest=function($){return $==="hex"?t.toHex32(this.h,"little"):t.split32(this.h,"little")};function u(I,$,L,k){return I<=15?$^L^k:I<=31?$&L|~$&k:I<=47?($|~L)^k:I<=63?$&k|L&~k:$^(L|~k)}function h(I){return I<=15?0:I<=31?1518500249:I<=47?1859775393:I<=63?2400959708:2840853838}function f(I){return I<=15?1352829926:I<=31?1548603684:I<=47?1836072691:I<=63?2053994217:0}var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],E=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],S=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],A=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return H_}var W_,UM;function jee(){if(UM)return W_;UM=1;var t=bc(),e=jh();function r(n,i,s){if(!(this instanceof r))return new r(n,i,s);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(t.toArray(i,s))}return W_=r,r.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),e(i.length<=this.blockSize);for(var s=i.length;s<this.blockSize;s++)i.push(0);for(s=0;s<i.length;s++)i[s]^=54;for(this.inner=new this.Hash().update(i),s=0;s<i.length;s++)i[s]^=106;this.outer=new this.Hash().update(i)},r.prototype.update=function(i,s){return this.inner.update(i,s),this},r.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)},W_}var jM;function NA(){return jM||(jM=1,function(t){var e=t;e.utils=bc(),e.common=By(),e.sha=Lee(),e.ripemd=Uee(),e.hmac=jee(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(B_)),B_}var K_,zM;function zee(){return zM||(zM=1,K_={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),K_}var qM;function OA(){return qM||(qM=1,function(t){var e=t,r=NA(),n=rk(),i=oa(),s=i.assert;function o(h){h.type==="short"?this.curve=new n.short(h):h.type==="edwards"?this.curve=new n.edwards(h):this.curve=new n.mont(h),this.g=this.curve.g,this.n=this.curve.n,this.hash=h.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=o;function c(h,f){Object.defineProperty(e,h,{configurable:!0,enumerable:!0,get:function(){var p=new o(f);return Object.defineProperty(e,h,{configurable:!0,enumerable:!0,value:p}),p}})}c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=zee()}catch{u=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})}(P_)),P_}var V_,FM;function qee(){if(FM)return V_;FM=1;var t=NA(),e=ek(),r=jh();function n(i){if(!(this instanceof n))return new n(i);this.hash=i.hash,this.predResist=!!i.predResist,this.outLen=this.hash.outSize,this.minEntropy=i.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var s=e.toArray(i.entropy,i.entropyEnc||"hex"),o=e.toArray(i.nonce,i.nonceEnc||"hex"),c=e.toArray(i.pers,i.persEnc||"hex");r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(s,o,c)}return V_=n,n.prototype._init=function(s,o,c){var u=s.concat(o).concat(c);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var h=0;h<this.V.length;h++)this.K[h]=0,this.V[h]=1;this._update(u),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new t.hmac(this.hash,this.K)},n.prototype._update=function(s){var o=this._hmac().update(this.V).update([0]);s&&(o=o.update(s)),this.K=o.digest(),this.V=this._hmac().update(this.V).digest(),s&&(this.K=this._hmac().update(this.V).update([1]).update(s).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(s,o,c,u){typeof o!="string"&&(u=c,c=o,o=null),s=e.toArray(s,o),c=e.toArray(c,u),r(s.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(s.concat(c||[])),this._reseed=1},n.prototype.generate=function(s,o,c,u){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof o!="string"&&(u=c,c=o,o=null),c&&(c=e.toArray(c,u||"hex"),this._update(c));for(var h=[];h.length<s;)this.V=this._hmac().update(this.V).digest(),h=h.concat(this.V);var f=h.slice(0,s);return this._update(c),this._reseed++,e.encode(f,o)},V_}var G_,HM;function Fee(){if(HM)return G_;HM=1;var t=hl(),e=oa(),r=e.assert;function n(i,s){this.ec=i,this.priv=null,this.pub=null,s.priv&&this._importPrivate(s.priv,s.privEnc),s.pub&&this._importPublic(s.pub,s.pubEnc)}return G_=n,n.fromPublic=function(s,o,c){return o instanceof n?o:new n(s,{pub:o,pubEnc:c})},n.fromPrivate=function(s,o,c){return o instanceof n?o:new n(s,{priv:o,privEnc:c})},n.prototype.validate=function(){var s=this.getPublic();return s.isInfinity()?{result:!1,reason:"Invalid public key"}:s.validate()?s.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},n.prototype.getPublic=function(s,o){return typeof s=="string"&&(o=s,s=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),o?this.pub.encode(o,s):this.pub},n.prototype.getPrivate=function(s){return s==="hex"?this.priv.toString(16,2):this.priv},n.prototype._importPrivate=function(s,o){this.priv=new t(s,o||16),this.priv=this.priv.umod(this.ec.curve.n)},n.prototype._importPublic=function(s,o){if(s.x||s.y){this.ec.curve.type==="mont"?r(s.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&r(s.x&&s.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(s.x,s.y);return}this.pub=this.ec.curve.decodePoint(s,o)},n.prototype.derive=function(s){return s.validate()||r(s.validate(),"public point not validated"),s.mul(this.priv).getX()},n.prototype.sign=function(s,o,c){return this.ec.sign(s,this,o,c)},n.prototype.verify=function(s,o,c){return this.ec.verify(s,o,this,void 0,c)},n.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},G_}var Y_,WM;function Hee(){if(WM)return Y_;WM=1;var t=hl(),e=oa(),r=e.assert;function n(u,h){if(u instanceof n)return u;this._importDER(u,h)||(r(u.r&&u.s,"Signature without r or s"),this.r=new t(u.r,16),this.s=new t(u.s,16),u.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=u.recoveryParam)}Y_=n;function i(){this.place=0}function s(u,h){var f=u[h.place++];if(!(f&128))return f;var p=f&15;if(p===0||p>4||u[h.place]===0)return!1;for(var E=0,S=0,A=h.place;S<p;S++,A++)E<<=8,E|=u[A],E>>>=0;return E<=127?!1:(h.place=A,E)}function o(u){for(var h=0,f=u.length-1;!u[h]&&!(u[h+1]&128)&&h<f;)h++;return h===0?u:u.slice(h)}n.prototype._importDER=function(h,f){h=e.toArray(h,f);var p=new i;if(h[p.place++]!==48)return!1;var E=s(h,p);if(E===!1||E+p.place!==h.length||h[p.place++]!==2)return!1;var S=s(h,p);if(S===!1||(h[p.place]&128)!==0)return!1;var A=h.slice(p.place,S+p.place);if(p.place+=S,h[p.place++]!==2)return!1;var I=s(h,p);if(I===!1||h.length!==I+p.place||(h[p.place]&128)!==0)return!1;var $=h.slice(p.place,I+p.place);if(A[0]===0)if(A[1]&128)A=A.slice(1);else return!1;if($[0]===0)if($[1]&128)$=$.slice(1);else return!1;return this.r=new t(A),this.s=new t($),this.recoveryParam=null,!0};function c(u,h){if(h<128){u.push(h);return}var f=1+(Math.log(h)/Math.LN2>>>3);for(u.push(f|128);--f;)u.push(h>>>(f<<3)&255);u.push(h)}return n.prototype.toDER=function(h){var f=this.r.toArray(),p=this.s.toArray();for(f[0]&128&&(f=[0].concat(f)),p[0]&128&&(p=[0].concat(p)),f=o(f),p=o(p);!p[0]&&!(p[1]&128);)p=p.slice(1);var E=[2];c(E,f.length),E=E.concat(f),E.push(2),c(E,p.length);var S=E.concat(p),A=[48];return c(A,S.length),A=A.concat(S),e.encode(A,h)},Y_}var Z_,KM;function Wee(){if(KM)return Z_;KM=1;var t=hl(),e=qee(),r=oa(),n=OA(),i=tk(),s=r.assert,o=Fee(),c=Hee();function u(h){if(!(this instanceof u))return new u(h);typeof h=="string"&&(s(Object.prototype.hasOwnProperty.call(n,h),"Unknown curve "+h),h=n[h]),h instanceof n.PresetCurve&&(h={curve:h}),this.curve=h.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=h.curve.g,this.g.precompute(h.curve.n.bitLength()+1),this.hash=h.hash||h.curve.hash}return Z_=u,u.prototype.keyPair=function(f){return new o(this,f)},u.prototype.keyFromPrivate=function(f,p){return o.fromPrivate(this,f,p)},u.prototype.keyFromPublic=function(f,p){return o.fromPublic(this,f,p)},u.prototype.genKeyPair=function(f){f||(f={});for(var p=new e({hash:this.hash,pers:f.pers,persEnc:f.persEnc||"utf8",entropy:f.entropy||i(this.hash.hmacStrength),entropyEnc:f.entropy&&f.entropyEnc||"utf8",nonce:this.n.toArray()}),E=this.n.byteLength(),S=this.n.sub(new t(2));;){var A=new t(p.generate(E));if(!(A.cmp(S)>0))return A.iaddn(1),this.keyFromPrivate(A)}},u.prototype._truncateToN=function(f,p,E){var S;if(t.isBN(f)||typeof f=="number")f=new t(f,16),S=f.byteLength();else if(typeof f=="object")S=f.length,f=new t(f,16);else{var A=f.toString();S=A.length+1>>>1,f=new t(A,16)}typeof E!="number"&&(E=S*8);var I=E-this.n.bitLength();return I>0&&(f=f.ushrn(I)),!p&&f.cmp(this.n)>=0?f.sub(this.n):f},u.prototype.sign=function(f,p,E,S){if(typeof E=="object"&&(S=E,E=null),S||(S={}),typeof f!="string"&&typeof f!="number"&&!t.isBN(f)){s(typeof f=="object"&&f&&typeof f.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),s(f.length>>>0===f.length);for(var A=0;A<f.length;A++)s((f[A]&255)===f[A])}p=this.keyFromPrivate(p,E),f=this._truncateToN(f,!1,S.msgBitLength),s(!f.isNeg(),"Can not sign a negative message");var I=this.n.byteLength(),$=p.getPrivate().toArray("be",I),L=f.toArray("be",I);s(new t(L).eq(f),"Can not sign message");for(var k=new e({hash:this.hash,entropy:$,nonce:L,pers:S.pers,persEnc:S.persEnc||"utf8"}),U=this.n.sub(new t(1)),q=0;;q++){var j=S.k?S.k(q):new t(k.generate(this.n.byteLength()));if(j=this._truncateToN(j,!0),!(j.cmpn(1)<=0||j.cmp(U)>=0)){var z=this.g.mul(j);if(!z.isInfinity()){var V=z.getX(),G=V.umod(this.n);if(G.cmpn(0)!==0){var B=j.invm(this.n).mul(G.mul(p.getPrivate()).iadd(f));if(B=B.umod(this.n),B.cmpn(0)!==0){var W=(z.getY().isOdd()?1:0)|(V.cmp(G)!==0?2:0);return S.canonical&&B.cmp(this.nh)>0&&(B=this.n.sub(B),W^=1),new c({r:G,s:B,recoveryParam:W})}}}}}},u.prototype.verify=function(f,p,E,S,A){A||(A={}),f=this._truncateToN(f,!1,A.msgBitLength),E=this.keyFromPublic(E,S),p=new c(p,"hex");var I=p.r,$=p.s;if(I.cmpn(1)<0||I.cmp(this.n)>=0||$.cmpn(1)<0||$.cmp(this.n)>=0)return!1;var L=$.invm(this.n),k=L.mul(f).umod(this.n),U=L.mul(I).umod(this.n),q;return this.curve._maxwellTrick?(q=this.g.jmulAdd(k,E.getPublic(),U),q.isInfinity()?!1:q.eqXToP(I)):(q=this.g.mulAdd(k,E.getPublic(),U),q.isInfinity()?!1:q.getX().umod(this.n).cmp(I)===0)},u.prototype.recoverPubKey=function(h,f,p,E){s((3&p)===p,"The recovery param is more than two bits"),f=new c(f,E);var S=this.n,A=new t(h),I=f.r,$=f.s,L=p&1,k=p>>1;if(I.cmp(this.curve.p.umod(this.curve.n))>=0&&k)throw new Error("Unable to find sencond key candinate");k?I=this.curve.pointFromX(I.add(this.curve.n),L):I=this.curve.pointFromX(I,L);var U=f.r.invm(S),q=S.sub(A).mul(U).umod(S),j=$.mul(U).umod(S);return this.g.mulAdd(q,I,j)},u.prototype.getKeyRecoveryParam=function(h,f,p,E){if(f=new c(f,E),f.recoveryParam!==null)return f.recoveryParam;for(var S=0;S<4;S++){var A;try{A=this.recoverPubKey(h,f,S)}catch{continue}if(A.eq(p))return S}throw new Error("Unable to find valid recovery factor")},Z_}var Q_,VM;function Kee(){if(VM)return Q_;VM=1;var t=oa(),e=t.assert,r=t.parseBytes,n=t.cachedProperty;function i(s,o){this.eddsa=s,this._secret=r(o.secret),s.isPoint(o.pub)?this._pub=o.pub:this._pubBytes=r(o.pub)}return i.fromPublic=function(o,c){return c instanceof i?c:new i(o,{pub:c})},i.fromSecret=function(o,c){return c instanceof i?c:new i(o,{secret:c})},i.prototype.secret=function(){return this._secret},n(i,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),n(i,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),n(i,"privBytes",function(){var o=this.eddsa,c=this.hash(),u=o.encodingLength-1,h=c.slice(0,o.encodingLength);return h[0]&=248,h[u]&=127,h[u]|=64,h}),n(i,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),n(i,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),n(i,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),i.prototype.sign=function(o){return e(this._secret,"KeyPair can only verify"),this.eddsa.sign(o,this)},i.prototype.verify=function(o,c){return this.eddsa.verify(o,c,this)},i.prototype.getSecret=function(o){return e(this._secret,"KeyPair is public only"),t.encode(this.secret(),o)},i.prototype.getPublic=function(o){return t.encode(this.pubBytes(),o)},Q_=i,Q_}var X_,GM;function Vee(){if(GM)return X_;GM=1;var t=hl(),e=oa(),r=e.assert,n=e.cachedProperty,i=e.parseBytes;function s(o,c){this.eddsa=o,typeof c!="object"&&(c=i(c)),Array.isArray(c)&&(r(c.length===o.encodingLength*2,"Signature has invalid size"),c={R:c.slice(0,o.encodingLength),S:c.slice(o.encodingLength)}),r(c.R&&c.S,"Signature without R or S"),o.isPoint(c.R)&&(this._R=c.R),c.S instanceof t&&(this._S=c.S),this._Rencoded=Array.isArray(c.R)?c.R:c.Rencoded,this._Sencoded=Array.isArray(c.S)?c.S:c.Sencoded}return n(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),n(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),n(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),n(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return e.encode(this.toBytes(),"hex").toUpperCase()},X_=s,X_}var J_,YM;function Gee(){if(YM)return J_;YM=1;var t=NA(),e=OA(),r=oa(),n=r.assert,i=r.parseBytes,s=Kee(),o=Vee();function c(u){if(n(u==="ed25519","only tested with ed25519 so far"),!(this instanceof c))return new c(u);u=e[u].curve,this.curve=u,this.g=u.g,this.g.precompute(u.n.bitLength()+1),this.pointClass=u.point().constructor,this.encodingLength=Math.ceil(u.n.bitLength()/8),this.hash=t.sha512}return J_=c,c.prototype.sign=function(h,f){h=i(h);var p=this.keyFromSecret(f),E=this.hashInt(p.messagePrefix(),h),S=this.g.mul(E),A=this.encodePoint(S),I=this.hashInt(A,p.pubBytes(),h).mul(p.priv()),$=E.add(I).umod(this.curve.n);return this.makeSignature({R:S,S:$,Rencoded:A})},c.prototype.verify=function(h,f,p){if(h=i(h),f=this.makeSignature(f),f.S().gte(f.eddsa.curve.n)||f.S().isNeg())return!1;var E=this.keyFromPublic(p),S=this.hashInt(f.Rencoded(),E.pubBytes(),h),A=this.g.mul(f.S()),I=f.R().add(E.pub().mul(S));return I.eq(A)},c.prototype.hashInt=function(){for(var h=this.hash(),f=0;f<arguments.length;f++)h.update(arguments[f]);return r.intFromLE(h.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(h){return s.fromPublic(this,h)},c.prototype.keyFromSecret=function(h){return s.fromSecret(this,h)},c.prototype.makeSignature=function(h){return h instanceof o?h:new o(this,h)},c.prototype.encodePoint=function(h){var f=h.getY().toArray("le",this.encodingLength);return f[this.encodingLength-1]|=h.getX().isOdd()?128:0,f},c.prototype.decodePoint=function(h){h=r.parseBytes(h);var f=h.length-1,p=h.slice(0,f).concat(h[f]&-129),E=(h[f]&128)!==0,S=r.intFromLE(p);return this.curve.pointFromY(S,E)},c.prototype.encodeInt=function(h){return h.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(h){return r.intFromLE(h)},c.prototype.isPoint=function(h){return h instanceof this.pointClass},J_}var ZM;function Yee(){return ZM||(ZM=1,function(t){var e=t;e.version=Nee.version,e.utils=oa(),e.rand=tk(),e.curve=rk(),e.curves=OA(),e.ec=Wee(),e.eddsa=Gee()}(C_)),C_}var ok=Yee();const ak={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var Zee={};const ck=":";function zf(t){const[e,r]=t.split(ck);return{namespace:e,reference:r}}function Qee(t){const[e,r,n]=t.split(ck);return{namespace:e,reference:r,address:n}}function lk(t,e){return t.includes(":")?[t]:e.chains||[]}const Xee="ReactNative",ko={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Jee="js";function q1(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function mu(){return!fo.getDocument()&&!!fo.getNavigator()&&navigator.product===Xee}function ete(){return mu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function tte(){return mu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ly(){return!q1()&&!!fo.getNavigator()&&!!fo.getDocument()}function Uy(){return mu()?ko.reactNative:q1()?ko.node:Ly()?ko.browser:ko.unknown}function QM(){var t;try{return mu()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function rte(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function uk(){return k$.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function nte(){if(Uy()===ko.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=D$();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function ite(){var t;const e=Uy();return e===ko.browser?[e,((t=fo.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function hk(t,e,r){const n=nte(),i=ite();return[[t,e].join("-"),[Jee,r].join("-"),n,i].join("/")}function ste({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:c,packageName:u}){const h=r.split("?"),f=hk(t,e,n),p={auth:i,ua:f,projectId:s,useOnCloseEvent:o,packageName:u||void 0,bundleId:c||void 0},E=rte(h[1]||"",p);return h[0]+"?"+E}function dh(t,e){return t.filter(r=>e.includes(r)).length===t.length}function dk(t){return Object.fromEntries(t.entries())}function fk(t){return new Map(Object.entries(t))}function Qu(t=ye.FIVE_MINUTES,e){const r=ye.toMiliseconds(t||ye.FIVE_MINUTES);let n,i,s,o;return{resolve:c=>{s&&n&&(clearTimeout(s),n(c),o=Promise.resolve(c))},reject:c=>{s&&i&&(clearTimeout(s),i(c))},done:()=>new Promise((c,u)=>{if(o)return c(o);s=setTimeout(()=>{const h=new Error(e);o=Promise.reject(h),u(h)},r),n=c,i=u})}}function iu(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function pk(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function ote(t){return pk("topic",t)}function ate(t){return pk("id",t)}function gk(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function wi(t,e){return ye.fromMiliseconds(Date.now()+ye.toMiliseconds(t))}function Ql(t){return Date.now()>=ye.toMiliseconds(t)}function Hr(t,e){return`${t}${e?`:${e}`:""}`}function u1(t=[],e=[]){return[...new Set([...t,...e])]}async function cte({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=lte(s,t,e),c=Uy();if(c===ko.browser){if(!((n=fo.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}ute(o)}else c===ko.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function lte(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${pte(n,!0)}`}else i=`${i}/wc?${n}`;return i}function ute(t){let e="_self";fte()?e="_top":(dte()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function hte(t,e){let r="";try{if(Ly()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function XM(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function JM(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function RA(){return typeof process<"u"&&Zee.IS_VITEST==="true"}function dte(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function fte(){try{return window.self!==window.top}catch{return!1}}function pte(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function yk(t){return Buffer.from(t,"base64").toString("utf-8")}function gte(t){return new Promise(e=>setTimeout(e,t))}function Vg(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function yte(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Dw(t,...e){if(!yte(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function DA(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Vg(t.outputLen),Vg(t.blockLen)}function tp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mk(t,e){Dw(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Cb=BigInt(2**32-1),eN=BigInt(32);function mte(t,e=!1){return e?{h:Number(t&Cb),l:Number(t>>eN&Cb)}:{h:Number(t>>eN&Cb)|0,l:Number(t&Cb)|0}}function bte(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=mte(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const wte=(t,e,r)=>t<<r|e>>>32-r,vte=(t,e,r)=>e<<r|t>>>32-r,Ete=(t,e,r)=>e<<r-32|t>>>64-r,_te=(t,e,r)=>t<<r-32|e>>>64-r,Ud=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Ste(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function e3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ga(t,e){return t<<32-e|t>>>e}const tN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ate(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function rN(t){for(let e=0;e<t.length;e++)t[e]=Ate(t[e])}function Ite(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function rp(t){return typeof t=="string"&&(t=Ite(t)),Dw(t),t}let $A=class{clone(){return this._cloneInto()}};function bk(t){const e=n=>t().update(rp(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function jy(t=32){if(Ud&&typeof Ud.getRandomValues=="function")return Ud.getRandomValues(new Uint8Array(t));if(Ud&&typeof Ud.randomBytes=="function")return Ud.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const wk=[],vk=[],Ek=[],xte=BigInt(0),q0=BigInt(1),Cte=BigInt(2),Tte=BigInt(7),Mte=BigInt(256),Nte=BigInt(113);for(let t=0,e=q0,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],wk.push(2*(5*n+r)),vk.push((t+1)*(t+2)/2%64);let i=xte;for(let s=0;s<7;s++)e=(e<<q0^(e>>Tte)*Nte)%Mte,e&Cte&&(i^=q0<<(q0<<BigInt(s))-q0);Ek.push(i)}const[Ote,Rte]=bte(Ek,!0),nN=(t,e,r)=>r>32?Ete(t,e,r):wte(t,e,r),iN=(t,e,r)=>r>32?_te(t,e,r):vte(t,e,r);function Dte(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,h=r[u],f=r[u+1],p=nN(h,f,1)^r[c],E=iN(h,f,1)^r[c+1];for(let S=0;S<50;S+=10)t[o+S]^=p,t[o+S+1]^=E}let i=t[2],s=t[3];for(let o=0;o<24;o++){const c=vk[o],u=nN(i,s,c),h=iN(i,s,c),f=wk[o];i=t[f],s=t[f+1],t[f]=u,t[f+1]=h}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)r[c]=t[o+c];for(let c=0;c<10;c++)t[o+c]^=~r[(c+2)%10]&r[(c+4)%10]}t[0]^=Ote[n],t[1]^=Rte[n]}r.fill(0)}let $te=class _k extends $A{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Vg(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ste(this.state)}keccak(){tN||rN(this.state32),Dte(this.state32,this.rounds),tN||rN(this.state32),this.posOut=0,this.pos=0}update(e){tp(this);const{blockLen:r,state:n}=this;e=rp(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let c=0;c<o;c++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){tp(this,!1),Dw(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Vg(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(mk(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new _k(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const kte=(t,e,r)=>bk(()=>new $te(e,t,r)),Pte=kte(1,136,256/8),Bte="https://rpc.walletconnect.org/v1";function Sk(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Pte(r)).toString("hex")}async function Lte(t,e,r,n,i,s){switch(r.t){case"eip191":return await Ute(t,e,r.s);case"eip1271":return await jte(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function Ute(t,e,r){return(await RJ({hash:Sk(e),signature:r})).toLowerCase()===t.toLowerCase()}async function jte(t,e,r,n,i,s){const o=zf(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const c="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",h="0000000000000000000000000000000000000000000000000000000000000041",f=r.substring(2),p=Sk(e).substring(2),E=c+p+u+h+f,S=await fetch(`${s||Bte}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:zte(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:E},"latest"]})}),{result:A}=await S.json();return A?A.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function zte(){return Date.now()+Math.floor(Math.random()*1e3)}var qte=Object.defineProperty,Fte=Object.defineProperties,Hte=Object.getOwnPropertyDescriptors,sN=Object.getOwnPropertySymbols,Wte=Object.prototype.hasOwnProperty,Kte=Object.prototype.propertyIsEnumerable,oN=(t,e,r)=>e in t?qte(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vte=(t,e)=>{for(var r in e||(e={}))Wte.call(e,r)&&oN(t,r,e[r]);if(sN)for(var r of sN(e))Kte.call(e,r)&&oN(t,r,e[r]);return t},Gte=(t,e)=>Fte(t,Hte(e));const Yte="did:pkh:",kA=t=>t==null?void 0:t.split(":"),Zte=t=>{const e=t&&kA(t);if(e)return t.includes(Yte)?e[3]:e[1]},kS=t=>{const e=t&&kA(t);if(e)return e[2]+":"+e[3]},F1=t=>{const e=t&&kA(t);if(e)return e.pop()};async function aN(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=Ak(i,i.iss),o=F1(i.iss);return await Lte(o,s,n,kS(i.iss),r)}const Ak=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=F1(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,c=`Chain ID: ${Zte(e)}`,u=`Nonce: ${t.nonce}`,h=`Issued At: ${t.iat}`,f=t.exp?`Expiration Time: ${t.exp}`:void 0,p=t.nbf?`Not Before: ${t.nbf}`:void 0,E=t.requestId?`Request ID: ${t.requestId}`:void 0,S=t.resources?`Resources:${t.resources.map(I=>`
- ${I}`).join("")}`:void 0,A=h1(t.resources);if(A){const I=Gg(A);i=sre(i,I)}return[r,n,"",i,"",s,o,c,u,h,f,p,E,S].filter(I=>I!=null).join(`
`)};function Qte(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Xte(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Sh(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function Jte(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:ere(e,r,n)}}}function ere(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function Ik(t){return Sh(t),`urn:recap:${Qte(t).replace(/=/g,"")}`}function Gg(t){const e=Xte(t.replace("urn:recap:",""));return Sh(e),e}function tre(t,e,r){const n=Jte(t,e,r);return Ik(n)}function rre(t){return t&&t.includes("urn:recap:")}function nre(t,e){const r=Gg(t),n=Gg(e),i=ire(r,n);return Ik(i)}function ire(t,e){Sh(t),Sh(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((c,u)=>c.localeCompare(u)).forEach(c=>{var u,h;n.att[i]=Gte(Vte({},n.att[i]),{[c]:((u=t.att[i])==null?void 0:u[c])||((h=e.att[i])==null?void 0:h[c])})})}),n}function sre(t="",e){Sh(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(c=>{const u=Object.keys(e.att[c]).map(p=>({ability:p.split("/")[0],action:p.split("/")[1]}));u.sort((p,E)=>p.action.localeCompare(E.action));const h={};u.forEach(p=>{h[p.ability]||(h[p.ability]=[]),h[p.ability].push(p.action)});const f=Object.keys(h).map(p=>(i++,`(${i}) '${p}': '${h[p].join("', '")}' for '${c}'.`));n.push(f.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function cN(t){var e;const r=Gg(t);Sh(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function lN(t){const e=Gg(t);Sh(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function h1(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return rre(e)?e:void 0}function t3(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function xk(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ro(t,...e){if(!xk(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function uN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ore(t,e){Ro(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function hN(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const uu=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),are=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),cre=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!cre)throw new Error("Non little-endian hardware is not supported");function lre(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function PS(t){if(typeof t=="string")t=lre(t);else if(xk(t))t=BS(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function ure(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function hre(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const dre=(t,e)=>{function r(n,...i){if(Ro(n),t.nonceLength!==void 0){const h=i[0];if(!h)throw new Error("nonce / iv required");t.varSizeNonce?Ro(h):Ro(h,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&Ro(i[1]);const o=e(n,...i),c=(h,f)=>{if(f!==void 0){if(h!==2)throw new Error("cipher output not supported");Ro(f)}};let u=!1;return{encrypt(h,f){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,Ro(h),c(o.encrypt.length,f),o.encrypt(h,f)},decrypt(h,f){if(Ro(h),s&&h.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(o.decrypt.length,f),o.decrypt(h,f)}}}return Object.assign(r,t),r};function dN(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!fre(e))throw new Error("invalid output, must be aligned");return e}function fN(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),c=Number(r&s);t.setUint32(e+4,o,n),t.setUint32(e+0,c,n)}function fre(t){return t.byteOffset%4===0}function BS(t){return Uint8Array.from(t)}function np(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Ck=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),pre=Ck("expand 16-byte k"),gre=Ck("expand 32-byte k"),yre=uu(pre),mre=uu(gre);function Or(t,e){return t<<e|t>>>32-e}function LS(t){return t.byteOffset%4===0}const Tb=64,bre=16,Tk=2**32-1,pN=new Uint32Array;function wre(t,e,r,n,i,s,o,c){const u=i.length,h=new Uint8Array(Tb),f=uu(h),p=LS(i)&&LS(s),E=p?uu(i):pN,S=p?uu(s):pN;for(let A=0;A<u;o++){if(t(e,r,n,f,o,c),o>=Tk)throw new Error("arx: counter overflow");const I=Math.min(Tb,u-A);if(p&&I===Tb){const $=A/4;if(A%4!==0)throw new Error("arx: invalid block position");for(let L=0,k;L<bre;L++)k=$+L,S[k]=E[k]^f[L];A+=Tb;continue}for(let $=0,L;$<I;$++)L=A+$,s[L]=i[L]^h[$];A+=I}}function vre(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=ure({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return t3(i),t3(o),hN(s),hN(r),(c,u,h,f,p=0)=>{Ro(c),Ro(u),Ro(h);const E=h.length;if(f===void 0&&(f=new Uint8Array(E)),Ro(f),t3(p),p<0||p>=Tk)throw new Error("arx: counter overflow");if(f.length<E)throw new Error(`arx: output (${f.length}) is shorter than data (${E})`);const S=[];let A=c.length,I,$;if(A===32)S.push(I=BS(c)),$=mre;else if(A===16&&r)I=new Uint8Array(32),I.set(c),I.set(c,16),$=yre,S.push(I);else throw new Error(`arx: invalid 32-byte key, got length=${A}`);LS(u)||S.push(u=BS(u));const L=uu(I);if(n){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n($,L,uu(u.subarray(0,16)),L),u=u.subarray(16)}const k=16-i;if(k!==u.length)throw new Error(`arx: nonce must be ${k} or 16 bytes`);if(k!==12){const q=new Uint8Array(12);q.set(u,s?0:12-u.length),u=q,S.push(u)}const U=uu(u);return wre(t,$,L,U,h,f,p,o),np(...S),f}}const Gi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let Ere=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=PS(e),Ro(e,32);const r=Gi(e,0),n=Gi(e,2),i=Gi(e,4),s=Gi(e,6),o=Gi(e,8),c=Gi(e,10),u=Gi(e,12),h=Gi(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|h<<8)&8191,this.r[9]=h>>>5&127;for(let f=0;f<8;f++)this.pad[f]=Gi(e,16+2*f)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,c=o[0],u=o[1],h=o[2],f=o[3],p=o[4],E=o[5],S=o[6],A=o[7],I=o[8],$=o[9],L=Gi(e,r+0),k=Gi(e,r+2),U=Gi(e,r+4),q=Gi(e,r+6),j=Gi(e,r+8),z=Gi(e,r+10),V=Gi(e,r+12),G=Gi(e,r+14);let B=s[0]+(L&8191),W=s[1]+((L>>>13|k<<3)&8191),D=s[2]+((k>>>10|U<<6)&8191),_=s[3]+((U>>>7|q<<9)&8191),w=s[4]+((q>>>4|j<<12)&8191),g=s[5]+(j>>>1&8191),b=s[6]+((j>>>14|z<<2)&8191),m=s[7]+((z>>>11|V<<5)&8191),M=s[8]+((V>>>8|G<<8)&8191),R=s[9]+(G>>>5|i),C=0,v=C+B*c+W*(5*$)+D*(5*I)+_*(5*A)+w*(5*S);C=v>>>13,v&=8191,v+=g*(5*E)+b*(5*p)+m*(5*f)+M*(5*h)+R*(5*u),C+=v>>>13,v&=8191;let O=C+B*u+W*c+D*(5*$)+_*(5*I)+w*(5*A);C=O>>>13,O&=8191,O+=g*(5*S)+b*(5*E)+m*(5*p)+M*(5*f)+R*(5*h),C+=O>>>13,O&=8191;let x=C+B*h+W*u+D*c+_*(5*$)+w*(5*I);C=x>>>13,x&=8191,x+=g*(5*A)+b*(5*S)+m*(5*E)+M*(5*p)+R*(5*f),C+=x>>>13,x&=8191;let N=C+B*f+W*h+D*u+_*c+w*(5*$);C=N>>>13,N&=8191,N+=g*(5*I)+b*(5*A)+m*(5*S)+M*(5*E)+R*(5*p),C+=N>>>13,N&=8191;let H=C+B*p+W*f+D*h+_*u+w*c;C=H>>>13,H&=8191,H+=g*(5*$)+b*(5*I)+m*(5*A)+M*(5*S)+R*(5*E),C+=H>>>13,H&=8191;let Y=C+B*E+W*p+D*f+_*h+w*u;C=Y>>>13,Y&=8191,Y+=g*c+b*(5*$)+m*(5*I)+M*(5*A)+R*(5*S),C+=Y>>>13,Y&=8191;let Q=C+B*S+W*E+D*p+_*f+w*h;C=Q>>>13,Q&=8191,Q+=g*u+b*c+m*(5*$)+M*(5*I)+R*(5*A),C+=Q>>>13,Q&=8191;let ee=C+B*A+W*S+D*E+_*p+w*f;C=ee>>>13,ee&=8191,ee+=g*h+b*u+m*c+M*(5*$)+R*(5*I),C+=ee>>>13,ee&=8191;let re=C+B*I+W*A+D*S+_*E+w*p;C=re>>>13,re&=8191,re+=g*f+b*h+m*u+M*c+R*(5*$),C+=re>>>13,re&=8191;let oe=C+B*$+W*I+D*A+_*S+w*E;C=oe>>>13,oe&=8191,oe+=g*p+b*f+m*h+M*u+R*c,C+=oe>>>13,oe&=8191,C=(C<<2)+C|0,C=C+v|0,v=C&8191,C=C>>>13,O+=C,s[0]=v,s[1]=O,s[2]=x,s[3]=N,s[4]=H,s[5]=Y,s[6]=Q,s[7]=ee,s[8]=re,s[9]=oe}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let c=1;c<10;c++)n[c]=e[c]+i,i=n[c]>>>13,n[c]&=8191;n[9]-=8192;let s=(i^1)-1;for(let c=0;c<10;c++)n[c]&=s;s=~s;for(let c=0;c<10;c++)e[c]=e[c]&s|n[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let c=1;c<8;c++)o=(e[c]+r[c]|0)+(o>>>16)|0,e[c]=o&65535;np(n)}update(e){uN(this);const{buffer:r,blockLen:n}=this;e=PS(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){np(this.h,this.r,this.buffer,this.pad)}digestInto(e){uN(this),ore(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function _re(t){const e=(n,i)=>t(i).update(PS(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Sre=_re(t=>new Ere(t));function Are(t,e,r,n,i,s=20){let o=t[0],c=t[1],u=t[2],h=t[3],f=e[0],p=e[1],E=e[2],S=e[3],A=e[4],I=e[5],$=e[6],L=e[7],k=i,U=r[0],q=r[1],j=r[2],z=o,V=c,G=u,B=h,W=f,D=p,_=E,w=S,g=A,b=I,m=$,M=L,R=k,C=U,v=q,O=j;for(let N=0;N<s;N+=2)z=z+W|0,R=Or(R^z,16),g=g+R|0,W=Or(W^g,12),z=z+W|0,R=Or(R^z,8),g=g+R|0,W=Or(W^g,7),V=V+D|0,C=Or(C^V,16),b=b+C|0,D=Or(D^b,12),V=V+D|0,C=Or(C^V,8),b=b+C|0,D=Or(D^b,7),G=G+_|0,v=Or(v^G,16),m=m+v|0,_=Or(_^m,12),G=G+_|0,v=Or(v^G,8),m=m+v|0,_=Or(_^m,7),B=B+w|0,O=Or(O^B,16),M=M+O|0,w=Or(w^M,12),B=B+w|0,O=Or(O^B,8),M=M+O|0,w=Or(w^M,7),z=z+D|0,O=Or(O^z,16),m=m+O|0,D=Or(D^m,12),z=z+D|0,O=Or(O^z,8),m=m+O|0,D=Or(D^m,7),V=V+_|0,R=Or(R^V,16),M=M+R|0,_=Or(_^M,12),V=V+_|0,R=Or(R^V,8),M=M+R|0,_=Or(_^M,7),G=G+w|0,C=Or(C^G,16),g=g+C|0,w=Or(w^g,12),G=G+w|0,C=Or(C^G,8),g=g+C|0,w=Or(w^g,7),B=B+W|0,v=Or(v^B,16),b=b+v|0,W=Or(W^b,12),B=B+W|0,v=Or(v^B,8),b=b+v|0,W=Or(W^b,7);let x=0;n[x++]=o+z|0,n[x++]=c+V|0,n[x++]=u+G|0,n[x++]=h+B|0,n[x++]=f+W|0,n[x++]=p+D|0,n[x++]=E+_|0,n[x++]=S+w|0,n[x++]=A+g|0,n[x++]=I+b|0,n[x++]=$+m|0,n[x++]=L+M|0,n[x++]=k+R|0,n[x++]=U+C|0,n[x++]=q+v|0,n[x++]=j+O|0}const Ire=vre(Are,{counterRight:!1,counterLength:4,allowShortKeys:!1}),xre=new Uint8Array(16),gN=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(xre.subarray(r))},Cre=new Uint8Array(32);function yN(t,e,r,n,i){const s=t(e,r,Cre),o=Sre.create(s);i&&gN(o,i),gN(o,n);const c=new Uint8Array(16),u=are(c);fN(u,0,BigInt(i?i.length:0),!0),fN(u,8,BigInt(n.length),!0),o.update(c);const h=o.digest();return np(s,c),h}const Tre=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=dN(o+16,s,!1),s.set(i);const c=s.subarray(0,-16);t(e,r,c,c,1);const u=yN(t,e,r,c,n);return s.set(u,o),np(u),s},decrypt(i,s){s=dN(i.length-16,s,!1);const o=i.subarray(0,-16),c=i.subarray(-16),u=yN(t,e,r,o,n);if(!hre(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),np(u),s}}),Mk=dre({blockSize:64,nonceLength:12,tagLength:16},Tre(Ire));let Nk=class extends $A{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,DA(e);const n=rp(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return tp(this),this.iHash.update(e),this}digestInto(e){tp(this),Dw(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const PA=(t,e,r)=>new Nk(t,e).update(r).digest();PA.create=(t,e)=>new Nk(t,e);function Mre(t,e,r){return DA(t),r===void 0&&(r=new Uint8Array(t.outputLen)),PA(t,rp(r),rp(e))}const r3=new Uint8Array([0]),mN=new Uint8Array;function Nre(t,e,r,n=32){if(DA(t),Vg(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=mN);const s=new Uint8Array(i*t.outputLen),o=PA.create(t,e),c=o._cloneInto(),u=new Uint8Array(o.outputLen);for(let h=0;h<i;h++)r3[0]=h+1,c.update(h===0?mN:u).update(r).update(r3).digestInto(u),s.set(u,t.outputLen*h),o._cloneInto(c);return o.destroy(),c.destroy(),u.fill(0),r3.fill(0),s.slice(0,n)}const Ore=(t,e,r,n,i)=>Nre(t,Mre(t,e,r),n,i);function Rre(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),c=Number(r&s),u=n?4:0,h=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+h,c,n)}function Dre(t,e,r){return t&e^~t&r}function $re(t,e,r){return t&e^t&r^e&r}let kre=class extends $A{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=e3(this.buffer)}update(e){tp(this);const{view:r,buffer:n,blockLen:i}=this;e=rp(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=e3(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tp(this),mk(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let p=o;p<i;p++)r[p]=0;Rre(n,i-8,BigInt(this.length*8),s),this.process(n,0);const c=e3(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=u/4,f=this.get();if(h>f.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)c.setUint32(4*p,f[p],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const Pre=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Hl=new Uint32Array(64);let Bre=class extends kre{constructor(){super(64,32,8,!1),this.A=Fl[0]|0,this.B=Fl[1]|0,this.C=Fl[2]|0,this.D=Fl[3]|0,this.E=Fl[4]|0,this.F=Fl[5]|0,this.G=Fl[6]|0,this.H=Fl[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:c,H:u}=this;return[e,r,n,i,s,o,c,u]}set(e,r,n,i,s,o,c,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,r){for(let p=0;p<16;p++,r+=4)Hl[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const E=Hl[p-15],S=Hl[p-2],A=Ga(E,7)^Ga(E,18)^E>>>3,I=Ga(S,17)^Ga(S,19)^S>>>10;Hl[p]=I+Hl[p-7]+A+Hl[p-16]|0}let{A:n,B:i,C:s,D:o,E:c,F:u,G:h,H:f}=this;for(let p=0;p<64;p++){const E=Ga(c,6)^Ga(c,11)^Ga(c,25),S=f+E+Dre(c,u,h)+Pre[p]+Hl[p]|0,A=(Ga(n,2)^Ga(n,13)^Ga(n,22))+$re(n,i,s)|0;f=h,h=u,u=c,c=o+S|0,o=s,s=i,i=n,n=S+A|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,i,s,o,c,u,h,f)}roundClean(){Hl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const $w=bk(()=>new Bre);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ok=BigInt(0);function BA(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Rk(t){if(!BA(t))throw new Error("Uint8Array expected")}const Lre=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ure(t){Rk(t);let e="";for(let r=0;r<t.length;r++)e+=Lre[t[r]];return e}function jre(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Ok:BigInt("0x"+t)}const Hc={_0:48,_9:57,A:65,F:70,a:97,f:102};function bN(t){if(t>=Hc._0&&t<=Hc._9)return t-Hc._0;if(t>=Hc.A&&t<=Hc.F)return t-(Hc.A-10);if(t>=Hc.a&&t<=Hc.f)return t-(Hc.a-10)}function Dk(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=bN(t.charCodeAt(s)),c=bN(t.charCodeAt(s+1));if(o===void 0||c===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+c}return n}function wN(t){return Rk(t),jre(Ure(Uint8Array.from(t).reverse()))}function zre(t,e){return Dk(t.toString(16).padStart(e*2,"0"))}function qre(t,e){return zre(t,e).reverse()}function vN(t,e,r){let n;if(typeof e=="string")try{n=Dk(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(BA(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const n3=t=>typeof t=="bigint"&&Ok<=t;function Fre(t,e,r){return n3(t)&&n3(e)&&n3(r)&&e<=t&&t<r}function EN(t,e,r,n){if(!Fre(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}const Hre={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||BA(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Wre(t,e,r={}){const n=(i,s,o)=>{const c=Hre[s];if(typeof c!="function")throw new Error("invalid validator function");const u=t[i];if(!(o&&u===void 0)&&!c(u,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Rf=BigInt(0),Mb=BigInt(1);function $k(t,e){const r=t%e;return r>=Rf?r:e+r}function Kre(t,e,r){if(e<Rf)throw new Error("invalid exponent, negatives unsupported");if(r<=Rf)throw new Error("invalid modulus");if(r===Mb)return Rf;let n=Mb;for(;e>Rf;)e&Mb&&(n=n*t%r),t=t*t%r,e>>=Mb;return n}function Ia(t,e,r){let n=t;for(;e-- >Rf;)n*=n,n%=r;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const jd=BigInt(0),i3=BigInt(1);function Vre(t){return Wre(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function Gre(t){const e=Vre(t),{P:r}=e,n=k=>$k(k,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,c=e.adjustScalarBytes||(k=>k),u=e.powPminus2||(k=>Kre(k,r-BigInt(2),r));function h(k,U,q){const j=n(k*(U-q));return U=n(U-j),q=n(q+j),[U,q]}const f=(e.a-BigInt(2))/BigInt(4);function p(k,U){EN("u",k,jd,r),EN("scalar",U,jd,r);const q=U,j=k;let z=i3,V=jd,G=k,B=i3,W=jd,D;for(let w=BigInt(i-1);w>=jd;w--){const g=q>>w&i3;W^=g,D=h(W,z,G),z=D[0],G=D[1],D=h(W,V,B),V=D[0],B=D[1],W=g;const b=z+V,m=n(b*b),M=z-V,R=n(M*M),C=m-R,v=G+B,O=G-B,x=n(O*b),N=n(v*M),H=x+N,Y=x-N;G=n(H*H),B=n(j*n(Y*Y)),z=n(m*R),V=n(C*(m+n(f*C)))}D=h(W,z,G),z=D[0],G=D[1],D=h(W,V,B),V=D[0],B=D[1];const _=u(V);return n(z*_)}function E(k){return qre(n(k),s)}function S(k){const U=vN("u coordinate",k,s);return o===32&&(U[31]&=127),wN(U)}function A(k){const U=vN("scalar",k),q=U.length;if(q!==s&&q!==o){let j=""+s+" or "+o;throw new Error("invalid scalar, expected "+j+" bytes, got "+q)}return wN(c(U))}function I(k,U){const q=S(U),j=A(k),z=p(q,j);if(z===jd)throw new Error("invalid private or public key received");return E(z)}const $=E(e.Gu);function L(k){return I(k,$)}return{scalarMult:I,scalarMultBase:L,getSharedSecret:(k,U)=>I(k,U),getPublicKey:k=>L(k),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:$}}const US=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Yre=BigInt(1),_N=BigInt(2),Zre=BigInt(3),Qre=BigInt(5);BigInt(8);function Xre(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=US,o=t*t%s*t%s,c=Ia(o,_N,s)*o%s,u=Ia(c,Yre,s)*t%s,h=Ia(u,Qre,s)*u%s,f=Ia(h,e,s)*h%s,p=Ia(f,r,s)*f%s,E=Ia(p,n,s)*p%s,S=Ia(E,i,s)*E%s,A=Ia(S,i,s)*E%s,I=Ia(A,e,s)*h%s;return{pow_p_5_8:Ia(I,_N,s)*t%s,b2:o}}function Jre(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const jS=Gre({P:US,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=US,{pow_p_5_8:r,b2:n}=Xre(t);return $k(Ia(r,Zre,e)*n,e)},adjustScalarBytes:Jre,randomBytes:jy}),kk="base10",xs="base16",su="base64pad",F0="base64url",zy="utf8",Pk=0,ol=1,qy=2,ene=0,SN=1,xg=12,LA=32;function tne(){const t=jS.utils.randomPrivateKey(),e=jS.getPublicKey(t);return{privateKey:Vr(t,xs),publicKey:Vr(e,xs)}}function zS(){const t=jy(LA);return Vr(t,xs)}function rne(t,e){const r=jS.getSharedSecret(Pn(t,xs),Pn(e,xs)),n=Ore($w,r,void 0,void 0,LA);return Vr(n,xs)}function d1(t){const e=$w(Pn(t,xs));return Vr(e,xs)}function tl(t){const e=$w(Pn(t,zy));return Vr(e,xs)}function Bk(t){return Pn(`${t}`,kk)}function Ah(t){return Number(Vr(t,kk))}function nne(t){const e=Bk(typeof t.type<"u"?t.type:Pk);if(Ah(e)===ol&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Pn(t.senderPublicKey,xs):void 0,n=typeof t.iv<"u"?Pn(t.iv,xs):jy(xg),i=Pn(t.symKey,xs),s=Mk(i,n).encrypt(Pn(t.message,zy));return Lk({type:e,sealed:s,iv:n,senderPublicKey:r,encoding:t.encoding})}function ine(t){const e=Pn(t.symKey,xs),{sealed:r,iv:n}=Yg(t),i=Mk(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return Vr(i,zy)}function sne(t,e){const r=Bk(qy),n=jy(xg),i=Pn(t,zy);return Lk({type:r,sealed:i,iv:n,encoding:e})}function one(t,e){const{sealed:r}=Yg({encoded:t,encoding:e});return Vr(r,zy)}function Lk(t){const{encoding:e=su}=t;if(Ah(t.type)===qy)return Vr(jf([t.type,t.sealed]),e);if(Ah(t.type)===ol){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Vr(jf([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Vr(jf([t.type,t.iv,t.sealed]),e)}function Yg(t){const{encoded:e,encoding:r=su}=t,n=Pn(e,r),i=n.slice(ene,SN),s=SN;if(Ah(i)===ol){const h=s+LA,f=h+xg,p=n.slice(s,h),E=n.slice(h,f),S=n.slice(f);return{type:i,sealed:S,iv:E,senderPublicKey:p}}if(Ah(i)===qy){const h=n.slice(s),f=jy(xg);return{type:i,sealed:h,iv:f}}const o=s+xg,c=n.slice(s,o),u=n.slice(o);return{type:i,sealed:u,iv:c}}function ane(t,e){const r=Yg({encoded:t,encoding:e==null?void 0:e.encoding});return Uk({type:Ah(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Vr(r.senderPublicKey,xs):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Uk(t){const e=(t==null?void 0:t.type)||Pk;if(e===ol){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function AN(t){return t.type===ol&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function IN(t){return t.type===qy}function cne(t){return new ok.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function lne(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function une(t){return Buffer.from(lne(t),"base64")}function hne(t,e){const[r,n,i]=t.split("."),s=une(i);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),c=s.slice(32,64).toString("hex"),u=`${r}.${n}`,h=$w(u),f=cne(e),p=Vr(h,xs);if(!f.verify(p,{r:o,s:c}))throw new Error("Invalid signature");return ep(t).payload}const dne="irn";function H1(t){return(t==null?void 0:t.relay)||{protocol:dne}}function hg(t){const e=ak[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function fne(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function xN(t){if(!t.includes("wc:")){const h=yk(t);h!=null&&h.includes("wc:")&&(t=h)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),c={};o.forEach((h,f)=>{c[f]=h});const u=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:n,topic:pne(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:fne(c),methods:u,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function pne(t){return t.startsWith("//")?t.substring(2):t}function gne(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function CN(t){const e=new URLSearchParams,r=gne(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Nb(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function _p(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function yne(t){const e=[];return Object.values(t).forEach(r=>{e.push(..._p(r.accounts))}),e}function mne(t,e){const r=[];return Object.values(t).forEach(n=>{_p(n.accounts).includes(e)&&r.push(...n.methods)}),r}function bne(t,e){const r=[];return Object.values(t).forEach(n=>{_p(n.accounts).includes(e)&&r.push(...n.events)}),r}function UA(t){return t.includes(":")}function dg(t){return UA(t)?t.split(":")[0]:t}function wne(t){const e={};return t==null||t.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function TN(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=wne(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=u1(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const vne={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ene={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Qe(t,e){const{message:r,code:n}=Ene[t];return{message:e?`${r} ${e}`:r,code:n}}function un(t,e){const{message:r,code:n}=vne[t];return{message:e?`${r} ${e}`:r,code:n}}function Ih(t,e){return!!Array.isArray(t)}function Zg(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Ls(t){return typeof t>"u"}function ii(t,e){return e&&Ls(t)?!0:typeof t=="string"&&!!t.trim().length}function jA(t,e){return e&&Ls(t)?!0:typeof t=="number"&&!isNaN(t)}function _ne(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return dh(i,n)?(n.forEach(o=>{const{accounts:c,methods:u,events:h}=t.namespaces[o],f=_p(c),p=r[o];(!dh(lk(o,p),f)||!dh(p.methods,u)||!dh(p.events,h))&&(s=!1)}),s):!1}function W1(t){return ii(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Sne(t){if(ii(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&W1(r)}}return!1}function Ane(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(ii(t,!1)){if(e(t))return!0;const r=yk(t);return e(r)}}catch{}return!1}function Ine(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function xne(t){return t==null?void 0:t.topic}function Cne(t,e){let r=null;return ii(t==null?void 0:t.publicKey,!1)||(r=Qe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function MN(t){let e=!0;return Ih(t)?t.length&&(e=t.every(r=>ii(r,!1))):e=!1,e}function Tne(t,e,r){let n=null;return Ih(e)&&e.length?e.forEach(i=>{n||W1(i)||(n=un("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):W1(t)||(n=un("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Mne(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=Tne(i,lk(i,s),`${e} ${r}`);o&&(n=o)}),n}function Nne(t,e){let r=null;return Ih(t)?t.forEach(n=>{r||Sne(n)||(r=un("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=un("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function One(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Nne(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function Rne(t,e){let r=null;return MN(t==null?void 0:t.methods)?MN(t==null?void 0:t.events)||(r=un("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=un("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function jk(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Rne(n,`${e}, namespace`);i&&(r=i)}),r}function Dne(t,e,r){let n=null;if(t&&Zg(t)){const i=jk(t,e);i&&(n=i);const s=Mne(t,e,r);s&&(n=s)}else n=Qe("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function s3(t,e){let r=null;if(t&&Zg(t)){const n=jk(t,e);n&&(r=n);const i=One(t,e);i&&(r=i)}else r=Qe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function zk(t){return ii(t.protocol,!0)}function $ne(t,e){let r=!1;return t?t&&Ih(t)&&t.length&&t.forEach(n=>{r=zk(n)}):r=!0,r}function kne(t){return typeof t=="number"}function io(t){return typeof t<"u"&&typeof t!==null}function Pne(t){return!(!t||typeof t!="object"||!t.code||!jA(t.code,!1)||!t.message||!ii(t.message,!1))}function Bne(t){return!(Ls(t)||!ii(t.method,!1))}function Lne(t){return!(Ls(t)||Ls(t.result)&&Ls(t.error)||!jA(t.id,!1)||!ii(t.jsonrpc,!1))}function Une(t){return!(Ls(t)||!ii(t.name,!1))}function NN(t,e){return!(!W1(e)||!yne(t).includes(e))}function jne(t,e,r){return ii(r,!1)?mne(t,e).includes(r):!1}function zne(t,e,r){return ii(r,!1)?bne(t,e).includes(r):!1}function ON(t,e,r){let n=null;const i=qne(t),s=Fne(e),o=Object.keys(i),c=Object.keys(s),u=RN(Object.keys(t)),h=RN(Object.keys(e)),f=u.filter(p=>!h.includes(p));return f.length&&(n=Qe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(e).toString()}`)),dh(o,c)||(n=Qe("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${c.toString()}`)),Object.keys(e).forEach(p=>{if(!p.includes(":")||n)return;const E=_p(e[p].accounts);E.includes(p)||(n=Qe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${p}
        Required: ${p}
        Approved: ${E.toString()}`))}),o.forEach(p=>{n||(dh(i[p].methods,s[p].methods)?dh(i[p].events,s[p].events)||(n=Qe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${p}`)):n=Qe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${p}`))}),n}function qne(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function RN(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Fne(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=_p(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function Hne(t,e){return jA(t,!1)&&t<=e.max&&t>=e.min}function DN(){const t=Uy();return new Promise(e=>{switch(t){case ko.browser:e(Wne());break;case ko.reactNative:e(Kne());break;case ko.node:e(Vne());break;default:e(!0)}})}function Wne(){return Ly()&&(navigator==null?void 0:navigator.onLine)}async function Kne(){if(mu()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Vne(){return!0}function Gne(t){switch(Uy()){case ko.browser:Yne(t);break;case ko.reactNative:Zne(t);break}}function Yne(t){!mu()&&Ly()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Zne(t){mu()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const o3={};let H0=class{static get(e){return o3[e]}static set(e,r){o3[e]=r}static delete(e){delete o3[e]}};const Qne="PARSE_ERROR",Xne="INVALID_REQUEST",Jne="METHOD_NOT_FOUND",eie="INVALID_PARAMS",qk="INTERNAL_ERROR",zA="SERVER_ERROR",tie=[-32700,-32600,-32601,-32602,-32603],Cg={[Qne]:{code:-32700,message:"Parse error"},[Xne]:{code:-32600,message:"Invalid Request"},[Jne]:{code:-32601,message:"Method not found"},[eie]:{code:-32602,message:"Invalid params"},[qk]:{code:-32603,message:"Internal error"},[zA]:{code:-32e3,message:"Server error"}},Fk=zA;function rie(t){return tie.includes(t)}function $N(t){return Object.keys(Cg).includes(t)?Cg[t]:Cg[Fk]}function nie(t){const e=Object.values(Cg).find(r=>r.code===t);return e||Cg[Fk]}function Hk(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var a3={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qS=function(t,e){return qS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},qS(t,e)};function iie(t,e){qS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var FS=function(){return FS=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},FS.apply(this,arguments)};function sie(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function oie(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function aie(t,e){return function(r,n){e(r,n,t)}}function cie(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function lie(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function c(f){try{h(n.next(f))}catch(p){o(p)}}function u(f){try{h(n.throw(f))}catch(p){o(p)}}function h(f){f.done?s(f.value):i(f.value).then(c,u)}h((n=n.apply(t,e||[])).next())})}function uie(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(f){return u([h,f])}}function u(h){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,i=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){r.label=h[1];break}if(h[0]===6&&r.label<s[1]){r.label=s[1],s=h;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(h);break}s[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(f){h=[6,f],i=0}finally{n=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function hie(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function die(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function HS(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wk(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function fie(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Wk(arguments[e]));return t}function pie(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,c=s.length;o<c;o++,i++)n[i]=s[o];return n}function Qg(t){return this instanceof Qg?(this.v=t,this):new Qg(t)}function gie(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(E){n[E]&&(i[E]=function(S){return new Promise(function(A,I){s.push([E,S,A,I])>1||c(E,S)})})}function c(E,S){try{u(n[E](S))}catch(A){p(s[0][3],A)}}function u(E){E.value instanceof Qg?Promise.resolve(E.value.v).then(h,f):p(s[0][2],E)}function h(E){c("next",E)}function f(E){c("throw",E)}function p(E,S){E(S),s.shift(),s.length&&c(s[0][0],s[0][1])}}function yie(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Qg(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function mie(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof HS=="function"?HS(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(c,u){o=t[s](o),i(c,u,o.done,o.value)})}}function i(s,o,c,u){Promise.resolve(u).then(function(h){s({value:h,done:c})},o)}}function bie(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function wie(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function vie(t){return t&&t.__esModule?t:{default:t}}function Eie(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function _ie(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const Sie=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return FS},__asyncDelegator:yie,__asyncGenerator:gie,__asyncValues:mie,__await:Qg,__awaiter:lie,__classPrivateFieldGet:Eie,__classPrivateFieldSet:_ie,__createBinding:hie,__decorate:oie,__exportStar:die,__extends:iie,__generator:uie,__importDefault:vie,__importStar:wie,__makeTemplateObject:bie,__metadata:cie,__param:aie,__read:Wk,__rest:sie,__spread:fie,__spreadArrays:pie,__values:HS},Symbol.toStringTag,{value:"Module"})),Aie=Dh(Sie);var Wc={},kN;function Iie(){if(kN)return Wc;kN=1,Object.defineProperty(Wc,"__esModule",{value:!0}),Wc.isBrowserCryptoAvailable=Wc.getSubtleCrypto=Wc.getBrowerCrypto=void 0;function t(){return(lo==null?void 0:lo.crypto)||(lo==null?void 0:lo.msCrypto)||{}}Wc.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Wc.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Wc.isBrowserCryptoAvailable=r,Wc}var Kc={},PN;function xie(){if(PN)return Kc;PN=1,Object.defineProperty(Kc,"__esModule",{value:!0}),Kc.isBrowser=Kc.isNode=Kc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Kc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Kc.isNode=e;function r(){return!t()&&!e()}return Kc.isBrowser=r,Kc}var BN;function Cie(){return BN||(BN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Aie;e.__exportStar(Iie(),t),e.__exportStar(xie(),t)}(a3)),a3}var Tie=Cie();function Li(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function Po(t=6){return BigInt(Li(t))}function Us(t,e,r){return{id:r||Li(),jsonrpc:"2.0",method:t,params:e}}function bu(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Sp(t,e,r){return{id:t,jsonrpc:"2.0",error:Mie(e)}}function Mie(t,e){return typeof t>"u"?$N(qk):(typeof t=="string"&&(t=Object.assign(Object.assign({},$N(zA)),{message:t})),rie(t.code)&&(t=nie(t.code)),t)}let Nie=class{},Oie=class extends Nie{constructor(){super()}},Rie=class extends Oie{constructor(e){super()}};const Die="^https?:",$ie="^wss?:";function kie(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Kk(t,e){const r=kie(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function LN(t){return Kk(t,Die)}function UN(t){return Kk(t,$ie)}function Pie(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Vk(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Ap(t){return Vk(t)&&"method"in t}function zh(t){return Vk(t)&&(Si(t)||Yn(t))}function Si(t){return"result"in t}function Yn(t){return"error"in t}let Bn=class extends Rie{constructor(e){super(e),this.events=new Ii.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Us(e.method,e.params||[],e.id||Po().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Yn(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),zh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Bie=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Lie=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",jN=t=>t.split("?")[0],zN=10,Uie=Bie();let Gk=class{constructor(e){if(this.url=e,this.events=new Ii.EventEmitter,this.registering=!1,!UN(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(fc(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!UN(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Tie.isReactNative()?void 0:{rejectUnauthorized:!Pie(e)},s=new Uie(e,[],i);Lie()?s.onerror=o=>{const c=o;n(this.emitError(c.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?ll(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Sp(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Hk(e,jN(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>zN&&this.events.setMaxListeners(zN)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${jN(this.url)}`));return this.events.emit("register_error",r),r}};var fg={exports:{}};fg.exports;var qN;function jie(){return qN||(qN=1,function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,c="[object Arguments]",u="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",p="[object Date]",E="[object Error]",S="[object Function]",A="[object GeneratorFunction]",I="[object Map]",$="[object Number]",L="[object Null]",k="[object Object]",U="[object Promise]",q="[object Proxy]",j="[object RegExp]",z="[object Set]",V="[object String]",G="[object Symbol]",B="[object Undefined]",W="[object WeakMap]",D="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",g="[object Float64Array]",b="[object Int8Array]",m="[object Int16Array]",M="[object Int32Array]",R="[object Uint8Array]",C="[object Uint8ClampedArray]",v="[object Uint16Array]",O="[object Uint32Array]",x=/[\\^$.*+?()[\]{}|]/g,N=/^\[object .+?Constructor\]$/,H=/^(?:0|[1-9]\d*)$/,Y={};Y[w]=Y[g]=Y[b]=Y[m]=Y[M]=Y[R]=Y[C]=Y[v]=Y[O]=!0,Y[c]=Y[u]=Y[D]=Y[f]=Y[_]=Y[p]=Y[E]=Y[S]=Y[I]=Y[$]=Y[k]=Y[j]=Y[z]=Y[V]=Y[W]=!1;var Q=typeof lo=="object"&&lo&&lo.Object===Object&&lo,ee=typeof self=="object"&&self&&self.Object===Object&&self,re=Q||ee||Function("return this")(),oe=e&&!e.nodeType&&e,be=oe&&!0&&t&&!t.nodeType&&t,Ce=be&&be.exports===oe,Se=Ce&&Q.process,xe=function(){try{return Se&&Se.binding&&Se.binding("util")}catch{}}(),ze=xe&&xe.isTypedArray;function Be(ne,he){for(var Re=-1,ut=ne==null?0:ne.length,jr=0,Qt=[];++Re<ut;){var wn=ne[Re];he(wn,Re,ne)&&(Qt[jr++]=wn)}return Qt}function tt(ne,he){for(var Re=-1,ut=he.length,jr=ne.length;++Re<ut;)ne[jr+Re]=he[Re];return ne}function He(ne,he){for(var Re=-1,ut=ne==null?0:ne.length;++Re<ut;)if(he(ne[Re],Re,ne))return!0;return!1}function Je(ne,he){for(var Re=-1,ut=Array(ne);++Re<ne;)ut[Re]=he(Re);return ut}function vt(ne){return function(he){return ne(he)}}function yt(ne,he){return ne.has(he)}function et(ne,he){return ne==null?void 0:ne[he]}function ht(ne){var he=-1,Re=Array(ne.size);return ne.forEach(function(ut,jr){Re[++he]=[jr,ut]}),Re}function Mt(ne,he){return function(Re){return ne(he(Re))}}function dt(ne){var he=-1,Re=Array(ne.size);return ne.forEach(function(ut){Re[++he]=ut}),Re}var Ee=Array.prototype,Te=Function.prototype,Z=Object.prototype,F=re["__core-js_shared__"],K=Te.toString,J=Z.hasOwnProperty,ie=function(){var ne=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),ce=Z.toString,de=RegExp("^"+K.call(J).replace(x,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=Ce?re.Buffer:void 0,Ye=re.Symbol,Fe=re.Uint8Array,We=Z.propertyIsEnumerable,at=Ee.splice,ft=Ye?Ye.toStringTag:void 0,Ut=Object.getOwnPropertySymbols,Kt=$e?$e.isBuffer:void 0,pt=Mt(Object.keys,Object),Ft=wr(re,"DataView"),Vt=wr(re,"Map"),gt=wr(re,"Promise"),Et=wr(re,"Set"),Rt=wr(re,"WeakMap"),rt=wr(Object,"create"),Nt=Ks(Ft),St=Ks(Vt),it=Ks(gt),Ct=Ks(Et),Dt=Ks(Rt),bt=Ye?Ye.prototype:void 0,tr=bt?bt.valueOf:void 0;function Yt(ne){var he=-1,Re=ne==null?0:ne.length;for(this.clear();++he<Re;){var ut=ne[he];this.set(ut[0],ut[1])}}function It(){this.__data__=rt?rt(null):{},this.size=0}function Xt(ne){var he=this.has(ne)&&delete this.__data__[ne];return this.size-=he?1:0,he}function ar(ne){var he=this.__data__;if(rt){var Re=he[ne];return Re===n?void 0:Re}return J.call(he,ne)?he[ne]:void 0}function xt(ne){var he=this.__data__;return rt?he[ne]!==void 0:J.call(he,ne)}function fr(ne,he){var Re=this.__data__;return this.size+=this.has(ne)?0:1,Re[ne]=rt&&he===void 0?n:he,this}Yt.prototype.clear=It,Yt.prototype.delete=Xt,Yt.prototype.get=ar,Yt.prototype.has=xt,Yt.prototype.set=fr;function Zt(ne){var he=-1,Re=ne==null?0:ne.length;for(this.clear();++he<Re;){var ut=ne[he];this.set(ut[0],ut[1])}}function pr(){this.__data__=[],this.size=0}function Mr(ne){var he=this.__data__,Re=$a(he,ne);if(Re<0)return!1;var ut=he.length-1;return Re==ut?he.pop():at.call(he,Re,1),--this.size,!0}function Hi(ne){var he=this.__data__,Re=$a(he,ne);return Re<0?void 0:he[Re][1]}function us(ne){return $a(this.__data__,ne)>-1}function oi(ne,he){var Re=this.__data__,ut=$a(Re,ne);return ut<0?(++this.size,Re.push([ne,he])):Re[ut][1]=he,this}Zt.prototype.clear=pr,Zt.prototype.delete=Mr,Zt.prototype.get=Hi,Zt.prototype.has=us,Zt.prototype.set=oi;function Mn(ne){var he=-1,Re=ne==null?0:ne.length;for(this.clear();++he<Re;){var ut=ne[he];this.set(ut[0],ut[1])}}function qs(){this.size=0,this.__data__={hash:new Yt,map:new(Vt||Zt),string:new Yt}}function Ts(ne){var he=Ur(this,ne).delete(ne);return this.size-=he?1:0,he}function Fs(ne){return Ur(this,ne).get(ne)}function go(ne){return Ur(this,ne).has(ne)}function gi(ne,he){var Re=Ur(this,ne),ut=Re.size;return Re.set(ne,he),this.size+=Re.size==ut?0:1,this}Mn.prototype.clear=qs,Mn.prototype.delete=Ts,Mn.prototype.get=Fs,Mn.prototype.has=go,Mn.prototype.set=gi;function ai(ne){var he=-1,Re=ne==null?0:ne.length;for(this.__data__=new Mn;++he<Re;)this.add(ne[he])}function Qn(ne){return this.__data__.set(ne,n),this}function Ms(ne){return this.__data__.has(ne)}ai.prototype.add=ai.prototype.push=Qn,ai.prototype.has=Ms;function Xn(ne){var he=this.__data__=new Zt(ne);this.size=he.size}function xi(){this.__data__=new Zt,this.size=0}function Ns(ne){var he=this.__data__,Re=he.delete(ne);return this.size=he.size,Re}function Os(ne){return this.__data__.get(ne)}function vc(ne){return this.__data__.has(ne)}function Da(ne,he){var Re=this.__data__;if(Re instanceof Zt){var ut=Re.__data__;if(!Vt||ut.length<r-1)return ut.push([ne,he]),this.size=++Re.size,this;Re=this.__data__=new Mn(ut)}return Re.set(ne,he),this.size=Re.size,this}Xn.prototype.clear=xi,Xn.prototype.delete=Ns,Xn.prototype.get=Os,Xn.prototype.has=vc,Xn.prototype.set=Da;function hs(ne,he){var Re=dl(ne),ut=!Re&&em(ne),jr=!Re&&!ut&&Sc(ne),Qt=!Re&&!ut&&!jr&&Eu(ne),wn=Re||ut||jr||Qt,Wn=wn?Je(ne.length,String):[],Ln=Wn.length;for(var nn in ne)J.call(ne,nn)&&!(wn&&(nn=="length"||jr&&(nn=="offset"||nn=="parent")||Qt&&(nn=="buffer"||nn=="byteLength"||nn=="byteOffset")||Np(nn,Ln)))&&Wn.push(nn);return Wn}function $a(ne,he){for(var Re=ne.length;Re--;)if(_c(ne[Re][0],he))return Re;return-1}function Mp(ne,he,Re){var ut=he(ne);return dl(ne)?ut:tt(ut,Re(ne))}function Hs(ne){return ne==null?ne===void 0?B:L:ft&&ft in Object(ne)?Rs(ne):Rp(ne)}function vu(ne){return Ac(ne)&&Hs(ne)==c}function Ec(ne,he,Re,ut,jr){return ne===he?!0:ne==null||he==null||!Ac(ne)&&!Ac(he)?ne!==ne&&he!==he:lt(ne,he,Re,ut,Ec,jr)}function lt(ne,he,Re,ut,jr,Qt){var wn=dl(ne),Wn=dl(he),Ln=wn?u:Ws(ne),nn=Wn?u:Ws(he);Ln=Ln==c?k:Ln,nn=nn==c?k:nn;var ds=Ln==k,yo=nn==k,Ci=Ln==nn;if(Ci&&Sc(ne)){if(!Sc(he))return!1;wn=!0,ds=!1}if(Ci&&!ds)return Qt||(Qt=new Xn),wn||Eu(ne)?Pe(ne,he,Re,ut,jr,Qt):ke(ne,he,Ln,Re,ut,jr,Qt);if(!(Re&i)){var Vs=ds&&J.call(ne,"__wrapped__"),fs=yo&&J.call(he,"__wrapped__");if(Vs||fs){var Pa=Vs?ne.value():ne,ha=fs?he.value():he;return Qt||(Qt=new Xn),jr(Pa,ha,Re,ut,Qt)}}return Ci?(Qt||(Qt=new Xn),mt(ne,he,Re,ut,jr,Qt)):!1}function Oe(ne){if(!ua(ne)||Zh(ne))return!1;var he=Qh(ne)?de:N;return he.test(Ks(ne))}function pe(ne){return Ac(ne)&&fl(ne.length)&&!!Y[Hs(ne)]}function fe(ne){if(!Op(ne))return pt(ne);var he=[];for(var Re in Object(ne))J.call(ne,Re)&&Re!="constructor"&&he.push(Re);return he}function Pe(ne,he,Re,ut,jr,Qt){var wn=Re&i,Wn=ne.length,Ln=he.length;if(Wn!=Ln&&!(wn&&Ln>Wn))return!1;var nn=Qt.get(ne);if(nn&&Qt.get(he))return nn==he;var ds=-1,yo=!0,Ci=Re&s?new ai:void 0;for(Qt.set(ne,he),Qt.set(he,ne);++ds<Wn;){var Vs=ne[ds],fs=he[ds];if(ut)var Pa=wn?ut(fs,Vs,ds,he,ne,Qt):ut(Vs,fs,ds,ne,he,Qt);if(Pa!==void 0){if(Pa)continue;yo=!1;break}if(Ci){if(!He(he,function(ha,Ic){if(!yt(Ci,Ic)&&(Vs===ha||jr(Vs,ha,Re,ut,Qt)))return Ci.push(Ic)})){yo=!1;break}}else if(!(Vs===fs||jr(Vs,fs,Re,ut,Qt))){yo=!1;break}}return Qt.delete(ne),Qt.delete(he),yo}function ke(ne,he,Re,ut,jr,Qt,wn){switch(Re){case _:if(ne.byteLength!=he.byteLength||ne.byteOffset!=he.byteOffset)return!1;ne=ne.buffer,he=he.buffer;case D:return!(ne.byteLength!=he.byteLength||!Qt(new Fe(ne),new Fe(he)));case f:case p:case $:return _c(+ne,+he);case E:return ne.name==he.name&&ne.message==he.message;case j:case V:return ne==he+"";case I:var Wn=ht;case z:var Ln=ut&i;if(Wn||(Wn=dt),ne.size!=he.size&&!Ln)return!1;var nn=wn.get(ne);if(nn)return nn==he;ut|=s,wn.set(ne,he);var ds=Pe(Wn(ne),Wn(he),ut,jr,Qt,wn);return wn.delete(ne),ds;case G:if(tr)return tr.call(ne)==tr.call(he)}return!1}function mt(ne,he,Re,ut,jr,Qt){var wn=Re&i,Wn=$t(ne),Ln=Wn.length,nn=$t(he),ds=nn.length;if(Ln!=ds&&!wn)return!1;for(var yo=Ln;yo--;){var Ci=Wn[yo];if(!(wn?Ci in he:J.call(he,Ci)))return!1}var Vs=Qt.get(ne);if(Vs&&Qt.get(he))return Vs==he;var fs=!0;Qt.set(ne,he),Qt.set(he,ne);for(var Pa=wn;++yo<Ln;){Ci=Wn[yo];var ha=ne[Ci],Ic=he[Ci];if(ut)var nm=wn?ut(Ic,ha,Ci,he,ne,Qt):ut(ha,Ic,Ci,ne,he,Qt);if(!(nm===void 0?ha===Ic||jr(ha,Ic,Re,ut,Qt):nm)){fs=!1;break}Pa||(Pa=Ci=="constructor")}if(fs&&!Pa){var ed=ne.constructor,_u=he.constructor;ed!=_u&&"constructor"in ne&&"constructor"in he&&!(typeof ed=="function"&&ed instanceof ed&&typeof _u=="function"&&_u instanceof _u)&&(fs=!1)}return Qt.delete(ne),Qt.delete(he),fs}function $t(ne){return Mp(ne,rm,ka)}function Ur(ne,he){var Re=ne.__data__;return Qw(he)?Re[typeof he=="string"?"string":"hash"]:Re.map}function wr(ne,he){var Re=et(ne,he);return Oe(Re)?Re:void 0}function Rs(ne){var he=J.call(ne,ft),Re=ne[ft];try{ne[ft]=void 0;var ut=!0}catch{}var jr=ce.call(ne);return ut&&(he?ne[ft]=Re:delete ne[ft]),jr}var ka=Ut?function(ne){return ne==null?[]:(ne=Object(ne),Be(Ut(ne),function(he){return We.call(ne,he)}))}:Xh,Ws=Hs;(Ft&&Ws(new Ft(new ArrayBuffer(1)))!=_||Vt&&Ws(new Vt)!=I||gt&&Ws(gt.resolve())!=U||Et&&Ws(new Et)!=z||Rt&&Ws(new Rt)!=W)&&(Ws=function(ne){var he=Hs(ne),Re=he==k?ne.constructor:void 0,ut=Re?Ks(Re):"";if(ut)switch(ut){case Nt:return _;case St:return I;case it:return U;case Ct:return z;case Dt:return W}return he});function Np(ne,he){return he=he??o,!!he&&(typeof ne=="number"||H.test(ne))&&ne>-1&&ne%1==0&&ne<he}function Qw(ne){var he=typeof ne;return he=="string"||he=="number"||he=="symbol"||he=="boolean"?ne!=="__proto__":ne===null}function Zh(ne){return!!ie&&ie in ne}function Op(ne){var he=ne&&ne.constructor,Re=typeof he=="function"&&he.prototype||Z;return ne===Re}function Rp(ne){return ce.call(ne)}function Ks(ne){if(ne!=null){try{return K.call(ne)}catch{}try{return ne+""}catch{}}return""}function _c(ne,he){return ne===he||ne!==ne&&he!==he}var em=vu(function(){return arguments}())?vu:function(ne){return Ac(ne)&&J.call(ne,"callee")&&!We.call(ne,"callee")},dl=Array.isArray;function tm(ne){return ne!=null&&fl(ne.length)&&!Qh(ne)}var Sc=Kt||Jh;function la(ne,he){return Ec(ne,he)}function Qh(ne){if(!ua(ne))return!1;var he=Hs(ne);return he==S||he==A||he==h||he==q}function fl(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function ua(ne){var he=typeof ne;return ne!=null&&(he=="object"||he=="function")}function Ac(ne){return ne!=null&&typeof ne=="object"}var Eu=ze?vt(ze):pe;function rm(ne){return tm(ne)?hs(ne):fe(ne)}function Xh(){return[]}function Jh(){return!1}t.exports=la}(fg,fg.exports)),fg.exports}var zie=jie();const qie=yc(zie),Yk="wc",Zk=2,WS="core",pc=`${Yk}@2:${WS}:`,Fie={logger:"error"},Hie={database:":memory:"},Wie="crypto",FN="client_ed25519_seed",Kie=ye.ONE_DAY,Vie="keychain",Gie="0.3",Yie="messages",Zie="0.3",HN=ye.SIX_HOURS,Qie="publisher",Qk="irn",Xie="error",Xk="wss://relay.walletconnect.org",Jie="relayer",Ui={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ese="_subscription",Qo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},tse=.1,KS="2.19.0",Rn={link_mode:"link_mode",relay:"relay"},rse="0.3",nse="WALLETCONNECT_CLIENT_ID",WN="WALLETCONNECT_LINK_MODE_APPS",To={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ise="subscription",sse="0.3",ose=ye.FIVE_SECONDS*1e3,ase="pairing",cse="0.3",W0={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},rh={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ba={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},lse="history",use="0.3",hse="expirer",ra={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},dse="0.3",fse="verify-api",pse="https://verify.walletconnect.com",Jk="https://verify.walletconnect.org",Tg=Jk,gse=`${Tg}/v3`,yse=[pse,Jk],mse="echo",bse="https://echo.walletconnect.com",nc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Xc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},wa={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Wu={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Ku={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},K0={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},wse=.1,vse="event-client",Ese=86400,_se="https://pulse.walletconnect.org/batch";function Sse(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var c=t.length,u=t.charAt(0),h=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function p(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var I=0,$=0,L=0,k=A.length;L!==k&&A[L]===0;)L++,I++;for(var U=(k-L)*f+1>>>0,q=new Uint8Array(U);L!==k;){for(var j=A[L],z=0,V=U-1;(j!==0||z<$)&&V!==-1;V--,z++)j+=256*q[V]>>>0,q[V]=j%c>>>0,j=j/c>>>0;if(j!==0)throw new Error("Non-zero carry");$=z,L++}for(var G=U-$;G!==U&&q[G]===0;)G++;for(var B=u.repeat(I);G<U;++G)B+=t.charAt(q[G]);return B}function E(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var I=0;if(A[I]!==" "){for(var $=0,L=0;A[I]===u;)$++,I++;for(var k=(A.length-I)*h+1>>>0,U=new Uint8Array(k);A[I];){var q=r[A.charCodeAt(I)];if(q===255)return;for(var j=0,z=k-1;(q!==0||j<L)&&z!==-1;z--,j++)q+=c*U[z]>>>0,U[z]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");L=j,I++}if(A[I]!==" "){for(var V=k-L;V!==k&&U[V]===0;)V++;for(var G=new Uint8Array($+(k-V)),B=$;V!==k;)G[B++]=U[V++];return G}}}function S(A){var I=E(A);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:E,decode:S}}var Ase=Sse,Ise=Ase;const eP=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},xse=t=>new TextEncoder().encode(t),Cse=t=>new TextDecoder().decode(t);let Tse=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Mse=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return tP(this,e)}},Nse=class{constructor(e){this.decoders=e}or(e){return tP(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const tP=(t,e)=>new Nse({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Ose=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Tse(e,r,n),this.decoder=new Mse(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const kw=({name:t,prefix:e,encode:r,decode:n})=>new Ose(t,e,r,n),Fy=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=Ise(r,e);return kw({prefix:t,name:e,encode:n,decode:s=>eP(i(s))})},Rse=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let c=0,u=0,h=0;for(let f=0;f<s;++f){const p=i[t[f]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|p,c+=r,c>=8&&(c-=8,o[h++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},Dse=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&c>>o];if(o&&(s+=e[i&c<<r-o]),n)for(;s.length*r&7;)s+="=";return s},cs=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>kw({prefix:e,name:t,encode(i){return Dse(i,n,r)},decode(i){return Rse(i,n,r,t)}}),$se=kw({prefix:"\0",name:"identity",encode:t=>Cse(t),decode:t=>xse(t)});var kse=Object.freeze({__proto__:null,identity:$se});const Pse=cs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Bse=Object.freeze({__proto__:null,base2:Pse});const Lse=cs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Use=Object.freeze({__proto__:null,base8:Lse});const jse=Fy({prefix:"9",name:"base10",alphabet:"0123456789"});var zse=Object.freeze({__proto__:null,base10:jse});const qse=cs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Fse=cs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Hse=Object.freeze({__proto__:null,base16:qse,base16upper:Fse});const Wse=cs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Kse=cs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Vse=cs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gse=cs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Yse=cs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Zse=cs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qse=cs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Xse=cs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jse=cs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var eoe=Object.freeze({__proto__:null,base32:Wse,base32upper:Kse,base32pad:Vse,base32padupper:Gse,base32hex:Yse,base32hexupper:Zse,base32hexpad:Qse,base32hexpadupper:Xse,base32z:Jse});const toe=Fy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),roe=Fy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var noe=Object.freeze({__proto__:null,base36:toe,base36upper:roe});const ioe=Fy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),soe=Fy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ooe=Object.freeze({__proto__:null,base58btc:ioe,base58flickr:soe});const aoe=cs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),coe=cs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),loe=cs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),uoe=cs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var hoe=Object.freeze({__proto__:null,base64:aoe,base64pad:coe,base64url:loe,base64urlpad:uoe});const rP=Array.from(""),doe=rP.reduce((t,e,r)=>(t[r]=e,t),[]),foe=rP.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function poe(t){return t.reduce((e,r)=>(e+=doe[r],e),"")}function goe(t){const e=[];for(const r of t){const n=foe[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const yoe=kw({prefix:"",name:"base256emoji",encode:poe,decode:goe});var moe=Object.freeze({__proto__:null,base256emoji:yoe}),boe=nP,KN=128,woe=-128,voe=Math.pow(2,31);function nP(t,e,r){e=e||[],r=r||0;for(var n=r;t>=voe;)e[r++]=t&255|KN,t/=128;for(;t&woe;)e[r++]=t&255|KN,t>>>=7;return e[r]=t|0,nP.bytes=r-n+1,e}var Eoe=VS,_oe=128,VN=127;function VS(t,n){var r=0,n=n||0,i=0,s=n,o,c=t.length;do{if(s>=c)throw VS.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&VN)<<i:(o&VN)*Math.pow(2,i),i+=7}while(o>=_oe);return VS.bytes=s-n,r}var Soe=Math.pow(2,7),Aoe=Math.pow(2,14),Ioe=Math.pow(2,21),xoe=Math.pow(2,28),Coe=Math.pow(2,35),Toe=Math.pow(2,42),Moe=Math.pow(2,49),Noe=Math.pow(2,56),Ooe=Math.pow(2,63),Roe=function(t){return t<Soe?1:t<Aoe?2:t<Ioe?3:t<xoe?4:t<Coe?5:t<Toe?6:t<Moe?7:t<Noe?8:t<Ooe?9:10},Doe={encode:boe,decode:Eoe,encodingLength:Roe},iP=Doe;const GN=(t,e,r=0)=>(iP.encode(t,e,r),e),YN=t=>iP.encodingLength(t),GS=(t,e)=>{const r=e.byteLength,n=YN(t),i=n+YN(r),s=new Uint8Array(i+r);return GN(t,s,0),GN(r,s,n),s.set(e,i),new $oe(t,r,e,s)};let $oe=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const sP=({name:t,code:e,encode:r})=>new koe(t,e,r);let koe=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?GS(this.code,r):r.then(n=>GS(this.code,n))}else throw Error("Unknown type, must be binary type")}};const oP=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Poe=sP({name:"sha2-256",code:18,encode:oP("SHA-256")}),Boe=sP({name:"sha2-512",code:19,encode:oP("SHA-512")});var Loe=Object.freeze({__proto__:null,sha256:Poe,sha512:Boe});const aP=0,Uoe="identity",cP=eP,joe=t=>GS(aP,cP(t)),zoe={code:aP,name:Uoe,encode:cP,digest:joe};var qoe=Object.freeze({__proto__:null,identity:zoe});new TextEncoder,new TextDecoder;const ZN={...kse,...Bse,...Use,...zse,...Hse,...eoe,...noe,...ooe,...hoe,...moe};({...Loe,...qoe});function Foe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function lP(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const QN=lP("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),c3=lP("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Foe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Hoe={utf8:QN,"utf-8":QN,hex:ZN.base16,latin1:c3,ascii:c3,binary:c3,...ZN};function Woe(t,e="utf8"){const r=Hoe[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var Koe=Object.defineProperty,Voe=(t,e,r)=>e in t?Koe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ya=(t,e,r)=>Voe(t,typeof e!="symbol"?e+"":e,r);let Goe=class{constructor(e,r){this.core=e,this.logger=r,Ya(this,"keychain",new Map),Ya(this,"name",Vie),Ya(this,"version",Gie),Ya(this,"initialized",!1),Ya(this,"storagePrefix",pc),Ya(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),Ya(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),Ya(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),Ya(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=Qe("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),Ya(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Gr(r,this.name)}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,dk(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?fk(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Yoe=Object.defineProperty,Zoe=(t,e,r)=>e in t?Yoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yi=(t,e,r)=>Zoe(t,typeof e!="symbol"?e+"":e,r);let Qoe=class{constructor(e,r,n){this.core=e,this.logger=r,Yi(this,"name",Wie),Yi(this,"keychain"),Yi(this,"randomSessionIdentifier",zS()),Yi(this,"initialized",!1),Yi(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Yi(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Yi(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=j1(i);return MA(s.publicKey)}),Yi(this,"generateKeyPair",()=>{this.isInitialized();const i=tne();return this.setPrivateKey(i.publicKey,i.privateKey)}),Yi(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=j1(s),c=this.randomSessionIdentifier;return await R$(c,i,Kie,o)}),Yi(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const c=this.getPrivateKey(i),u=rne(c,s);return this.setSymKey(u,o)}),Yi(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||d1(i);return await this.keychain.set(o,i),o}),Yi(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Yi(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Yi(this,"encode",async(i,s,o)=>{this.isInitialized();const c=Uk(o),u=fc(s);if(IN(c))return sne(u,o==null?void 0:o.encoding);if(AN(c)){const E=c.senderPublicKey,S=c.receiverPublicKey;i=await this.generateSharedKey(E,S)}const h=this.getSymKey(i),{type:f,senderPublicKey:p}=c;return nne({type:f,symKey:h,message:u,senderPublicKey:p,encoding:o==null?void 0:o.encoding})}),Yi(this,"decode",async(i,s,o)=>{this.isInitialized();const c=ane(s,o);if(IN(c)){const u=one(s,o==null?void 0:o.encoding);return ll(u)}if(AN(c)){const u=c.receiverPublicKey,h=c.senderPublicKey;i=await this.generateSharedKey(u,h)}try{const u=this.getSymKey(i),h=ine({symKey:u,encoded:s,encoding:o==null?void 0:o.encoding});return ll(h)}catch(u){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}}),Yi(this,"getPayloadType",(i,s=su)=>{const o=Yg({encoded:i,encoding:s});return Ah(o.type)}),Yi(this,"getPayloadSenderPublicKey",(i,s=su)=>{const o=Yg({encoded:i,encoding:s});return o.senderPublicKey?Vr(o.senderPublicKey,xs):void 0}),this.core=e,this.logger=Gr(r,this.name),this.keychain=n||new Goe(this.core,this.logger)}get context(){return bn(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(FN)}catch{e=zS(),await this.keychain.set(FN,e)}return Woe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Xoe=Object.defineProperty,Joe=(t,e,r)=>e in t?Xoe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Za=(t,e,r)=>Joe(t,typeof e!="symbol"?e+"":e,r);let eae=class extends DY{constructor(e,r){super(e,r),this.logger=e,this.core=r,Za(this,"messages",new Map),Za(this,"name",Yie),Za(this,"version",Zie),Za(this,"initialized",!1),Za(this,"storagePrefix",pc),Za(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),Za(this,"set",async(n,i)=>{this.isInitialized();const s=tl(i);let o=this.messages.get(n);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(n,o),await this.persist()),s}),Za(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),Za(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=tl(i);return typeof s[o]<"u"}),Za(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()}),this.logger=Gr(e,this.name),this.core=r}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,dk(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?fk(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var tae=Object.defineProperty,rae=Object.defineProperties,nae=Object.getOwnPropertyDescriptors,XN=Object.getOwnPropertySymbols,iae=Object.prototype.hasOwnProperty,sae=Object.prototype.propertyIsEnumerable,YS=(t,e,r)=>e in t?tae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ob=(t,e)=>{for(var r in e||(e={}))iae.call(e,r)&&YS(t,r,e[r]);if(XN)for(var r of XN(e))sae.call(e,r)&&YS(t,r,e[r]);return t},l3=(t,e)=>rae(t,nae(e)),va=(t,e,r)=>YS(t,typeof e!="symbol"?e+"":e,r);let oae=class extends $Y{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,va(this,"events",new Ii.EventEmitter),va(this,"name",Qie),va(this,"queue",new Map),va(this,"publishTimeout",ye.toMiliseconds(ye.ONE_MINUTE)),va(this,"initialPublishTimeout",ye.toMiliseconds(ye.ONE_SECOND*15)),va(this,"needsTransportRestart",!1),va(this,"publish",async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const c=(s==null?void 0:s.ttl)||HN,u=H1(s),h=(s==null?void 0:s.prompt)||!1,f=(s==null?void 0:s.tag)||0,p=(s==null?void 0:s.id)||Po().toString(),E={topic:n,message:i,opts:{ttl:c,relay:u,prompt:h,tag:f,id:p,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},S=`Failed to publish payload, please try again. id:${p} tag:${f}`;try{const A=new Promise(async I=>{const $=({id:k})=>{E.opts.id===k&&(this.removeRequestFromQueue(k),this.relayer.events.removeListener(Ui.publish,$),I(E))};this.relayer.events.on(Ui.publish,$);const L=iu(new Promise((k,U)=>{this.rpcPublish({topic:n,message:i,ttl:c,prompt:h,tag:f,id:p,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(k).catch(q=>{this.logger.warn(q,q==null?void 0:q.message),U(q)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${p} tag:${f}`);try{await L,this.events.removeListener(Ui.publish,$)}catch(k){this.queue.set(p,l3(Ob({},E),{attempt:1})),this.logger.warn(k,k==null?void 0:k.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,topic:n,message:i,opts:s}}),await iu(A,this.publishTimeout,S)}catch(A){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(A),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw A}finally{this.queue.delete(p)}}),va(this,"on",(n,i)=>{this.events.on(n,i)}),va(this,"once",(n,i)=>{this.events.once(n,i)}),va(this,"off",(n,i)=>{this.events.off(n,i)}),va(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=Gr(r,this.name),this.registerEventListeners()}get context(){return bn(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:c,ttl:u=HN,prompt:h,tag:f,id:p,attestation:E,tvf:S}=e,A={method:hg(H1().protocol).publish,params:Ob({topic:o,message:c,ttl:u,prompt:h,tag:f,attestation:E},S),id:p};Ls((r=A.params)==null?void 0:r.prompt)&&((n=A.params)==null||delete n.prompt),Ls((i=A.params)==null?void 0:i.tag)&&((s=A.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:A});const I=await this.relayer.request(A);return this.relayer.events.emit(Ui.publish,e),this.logger.debug("Successfully Published Payload"),I}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,l3(Ob({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:c}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(l3(Ob({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:c,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ra.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ui.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ui.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}};var aae=Object.defineProperty,cae=(t,e,r)=>e in t?aae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zd=(t,e,r)=>cae(t,typeof e!="symbol"?e+"":e,r);let lae=class{constructor(){zd(this,"map",new Map),zd(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),zd(this,"get",e=>this.map.get(e)||[]),zd(this,"exists",(e,r)=>this.get(e).includes(r)),zd(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),zd(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}};var uae=Object.defineProperty,hae=Object.defineProperties,dae=Object.getOwnPropertyDescriptors,JN=Object.getOwnPropertySymbols,fae=Object.prototype.hasOwnProperty,pae=Object.prototype.propertyIsEnumerable,ZS=(t,e,r)=>e in t?uae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V0=(t,e)=>{for(var r in e||(e={}))fae.call(e,r)&&ZS(t,r,e[r]);if(JN)for(var r of JN(e))pae.call(e,r)&&ZS(t,r,e[r]);return t},u3=(t,e)=>hae(t,dae(e)),ln=(t,e,r)=>ZS(t,typeof e!="symbol"?e+"":e,r);let gae=class extends BY{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,ln(this,"subscriptions",new Map),ln(this,"topicMap",new lae),ln(this,"events",new Ii.EventEmitter),ln(this,"name",ise),ln(this,"version",sse),ln(this,"pending",new Map),ln(this,"cached",[]),ln(this,"initialized",!1),ln(this,"pendingSubscriptionWatchLabel","pending_sub_watch_label"),ln(this,"pollingInterval",20),ln(this,"storagePrefix",pc),ln(this,"subscribeTimeout",ye.toMiliseconds(ye.ONE_MINUTE)),ln(this,"initialSubscribeTimeout",ye.toMiliseconds(ye.ONE_SECOND*15)),ln(this,"clientId"),ln(this,"batchSubscribeTopicsLimit",500),ln(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),ln(this,"subscribe",async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=H1(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const c=await this.rpcSubscribe(n,s,i);return typeof c=="string"&&(this.onSubscribe(c,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),c}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),ln(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),ln(this,"isSubscribed",async n=>{if(this.topics.includes(n))return!0;const i=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,o)=>{const c=new ye.Watch;c.start(i);const u=setInterval(()=>{(!this.pending.has(n)&&this.topics.includes(n)||this.cached.some(h=>h.topic===n))&&(clearInterval(u),c.stop(i),s(!0)),c.elapsed(i)>=ose&&(clearInterval(u),c.stop(i),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)}),ln(this,"on",(n,i)=>{this.events.on(n,i)}),ln(this,"once",(n,i)=>{this.events.once(n,i)}),ln(this,"off",(n,i)=>{this.events.off(n,i)}),ln(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),ln(this,"start",async()=>{await this.onConnect()}),ln(this,"stop",async()=>{await this.onDisconnect()}),ln(this,"restart",async()=>{await this.restore(),await this.onRestart()}),ln(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),ln(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ra.pulse,async()=>{await this.checkPending()}),this.events.on(To.created,async n=>{const i=To.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(To.deleted,async n=>{const i=To.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=Gr(r,this.name),this.clientId=""}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=H1(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=un("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(!n||(n==null?void 0:n.transportType)===Rn.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:hg(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const c=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Rn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(f=>this.logger.warn(f))},ye.toMiliseconds(ye.ONE_SECOND)),c;const u=new Promise(async f=>{const p=E=>{E.topic===e&&(this.events.removeListener(To.created,p),f(E.id))};this.events.on(To.created,p);try{const E=await iu(new Promise((S,A)=>{this.relayer.request(s).catch(I=>{this.logger.warn(I,I==null?void 0:I.message),A(I)}).then(S)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(To.created,p),f(E)}catch{}}),h=await iu(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!h&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return h?c:null}catch(c){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ui.connection_stalled),o)throw c}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:hg(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await iu(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Ui.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:hg(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await iu(new Promise((s,o)=>{this.relayer.request(n).catch(c=>{this.logger.warn(c),o(c)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Ui.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:hg(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,u3(V0({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,V0({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,V0({},r)),this.topicMap.set(r.topic,e),this.events.emit(To.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=Qe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(To.deleted,u3(V0({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(To.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(To.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Qe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>u3(V0({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await gte(ye.toMiliseconds(ye.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return tl(e+await this.getClientId())}};var yae=Object.defineProperty,e9=Object.getOwnPropertySymbols,mae=Object.prototype.hasOwnProperty,bae=Object.prototype.propertyIsEnumerable,QS=(t,e,r)=>e in t?yae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,t9=(t,e)=>{for(var r in e||(e={}))mae.call(e,r)&&QS(t,r,e[r]);if(e9)for(var r of e9(e))bae.call(e,r)&&QS(t,r,e[r]);return t},Rr=(t,e,r)=>QS(t,typeof e!="symbol"?e+"":e,r);let wae=class extends kY{constructor(e){super(e),Rr(this,"protocol","wc"),Rr(this,"version",2),Rr(this,"core"),Rr(this,"logger"),Rr(this,"events",new Ii.EventEmitter),Rr(this,"provider"),Rr(this,"messages"),Rr(this,"subscriber"),Rr(this,"publisher"),Rr(this,"name",Jie),Rr(this,"transportExplicitlyClosed",!1),Rr(this,"initialized",!1),Rr(this,"connectionAttemptInProgress",!1),Rr(this,"relayUrl"),Rr(this,"projectId"),Rr(this,"packageName"),Rr(this,"bundleId"),Rr(this,"hasExperiencedNetworkDisruption",!1),Rr(this,"pingTimeout"),Rr(this,"heartBeatTimeout",ye.toMiliseconds(ye.THIRTY_SECONDS+ye.FIVE_SECONDS)),Rr(this,"reconnectTimeout"),Rr(this,"connectPromise"),Rr(this,"reconnectInProgress",!1),Rr(this,"requestsInFlight",[]),Rr(this,"connectTimeout",ye.toMiliseconds(ye.ONE_SECOND*15)),Rr(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||Po().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const c=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==o),c}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),Rr(this,"resetPingTimeout",()=>{if(q1())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i;this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null||i.terminate()},this.heartBeatTimeout)}catch(r){this.logger.warn(r,r==null?void 0:r.message)}}),Rr(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),Rr(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Ui.connect)}),Rr(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Rr(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(Ui.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Rr(this,"registerProviderListeners",()=>{this.provider.on(Qo.payload,this.onPayloadHandler),this.provider.on(Qo.connect,this.onConnectHandler),this.provider.on(Qo.disconnect,this.onDisconnectHandler),this.provider.on(Qo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Gr(e.logger,this.name):yu(ul({level:e.logger||Xie})),this.messages=new eae(this.logger,e.core),this.subscriber=new gae(this,this.logger),this.publisher=new oae(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Xk,this.projectId=e.projectId,ete()?this.packageName=QM():tte()&&(this.bundleId=QM()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return bn(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Rn.relay})}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let c=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",u;const h=f=>{f.topic===e&&(this.subscriber.off(To.created,h),u())};return await Promise.all([new Promise(f=>{u=f,this.subscriber.on(To.created,h)}),new Promise(async(f,p)=>{c=await this.subscriber.subscribe(e,t9({internal:{throwOnFailedPublish:o}},r)).catch(E=>{o&&p(E)})||c,f()})]),c}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await iu(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await DN())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=wi(ye.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Ui.message,e),await this.recordMessageEvent(e)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Qo.disconnect,s),await iu(new Promise((o,c)=>{this.provider.connect().then(o).catch(c)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Qo.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,c)=>{const u=()=>{c(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Qo.disconnect,u),await this.subscriber.start().then(o).catch(c).finally(()=>{this.provider.off(Qo.disconnect,u)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,ye.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(q1())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Bn(new Gk(ste({sdkVersion:KS,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.warn(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ap(e)){if(!e.method.endsWith(ese))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,c={topic:n,message:i,publishedAt:s,transportType:Rn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(t9({type:"event",event:r.id},c)),this.events.emit(r.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}else zh(e)&&this.events.emit(Ui.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ui.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=bu(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Qo.payload,this.onPayloadHandler),this.provider.off(Qo.connect,this.onConnectHandler),this.provider.off(Qo.disconnect,this.onDisconnectHandler),this.provider.off(Qo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await DN();Gne(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Ui.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ye.toMiliseconds(tse)))))}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}};var vae=Object.defineProperty,r9=Object.getOwnPropertySymbols,Eae=Object.prototype.hasOwnProperty,_ae=Object.prototype.propertyIsEnumerable,XS=(t,e,r)=>e in t?vae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,n9=(t,e)=>{for(var r in e||(e={}))Eae.call(e,r)&&XS(t,r,e[r]);if(r9)for(var r of r9(e))_ae.call(e,r)&&XS(t,r,e[r]);return t},Xs=(t,e,r)=>XS(t,typeof e!="symbol"?e+"":e,r);let qh=class extends PY{constructor(e,r,n,i=pc,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,Xs(this,"map",new Map),Xs(this,"version",rse),Xs(this,"cached",[]),Xs(this,"initialized",!1),Xs(this,"getKey"),Xs(this,"storagePrefix",pc),Xs(this,"recentlyDeleted",[]),Xs(this,"recentlyDeletedLimit",200),Xs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Ls(o)?this.map.set(this.getKey(o),o):Ine(o)?this.map.set(o.id,o):xne(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Xs(this,"set",async(o,c)=>{this.isInitialized(),this.map.has(o)?await this.update(o,c):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:c}),this.map.set(o,c),await this.persist())}),Xs(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Xs(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(c=>Object.keys(o).every(u=>qie(c[u],o[u]))):this.values)),Xs(this,"update",async(o,c)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:c});const u=n9(n9({},this.getData(o)),c);this.map.set(o,u),await this.persist()}),Xs(this,"delete",async(o,c)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:c}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Gr(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=Qe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=Qe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Qe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Sae=Object.defineProperty,Aae=(t,e,r)=>e in t?Sae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,vr=(t,e,r)=>Aae(t,typeof e!="symbol"?e+"":e,r);let Iae=class{constructor(e,r){this.core=e,this.logger=r,vr(this,"name",ase),vr(this,"version",cse),vr(this,"events",new bp),vr(this,"pairings"),vr(this,"initialized",!1),vr(this,"storagePrefix",pc),vr(this,"ignoredPayloadTypes",[ol]),vr(this,"registeredMethods",[]),vr(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),vr(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),vr(this,"create",async n=>{this.isInitialized();const i=zS(),s=await this.core.crypto.setSymKey(i),o=wi(ye.FIVE_MINUTES),c={protocol:Qk},u={topic:s,expiry:o,relay:c,active:!1,methods:n==null?void 0:n.methods},h=CN({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:c,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(rh.create,u),this.core.expirer.set(s,o),await this.pairings.set(s,u),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:h}}),vr(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[nc.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:c,expiryTimestamp:u,methods:h}=xN(n.uri);i.props.properties.topic=s,i.addTrace(nc.pairing_uri_validation_success),i.addTrace(nc.pairing_uri_not_expired);let f;if(this.pairings.keys.includes(s)){if(f=this.pairings.get(s),i.addTrace(nc.existing_pairing),f.active)throw i.setError(Xc.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(nc.pairing_not_expired)}const p=u||wi(ye.FIVE_MINUTES),E={topic:s,relay:c,expiry:p,active:!1,methods:h};this.core.expirer.set(s,p),await this.pairings.set(s,E),i.addTrace(nc.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(rh.create,E),i.addTrace(nc.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(nc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Xc.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:c})}catch(S){throw i.setError(Xc.subscribe_pairing_topic_failure),S}return i.addTrace(nc.subscribe_pairing_topic_success),E}),vr(this,"activate",async({topic:n})=>{this.isInitialized();const i=wi(ye.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),vr(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:c,reject:u}=Qu();this.events.once(Hr("pairing_ping",s),({error:h})=>{h?u(h):c()}),await o()}}),vr(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),vr(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),vr(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),vr(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",un("USER_DISCONNECTED")),await this.deletePairing(i))}),vr(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:c}=n,u=this.core.crypto.keychain.get(i);return CN({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:u,relay:s,expiryTimestamp:o,methods:c})}),vr(this,"sendRequest",async(n,i,s)=>{const o=Us(i,s),c=await this.core.crypto.encode(n,o),u=W0[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,c,u),o.id}),vr(this,"sendResult",async(n,i,s)=>{const o=bu(n,s),c=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,n)).request.method,h=W0[u].res;await this.core.relayer.publish(i,c,h),await this.core.history.resolve(o)}),vr(this,"sendError",async(n,i,s)=>{const o=Sp(n,s),c=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,n)).request.method,h=W0[u]?W0[u].res:W0.unregistered_method.res;await this.core.relayer.publish(i,c,h),await this.core.history.resolve(o)}),vr(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,un("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),vr(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>Ql(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),vr(this,"onRelayEventRequest",n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}}),vr(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),vr(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(rh.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),vr(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Si(i)?this.events.emit(Hr("pairing_ping",s),{}):Yn(i)&&this.events.emit(Hr("pairing_ping",s),{error:i.error})},500)}),vr(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(rh.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),vr(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const c=un("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,c),this.logger.error(c)}catch(c){await this.sendError(s,n,c),this.logger.error(c)}}),vr(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(un("WC_METHOD_UNSUPPORTED",n))}),vr(this,"isValidPair",(n,i)=>{var s;if(!io(n)){const{message:c}=Qe("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(Xc.malformed_pairing_uri),new Error(c)}if(!Ane(n.uri)){const{message:c}=Qe("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(Xc.malformed_pairing_uri),new Error(c)}const o=xN(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:c}=Qe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Xc.malformed_pairing_uri),new Error(c)}if(!(o!=null&&o.symKey)){const{message:c}=Qe("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Xc.malformed_pairing_uri),new Error(c)}if(o!=null&&o.expiryTimestamp&&ye.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(Xc.pairing_expired);const{message:c}=Qe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(c)}}),vr(this,"isValidPing",async n=>{if(!io(n)){const{message:s}=Qe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),vr(this,"isValidDisconnect",async n=>{if(!io(n)){const{message:s}=Qe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),vr(this,"isValidPairingTopic",async n=>{if(!ii(n,!1)){const{message:i}=Qe("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=Qe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Ql(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=Qe("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=Gr(r,this.name),this.pairings=new qh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return bn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ui.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(!this.pairings.keys.includes(r)||i===Rn.link_mode||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const s=await this.core.crypto.decode(r,n);try{Ap(s)?(this.core.history.set(r,s),this.onRelayEventRequest({topic:r,payload:s})):zh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(ra.expired,async e=>{const{topic:r}=gk(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(rh.expire,{topic:r}))})}};var xae=Object.defineProperty,Cae=(t,e,r)=>e in t?xae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zi=(t,e,r)=>Cae(t,typeof e!="symbol"?e+"":e,r);let Tae=class extends RY{constructor(e,r){super(e,r),this.core=e,this.logger=r,Zi(this,"records",new Map),Zi(this,"events",new Ii.EventEmitter),Zi(this,"name",lse),Zi(this,"version",use),Zi(this,"cached",[]),Zi(this,"initialized",!1),Zi(this,"storagePrefix",pc),Zi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Zi(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:wi(ye.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(ba.created,o)}),Zi(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Yn(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(ba.updated,i))}),Zi(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),Zi(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(ba.deleted,s)}}),this.persist()}),Zi(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),Zi(this,"on",(n,i)=>{this.events.on(n,i)}),Zi(this,"once",(n,i)=>{this.events.once(n,i)}),Zi(this,"off",(n,i)=>{this.events.off(n,i)}),Zi(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Gr(r,this.name)}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Us(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=Qe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ba.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Qe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(ba.created,e=>{const r=ba.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(ba.updated,e=>{const r=ba.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(ba.deleted,e=>{const r=ba.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Ra.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{ye.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(ba.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Mae=Object.defineProperty,Nae=(t,e,r)=>e in t?Mae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_s=(t,e,r)=>Nae(t,typeof e!="symbol"?e+"":e,r);let Oae=class extends LY{constructor(e,r){super(e,r),this.core=e,this.logger=r,_s(this,"expirations",new Map),_s(this,"events",new Ii.EventEmitter),_s(this,"name",hse),_s(this,"version",dse),_s(this,"cached",[]),_s(this,"initialized",!1),_s(this,"storagePrefix",pc),_s(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),_s(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),_s(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(ra.created,{target:s,expiration:o})}),_s(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),_s(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(ra.deleted,{target:i,expiration:s})}}),_s(this,"on",(n,i)=>{this.events.on(n,i)}),_s(this,"once",(n,i)=>{this.events.once(n,i)}),_s(this,"off",(n,i)=>{this.events.off(n,i)}),_s(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Gr(r,this.name)}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ote(e);if(typeof e=="number")return ate(e);const{message:r}=Qe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ra.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Qe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=Qe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ye.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(ra.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Ra.pulse,()=>this.checkExpirations()),this.events.on(ra.created,e=>{const r=ra.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(ra.expired,e=>{const r=ra.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(ra.deleted,e=>{const r=ra.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}};var Rae=Object.defineProperty,Dae=(t,e,r)=>e in t?Rae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ui=(t,e,r)=>Dae(t,typeof e!="symbol"?e+"":e,r);let $ae=class extends UY{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,ui(this,"name",fse),ui(this,"abortController"),ui(this,"isDevEnv"),ui(this,"verifyUrlV3",gse),ui(this,"storagePrefix",pc),ui(this,"version",Zk),ui(this,"publicKey"),ui(this,"fetchPromise"),ui(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ye.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ui(this,"register",async i=>{if(!Ly()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:c}=i,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${c}`;try{const h=fo.getDocument(),f=this.startAbortTimer(ye.ONE_SECOND*5),p=await new Promise((E,S)=>{const A=()=>{window.removeEventListener("message",$),h.body.removeChild(I),S("attestation aborted")};this.abortController.signal.addEventListener("abort",A);const I=h.createElement("iframe");I.src=u,I.style.display="none",I.addEventListener("error",A,{signal:this.abortController.signal});const $=L=>{if(L.data&&typeof L.data=="string")try{const k=JSON.parse(L.data);if(k.type==="verify_attestation"){if(ep(k.attestation).payload.id!==o)return;clearInterval(f),h.body.removeChild(I),this.abortController.signal.removeEventListener("abort",A),window.removeEventListener("message",$),E(k.attestation===null?"":k.attestation)}}catch(k){this.logger.warn(k)}};h.body.appendChild(I),window.addEventListener("message",$,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",p),p}catch(h){this.logger.warn(h)}return""}),ui(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:c}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(ep(s).payload.id!==c)return;const h=await this.isValidJwtAttestation(s);if(h){if(!h.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return h}}if(!o)return;const u=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,u)}),ui(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(ye.ONE_SECOND*5),c=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),c.status===200?await c.json():void 0}),ui(this,"getVerifyUrl",i=>{let s=i||Tg;return yse.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Tg}`),s=Tg),s}),ui(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(ye.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),ui(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),ui(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ui(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(c){this.logger.error(c),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(c){this.logger.error(c),this.logger.warn("error validating attestation")}}),ui(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ui(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),ui(this,"validateAttestation",(i,s)=>{const o=hne(i,s.publicKey),c={hasExpired:ye.toMiliseconds(o.exp)<Date.now(),payload:o};if(c.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:c.payload.origin,isScam:c.payload.isScam,isVerified:c.payload.isVerified}}),this.logger=Gr(r,this.name),this.abortController=new AbortController,this.isDevEnv=RA(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return bn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}};var kae=Object.defineProperty,Pae=(t,e,r)=>e in t?kae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,i9=(t,e,r)=>Pae(t,typeof e!="symbol"?e+"":e,r);let Bae=class extends jY{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,i9(this,"context",mse),i9(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:c=!1}=n,u=`${bse}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:c})})}),this.logger=Gr(r,this.context)}};var Lae=Object.defineProperty,s9=Object.getOwnPropertySymbols,Uae=Object.prototype.hasOwnProperty,jae=Object.prototype.propertyIsEnumerable,JS=(t,e,r)=>e in t?Lae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,G0=(t,e)=>{for(var r in e||(e={}))Uae.call(e,r)&&JS(t,r,e[r]);if(s9)for(var r of s9(e))jae.call(e,r)&&JS(t,r,e[r]);return t},Oi=(t,e,r)=>JS(t,typeof e!="symbol"?e+"":e,r);let zae=class extends zY{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Oi(this,"context",vse),Oi(this,"storagePrefix",pc),Oi(this,"storageVersion",wse),Oi(this,"events",new Map),Oi(this,"shouldPersist",!1),Oi(this,"init",async()=>{if(!RA())try{const i={eventId:JM(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:hk(this.core.relayer.protocol,this.core.relayer.version,KS)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Oi(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:c,trace:u}}=i,h=JM(),f=this.core.projectId||"",p=Date.now(),E=G0({eventId:h,timestamp:p,props:{event:s,type:o,properties:{topic:c,trace:u}},bundleId:f,domain:this.getAppDomain()},this.setMethods(h));return this.telemetryEnabled&&(this.events.set(h,E),this.shouldPersist=!0),E}),Oi(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const c=Array.from(this.events.values()).find(u=>u.props.properties.topic===o);if(c)return G0(G0({},c),this.setMethods(c.eventId))}),Oi(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Oi(this,"setEventListeners",()=>{this.core.heartbeat.on(Ra.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{ye.fromMiliseconds(Date.now())-ye.fromMiliseconds(i.timestamp)>Ese&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Oi(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Oi(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Oi(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Oi(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Oi(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,G0(G0({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Oi(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Oi(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${_se}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${KS}${s}`,{method:"POST",body:JSON.stringify(i)})}),Oi(this,"getAppDomain",()=>uk().url),this.logger=Gr(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}};var qae=Object.defineProperty,o9=Object.getOwnPropertySymbols,Fae=Object.prototype.hasOwnProperty,Hae=Object.prototype.propertyIsEnumerable,e4=(t,e,r)=>e in t?qae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,a9=(t,e)=>{for(var r in e||(e={}))Fae.call(e,r)&&e4(t,r,e[r]);if(o9)for(var r of o9(e))Hae.call(e,r)&&e4(t,r,e[r]);return t},_n=(t,e,r)=>e4(t,typeof e!="symbol"?e+"":e,r);let Wae=class uP extends TY{constructor(e){var r;super(e),_n(this,"protocol",Yk),_n(this,"version",Zk),_n(this,"name",WS),_n(this,"relayUrl"),_n(this,"projectId"),_n(this,"customStoragePrefix"),_n(this,"events",new Ii.EventEmitter),_n(this,"logger"),_n(this,"heartbeat"),_n(this,"relayer"),_n(this,"crypto"),_n(this,"storage"),_n(this,"history"),_n(this,"expirer"),_n(this,"pairing"),_n(this,"verify"),_n(this,"echoClient"),_n(this,"linkModeSupportedApps"),_n(this,"eventClient"),_n(this,"initialized",!1),_n(this,"logChunkController"),_n(this,"on",(o,c)=>this.events.on(o,c)),_n(this,"once",(o,c)=>this.events.once(o,c)),_n(this,"off",(o,c)=>this.events.off(o,c)),_n(this,"removeListener",(o,c)=>this.events.removeListener(o,c)),_n(this,"dispatchEnvelope",({topic:o,message:c,sessionExists:u})=>{if(!o||!c)return;const h={topic:o,message:c,publishedAt:Date.now(),transportType:Rn.link_mode};this.relayer.onLinkMessageEvent(h,{sessionExists:u})}),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Xk,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=ul({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:Fie.logger,name:WS}),{logger:i,chunkLoggerController:s}=EA({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,c;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Gr(i,this.name),this.heartbeat=new JD,this.crypto=new Qoe(this,this.logger,e==null?void 0:e.keychain),this.history=new Tae(this,this.logger),this.expirer=new Oae(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new r$(a9(a9({},Hie),e==null?void 0:e.storageOptions)),this.relayer=new wae({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Iae(this,this.logger),this.verify=new $ae(this,this.logger,this.storage),this.echoClient=new Bae(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new zae(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new uP(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(nse,n),r}get context(){return bn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(WN,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(WN)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const Kae=Wae;var Vae=Object.defineProperty,Gae=(t,e,r)=>e in t?Vae(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,c9=(t,e,r)=>Gae(t,typeof e!="symbol"?e+"":e,r);let Yae=class{constructor(e){this.opts=e,c9(this,"protocol","wc"),c9(this,"version",2)}},Zae=class{constructor(e){this.client=e}};const hP="wc",dP=2,fP="client",qA=`${hP}@${dP}:${fP}:`,h3={name:fP,logger:"error"},l9="WALLETCONNECT_DEEPLINK_CHOICE",Qae="proposal",u9="Proposal expired",Xae="session",qd=ye.SEVEN_DAYS,Jae="engine",Ri={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ye.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ye.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1119}}},d3={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},Qa={idle:"IDLE",active:"ACTIVE"},h9={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},ece="request",tce=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],rce="wc",nce="auth",ice="authKeys",sce="pairingTopics",oce="requests",Pw=`${rce}@${1.5}:${nce}:`,f1=`${Pw}:PUB_KEY`;var ace=Object.defineProperty,cce=Object.defineProperties,lce=Object.getOwnPropertyDescriptors,d9=Object.getOwnPropertySymbols,uce=Object.prototype.hasOwnProperty,hce=Object.prototype.propertyIsEnumerable,t4=(t,e,r)=>e in t?ace(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jn=(t,e)=>{for(var r in e||(e={}))uce.call(e,r)&&t4(t,r,e[r]);if(d9)for(var r of d9(e))hce.call(e,r)&&t4(t,r,e[r]);return t},Js=(t,e)=>cce(t,lce(e)),je=(t,e,r)=>t4(t,typeof e!="symbol"?e+"":e,r);let dce=class extends Zae{constructor(e){super(e),je(this,"name",Jae),je(this,"events",new bp),je(this,"initialized",!1),je(this,"requestQueue",{state:Qa.idle,queue:[]}),je(this,"sessionRequestQueue",{state:Qa.idle,queue:[]}),je(this,"requestQueueDelay",ye.ONE_SECOND),je(this,"expectedPairingMethodMap",new Map),je(this,"recentlyDeletedMap",new Map),je(this,"recentlyDeletedLimit",200),je(this,"relayMessageCache",[]),je(this,"pendingSessions",new Map),je(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ri)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay)))}),je(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Js(jn({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:c,relays:u}=n;let h=i,f,p=!1;try{if(h){const j=this.client.core.pairing.pairings.get(h);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),p=j.active}}catch(j){throw this.client.logger.error(`connect() -> pairing.get(${h}) failed`),j}if(!h||!p){const{topic:j,uri:z}=await this.client.core.pairing.create();h=j,f=z}if(!h){const{message:j}=Qe("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(j)}const E=await this.client.core.crypto.generateKeyPair(),S=Ri.wc_sessionPropose.req.ttl||ye.FIVE_MINUTES,A=wi(S),I=Js(jn({requiredNamespaces:s,optionalNamespaces:o,relays:u??[{protocol:Qk}],proposer:{publicKey:E,metadata:this.client.metadata},expiryTimestamp:A,pairingTopic:h},c&&{sessionProperties:c}),{id:Li()}),$=Hr("session_connect",I.id),{reject:L,resolve:k,done:U}=Qu(S,u9),q=({id:j})=>{j===I.id&&(this.client.events.off("proposal_expire",q),this.pendingSessions.delete(I.id),this.events.emit($,{error:{message:u9,code:0}}))};return this.client.events.on("proposal_expire",q),this.events.once($,({error:j,session:z})=>{this.client.events.off("proposal_expire",q),j?L(j):z&&k(z)}),await this.sendRequest({topic:h,method:"wc_sessionPropose",params:I,throwOnFailedPublish:!0,clientRpcId:I.id}),await this.setProposal(I.id,I),{uri:f,approval:U}}),je(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),je(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[wa.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(G){throw o.setError(Wu.no_internet_connection),G}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(G){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Wu.proposal_not_found),G}try{await this.isValidApprove(r)}catch(G){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Wu.session_approve_namespace_validation_failure),G}const{id:c,relayProtocol:u,namespaces:h,sessionProperties:f,sessionConfig:p}=r,E=this.client.proposal.get(c);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:S,proposer:A,requiredNamespaces:I,optionalNamespaces:$}=E;let L=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:S});L||(L=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:wa.session_approve_started,properties:{topic:S,trace:[wa.session_approve_started,wa.session_namespaces_validation_success]}}));const k=await this.client.core.crypto.generateKeyPair(),U=A.publicKey,q=await this.client.core.crypto.generateSharedKey(k,U),j=jn(jn({relay:{protocol:u??"irn"},namespaces:h,controller:{publicKey:k,metadata:this.client.metadata},expiry:wi(qd)},f&&{sessionProperties:f}),p&&{sessionConfig:p}),z=Rn.relay;L.addTrace(wa.subscribing_session_topic);try{await this.client.core.relayer.subscribe(q,{transportType:z})}catch(G){throw L.setError(Wu.subscribe_session_topic_failure),G}L.addTrace(wa.subscribe_session_topic_success);const V=Js(jn({},j),{topic:q,requiredNamespaces:I,optionalNamespaces:$,pairingTopic:S,acknowledged:!1,self:j.controller,peer:{publicKey:A.publicKey,metadata:A.metadata},controller:k,transportType:Rn.relay});await this.client.session.set(q,V),L.addTrace(wa.store_session);try{L.addTrace(wa.publishing_session_settle),await this.sendRequest({topic:q,method:"wc_sessionSettle",params:j,throwOnFailedPublish:!0}).catch(G=>{throw L==null||L.setError(Wu.session_settle_publish_failure),G}),L.addTrace(wa.session_settle_publish_success),L.addTrace(wa.publishing_session_approve),await this.sendResult({id:c,topic:S,result:{relay:{protocol:u??"irn"},responderPublicKey:k},throwOnFailedPublish:!0}).catch(G=>{throw L==null||L.setError(Wu.session_approve_publish_failure),G}),L.addTrace(wa.session_approve_publish_success)}catch(G){throw this.client.logger.error(G),this.client.session.delete(q,un("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(q),G}return this.client.core.eventClient.deleteEvent({eventId:L.eventId}),await this.client.core.pairing.updateMetadata({topic:S,metadata:A.metadata}),await this.client.proposal.delete(c,un("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:S}),await this.setExpiry(q,wi(qd)),{topic:q,acknowledged:()=>Promise.resolve(this.client.session.get(q))}}),je(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:Ri.wc_sessionPropose.reject}),await this.client.proposal.delete(n,un("USER_DISCONNECTED")))}),je(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(p){throw this.client.logger.error("update() -> isValidUpdate() failed"),p}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:c}=Qu(),u=Li(),h=Po().toString(),f=this.client.session.get(n).namespaces;return this.events.once(Hr("session_update",u),({error:p})=>{p?c(p):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:h}).catch(p=>{this.client.logger.error(p),this.client.session.update(n,{namespaces:f}),c(p)}),{acknowledged:s}}),je(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:n}=r,i=Li(),{done:s,resolve:o,reject:c}=Qu();return this.events.once(Hr("session_extend",i),({error:u})=>{u?c(u):o()}),await this.setExpiry(n,wi(qd)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(u=>{c(u)}),{acknowledged:s}}),je(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(L){throw this.client.logger.error("request() -> isValidRequest() failed"),L}const{chainId:n,request:i,topic:s,expiry:o=Ri.wc_sessionRequest.req.ttl}=r,c=this.client.session.get(s);(c==null?void 0:c.transportType)===Rn.relay&&await this.confirmOnlineStateOrThrow();const u=Li(),h=Po().toString(),{done:f,resolve:p,reject:E}=Qu(o,"Request expired. Please try again.");this.events.once(Hr("session_request",u),({error:L,result:k})=>{L?E(L):p(k)});const S="wc_sessionRequest",A=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);if(A)return await this.sendRequest({clientRpcId:u,relayRpcId:h,topic:s,method:S,params:{request:Js(jn({},i),{expiryTimestamp:wi(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:A}).catch(L=>E(L)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:u}),await f();const I={request:Js(jn({},i),{expiryTimestamp:wi(o)}),chainId:n},$=this.shouldSetTVF(S,I);return await Promise.all([new Promise(async L=>{await this.sendRequest(jn({clientRpcId:u,relayRpcId:h,topic:s,method:S,params:I,expiry:o,throwOnFailedPublish:!0},$&&{tvf:this.getTVFParams(u,I)})).catch(k=>E(k)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:u}),L()}),new Promise(async L=>{var k;if(!((k=c.sessionConfig)!=null&&k.disableDeepLink)){const U=await hte(this.client.core.storage,l9);await cte({id:u,topic:s,wcDeepLink:U})}L()}),f()]).then(L=>L[2])}),je(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===Rn.relay&&await this.confirmOnlineStateOrThrow();const c=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Si(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:c}):Yn(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:c}),this.cleanupAfterResponse(r)}),je(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Li(),s=Po().toString(),{done:o,resolve:c,reject:u}=Qu();this.events.once(Hr("session_ping",i),({error:h})=>{h?u(h):c()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),je(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=Po().toString(),c=Li();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:c})}),je(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:un("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=Qe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),je(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>_ne(n,r)))),je(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),je(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Rn.link_mode:Rn.relay;o===Rn.relay&&await this.confirmOnlineStateOrThrow();const{chains:c,statement:u="",uri:h,domain:f,nonce:p,type:E,exp:S,nbf:A,methods:I=[],expiry:$}=r,L=[...r.resources||[]],{topic:k,uri:U}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:k,uri:U}});const q=await this.client.core.crypto.generateKeyPair(),j=d1(q);if(await Promise.all([this.client.auth.authKeys.set(f1,{responseTopic:j,publicKey:q}),this.client.auth.pairingTopics.set(j,{topic:j,pairingTopic:k})]),await this.client.core.relayer.subscribe(j,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${k}`),I.length>0){const{namespace:C}=zf(c[0]);let v=tre(C,"request",I);h1(L)&&(v=nre(v,L.pop())),L.push(v)}const z=$&&$>Ri.wc_sessionAuthenticate.req.ttl?$:Ri.wc_sessionAuthenticate.req.ttl,V={authPayload:{type:E??"caip122",chains:c,statement:u,aud:h,domain:f,version:"1",nonce:p,iat:new Date().toISOString(),exp:S,nbf:A,resources:L},requester:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:wi(z)},G={eip155:{chains:c,methods:[...new Set(["personal_sign",...I])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:G,relays:[{protocol:"irn"}],pairingTopic:k,proposer:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:wi(Ri.wc_sessionPropose.req.ttl),id:Li()},{done:W,resolve:D,reject:_}=Qu(z,"Request expired"),w=Li(),g=Hr("session_connect",B.id),b=Hr("session_request",w),m=async({error:C,session:v})=>{this.events.off(b,M),C?_(C):v&&D({session:v})},M=async C=>{var v,O,x;if(await this.deletePendingAuthRequest(w,{message:"fulfilled",code:0}),C.error){const oe=un("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return C.error.code===oe.code?void 0:(this.events.off(g,m),_(C.error.message))}await this.deleteProposal(B.id),this.events.off(g,m);const{cacaos:N,responder:H}=C.result,Y=[],Q=[];for(const oe of N){await aN({cacao:oe,projectId:this.client.core.projectId})||(this.client.logger.error(oe,"Signature verification failed"),_(un("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:be}=oe,Ce=h1(be.resources),Se=[kS(be.iss)],xe=F1(be.iss);if(Ce){const ze=cN(Ce),Be=lN(Ce);Y.push(...ze),Se.push(...Be)}for(const ze of Se)Q.push(`${ze}:${xe}`)}const ee=await this.client.core.crypto.generateSharedKey(q,H.publicKey);let re;Y.length>0&&(re={topic:ee,acknowledged:!0,self:{publicKey:q,metadata:this.client.metadata},peer:H,controller:H.publicKey,expiry:wi(qd),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:k,namespaces:TN([...new Set(Y)],[...new Set(Q)]),transportType:o},await this.client.core.relayer.subscribe(ee,{transportType:o}),await this.client.session.set(ee,re),k&&await this.client.core.pairing.updateMetadata({topic:k,metadata:H.metadata}),re=this.client.session.get(ee)),(v=this.client.metadata.redirect)!=null&&v.linkMode&&(O=H.metadata.redirect)!=null&&O.linkMode&&(x=H.metadata.redirect)!=null&&x.universal&&n&&(this.client.core.addLinkModeSupportedApp(H.metadata.redirect.universal),this.client.session.update(ee,{transportType:Rn.link_mode})),D({auths:N,session:re})};this.events.once(g,m),this.events.once(b,M);let R;try{if(s){const C=Us("wc_sessionAuthenticate",V,w);this.client.core.history.set(k,C);const v=await this.client.core.crypto.encode("",C,{type:qy,encoding:F0});R=Nb(n,k,v)}else await Promise.all([this.sendRequest({topic:k,method:"wc_sessionAuthenticate",params:V,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:w}),this.sendRequest({topic:k,method:"wc_sessionPropose",params:B,expiry:Ri.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(C){throw this.events.off(g,m),this.events.off(b,M),C}return await this.setProposal(B.id,B),await this.setAuthRequest(w,{request:Js(jn({},V),{verifyContext:{}}),pairingTopic:k,transportType:o}),{uri:R??U,response:W}}),je(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Ku.authenticated_session_approve_started]}});try{this.isInitialized()}catch($){throw s.setError(K0.no_internet_connection),$}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(K0.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const c=o.transportType||Rn.relay;c===Rn.relay&&await this.confirmOnlineStateOrThrow();const u=o.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),f=d1(u),p={type:ol,receiverPublicKey:u,senderPublicKey:h},E=[],S=[];for(const $ of i){if(!await aN({cacao:$,projectId:this.client.core.projectId})){s.setError(K0.invalid_cacao);const j=un("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:f,error:j,encodeOpts:p}),new Error(j.message)}s.addTrace(Ku.cacaos_verified);const{p:L}=$,k=h1(L.resources),U=[kS(L.iss)],q=F1(L.iss);if(k){const j=cN(k),z=lN(k);E.push(...j),U.push(...z)}for(const j of U)S.push(`${j}:${q}`)}const A=await this.client.core.crypto.generateSharedKey(h,u);s.addTrace(Ku.create_authenticated_session_topic);let I;if((E==null?void 0:E.length)>0){I={topic:A,acknowledged:!0,self:{publicKey:h,metadata:this.client.metadata},peer:{publicKey:u,metadata:o.requester.metadata},controller:u,expiry:wi(qd),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:TN([...new Set(E)],[...new Set(S)]),transportType:c},s.addTrace(Ku.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(A,{transportType:c})}catch($){throw s.setError(K0.subscribe_authenticated_session_topic_failure),$}s.addTrace(Ku.subscribe_authenticated_session_topic_success),await this.client.session.set(A,I),s.addTrace(Ku.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Ku.publishing_authenticated_session_approve);try{await this.sendResult({topic:f,id:n,result:{cacaos:i,responder:{publicKey:h,metadata:this.client.metadata}},encodeOpts:p,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,c)})}catch($){throw s.setError(K0.authenticated_session_approve_publish_failure),$}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:I}}),je(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===Rn.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),u=d1(o),h={type:ol,receiverPublicKey:o,senderPublicKey:c};await this.sendError({id:n,topic:u,error:i,encodeOpts:h,rpcOpts:Ri.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,un("USER_DISCONNECTED"))}),je(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return Ak(n,i)}),je(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),je(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,c;return((o=s.peerMetadata)==null?void 0:o.url)&&((c=s.peerMetadata)==null?void 0:c.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),je(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:c=0}=r,{self:u}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,un("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(l9).catch(h=>this.client.logger.warn(h)),this.getPendingSessionRequests().forEach(h=>{h.topic===i&&this.deletePendingSessionRequest(h.id,un("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Qa.idle),o&&this.client.events.emit("session_delete",{id:c,topic:i})}),je(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Wu.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,un("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),je(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Qa.idle,this.client.events.emit("session_request_expire",{id:r}))}),je(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),je(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),je(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,wi(Ri.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),je(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=Rn.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),je(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,c=s.request.expiryTimestamp||wi(Ri.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,c),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),je(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:c,clientRpcId:u,throwOnFailedPublish:h,appLink:f,tvf:p}=r,E=Us(i,s,u);let S;const A=!!f;try{const L=A?F0:su;S=await this.client.core.crypto.encode(n,E,{encoding:L})}catch(L){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),L}let I;if(tce.includes(i)){const L=tl(JSON.stringify(E)),k=tl(S);I=await this.client.core.verify.register({id:k,decryptedId:L})}const $=Ri[i].req;if($.attestation=I,o&&($.ttl=o),c&&($.id=c),this.client.core.history.set(n,E),A){const L=Nb(f,n,S);await global.Linking.openURL(L,this.client.name)}else{const L=Ri[i].req;o&&(L.ttl=o),c&&(L.id=c),L.tvf=Js(jn({},p),{correlationId:E.id}),h?(L.internal=Js(jn({},L.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,S,L)):this.client.core.relayer.publish(n,S,L).catch(k=>this.client.logger.error(k))}return E.id}),je(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:c,appLink:u}=r,h=bu(n,s);let f;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const A=p?F0:su;f=await this.client.core.crypto.encode(i,h,Js(jn({},c||{}),{encoding:A}))}catch(A){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),A}let E,S;try{E=await this.client.core.history.get(i,n);const A=E.request;try{this.shouldSetTVF(A.method,A.params)&&(S=this.getTVFParams(n,A.params,s))}catch(I){this.client.logger.warn("sendResult() -> getTVFParams() failed",I)}}catch(A){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),A}if(p){const A=Nb(u,i,f);await global.Linking.openURL(A,this.client.name)}else{const A=E.request.method,I=Ri[A].res;I.tvf=Js(jn({},S),{correlationId:n}),o?(I.internal=Js(jn({},I.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,f,I)):this.client.core.relayer.publish(i,f,I).catch($=>this.client.logger.error($))}await this.client.core.history.resolve(h)}),je(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:c,appLink:u}=r,h=Sp(n,s);let f;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const S=p?F0:su;f=await this.client.core.crypto.encode(i,h,Js(jn({},o||{}),{encoding:S}))}catch(S){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),S}let E;try{E=await this.client.core.history.get(i,n)}catch(S){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),S}if(p){const S=Nb(u,i,f);await global.Linking.openURL(S,this.client.name)}else{const S=E.request.method,A=c||Ri[S].res;this.client.core.relayer.publish(i,f,A)}await this.client.core.history.resolve(h)}),je(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Ql(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Ql(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),je(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),je(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Qa.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Qa.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Qa.idle}),je(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:c}=r,u=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:c});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:c,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:c,transportType:o});default:return this.client.logger.info(`Unsupported request method ${u}`)}}),je(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),je(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=Qe("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),je(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),je(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:c,id:u}=i;try{const h=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),h==null||h.setError(Xc.proposal_listener_not_found)),this.isValidConnect(jn({},i.params));const f=c.expiryTimestamp||wi(Ri.wc_sessionPropose.req.ttl),p=jn({id:u,pairingTopic:n,expiryTimestamp:f},c);await this.setProposal(u,p);const E=await this.getVerifyContext({attestationId:s,hash:tl(JSON.stringify(i)),encryptedId:o,metadata:p.proposer.metadata});h==null||h.addTrace(nc.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:p,verifyContext:E})}catch(h){await this.sendError({id:u,topic:n,error:h,rpcOpts:Ri.wc_sessionPropose.autoReject}),this.client.logger.error(h)}}),je(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Si(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const c=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const u=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const h=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const f=await this.client.core.crypto.generateSharedKey(u,h);this.pendingSessions.set(s,{sessionTopic:f,pairingTopic:r,proposalId:s,publicKey:u});const p=await this.client.core.relayer.subscribe(f,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:p}),await this.client.core.pairing.activate({topic:r})}else if(Yn(n)){await this.client.proposal.delete(s,un("USER_DISCONNECTED"));const o=Hr("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),je(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:c,expiry:u,namespaces:h,sessionProperties:f,sessionConfig:p}=n.params,E=[...this.pendingSessions.values()].find(I=>I.sessionTopic===r);if(!E)return this.client.logger.error(`Pending session not found for topic ${r}`);const S=this.client.proposal.get(E.proposalId),A=Js(jn(jn({topic:r,relay:o,expiry:u,namespaces:h,acknowledged:!0,pairingTopic:E.pairingTopic,requiredNamespaces:S.requiredNamespaces,optionalNamespaces:S.optionalNamespaces,controller:c.publicKey,self:{publicKey:E.publicKey,metadata:this.client.metadata},peer:{publicKey:c.publicKey,metadata:c.metadata}},f&&{sessionProperties:f}),p&&{sessionConfig:p}),{transportType:Rn.relay});await this.client.session.set(A.topic,A),await this.setExpiry(A.topic,A.expiry),await this.client.core.pairing.updateMetadata({topic:E.pairingTopic,metadata:A.peer.metadata}),this.client.events.emit("session_connect",{session:A}),this.events.emit(Hr("session_connect",E.proposalId),{session:A}),this.pendingSessions.delete(E.proposalId),this.deleteProposal(E.proposalId,!1),this.cleanupDuplicatePairings(A),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),je(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Si(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Hr("session_approve",i),{})):Yn(n)&&(await this.client.session.delete(r,un("USER_DISCONNECTED")),this.events.emit(Hr("session_approve",i),{error:n.error}))}),je(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,c=H0.get(o);if(c&&this.isRequestOutOfSync(c,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:un("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(jn({topic:r},i));try{H0.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(u){throw H0.delete(o),u}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),je(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),je(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=Hr("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Si(n)?this.events.emit(Hr("session_update",i),{}):Yn(n)&&this.events.emit(Hr("session_update",i),{error:n.error})}),je(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,wi(qd)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),je(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=Hr("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Si(n)?this.events.emit(Hr("session_extend",i),{}):Yn(n)&&this.events.emit(Hr("session_extend",i),{error:n.error})}),je(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),je(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=Hr("session_ping",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{Si(n)?this.events.emit(Hr("session_ping",i),{}):Yn(n)&&this.events.emit(Hr("session_ping",i),{error:n.error})},500)}),je(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(Ui.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:un("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),je(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:c,attestation:u,encryptedId:h,transportType:f}=r,{id:p,params:E}=c;try{await this.isValidRequest(jn({topic:o},E));const S=this.client.session.get(o),A=await this.getVerifyContext({attestationId:u,hash:tl(JSON.stringify(Us("wc_sessionRequest",E,p))),encryptedId:h,metadata:S.peer.metadata,transportType:f}),I={id:p,topic:o,params:E,verifyContext:A};await this.setPendingSessionRequest(I),f===Rn.link_mode&&(n=S.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=S.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(I):(this.addSessionRequestToSessionRequestQueue(I),this.processSessionRequestQueue())}catch(S){await this.sendError({id:p,topic:o,error:S}),this.client.logger.error(S)}}),je(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=Hr("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Si(n)?this.events.emit(Hr("session_request",i),{result:n.result}):Yn(n)&&this.events.emit(Hr("session_request",i),{error:n.error})}),je(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,c=H0.get(o);if(c&&this.isRequestOutOfSync(c,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(jn({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),H0.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),je(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Si(n)?this.events.emit(Hr("session_request",i),{result:n.result}):Yn(n)&&this.events.emit(Hr("session_request",i),{error:n.error})}),je(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:c,transportType:u}=r;try{const{requester:h,authPayload:f,expiryTimestamp:p}=s.params,E=await this.getVerifyContext({attestationId:o,hash:tl(JSON.stringify(s)),encryptedId:c,metadata:h.metadata,transportType:u}),S={requester:h,pairingTopic:i,id:s.id,authPayload:f,verifyContext:E,expiryTimestamp:p};await this.setAuthRequest(s.id,{request:S,pairingTopic:i,transportType:u}),u===Rn.link_mode&&(n=h.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(h.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:E})}catch(h){this.client.logger.error(h);const f=s.params.requester.publicKey,p=await this.client.core.crypto.generateKeyPair(),E=this.getAppLinkIfEnabled(s.params.requester.metadata,u),S={type:ol,receiverPublicKey:f,senderPublicKey:p};await this.sendError({id:s.id,topic:i,error:h,encodeOpts:S,rpcOpts:Ri.wc_sessionAuthenticate.autoReject,appLink:E})}}),je(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),je(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Qa.idle,this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay))}),je(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,c=Hr("session_request",o);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners`);this.events.emit(Hr("session_request",s.request.id),{error:n})})}),je(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Qa.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Qa.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),je(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),je(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Us("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id)})}),je(this,"isValidConnect",async r=>{if(!io(r)){const{message:u}=Qe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(u)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:c}=r;if(Ls(n)||await this.isValidPairingTopic(n),!$ne(c)){const{message:u}=Qe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(u)}!Ls(i)&&Zg(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Ls(s)&&Zg(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Ls(o)||this.validateSessionProps(o,"sessionProperties")}),je(this,"validateNamespaces",(r,n)=>{const i=Dne(r,"connect()",n);if(i)throw new Error(i.message)}),je(this,"isValidApprove",async r=>{if(!io(r))throw new Error(Qe("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const c=this.client.proposal.get(n),u=s3(i,"approve()");if(u)throw new Error(u.message);const h=ON(c.requiredNamespaces,i,"approve()");if(h)throw new Error(h.message);if(!ii(s,!0)){const{message:f}=Qe("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}Ls(o)||this.validateSessionProps(o,"sessionProperties")}),je(this,"isValidReject",async r=>{if(!io(r)){const{message:s}=Qe("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!Pne(i)){const{message:s}=Qe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),je(this,"isValidSessionSettleRequest",r=>{if(!io(r)){const{message:h}=Qe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(h)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!zk(n)){const{message:h}=Qe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const c=Cne(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);const u=s3(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(Ql(o)){const{message:h}=Qe("EXPIRED","onSessionSettleRequest()");throw new Error(h)}}),je(this,"isValidUpdate",async r=>{if(!io(r)){const{message:u}=Qe("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(u)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=s3(i,"update()");if(o)throw new Error(o.message);const c=ON(s.requiredNamespaces,i,"update()");if(c)throw new Error(c.message)}),je(this,"isValidExtend",async r=>{if(!io(r)){const{message:i}=Qe("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),je(this,"isValidRequest",async r=>{if(!io(r)){const{message:u}=Qe("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(u)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!NN(c,s)){const{message:u}=Qe("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!Bne(i)){const{message:u}=Qe("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!jne(c,s,i.method)){const{message:u}=Qe("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(o&&!Hne(o,d3)){const{message:u}=Qe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${d3.min} and ${d3.max}`);throw new Error(u)}}),je(this,"isValidRespond",async r=>{var n;if(!io(r)){const{message:o}=Qe("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!Lne(s)){const{message:o}=Qe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),je(this,"isValidPing",async r=>{if(!io(r)){const{message:i}=Qe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),je(this,"isValidEmit",async r=>{if(!io(r)){const{message:c}=Qe("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(c)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!NN(o,s)){const{message:c}=Qe("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(c)}if(!Une(i)){const{message:c}=Qe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}if(!zne(o,s,i.name)){const{message:c}=Qe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}}),je(this,"isValidDisconnect",async r=>{if(!io(r)){const{message:i}=Qe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),je(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!ii(i,!1))throw new Error("uri is required parameter");if(!ii(s,!1))throw new Error("domain is required parameter");if(!ii(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(u=>zf(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:c}=zf(n[0]);if(c!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),je(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:c}=r,u={verified:{verifyUrl:o.verifyUrl||Tg,validation:"UNKNOWN",origin:o.url||""}};try{if(c===Rn.link_mode){const f=this.getAppLinkIfEnabled(o,c);return u.verified.validation=f&&new URL(f).origin===new URL(o.url).origin?"VALID":"INVALID",u}const h=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});h&&(u.verified.origin=h.origin,u.verified.isScam=h.isScam,u.verified.validation=h.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(h){this.client.logger.warn(h)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u}),je(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach(i=>{if(!ii(i,!1)){const{message:s}=Qe("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}),je(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),je(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),je(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=Qe("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),je(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,c,u,h,f,p,E;return!r||n!==Rn.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((c=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:c.universal)!==void 0&&((h=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:h.universal)!==""&&((f=r==null?void 0:r.redirect)==null?void 0:f.universal)!==void 0&&((p=r==null?void 0:r.redirect)==null?void 0:p.universal)!==""&&((E=r==null?void 0:r.redirect)==null?void 0:E.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),je(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0}),je(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=XM(r,"topic")||"",i=decodeURIComponent(XM(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:Rn.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),je(this,"registerLinkModeListeners",async()=>{var r;if(RA()||mu()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),je(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:i}=n;return Object.keys(h9).includes(i.method)}),je(this,"getTVFParams",(r,n,i)=>{var s,o;try{const c=n.request.method,u=this.extractTxHashesFromResult(c,i);return Js(jn({correlationId:r,rpcMethods:[c],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:u})}catch(c){this.client.logger.warn("Error getting TVF params",c)}return{}}),je(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),je(this,"extractTxHashesFromResult",(r,n)=>{try{const i=h9[r];if(typeof n=="string")return[n];const s=n[i.key];if(Ih(s))return s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}isInitialized(){if(!this.initialized){const{message:e}=Qe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ui.message,e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):this.onRelayMessage(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(f1)?this.client.auth.authKeys.get(f1):{publicKey:void 0},c=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===Rn.link_mode?F0:su});try{Ap(c)?(this.client.core.history.set(r,c),this.onRelayEventRequest({topic:r,payload:c,attestation:i,transportType:s,encryptedId:tl(n)})):zh(c)?(await this.client.core.history.resolve(c),await this.onRelayEventResponse({topic:r,payload:c,transportType:s}),this.client.core.history.delete(r,c.id)):this.onRelayEventUnknownPayload({topic:r,payload:c,transportType:s})}catch(u){this.client.logger.error(u)}}registerExpirerEvents(){this.client.core.expirer.on(ra.expired,async e=>{const{topic:r,id:n}=gk(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Qe("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,Qe("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(rh.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(rh.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!ii(e,!1)){const{message:r}=Qe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Qe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Ql(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Qe("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!ii(e,!1)){const{message:r}=Qe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=Qe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Ql(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=Qe("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=Qe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(ii(e,!1)){const{message:r}=Qe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Qe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!kne(e)){const{message:r}=Qe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Qe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Ql(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=Qe("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}},fce=class extends qh{constructor(e,r){super(e,r,Qae,qA),this.core=e,this.logger=r}},pce=class extends qh{constructor(e,r){super(e,r,Xae,qA),this.core=e,this.logger=r}},gce=class extends qh{constructor(e,r){super(e,r,ece,qA,n=>n.id),this.core=e,this.logger=r}},yce=class extends qh{constructor(e,r){super(e,r,ice,Pw,()=>f1),this.core=e,this.logger=r}},mce=class extends qh{constructor(e,r){super(e,r,sce,Pw),this.core=e,this.logger=r}},bce=class extends qh{constructor(e,r){super(e,r,oce,Pw,n=>n.id),this.core=e,this.logger=r}};var wce=Object.defineProperty,vce=(t,e,r)=>e in t?wce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,f3=(t,e,r)=>vce(t,typeof e!="symbol"?e+"":e,r);let Ece=class{constructor(e,r){this.core=e,this.logger=r,f3(this,"authKeys"),f3(this,"pairingTopics"),f3(this,"requests"),this.authKeys=new yce(this.core,this.logger),this.pairingTopics=new mce(this.core,this.logger),this.requests=new bce(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}};var _ce=Object.defineProperty,Sce=(t,e,r)=>e in t?_ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Er=(t,e,r)=>Sce(t,typeof e!="symbol"?e+"":e,r);let Ace=class pP extends Yae{constructor(e){super(e),Er(this,"protocol",hP),Er(this,"version",dP),Er(this,"name",h3.name),Er(this,"metadata"),Er(this,"core"),Er(this,"logger"),Er(this,"events",new Ii.EventEmitter),Er(this,"engine"),Er(this,"session"),Er(this,"proposal"),Er(this,"pendingRequest"),Er(this,"auth"),Er(this,"signConfig"),Er(this,"on",(n,i)=>this.events.on(n,i)),Er(this,"once",(n,i)=>this.events.once(n,i)),Er(this,"off",(n,i)=>this.events.off(n,i)),Er(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),Er(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Er(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Er(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),Er(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),Er(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||h3.name,this.metadata=(e==null?void 0:e.metadata)||uk(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:yu(ul({level:(e==null?void 0:e.logger)||h3.logger}));this.core=(e==null?void 0:e.core)||new Kae(e),this.logger=Gr(r,this.name),this.session=new pce(this.core,this.logger),this.proposal=new fce(this.core,this.logger),this.pendingRequest=new gce(this.core,this.logger),this.engine=new dce(this),this.auth=new Ece(this.core,this.logger)}static async init(e){const r=new pP(e);return await r.initialize(),r}get context(){return bn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ye.toMiliseconds(ye.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var Rb={exports:{}},f9;function Ice(){return f9||(f9=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof lo<"u"&&lo,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var c=typeof s<"u"&&s||typeof self<"u"&&self||typeof lo<"u"&&lo||{},u={searchParams:"URLSearchParams"in c,iterable:"Symbol"in c&&"iterator"in Symbol,blob:"FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in c,arrayBuffer:"ArrayBuffer"in c};function h(b){return b&&DataView.prototype.isPrototypeOf(b)}if(u.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(b){return b&&f.indexOf(Object.prototype.toString.call(b))>-1};function E(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(b)||b==="")throw new TypeError('Invalid character in header field name: "'+b+'"');return b.toLowerCase()}function S(b){return typeof b!="string"&&(b=String(b)),b}function A(b){var m={next:function(){var M=b.shift();return{done:M===void 0,value:M}}};return u.iterable&&(m[Symbol.iterator]=function(){return m}),m}function I(b){this.map={},b instanceof I?b.forEach(function(m,M){this.append(M,m)},this):Array.isArray(b)?b.forEach(function(m){if(m.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+m.length);this.append(m[0],m[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(m){this.append(m,b[m])},this)}I.prototype.append=function(b,m){b=E(b),m=S(m);var M=this.map[b];this.map[b]=M?M+", "+m:m},I.prototype.delete=function(b){delete this.map[E(b)]},I.prototype.get=function(b){return b=E(b),this.has(b)?this.map[b]:null},I.prototype.has=function(b){return this.map.hasOwnProperty(E(b))},I.prototype.set=function(b,m){this.map[E(b)]=S(m)},I.prototype.forEach=function(b,m){for(var M in this.map)this.map.hasOwnProperty(M)&&b.call(m,this.map[M],M,this)},I.prototype.keys=function(){var b=[];return this.forEach(function(m,M){b.push(M)}),A(b)},I.prototype.values=function(){var b=[];return this.forEach(function(m){b.push(m)}),A(b)},I.prototype.entries=function(){var b=[];return this.forEach(function(m,M){b.push([M,m])}),A(b)},u.iterable&&(I.prototype[Symbol.iterator]=I.prototype.entries);function $(b){if(!b._noBody){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}}function L(b){return new Promise(function(m,M){b.onload=function(){m(b.result)},b.onerror=function(){M(b.error)}})}function k(b){var m=new FileReader,M=L(m);return m.readAsArrayBuffer(b),M}function U(b){var m=new FileReader,M=L(m),R=/charset=([A-Za-z0-9_-]+)/.exec(b.type),C=R?R[1]:"utf-8";return m.readAsText(b,C),M}function q(b){for(var m=new Uint8Array(b),M=new Array(m.length),R=0;R<m.length;R++)M[R]=String.fromCharCode(m[R]);return M.join("")}function j(b){if(b.slice)return b.slice(0);var m=new Uint8Array(b.byteLength);return m.set(new Uint8Array(b)),m.buffer}function z(){return this.bodyUsed=!1,this._initBody=function(b){this.bodyUsed=this.bodyUsed,this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:u.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:u.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():u.arrayBuffer&&u.blob&&h(b)?(this._bodyArrayBuffer=j(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||p(b))?this._bodyArrayBuffer=j(b):this._bodyText=b=Object.prototype.toString.call(b):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var b=$(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var b=$(this);return b||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(u.blob)return this.blob().then(k);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var b=$(this);if(b)return b;if(this._bodyBlob)return U(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(q(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(W)}),this.json=function(){return this.text().then(JSON.parse)},this}var V=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function G(b){var m=b.toUpperCase();return V.indexOf(m)>-1?m:b}function B(b,m){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');m=m||{};var M=m.body;if(b instanceof B){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,m.headers||(this.headers=new I(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!M&&b._bodyInit!=null&&(M=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new I(m.headers)),this.method=G(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal||function(){if("AbortController"in c){var v=new AbortController;return v.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&M)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(M),(this.method==="GET"||this.method==="HEAD")&&(m.cache==="no-store"||m.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var C=/\?/;this.url+=(C.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function W(b){var m=new FormData;return b.trim().split("&").forEach(function(M){if(M){var R=M.split("="),C=R.shift().replace(/\+/g," "),v=R.join("=").replace(/\+/g," ");m.append(decodeURIComponent(C),decodeURIComponent(v))}}),m}function D(b){var m=new I,M=b.replace(/\r?\n[\t ]+/g," ");return M.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var C=R.split(":"),v=C.shift().trim();if(v){var O=C.join(":").trim();try{m.append(v,O)}catch(x){console.warn("Response "+x.message)}}}),m}z.call(B.prototype);function _(b,m){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=m.statusText===void 0?"":""+m.statusText,this.headers=new I(m.headers),this.url=m.url||"",this._initBody(b)}z.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},_.error=function(){var b=new _(null,{status:200,statusText:""});return b.ok=!1,b.status=0,b.type="error",b};var w=[301,302,303,307,308];_.redirect=function(b,m){if(w.indexOf(m)===-1)throw new RangeError("Invalid status code");return new _(null,{status:m,headers:{location:b}})},o.DOMException=c.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,M){this.message=m,this.name=M;var R=Error(m);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function g(b,m){return new Promise(function(M,R){var C=new B(b,m);if(C.signal&&C.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var v=new XMLHttpRequest;function O(){v.abort()}v.onload=function(){var H={statusText:v.statusText,headers:D(v.getAllResponseHeaders()||"")};C.url.indexOf("file://")===0&&(v.status<200||v.status>599)?H.status=200:H.status=v.status,H.url="responseURL"in v?v.responseURL:H.headers.get("X-Request-URL");var Y="response"in v?v.response:v.responseText;setTimeout(function(){M(new _(Y,H))},0)},v.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},v.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},v.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function x(H){try{return H===""&&c.location.href?c.location.href:H}catch{return H}}if(v.open(C.method,x(C.url),!0),C.credentials==="include"?v.withCredentials=!0:C.credentials==="omit"&&(v.withCredentials=!1),"responseType"in v&&(u.blob?v.responseType="blob":u.arrayBuffer&&(v.responseType="arraybuffer")),m&&typeof m.headers=="object"&&!(m.headers instanceof I||c.Headers&&m.headers instanceof c.Headers)){var N=[];Object.getOwnPropertyNames(m.headers).forEach(function(H){N.push(E(H)),v.setRequestHeader(H,S(m.headers[H]))}),C.headers.forEach(function(H,Y){N.indexOf(Y)===-1&&v.setRequestHeader(Y,H)})}else C.headers.forEach(function(H,Y){v.setRequestHeader(Y,H)});C.signal&&(C.signal.addEventListener("abort",O),v.onreadystatechange=function(){v.readyState===4&&C.signal.removeEventListener("abort",O)}),v.send(typeof C._bodyInit>"u"?null:C._bodyInit)})}return g.polyfill=!0,c.fetch||(c.fetch=g,c.Headers=I,c.Request=B,c.Response=_),o.Headers=I,o.Request=B,o.Response=_,o.fetch=g,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(Rb,Rb.exports)),Rb.exports}var xce=Ice();const p9=yc(xce);var Cce=Object.defineProperty,Tce=Object.defineProperties,Mce=Object.getOwnPropertyDescriptors,g9=Object.getOwnPropertySymbols,Nce=Object.prototype.hasOwnProperty,Oce=Object.prototype.propertyIsEnumerable,y9=(t,e,r)=>e in t?Cce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,m9=(t,e)=>{for(var r in e||(e={}))Nce.call(e,r)&&y9(t,r,e[r]);if(g9)for(var r of g9(e))Oce.call(e,r)&&y9(t,r,e[r]);return t},b9=(t,e)=>Tce(t,Mce(e));const Rce={Accept:"application/json","Content-Type":"application/json"},Dce="POST",w9={headers:Rce,method:Dce},v9=10;let Zn=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new Ii.EventEmitter,this.isAvailable=!1,this.registering=!1,!LN(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=fc(e),n=await(await p9(this.url,b9(m9({},w9),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!LN(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=fc({id:1,jsonrpc:"2.0",method:"test",params:[]});await p9(e,b9(m9({},w9),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?ll(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Sp(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Hk(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>v9&&this.events.setMaxListeners(v9)}};const E9="error",$ce="wss://relay.walletconnect.org",kce="wc",Pce="universal_provider",_9=`${kce}@2:${Pce}:`,gP="https://rpc.walletconnect.org/v1/",vf="generic",Bce=`${gP}bundler`,aa={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Db=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lce(){this.__data__=[],this.size=0}var Uce=Lce;function jce(t,e){return t===e||t!==t&&e!==e}var Bw=jce,zce=Bw;function qce(t,e){for(var r=t.length;r--;)if(zce(t[r][0],e))return r;return-1}var Lw=qce,Fce=Lw,Hce=Array.prototype,Wce=Hce.splice;function Kce(t){var e=this.__data__,r=Fce(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Wce.call(e,r,1),--this.size,!0}var Vce=Kce,Gce=Lw;function Yce(t){var e=this.__data__,r=Gce(e,t);return r<0?void 0:e[r][1]}var Zce=Yce,Qce=Lw;function Xce(t){return Qce(this.__data__,t)>-1}var Jce=Xce,ele=Lw;function tle(t,e){var r=this.__data__,n=ele(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var rle=tle,nle=Uce,ile=Vce,sle=Zce,ole=Jce,ale=rle;function Ef(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ef.prototype.clear=nle,Ef.prototype.delete=ile,Ef.prototype.get=sle,Ef.prototype.has=ole,Ef.prototype.set=ale;var Uw=Ef,cle=Uw;function lle(){this.__data__=new cle,this.size=0}var ule=lle;function hle(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var dle=hle;function fle(t){return this.__data__.get(t)}var ple=fle;function gle(t){return this.__data__.has(t)}var yle=gle,mle=typeof Db=="object"&&Db&&Db.Object===Object&&Db,yP=mle,ble=yP,wle=typeof self=="object"&&self&&self.Object===Object&&self,vle=ble||wle||Function("return this")(),Ip=vle,Ele=Ip,_le=Ele.Symbol,mP=_le,S9=mP,bP=Object.prototype,Sle=bP.hasOwnProperty,Ale=bP.toString,Y0=S9?S9.toStringTag:void 0;function Ile(t){var e=Sle.call(t,Y0),r=t[Y0];try{t[Y0]=void 0;var n=!0}catch{}var i=Ale.call(t);return n&&(e?t[Y0]=r:delete t[Y0]),i}var xle=Ile,Cle=Object.prototype,Tle=Cle.toString;function Mle(t){return Tle.call(t)}var Nle=Mle,A9=mP,Ole=xle,Rle=Nle,Dle="[object Null]",$le="[object Undefined]",I9=A9?A9.toStringTag:void 0;function kle(t){return t==null?t===void 0?$le:Dle:I9&&I9 in Object(t)?Ole(t):Rle(t)}var jw=kle;function Ple(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Fh=Ple,Ble=jw,Lle=Fh,Ule="[object AsyncFunction]",jle="[object Function]",zle="[object GeneratorFunction]",qle="[object Proxy]";function Fle(t){if(!Lle(t))return!1;var e=Ble(t);return e==jle||e==zle||e==Ule||e==qle}var FA=Fle,Hle=Ip,Wle=Hle["__core-js_shared__"],Kle=Wle,p3=Kle,x9=function(){var t=/[^.]+$/.exec(p3&&p3.keys&&p3.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Vle(t){return!!x9&&x9 in t}var Gle=Vle,Yle=Function.prototype,Zle=Yle.toString;function Qle(t){if(t!=null){try{return Zle.call(t)}catch{}try{return t+""}catch{}}return""}var Xle=Qle,Jle=FA,eue=Gle,tue=Fh,rue=Xle,nue=/[\\^$.*+?()[\]{}|]/g,iue=/^\[object .+?Constructor\]$/,sue=Function.prototype,oue=Object.prototype,aue=sue.toString,cue=oue.hasOwnProperty,lue=RegExp("^"+aue.call(cue).replace(nue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function uue(t){if(!tue(t)||eue(t))return!1;var e=Jle(t)?lue:iue;return e.test(rue(t))}var hue=uue;function due(t,e){return t==null?void 0:t[e]}var fue=due,pue=hue,gue=fue;function yue(t,e){var r=gue(t,e);return pue(r)?r:void 0}var HA=yue,mue=HA,bue=Ip,wue=mue(bue,"Map"),wP=wue,vue=HA,Eue=vue(Object,"create"),zw=Eue,C9=zw;function _ue(){this.__data__=C9?C9(null):{},this.size=0}var Sue=_ue;function Aue(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Iue=Aue,xue=zw,Cue="__lodash_hash_undefined__",Tue=Object.prototype,Mue=Tue.hasOwnProperty;function Nue(t){var e=this.__data__;if(xue){var r=e[t];return r===Cue?void 0:r}return Mue.call(e,t)?e[t]:void 0}var Oue=Nue,Rue=zw,Due=Object.prototype,$ue=Due.hasOwnProperty;function kue(t){var e=this.__data__;return Rue?e[t]!==void 0:$ue.call(e,t)}var Pue=kue,Bue=zw,Lue="__lodash_hash_undefined__";function Uue(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Bue&&e===void 0?Lue:e,this}var jue=Uue,zue=Sue,que=Iue,Fue=Oue,Hue=Pue,Wue=jue;function _f(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}_f.prototype.clear=zue,_f.prototype.delete=que,_f.prototype.get=Fue,_f.prototype.has=Hue,_f.prototype.set=Wue;var Kue=_f,T9=Kue,Vue=Uw,Gue=wP;function Yue(){this.size=0,this.__data__={hash:new T9,map:new(Gue||Vue),string:new T9}}var Zue=Yue;function Que(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Xue=Que,Jue=Xue;function ehe(t,e){var r=t.__data__;return Jue(e)?r[typeof e=="string"?"string":"hash"]:r.map}var qw=ehe,the=qw;function rhe(t){var e=the(this,t).delete(t);return this.size-=e?1:0,e}var nhe=rhe,ihe=qw;function she(t){return ihe(this,t).get(t)}var ohe=she,ahe=qw;function che(t){return ahe(this,t).has(t)}var lhe=che,uhe=qw;function hhe(t,e){var r=uhe(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var dhe=hhe,fhe=Zue,phe=nhe,ghe=ohe,yhe=lhe,mhe=dhe;function Sf(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Sf.prototype.clear=fhe,Sf.prototype.delete=phe,Sf.prototype.get=ghe,Sf.prototype.has=yhe,Sf.prototype.set=mhe;var bhe=Sf,whe=Uw,vhe=wP,Ehe=bhe,_he=200;function She(t,e){var r=this.__data__;if(r instanceof whe){var n=r.__data__;if(!vhe||n.length<_he-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ehe(n)}return r.set(t,e),this.size=r.size,this}var Ahe=She,Ihe=Uw,xhe=ule,Che=dle,The=ple,Mhe=yle,Nhe=Ahe;function Af(t){var e=this.__data__=new Ihe(t);this.size=e.size}Af.prototype.clear=xhe,Af.prototype.delete=Che,Af.prototype.get=The,Af.prototype.has=Mhe,Af.prototype.set=Nhe;var Ohe=Af,Rhe=HA,Dhe=function(){try{var t=Rhe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),vP=Dhe,M9=vP;function $he(t,e,r){e=="__proto__"&&M9?M9(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var WA=$he,khe=WA,Phe=Bw;function Bhe(t,e,r){(r!==void 0&&!Phe(t[e],r)||r===void 0&&!(e in t))&&khe(t,e,r)}var EP=Bhe;function Lhe(t){return function(e,r,n){for(var i=-1,s=Object(e),o=n(e),c=o.length;c--;){var u=o[t?c:++i];if(r(s[u],u,s)===!1)break}return e}}var Uhe=Lhe,jhe=Uhe,zhe=jhe(),qhe=zhe,r4={exports:{}};(function(t,e){var r=Ip,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s?r.Buffer:void 0,c=o?o.allocUnsafe:void 0;function u(h,f){if(f)return h.slice();var p=h.length,E=c?c(p):new h.constructor(p);return h.copy(E),E}t.exports=u})(r4,r4.exports);var Fhe=Ip,Hhe=Fhe.Uint8Array,Whe=Hhe,N9=Whe;function Khe(t){var e=new t.constructor(t.byteLength);return new N9(e).set(new N9(t)),e}var Vhe=Khe,Ghe=Vhe;function Yhe(t,e){var r=e?Ghe(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var Zhe=Yhe;function Qhe(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Xhe=Qhe,Jhe=Fh,O9=Object.create,ede=function(){function t(){}return function(e){if(!Jhe(e))return{};if(O9)return O9(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),tde=ede;function rde(t,e){return function(r){return t(e(r))}}var nde=rde,ide=nde,sde=ide(Object.getPrototypeOf,Object),_P=sde,ode=Object.prototype;function ade(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ode;return t===r}var SP=ade,cde=tde,lde=_P,ude=SP;function hde(t){return typeof t.constructor=="function"&&!ude(t)?cde(lde(t)):{}}var dde=hde;function fde(t){return t!=null&&typeof t=="object"}var Hy=fde,pde=jw,gde=Hy,yde="[object Arguments]";function mde(t){return gde(t)&&pde(t)==yde}var bde=mde,R9=bde,wde=Hy,AP=Object.prototype,vde=AP.hasOwnProperty,Ede=AP.propertyIsEnumerable,_de=R9(function(){return arguments}())?R9:function(t){return wde(t)&&vde.call(t,"callee")&&!Ede.call(t,"callee")},IP=_de,Sde=Array.isArray,xP=Sde,Ade=9007199254740991;function Ide(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Ade}var CP=Ide,xde=FA,Cde=CP;function Tde(t){return t!=null&&Cde(t.length)&&!xde(t)}var KA=Tde,Mde=KA,Nde=Hy;function Ode(t){return Nde(t)&&Mde(t)}var Rde=Ode,K1={exports:{}};function Dde(){return!1}var $de=Dde;(function(t,e){var r=Ip,n=$de,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,c=o?r.Buffer:void 0,u=c?c.isBuffer:void 0,h=u||n;t.exports=h})(K1,K1.exports);var kde=jw,Pde=_P,Bde=Hy,Lde="[object Object]",Ude=Function.prototype,jde=Object.prototype,TP=Ude.toString,zde=jde.hasOwnProperty,qde=TP.call(Object);function Fde(t){if(!Bde(t)||kde(t)!=Lde)return!1;var e=Pde(t);if(e===null)return!0;var r=zde.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&TP.call(r)==qde}var Hde=Fde,Wde=jw,Kde=CP,Vde=Hy,Gde="[object Arguments]",Yde="[object Array]",Zde="[object Boolean]",Qde="[object Date]",Xde="[object Error]",Jde="[object Function]",efe="[object Map]",tfe="[object Number]",rfe="[object Object]",nfe="[object RegExp]",ife="[object Set]",sfe="[object String]",ofe="[object WeakMap]",afe="[object ArrayBuffer]",cfe="[object DataView]",lfe="[object Float32Array]",ufe="[object Float64Array]",hfe="[object Int8Array]",dfe="[object Int16Array]",ffe="[object Int32Array]",pfe="[object Uint8Array]",gfe="[object Uint8ClampedArray]",yfe="[object Uint16Array]",mfe="[object Uint32Array]",On={};On[lfe]=On[ufe]=On[hfe]=On[dfe]=On[ffe]=On[pfe]=On[gfe]=On[yfe]=On[mfe]=!0,On[Gde]=On[Yde]=On[afe]=On[Zde]=On[cfe]=On[Qde]=On[Xde]=On[Jde]=On[efe]=On[tfe]=On[rfe]=On[nfe]=On[ife]=On[sfe]=On[ofe]=!1;function bfe(t){return Vde(t)&&Kde(t.length)&&!!On[Wde(t)]}var wfe=bfe;function vfe(t){return function(e){return t(e)}}var Efe=vfe,n4={exports:{}};(function(t,e){var r=yP,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s&&r.process,c=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();t.exports=c})(n4,n4.exports);var _fe=wfe,Sfe=Efe,D9=n4.exports,$9=D9&&D9.isTypedArray,Afe=$9?Sfe($9):_fe,MP=Afe;function Ife(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var NP=Ife,xfe=WA,Cfe=Bw,Tfe=Object.prototype,Mfe=Tfe.hasOwnProperty;function Nfe(t,e,r){var n=t[e];(!(Mfe.call(t,e)&&Cfe(n,r))||r===void 0&&!(e in t))&&xfe(t,e,r)}var Ofe=Nfe,Rfe=Ofe,Dfe=WA;function $fe(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var c=e[s],u=n?n(r[c],t[c],c,r,t):void 0;u===void 0&&(u=t[c]),i?Dfe(r,c,u):Rfe(r,c,u)}return r}var kfe=$fe;function Pfe(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Bfe=Pfe,Lfe=9007199254740991,Ufe=/^(?:0|[1-9]\d*)$/;function jfe(t,e){var r=typeof t;return e=e??Lfe,!!e&&(r=="number"||r!="symbol"&&Ufe.test(t))&&t>-1&&t%1==0&&t<e}var OP=jfe,zfe=Bfe,qfe=IP,Ffe=xP,Hfe=K1.exports,Wfe=OP,Kfe=MP,Vfe=Object.prototype,Gfe=Vfe.hasOwnProperty;function Yfe(t,e){var r=Ffe(t),n=!r&&qfe(t),i=!r&&!n&&Hfe(t),s=!r&&!n&&!i&&Kfe(t),o=r||n||i||s,c=o?zfe(t.length,String):[],u=c.length;for(var h in t)(e||Gfe.call(t,h))&&!(o&&(h=="length"||i&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||Wfe(h,u)))&&c.push(h);return c}var Zfe=Yfe;function Qfe(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Xfe=Qfe,Jfe=Fh,epe=SP,tpe=Xfe,rpe=Object.prototype,npe=rpe.hasOwnProperty;function ipe(t){if(!Jfe(t))return tpe(t);var e=epe(t),r=[];for(var n in t)n=="constructor"&&(e||!npe.call(t,n))||r.push(n);return r}var spe=ipe,ope=Zfe,ape=spe,cpe=KA;function lpe(t){return cpe(t)?ope(t,!0):ape(t)}var RP=lpe,upe=kfe,hpe=RP;function dpe(t){return upe(t,hpe(t))}var fpe=dpe,k9=EP,ppe=r4.exports,gpe=Zhe,ype=Xhe,mpe=dde,P9=IP,B9=xP,bpe=Rde,wpe=K1.exports,vpe=FA,Epe=Fh,_pe=Hde,Spe=MP,L9=NP,Ape=fpe;function Ipe(t,e,r,n,i,s,o){var c=L9(t,r),u=L9(e,r),h=o.get(u);if(h){k9(t,r,h);return}var f=s?s(c,u,r+"",t,e,o):void 0,p=f===void 0;if(p){var E=B9(u),S=!E&&wpe(u),A=!E&&!S&&Spe(u);f=u,E||S||A?B9(c)?f=c:bpe(c)?f=ype(c):S?(p=!1,f=ppe(u,!0)):A?(p=!1,f=gpe(u,!0)):f=[]:_pe(u)||P9(u)?(f=c,P9(c)?f=Ape(c):(!Epe(c)||vpe(c))&&(f=mpe(u))):p=!1}p&&(o.set(u,f),i(f,u,n,s,o),o.delete(u)),k9(t,r,f)}var xpe=Ipe,Cpe=Ohe,Tpe=EP,Mpe=qhe,Npe=xpe,Ope=Fh,Rpe=RP,Dpe=NP;function DP(t,e,r,n,i){t!==e&&Mpe(e,function(s,o){if(i||(i=new Cpe),Ope(s))Npe(t,e,o,r,DP,n,i);else{var c=n?n(Dpe(t,o),s,o+"",t,e,i):void 0;c===void 0&&(c=s),Tpe(t,o,c)}},Rpe)}var $pe=DP;function kpe(t){return t}var $P=kpe;function Ppe(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Bpe=Ppe,Lpe=Bpe,U9=Math.max;function Upe(t,e,r){return e=U9(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,s=U9(n.length-e,0),o=Array(s);++i<s;)o[i]=n[e+i];i=-1;for(var c=Array(e+1);++i<e;)c[i]=n[i];return c[e]=r(o),Lpe(t,this,c)}}var jpe=Upe;function zpe(t){return function(){return t}}var qpe=zpe,Fpe=qpe,j9=vP,Hpe=$P,Wpe=j9?function(t,e){return j9(t,"toString",{configurable:!0,enumerable:!1,value:Fpe(e),writable:!0})}:Hpe,Kpe=Wpe,Vpe=800,Gpe=16,Ype=Date.now;function Zpe(t){var e=0,r=0;return function(){var n=Ype(),i=Gpe-(n-r);if(r=n,i>0){if(++e>=Vpe)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Qpe=Zpe,Xpe=Kpe,Jpe=Qpe,e0e=Jpe(Xpe),t0e=e0e,r0e=$P,n0e=jpe,i0e=t0e;function s0e(t,e){return i0e(n0e(t,e,r0e),t+"")}var o0e=s0e,a0e=Bw,c0e=KA,l0e=OP,u0e=Fh;function h0e(t,e,r){if(!u0e(r))return!1;var n=typeof e;return(n=="number"?c0e(r)&&l0e(e,r.length):n=="string"&&e in r)?a0e(r[e],t):!1}var d0e=h0e,f0e=o0e,p0e=d0e;function g0e(t){return f0e(function(e,r){var n=-1,i=r.length,s=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&p0e(r[0],r[1],o)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var c=r[n];c&&t(e,c,n,s)}return e})}var y0e=g0e,m0e=$pe,b0e=y0e,w0e=b0e(function(t,e,r){m0e(t,e,r)}),v0e=w0e,E0e=Object.defineProperty,_0e=Object.defineProperties,S0e=Object.getOwnPropertyDescriptors,z9=Object.getOwnPropertySymbols,A0e=Object.prototype.hasOwnProperty,I0e=Object.prototype.propertyIsEnumerable,q9=(t,e,r)=>e in t?E0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$b=(t,e)=>{for(var r in e||(e={}))A0e.call(e,r)&&q9(t,r,e[r]);if(z9)for(var r of z9(e))I0e.call(e,r)&&q9(t,r,e[r]);return t},x0e=(t,e)=>_0e(t,S0e(e));function Lo(t,e,r){var n;const i=zf(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${gP}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function Hh(t){return t.includes(":")?t.split(":")[1]:t}function kP(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function C0e(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function g3(t={},e={}){const r=F9(t),n=F9(e);return v0e(r,n)}function F9(t){var e,r,n,i;const s={};if(!Zg(t))return s;for(const[o,c]of Object.entries(t)){const u=UA(o)?[o]:c.chains,h=c.methods||[],f=c.events||[],p=c.rpcMap||{},E=dg(o);s[E]=x0e($b($b({},s[E]),c),{chains:u1(u,(e=s[E])==null?void 0:e.chains),methods:u1(h,(r=s[E])==null?void 0:r.methods),events:u1(f,(n=s[E])==null?void 0:n.events),rpcMap:$b($b({},p),(i=s[E])==null?void 0:i.rpcMap)})}return s}function T0e(t){return t.includes(":")?t.split(":")[2]:t}function H9(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],c=UA(r)?[r]:n.chains?n.chains:kP(n.accounts);e[r]={chains:c,methods:i,events:s,accounts:o}}return e}function y3(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const PP={},Br=t=>PP[t],m3=(t,e)=>{PP[t]=e};var M0e=Object.defineProperty,N0e=(t,e,r)=>e in t?M0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Fd=(t,e,r)=>N0e(t,typeof e!="symbol"?e+"":e,r);class O0e{constructor(e){Fd(this,"name","polkadot"),Fd(this,"client"),Fd(this,"httpProviders"),Fd(this,"events"),Fd(this,"namespace"),Fd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Hh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Lo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Br("disableProviderPing")))}}var R0e=Object.defineProperty,D0e=Object.defineProperties,$0e=Object.getOwnPropertyDescriptors,W9=Object.getOwnPropertySymbols,k0e=Object.prototype.hasOwnProperty,P0e=Object.prototype.propertyIsEnumerable,i4=(t,e,r)=>e in t?R0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,K9=(t,e)=>{for(var r in e||(e={}))k0e.call(e,r)&&i4(t,r,e[r]);if(W9)for(var r of W9(e))P0e.call(e,r)&&i4(t,r,e[r]);return t},V9=(t,e)=>D0e(t,$0e(e)),Hd=(t,e,r)=>i4(t,typeof e!="symbol"?e+"":e,r);class B0e{constructor(e){Hd(this,"name","eip155"),Hd(this,"client"),Hd(this,"chainId"),Hd(this,"namespace"),Hd(this,"httpProviders"),Hd(this,"events"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Lo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Br("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(Hh(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),c=((i=o==null?void 0:o.sessionProperties)==null?void 0:i.capabilities)||{};if(c!=null&&c[s])return c==null?void 0:c[s];const u=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:V9(K9({},o.sessionProperties||{}),{capabilities:V9(K9({},c||{}),{[s]:u})})})}catch(h){console.warn("Failed to update session with capabilities",h)}return u}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const c=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(c,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,c)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(c){console.warn("Failed to fetch call status from custom bundler",c,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Us("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${Bce}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var L0e=Object.defineProperty,U0e=(t,e,r)=>e in t?L0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wd=(t,e,r)=>U0e(t,typeof e!="symbol"?e+"":e,r);class j0e{constructor(e){Wd(this,"name","solana"),Wd(this,"client"),Wd(this,"httpProviders"),Wd(this,"events"),Wd(this,"namespace"),Wd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Hh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Lo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Br("disableProviderPing")))}}var z0e=Object.defineProperty,q0e=(t,e,r)=>e in t?z0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kd=(t,e,r)=>q0e(t,typeof e!="symbol"?e+"":e,r);class F0e{constructor(e){Kd(this,"name","cosmos"),Kd(this,"client"),Kd(this,"httpProviders"),Kd(this,"events"),Kd(this,"namespace"),Kd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Hh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Lo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Br("disableProviderPing")))}}var H0e=Object.defineProperty,W0e=(t,e,r)=>e in t?H0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vd=(t,e,r)=>W0e(t,typeof e!="symbol"?e+"":e,r);class K0e{constructor(e){Vd(this,"name","algorand"),Vd(this,"client"),Vd(this,"httpProviders"),Vd(this,"events"),Vd(this,"namespace"),Vd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Lo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Lo(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Bn(new Zn(n,Br("disableProviderPing")))}}var V0e=Object.defineProperty,G0e=(t,e,r)=>e in t?V0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Gd=(t,e,r)=>G0e(t,typeof e!="symbol"?e+"":e,r);class Y0e{constructor(e){Gd(this,"name","cip34"),Gd(this,"client"),Gd(this,"httpProviders"),Gd(this,"events"),Gd(this,"namespace"),Gd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=Hh(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Br("disableProviderPing")))}}var Z0e=Object.defineProperty,Q0e=(t,e,r)=>e in t?Z0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yd=(t,e,r)=>Q0e(t,typeof e!="symbol"?e+"":e,r);class X0e{constructor(e){Yd(this,"name","elrond"),Yd(this,"client"),Yd(this,"httpProviders"),Yd(this,"events"),Yd(this,"namespace"),Yd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Hh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Lo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Br("disableProviderPing")))}}var J0e=Object.defineProperty,ege=(t,e,r)=>e in t?J0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zd=(t,e,r)=>ege(t,typeof e!="symbol"?e+"":e,r);class tge{constructor(e){Zd(this,"name","multiversx"),Zd(this,"client"),Zd(this,"httpProviders"),Zd(this,"events"),Zd(this,"namespace"),Zd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Hh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Lo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Br("disableProviderPing")))}}var rge=Object.defineProperty,nge=(t,e,r)=>e in t?rge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qd=(t,e,r)=>nge(t,typeof e!="symbol"?e+"":e,r);class ige{constructor(e){Qd(this,"name","near"),Qd(this,"client"),Qd(this,"httpProviders"),Qd(this,"events"),Qd(this,"namespace"),Qd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Lo(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Lo(e,this.namespace);return typeof n>"u"?void 0:new Bn(new Zn(n,Br("disableProviderPing")))}}var sge=Object.defineProperty,oge=(t,e,r)=>e in t?sge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xd=(t,e,r)=>oge(t,typeof e!="symbol"?e+"":e,r);class age{constructor(e){Xd(this,"name","tezos"),Xd(this,"client"),Xd(this,"httpProviders"),Xd(this,"events"),Xd(this,"namespace"),Xd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Lo(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Lo(e,this.namespace);return typeof n>"u"?void 0:new Bn(new Zn(n))}}var cge=Object.defineProperty,lge=(t,e,r)=>e in t?cge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jd=(t,e,r)=>lge(t,typeof e!="symbol"?e+"":e,r);class uge{constructor(e){Jd(this,"name",vf),Jd(this,"client"),Jd(this,"httpProviders"),Jd(this,"events"),Jd(this,"namespace"),Jd(this,"chainId"),this.namespace=e.namespace,this.events=Br("events"),this.client=Br("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(aa.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=zf(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Lo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Br("disableProviderPing")))}}var hge=Object.defineProperty,dge=Object.defineProperties,fge=Object.getOwnPropertyDescriptors,G9=Object.getOwnPropertySymbols,pge=Object.prototype.hasOwnProperty,gge=Object.prototype.propertyIsEnumerable,s4=(t,e,r)=>e in t?hge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kb=(t,e)=>{for(var r in e||(e={}))pge.call(e,r)&&s4(t,r,e[r]);if(G9)for(var r of G9(e))gge.call(e,r)&&s4(t,r,e[r]);return t},b3=(t,e)=>dge(t,fge(e)),Ea=(t,e,r)=>s4(t,typeof e!="symbol"?e+"":e,r);class VA{constructor(e){Ea(this,"client"),Ea(this,"namespaces"),Ea(this,"optionalNamespaces"),Ea(this,"sessionProperties"),Ea(this,"events",new bp),Ea(this,"rpcProviders",{}),Ea(this,"session"),Ea(this,"providerOpts"),Ea(this,"logger"),Ea(this,"uri"),Ea(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:yu(ul({level:(e==null?void 0:e.logger)||E9})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new VA(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:kb({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,bu(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:un("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=H9(this.session.namespaces);this.namespaces=g3(this.namespaces,o),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=H9(i.namespaces);return this.namespaces=g3(this.namespaces,s),this.persist("namespaces",this.namespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===vf?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Ih(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Ace.init({core:this.providerOpts.core,logger:this.providerOpts.logger||E9,relayUrl:this.providerOpts.relayUrl||$ce,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>dg(r)))];m3("client",this.client),m3("events",this.events),m3("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=C0e(r,this.session),i=kP(n),s=g3(this.namespaces,this.optionalNamespaces),o=b3(kb({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new B0e({namespace:o});break;case"algorand":this.rpcProviders[r]=new K0e({namespace:o});break;case"solana":this.rpcProviders[r]=new j0e({namespace:o});break;case"cosmos":this.rpcProviders[r]=new F0e({namespace:o});break;case"polkadot":this.rpcProviders[r]=new O0e({namespace:o});break;case"cip34":this.rpcProviders[r]=new Y0e({namespace:o});break;case"elrond":this.rpcProviders[r]=new X0e({namespace:o});break;case"multiversx":this.rpcProviders[r]=new tge({namespace:o});break;case"near":this.rpcProviders[r]=new ige({namespace:o});break;case"tezos":this.rpcProviders[r]=new age({namespace:o});break;default:this.rpcProviders[vf]?this.rpcProviders[vf].updateNamespace(o):this.rpcProviders[vf]=new uge({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:n}=r;if(n.name==="accountsChanged"){const i=n.data;i&&Ih(i)&&this.events.emit("accountsChanged",i.map(T0e))}else if(n.name==="chainChanged"){const i=r.chainId,s=r.event.data,o=dg(i),c=y3(i)!==y3(s)?`${o}:${y3(s)}`:i;this.onChainChanged(c)}else this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n;const{namespaces:i}=r,s=(n=this.client)==null?void 0:n.session.get(e);this.session=b3(kb({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",b3(kb({},un("USER_DISCONNECTED")),{data:e.topic}))}),this.on(aa.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[vf]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.persist("namespaces",r),this.persist("optionalNamespaces",n)}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>dg(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=dg(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);i&&(r||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${_9}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${_9}/${e}`)}}const yge=VA,BP={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(r=>r.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]}};var mge=20,bge=1,xh=1e6,Y9=1e6,wge=-7,vge=21,Ege=!1,Wy="[big.js] ",Wh=Wy+"Invalid ",Fw=Wh+"decimal places",_ge=Wh+"rounding mode",LP=Wy+"Division by zero",rn={},hc=void 0,Sge=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function UP(){function t(e){var r=this;if(!(r instanceof t))return e===hc?UP():new t(e);if(e instanceof t)r.s=e.s,r.e=e.e,r.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Wh+"value");e=e===0&&1/e<0?"-0":String(e)}Age(r,e)}r.constructor=t}return t.prototype=rn,t.DP=mge,t.RM=bge,t.NE=wge,t.PE=vge,t.strict=Ege,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Age(t,e){var r,n,i;if(!Sge.test(e))throw Error(Wh+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),i=e.length,n=0;n<i&&e.charAt(n)=="0";)++n;if(n==i)t.c=[t.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(t.e=r-n-1,t.c=[],r=0;n<=i;)t.c[r++]=+e.charAt(n++)}return t}function Kh(t,e,r,n){var i=t.c;if(r===hc&&(r=t.constructor.RM),r!==0&&r!==1&&r!==2&&r!==3)throw Error(_ge);if(e<1)n=r===3&&(n||!!i[0])||e===0&&(r===1&&i[0]>=5||r===2&&(i[0]>5||i[0]===5&&(n||i[1]!==hc))),i.length=1,n?(t.e=t.e-e+1,i[0]=1):i[0]=t.e=0;else if(e<i.length){if(n=r===1&&i[e]>=5||r===2&&(i[e]>5||i[e]===5&&(n||i[e+1]!==hc||i[e-1]&1))||r===3&&(n||!!i[0]),i.length=e,n){for(;++i[--e]>9;)if(i[e]=0,e===0){++t.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return t}function Vh(t,e,r){var n=t.e,i=t.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return t.s<0&&r?"-"+i:i}rn.abs=function(){var t=new this.constructor(this);return t.s=1,t};rn.cmp=function(t){var e,r=this,n=r.c,i=(t=new r.constructor(t)).c,s=r.s,o=t.s,c=r.e,u=t.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,c!=u)return c>u^e?1:-1;for(o=(c=n.length)<(u=i.length)?c:u,s=-1;++s<o;)if(n[s]!=i[s])return n[s]>i[s]^e?1:-1;return c==u?0:c>u^e?1:-1};rn.div=function(t){var e=this,r=e.constructor,n=e.c,i=(t=new r(t)).c,s=e.s==t.s?1:-1,o=r.DP;if(o!==~~o||o<0||o>xh)throw Error(Fw);if(!i[0])throw Error(LP);if(!n[0])return t.s=s,t.c=[t.e=0],t;var c,u,h,f,p,E=i.slice(),S=c=i.length,A=n.length,I=n.slice(0,c),$=I.length,L=t,k=L.c=[],U=0,q=o+(L.e=e.e-t.e)+1;for(L.s=s,s=q<0?0:q,E.unshift(0);$++<c;)I.push(0);do{for(h=0;h<10;h++){if(c!=($=I.length))f=c>$?1:-1;else for(p=-1,f=0;++p<c;)if(i[p]!=I[p]){f=i[p]>I[p]?1:-1;break}if(f<0){for(u=$==c?i:E;$;){if(I[--$]<u[$]){for(p=$;p&&!I[--p];)I[p]=9;--I[p],I[$]+=10}I[$]-=u[$]}for(;!I[0];)I.shift()}else break}k[U++]=f?h:++h,I[0]&&f?I[$]=n[S]||0:I=[n[S]]}while((S++<A||I[0]!==hc)&&s--);return!k[0]&&U!=1&&(k.shift(),L.e--,q--),U>q&&Kh(L,q,r.RM,I[0]!==hc),L};rn.eq=function(t){return this.cmp(t)===0};rn.gt=function(t){return this.cmp(t)>0};rn.gte=function(t){return this.cmp(t)>-1};rn.lt=function(t){return this.cmp(t)<0};rn.lte=function(t){return this.cmp(t)<1};rn.minus=rn.sub=function(t){var e,r,n,i,s=this,o=s.constructor,c=s.s,u=(t=new o(t)).s;if(c!=u)return t.s=-u,s.plus(t);var h=s.c.slice(),f=s.e,p=t.c,E=t.e;if(!h[0]||!p[0])return p[0]?t.s=-u:h[0]?t=new o(s):t.s=1,t;if(c=f-E){for((i=c<0)?(c=-c,n=h):(E=f,n=p),n.reverse(),u=c;u--;)n.push(0);n.reverse()}else for(r=((i=h.length<p.length)?h:p).length,c=u=0;u<r;u++)if(h[u]!=p[u]){i=h[u]<p[u];break}if(i&&(n=h,h=p,p=n,t.s=-t.s),(u=(r=p.length)-(e=h.length))>0)for(;u--;)h[e++]=0;for(u=e;r>c;){if(h[--r]<p[r]){for(e=r;e&&!h[--e];)h[e]=9;--h[e],h[r]+=10}h[r]-=p[r]}for(;h[--u]===0;)h.pop();for(;h[0]===0;)h.shift(),--E;return h[0]||(t.s=1,h=[E=0]),t.c=h,t.e=E,t};rn.mod=function(t){var e,r=this,n=r.constructor,i=r.s,s=(t=new n(t)).s;if(!t.c[0])throw Error(LP);return r.s=t.s=1,e=t.cmp(r)==1,r.s=i,t.s=s,e?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(t),n.DP=i,n.RM=s,this.minus(r.times(t)))};rn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};rn.plus=rn.add=function(t){var e,r,n,i=this,s=i.constructor;if(t=new s(t),i.s!=t.s)return t.s=-t.s,i.minus(t);var o=i.e,c=i.c,u=t.e,h=t.c;if(!c[0]||!h[0])return h[0]||(c[0]?t=new s(i):t.s=i.s),t;if(c=c.slice(),e=o-u){for(e>0?(u=o,n=h):(e=-e,n=c),n.reverse();e--;)n.push(0);n.reverse()}for(c.length-h.length<0&&(n=h,h=c,c=n),e=h.length,r=0;e;c[e]%=10)r=(c[--e]=c[e]+h[e]+r)/10|0;for(r&&(c.unshift(r),++u),e=c.length;c[--e]===0;)c.pop();return t.c=c,t.e=u,t};rn.pow=function(t){var e=this,r=new e.constructor("1"),n=r,i=t<0;if(t!==~~t||t<-Y9||t>Y9)throw Error(Wh+"exponent");for(i&&(t=-t);t&1&&(n=n.times(e)),t>>=1,!!t;)e=e.times(e);return i?r.div(n):n};rn.prec=function(t,e){if(t!==~~t||t<1||t>xh)throw Error(Wh+"precision");return Kh(new this.constructor(this),t,e)};rn.round=function(t,e){if(t===hc)t=0;else if(t!==~~t||t<-xh||t>xh)throw Error(Fw);return Kh(new this.constructor(this),t+this.e+1,e)};rn.sqrt=function(){var t,e,r,n=this,i=n.constructor,s=n.s,o=n.e,c=new i("0.5");if(!n.c[0])return new i(n);if(s<0)throw Error(Wy+"No square root");s=Math.sqrt(+Vh(n,!0,!0)),s===0||s===1/0?(e=n.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):t=new i(s+""),o=t.e+(i.DP+=4);do r=t,t=c.times(r.plus(n.div(r)));while(r.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Kh(t,(i.DP-=4)+t.e+1,i.RM)};rn.times=rn.mul=function(t){var e,r=this,n=r.constructor,i=r.c,s=(t=new n(t)).c,o=i.length,c=s.length,u=r.e,h=t.e;if(t.s=r.s==t.s?1:-1,!i[0]||!s[0])return t.c=[t.e=0],t;for(t.e=u+h,o<c&&(e=i,i=s,s=e,h=o,o=c,c=h),e=new Array(h=o+c);h--;)e[h]=0;for(u=c;u--;){for(c=0,h=o+u;h>u;)c=e[h]+s[u]*i[h-u-1]+c,e[h--]=c%10,c=c/10|0;e[h]=c}for(c?++t.e:e.shift(),u=e.length;!e[--u];)e.pop();return t.c=e,t};rn.toExponential=function(t,e){var r=this,n=r.c[0];if(t!==hc){if(t!==~~t||t<0||t>xh)throw Error(Fw);for(r=Kh(new r.constructor(r),++t,e);r.c.length<t;)r.c.push(0)}return Vh(r,!0,!!n)};rn.toFixed=function(t,e){var r=this,n=r.c[0];if(t!==hc){if(t!==~~t||t<0||t>xh)throw Error(Fw);for(r=Kh(new r.constructor(r),t+r.e+1,e),t=t+r.e+1;r.c.length<t;)r.c.push(0)}return Vh(r,!1,!!n)};rn[Symbol.for("nodejs.util.inspect.custom")]=rn.toJSON=rn.toString=function(){var t=this,e=t.constructor;return Vh(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};rn.toNumber=function(){var t=+Vh(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(Wy+"Imprecise conversion");return t};rn.toPrecision=function(t,e){var r=this,n=r.constructor,i=r.c[0];if(t!==hc){if(t!==~~t||t<1||t>xh)throw Error(Wh+"precision");for(r=Kh(new n(r),t,e);r.c.length<t;)r.c.push(0)}return Vh(r,t<=r.e||r.e<=n.NE||r.e>=n.PE,!!i)};rn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(Wy+"valueOf disallowed");return Vh(t,t.e<=e.NE||t.e>=e.PE,!0)};var Z0=UP();const Pb={bigNumber(t){return t?new Z0(t):new Z0(0)},multiply(t,e){if(t===void 0||e===void 0)return new Z0(0);const r=new Z0(t),n=new Z0(e);return r.times(n)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},Ige=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],xge=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],Cge=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],kt={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"},Tge={getERC20Abi:t=>kt.USDT_CONTRACT_ADDRESSES.includes(t)?Cge:Ige,getSwapAbi:()=>xge},Wl={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[r,n,i]=e;if(!r||!n||!i)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:r,chainId:n,address:i}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[r,n]=e;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:r,chainId:n}}},dr={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache"};function w3(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const er={setItem(t,e){pg()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(pg())return localStorage.getItem(t)||void 0},removeItem(t){pg()&&localStorage.removeItem(t)},clear(){pg()&&localStorage.clear()}};function pg(){return typeof window<"u"&&typeof localStorage<"u"}function ou(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Mge=Symbol(),Z9=Object.getPrototypeOf,o4=new WeakMap,Nge=t=>t&&(o4.has(t)?o4.get(t):Z9(t)===Object.prototype||Z9(t)===Array.prototype),Oge=t=>Nge(t)&&t[Mge]||null,Q9=(t,e=!0)=>{o4.set(t,e)},V1={},v3=t=>typeof t=="object"&&t!==null,Xl=new WeakMap,gg=new WeakSet,Rge=(t=Object.is,e=(h,f)=>new Proxy(h,f),r=h=>v3(h)&&!gg.has(h)&&(Array.isArray(h)||!(Symbol.iterator in h))&&!(h instanceof WeakMap)&&!(h instanceof WeakSet)&&!(h instanceof Error)&&!(h instanceof Number)&&!(h instanceof Date)&&!(h instanceof String)&&!(h instanceof RegExp)&&!(h instanceof ArrayBuffer),n=h=>{switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:throw h}},i=new WeakMap,s=(h,f,p=n)=>{const E=i.get(h);if((E==null?void 0:E[0])===f)return E[1];const S=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h));return Q9(S,!0),i.set(h,[f,S]),Reflect.ownKeys(h).forEach(A=>{if(Object.getOwnPropertyDescriptor(S,A))return;const I=Reflect.get(h,A),{enumerable:$}=Reflect.getOwnPropertyDescriptor(h,A),L={value:I,enumerable:$,configurable:!0};if(gg.has(I))Q9(I,!1);else if(I instanceof Promise)delete L.value,L.get=()=>p(I);else if(Xl.has(I)){const[k,U]=Xl.get(I);L.value=s(k,U(),p)}Object.defineProperty(S,A,L)}),Object.preventExtensions(S)},o=new WeakMap,c=[1,1],u=h=>{if(!v3(h))throw new Error("object required");const f=o.get(h);if(f)return f;let p=c[0];const E=new Set,S=(B,W=++c[0])=>{p!==W&&(p=W,E.forEach(D=>D(B,W)))};let A=c[1];const I=(B=++c[1])=>(A!==B&&!E.size&&(A=B,L.forEach(([W])=>{const D=W[1](B);D>p&&(p=D)})),p),$=B=>(W,D)=>{const _=[...W];_[1]=[B,..._[1]],S(_,D)},L=new Map,k=(B,W)=>{if((V1?"production":void 0)!=="production"&&L.has(B))throw new Error("prop listener already exists");if(E.size){const D=W[3]($(B));L.set(B,[W,D])}else L.set(B,[W])},U=B=>{var W;const D=L.get(B);D&&(L.delete(B),(W=D[1])==null||W.call(D))},q=B=>(E.add(B),E.size===1&&L.forEach(([D,_],w)=>{if((V1?"production":void 0)!=="production"&&_)throw new Error("remove already exists");const g=D[3]($(w));L.set(w,[D,g])}),()=>{E.delete(B),E.size===0&&L.forEach(([D,_],w)=>{_&&(_(),L.set(w,[D]))})}),j=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h)),V=e(j,{deleteProperty(B,W){const D=Reflect.get(B,W);U(W);const _=Reflect.deleteProperty(B,W);return _&&S(["delete",[W],D]),_},set(B,W,D,_){const w=Reflect.has(B,W),g=Reflect.get(B,W,_);if(w&&(t(g,D)||o.has(D)&&t(g,o.get(D))))return!0;U(W),v3(D)&&(D=Oge(D)||D);let b=D;if(D instanceof Promise)D.then(m=>{D.status="fulfilled",D.value=m,S(["resolve",[W],m])}).catch(m=>{D.status="rejected",D.reason=m,S(["reject",[W],m])});else{!Xl.has(D)&&r(D)&&(b=u(D));const m=!gg.has(b)&&Xl.get(b);m&&k(W,m)}return Reflect.set(B,W,b,_),S(["set",[W],D,g]),!0}});o.set(h,V);const G=[j,I,s,q];return Xl.set(V,G),Reflect.ownKeys(h).forEach(B=>{const W=Object.getOwnPropertyDescriptor(h,B);"value"in W&&(V[B]=h[B],delete W.value,delete W.writable),Object.defineProperty(j,B,W)}),V})=>[u,Xl,gg,t,e,r,n,i,s,o,c],[Dge]=Rge();function Hn(t={}){return Dge(t)}function zs(t,e,r){const n=Xl.get(t);(V1?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");let i;const s=[],o=n[3];let c=!1;const h=o(f=>{s.push(f),i||(i=Promise.resolve().then(()=>{i=void 0,c&&e(s.splice(0))}))});return c=!0,()=>{c=!1,h()}}function Xg(t,e){const r=Xl.get(t);(V1?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),e)}function Ch(t){return gg.add(t),t}function zo(t,e,r,n){let i=t[e];return zs(t,()=>{const s=t[e];Object.is(i,s)||r(i=s)})}function $ge(t){const e=Hn({data:Array.from([]),has(r){return this.data.some(n=>n[0]===r)},set(r,n){const i=this.data.find(s=>s[0]===r);return i?i[1]=n:this.data.push([r,n]),this},get(r){var n;return(n=this.data.find(i=>i[0]===r))==null?void 0:n[1]},delete(r){const n=this.data.findIndex(i=>i[0]===r);return n===-1?!1:(this.data.splice(n,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(r){this.data.forEach(n=>{r(n[1],n[0],this)})},keys(){return this.data.map(r=>r[0]).values()},values(){return this.data.map(r=>r[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var X9={};const E3=(typeof process<"u"&&typeof X9<"u"?X9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",ho={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:E3,SECURE_SITE_DASHBOARD:`${E3}/dashboard`,SECURE_SITE_FAVICON:`${E3}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155","solana"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Ot={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ot.getActiveNamespace(),e=Ot.getActiveCaipNetworkId(),r=e?e.split(":")[1]:void 0,n=r?isNaN(Number(r))?r:Number(r):void 0;return{namespace:t,caipNetworkId:e,chainId:n}},setWalletConnectDeepLink({name:t,href:e}){try{er.setItem(dr.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=er.getItem(dr.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{er.removeItem(dr.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{er.setItem(dr.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{er.setItem(dr.ACTIVE_CAIP_NETWORK_ID,t),Ot.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return er.getItem(dr.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{er.removeItem(dr.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=w3(t);er.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ot.getRecentWallets();e.find(n=>n.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),er.setItem(dr.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=er.getItem(dr.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const r=w3(t);er.setItem(r,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return er.getItem(dr.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=w3(t);return er.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{er.setItem(dr.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return er.getItem(dr.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{er.removeItem(dr.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return er.getItem(dr.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var r;const t=er.getItem(dr.ACTIVE_CAIP_NETWORK_ID);return(r=t==null?void 0:t.split(":"))==null?void 0:r[1]},setConnectionStatus(t){try{er.setItem(dr.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return er.getItem(dr.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=er.getItem(dr.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));er.setItem(dr.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ot.getConnectedNamespaces();e.includes(t)||(e.push(t),Ot.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ot.getConnectedNamespaces(),r=e.indexOf(t);r>-1&&(e.splice(r,1),Ot.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return er.getItem(dr.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{er.setItem(dr.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{er.removeItem(dr.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=er.getItem(dr.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ot.getBalanceCache();er.setItem(dr.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const r=Ot.getBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.portfolio))return r.balance;Ot.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ot.getBalanceCache();e[t.caipAddress]=t,er.setItem(dr.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=er.getItem(dr.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ot.getBalanceCache();er.setItem(dr.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const r=Ot.getNativeBalanceCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.nativeBalance))return r;console.info("Discarding cache for address",t),Ot.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ot.getNativeBalanceCache();e[t.caipAddress]=t,er.setItem(dr.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=er.getItem(dr.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const r=Ot.getEnsCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.ens))return r.ens;Ot.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ot.getEnsCache();e[t.address]=t,er.setItem(dr.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ot.getEnsCache();er.setItem(dr.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=er.getItem(dr.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const r=Ot.getIdentityCache()[t];if(r&&!this.isCacheExpired(r.timestamp,this.cacheExpiry.identity))return r.identity;Ot.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ot.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},er.setItem(dr.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ot.getIdentityCache();er.setItem(dr.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{er.removeItem(dr.PORTFOLIO_CACHE),er.removeItem(dr.NATIVE_BALANCE_CACHE),er.removeItem(dr.ENS_CACHE),er.removeItem(dr.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}}},or={isMobile(){var t;return this.isClient()?!!((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return or.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ho.TEN_SEC_MS:!0},isAllowedRetry(t,e=ho.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},getPairingExpiry(){return Date.now()+ho.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let r;return(...n)=>{function i(){t(...n)}r&&clearTimeout(r),r=setTimeout(i,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e){if(or.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},formatUniversalUrl(t,e){if(!or.isHttpUrl(t))return this.formatNativeUrl(t,e);let r=t;r.endsWith("/")||(r=`${r}/`);const n=encodeURIComponent(e);return{redirect:`${r}wc?uri=${n}`,href:r}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ot.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,r){window==null||window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},returnOpenHref(t,e,r){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),r||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},async preloadImage(t){const e=new Promise((r,n)=>{const i=new Image;i.onload=r,i.onerror=n,i.crossOrigin="anonymous",i.src=t});return Promise.race([e,or.wait(2e3)])},formatBalance(t,e){let r="0.000";if(typeof t=="string"){const n=Number(t);if(n){const i=Math.floor(n*1e3)/1e3;i&&(r=i.toString())}}return`${r}${e?` ${e}`:""}`},formatBalance2(t,e){var n;let r;if(t==="0")r="0";else if(typeof t=="string"){const i=Number(t);i&&(r=(n=i.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:n[0])}return{value:r??"0",rest:r==="0"?"000":"",symbol:e}},getApiUrl(){return kt.W3M_API_URL},getBlockchainApiUrl(){return kt.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return kt.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,r;return typeof t=="string"?t:typeof((r=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:r.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const r={};return e&&t&&(t.forEach((n,i)=>{r[n]=i}),e.sort((n,i)=>{const s=r[n.id],o=r[i.id];return s!==void 0&&o!==void 0?s-o:s!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const r of t)e+=r.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[r,n]=e.split(".");return{dollars:r,pennies:n}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const r=new Set;return t.filter(n=>{const i=n[e];return r.has(i)?!1:(r.add(i),!0)})},generateSdkVersion(t,e,r){const i=t.length===0?ho.ADAPTER_TYPES.UNIVERSAL:t.map(s=>s.adapterType).join(",");return`${e}-${i}-${r}`},createAccount(t,e,r,n,i){return{namespace:t,address:e,type:r,publicKey:n,path:i}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),r=e[0];return e.filter(Boolean).length===3&&r in kt.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,r="state=";if(new URL(t).host==="auth.magic.link"){const i="provider_authorization_url=",s=t.substring(t.indexOf(i)+i.length),o=this.injectIntoUrl(decodeURIComponent(s),r,e);return t.replace(s,encodeURIComponent(o))}return this.injectIntoUrl(t,r,e)},injectIntoUrl(t,e,r){const n=t.indexOf(e);if(n===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const i=t.indexOf("&",n),s=e.length,o=i!==-1?i:t.length,c=t.substring(0,n+s),u=t.substring(n+s,o),h=t.substring(i),f=u+r;return c+f+h}};async function Q0(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class Hw{constructor({baseUrl:e,clientId:r}){this.baseUrl=e,this.clientId=r}async get({headers:e,signal:r,cache:n,...i}){const s=this.createUrl(i);return(await Q0(s,{method:"GET",headers:e,signal:r,cache:n})).json()}async getBlob({headers:e,signal:r,...n}){const i=this.createUrl(n);return(await Q0(i,{method:"GET",headers:e,signal:r})).blob()}async post({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await Q0(s,{method:"POST",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async put({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await Q0(s,{method:"PUT",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}async delete({body:e,headers:r,signal:n,...i}){const s=this.createUrl(i);return(await Q0(s,{method:"DELETE",headers:r,body:e?JSON.stringify(e):void 0,signal:n})).json()}createUrl({path:e,params:r}){const n=new URL(e,this.baseUrl);return r&&Object.entries(r).forEach(([i,s])=>{s&&n.searchParams.append(i,s)}),this.clientId&&n.searchParams.append("clientId",this.clientId),n}}const kge={handleSolanaDeeplinkRedirect(t){if(ue.state.activeChain===kt.CHAIN.SOLANA){const e=window.location.href,r=encodeURIComponent(e);if(t==="Phantom"&&!("phantom"in window)){const n=e.startsWith("https")?"https":"http",i=e.split("/")[2],s=encodeURIComponent(`${n}://${i}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${s}`}t==="Coinbase Wallet"&&!("coinbaseSolana"in window)&&(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}},Io=Hn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Ta={state:Io,subscribeNetworkImages(t){return zs(Io.networkImages,()=>t(Io.networkImages))},subscribeKey(t,e){return zo(Io,t,e)},subscribe(t){return zs(Io,()=>t(Io))},setWalletImage(t,e){Io.walletImages[t]=e},setNetworkImage(t,e){Io.networkImages[t]=e},setChainImage(t,e){Io.chainImages[t]=e},setConnectorImage(t,e){Io.connectorImages={...Io.connectorImages,[t]:e}},setTokenImage(t,e){Io.tokenImages[t]=e},setCurrencyImage(t,e){Io.currencyImages[t]=e}},Pge={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},_3=Hn({networkImagePromises:{}}),jP={async fetchWalletImage(t){if(t)return await ur._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(_3.networkImagePromises[t]||(_3.networkImagePromises[t]=ur._fetchNetworkImage(t)),await _3.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Ta.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Ta.state.walletImages[t.image_id]},getNetworkImage(t){var e,r,n;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(r=t==null?void 0:t.assets)==null?void 0:r.imageUrl;if((n=t==null?void 0:t.assets)!=null&&n.imageId)return Ta.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Ta.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Ta.state.connectorImages[t.imageId]},getChainImage(t){return Ta.state.networkImages[Pge[t]]}},Bge={getFeatureValue(t,e){const r=e==null?void 0:e[t];return r===void 0?ho.DEFAULT_FEATURES[t]:r},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(or.isTelegram()){if(or.isIos())return t.filter(e=>e!=="google");if(or.isMac())return t.filter(e=>e!=="x");if(or.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},qt=Hn({features:ho.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ho.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0}),Ze={state:qt,subscribeKey(t,e){return zo(qt,t,e)},setOptions(t){Object.assign(qt,t)},setFeatures(t){if(!t)return;qt.features||(qt.features=ho.DEFAULT_FEATURES);const e={...qt.features,...t};qt.features=e,qt.features.socials&&(qt.features.socials=Bge.filterSocialsByPlatform(qt.features.socials))},setProjectId(t){qt.projectId=t},setCustomRpcUrls(t){qt.customRpcUrls=t},setAllWallets(t){qt.allWallets=t},setIncludeWalletIds(t){qt.includeWalletIds=t},setExcludeWalletIds(t){qt.excludeWalletIds=t},setFeaturedWalletIds(t){qt.featuredWalletIds=t},setTokens(t){qt.tokens=t},setTermsConditionsUrl(t){qt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){qt.privacyPolicyUrl=t},setCustomWallets(t){qt.customWallets=t},setIsSiweEnabled(t){qt.isSiweEnabled=t},setIsUniversalProvider(t){qt.isUniversalProvider=t},setSdkVersion(t){qt.sdkVersion=t},setMetadata(t){qt.metadata=t},setDisableAppend(t){qt.disableAppend=t},setEIP6963Enabled(t){qt.enableEIP6963=t},setDebug(t){qt.debug=t},setEnableWalletConnect(t){qt.enableWalletConnect=t},setEnableWalletGuide(t){qt.enableWalletGuide=t},setEnableAuthLogger(t){qt.enableAuthLogger=t},setEnableWallets(t){qt.enableWallets=t},setHasMultipleAddresses(t){qt.hasMultipleAddresses=t},setSIWX(t){qt.siwx=t},setConnectMethodsOrder(t){qt.features={...qt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){qt.features={...qt.features,walletFeaturesOrder:t}},setSocialsOrder(t){qt.features={...qt.features,socials:t}},setCollapseWallets(t){qt.features={...qt.features,collapseWallets:t}},setEnableEmbedded(t){qt.enableEmbedded=t},setAllowUnsupportedChain(t){qt.allowUnsupportedChain=t},setManualWCControl(t){qt.manualWCControl=t},setEnableNetworkSwitch(t){qt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,r])=>{r&&(qt.defaultAccountTypes[e]=r)})},setUniversalProviderConfigOverride(t){qt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return qt.universalProviderConfigOverride},getSnapshot(){return Xg(qt)}},Kl=Hn({message:"",variant:"info",open:!1}),p1={state:Kl,subscribeKey(t,e){return zo(Kl,t,e)},open(t,e){const{debug:r}=Ze.state,{shortMessage:n,longMessage:i}=t;r&&(Kl.message=n,Kl.variant=e,Kl.open=!0),i&&console.error(typeof i=="function"?i():i)},close(){Kl.open=!1,Kl.message="",Kl.variant="info"}},Lge=or.getAnalyticsUrl(),Uge=new Hw({baseUrl:Lge,clientId:null}),jge=["MODAL_CREATED"],Vc=Hn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),Tn={state:Vc,subscribe(t){return zs(Vc,()=>t(Vc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=Ze.state;return{projectId:t,st:e,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Lt.state.address;if(jge.includes(t.data.event)||typeof window>"u")return;await Uge.post({path:"/e",params:Tn.getSdkProperties(),body:{eventId:or.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Vc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===kt.HTTP_STATUS_CODES.FORBIDDEN&&!Vc.reportedErrors.FORBIDDEN&&(p1.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${pg()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Vc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Vc.timestamp=Date.now(),Vc.data=t,(e=Ze.state.features)!=null&&e.analytics&&Tn._sendAnalyticsEvent(Vc)}},zge=or.getApiUrl(),Ss=new Hw({baseUrl:zge,clientId:null}),qge="40",J9="4",Fge=20,Xr=Hn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ur={state:Xr,subscribeKey(t,e){return zo(Xr,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:r}=Ze.state;return{projectId:t,st:e||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Ze.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ss.baseUrl}/getWalletImage/${t}`,r=await Ss.getBlob({path:e,params:ur._getSdkProperties()});Ta.setWalletImage(t,URL.createObjectURL(r))},async _fetchNetworkImage(t){const e=`${Ss.baseUrl}/public/getAssetImage/${t}`,r=await Ss.getBlob({path:e,params:ur._getSdkProperties()});Ta.setNetworkImage(t,URL.createObjectURL(r))},async _fetchConnectorImage(t){const e=`${Ss.baseUrl}/public/getAssetImage/${t}`,r=await Ss.getBlob({path:e,params:ur._getSdkProperties()});Ta.setConnectorImage(t,URL.createObjectURL(r))},async _fetchCurrencyImage(t){const e=`${Ss.baseUrl}/public/getCurrencyImage/${t}`,r=await Ss.getBlob({path:e,params:ur._getSdkProperties()});Ta.setCurrencyImage(t,URL.createObjectURL(r))},async _fetchTokenImage(t){const e=`${Ss.baseUrl}/public/getTokenImage/${t}`,r=await Ss.getBlob({path:e,params:ur._getSdkProperties()});Ta.setTokenImage(t,URL.createObjectURL(r))},async fetchNetworkImages(){const t=ue.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:r})=>r==null?void 0:r.imageId).filter(Boolean).filter(r=>!jP.getNetworkImageById(r));e&&await Promise.allSettled(e.map(r=>ur._fetchNetworkImage(r)))},async fetchConnectorImages(){const{connectors:t}=nr.state,e=t.map(({imageId:r})=>r).filter(Boolean);await Promise.allSettled(e.map(r=>ur._fetchConnectorImage(r)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ur._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ur._fetchTokenImage(e)))},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Ze.state;if(t!=null&&t.length){const{data:e}=await Ss.get({path:"/getWallets",params:{...ur._getSdkProperties(),page:"1",entries:t!=null&&t.length?String(t.length):J9,include:t==null?void 0:t.join(",")}});e.sort((n,i)=>t.indexOf(n.id)-t.indexOf(i.id));const r=e.map(n=>n.image_id).filter(Boolean);await Promise.allSettled(r.map(n=>ur._fetchWalletImage(n))),Xr.featured=e,Xr.allFeatured=e}},async fetchRecommendedWallets(){try{Xr.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:r}=Ze.state,n=[...e??[],...r??[]].filter(Boolean),i=ue.getRequestedCaipNetworkIds().join(","),{data:s,count:o}=await Ss.get({path:"/getWallets",params:{...ur._getSdkProperties(),page:"1",chains:i,entries:J9,include:t==null?void 0:t.join(","),exclude:n==null?void 0:n.join(",")}}),c=Ot.getRecentWallets(),u=s.map(f=>f.image_id).filter(Boolean),h=c.map(f=>f.image_id).filter(Boolean);await Promise.allSettled([...u,...h].map(f=>ur._fetchWalletImage(f))),Xr.recommended=s,Xr.allRecommended=s,Xr.count=o??0}catch{}finally{Xr.isFetchingRecommendedWallets=!1}},async fetchWallets({page:t}){const{includeWalletIds:e,excludeWalletIds:r,featuredWalletIds:n}=Ze.state,i=ue.getRequestedCaipNetworkIds().join(","),s=[...Xr.recommended.map(({id:h})=>h),...r??[],...n??[]].filter(Boolean),{data:o,count:c}=await Ss.get({path:"/getWallets",params:{...ur._getSdkProperties(),page:String(t),entries:qge,chains:i,include:e==null?void 0:e.join(","),exclude:s.join(",")}}),u=o.slice(0,Fge).map(h=>h.image_id).filter(Boolean);await Promise.allSettled(u.map(h=>ur._fetchWalletImage(h))),Xr.wallets=or.uniqueBy([...Xr.wallets,...ur._filterOutExtensions(o)],"id"),Xr.count=c>Xr.count?c:Xr.count,Xr.page=t},async initializeExcludedWallets({ids:t}){const e=ue.getRequestedCaipNetworkIds().join(","),{data:r}=await Ss.get({path:"/getWallets",params:{...ur._getSdkProperties(),page:"1",entries:String(t.length),chains:e,include:t==null?void 0:t.join(",")}});r&&r.forEach(n=>{n!=null&&n.rdns&&Xr.excludedWallets.push({rdns:n.rdns,name:n.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:r,excludeWalletIds:n}=Ze.state;Xr.search=[];const i=ue.getRequestedCaipNetworkIds().join(","),{data:s}=await Ss.get({path:"/getWallets",params:{...ur._getSdkProperties(),page:"1",entries:"100",search:t==null?void 0:t.trim(),badge_type:e,chains:i,include:r==null?void 0:r.join(","),exclude:n==null?void 0:n.join(",")}});Tn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const o=s.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...o.map(c=>ur._fetchWalletImage(c)),or.wait(300)]),Xr.search=ur._filterOutExtensions(s)},initPromise(t,e){const r=Xr.promises[t];return r||(Xr.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const i=[t&&ur.initPromise("connectorImages",ur.fetchConnectorImages),e&&ur.initPromise("featuredWallets",ur.fetchFeaturedWallets),r&&ur.initPromise("recommendedWallets",ur.fetchRecommendedWallets),n&&ur.initPromise("networkImages",ur.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){var t;(t=Ze.state.features)!=null&&t.analytics&&ur.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ss.get({path:"/getAnalyticsConfig",params:ur._getSdkProperties()});Ze.setFeatures({analytics:t})}catch{Ze.setFeatures({analytics:!1})}},setFilterByNamespace(t){if(!t){Xr.featured=Xr.allFeatured,Xr.recommended=Xr.allRecommended;return}const e=ue.getRequestedCaipNetworkIds().join(",");Xr.featured=Xr.allFeatured.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(i=>e.includes(i))}),Xr.recommended=Xr.allRecommended.filter(r=>{var n;return(n=r.chains)==null?void 0:n.some(i=>e.includes(i))})}},Fr=Hn({view:"Connect",history:["Connect"],transactionStack:[]}),tn={state:Fr,subscribeKey(t,e){return zo(Fr,t,e)},pushTransactionStack(t){Fr.transactionStack.push(t)},popTransactionStack(t){var r,n;const e=Fr.transactionStack.pop();if(e)if(t)this.goBack(),(r=e==null?void 0:e.onCancel)==null||r.call(e);else{if(e.goBack)this.goBack();else if(e.replace){const s=Fr.history.indexOf("ConnectingSiwe");s>0?this.goBackToIndex(s-1):(pi.close(),Fr.history=[])}else e.view&&this.reset(e.view);(n=e==null?void 0:e.onSuccess)==null||n.call(e)}},push(t,e){t!==Fr.view&&(Fr.view=t,Fr.history.push(t),Fr.data=e)},reset(t,e){Fr.view=t,Fr.history=[t],Fr.data=e},replace(t,e){Fr.history.at(-1)===t||(Fr.view=t,Fr.history[Fr.history.length-1]=t,Fr.data=e)},goBack(){var e;const t=!ue.state.activeCaipAddress&&this.state.view==="ConnectingFarcaster";if(Fr.history.length>1&&!Fr.history.includes("UnsupportedChain")){Fr.history.pop();const[r]=Fr.history.slice(-1);r&&(Fr.view=r)}else pi.close();(e=Fr.data)!=null&&e.wallet&&(Fr.data.wallet=void 0),setTimeout(()=>{var r,n,i;if(t){Lt.setFarcasterUrl(void 0,ue.state.activeChain);const s=nr.getAuthConnector();(r=s==null?void 0:s.provider)==null||r.reload();const o=Xg(Ze.state);(i=(n=s==null?void 0:s.provider)==null?void 0:n.syncDappData)==null||i.call(n,{metadata:o.metadata,sdkVersion:o.sdkVersion,projectId:o.projectId,sdkType:o.sdkType})}},100)},goBackToIndex(t){if(Fr.history.length>1){Fr.history=Fr.history.slice(0,t+1);const[e]=Fr.history.slice(-1);e&&(Fr.view=e)}}},Gc=Hn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Bs={state:Gc,subscribe(t){return zs(Gc,()=>t(Gc))},setThemeMode(t){Gc.themeMode=t;try{const e=nr.getAuthConnector();if(e){const r=Bs.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:r,w3mThemeVariables:ou(r,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Gc.themeVariables={...Gc.themeVariables,...t};try{const e=nr.getAuthConnector();if(e){const r=Bs.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:r,w3mThemeVariables:ou(Gc.themeVariables,Gc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Xg(Gc)}},zP={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},Jr=Hn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...zP}}),nr={state:Jr,subscribe(t){return zs(Jr,()=>{t(Jr)})},subscribeKey(t,e){return zo(Jr,t,e)},initialize(t){t.forEach(e=>{const r=Ot.getConnectedConnectorId(e);r&&this.setConnectorId(r,e)})},setActiveConnector(t){t&&(Jr.activeConnector=Ch(t))},setConnectors(t){t.filter(r=>!Jr.allConnectors.some(n=>n.id===r.id&&this.getConnectorName(n.name)===this.getConnectorName(r.name)&&n.chain===r.chain)).forEach(r=>{r.type!=="MULTI_CHAIN"&&Jr.allConnectors.push(Ch(r))}),Jr.connectors=this.mergeMultiChainConnectors(Jr.allConnectors)},removeAdapter(t){Jr.allConnectors=Jr.allConnectors.filter(e=>e.chain!==t),Jr.connectors=this.mergeMultiChainConnectors(Jr.allConnectors)},mergeMultiChainConnectors(t){const e=this.generateConnectorMapByName(t),r=[];return e.forEach(n=>{const i=n[0],s=(i==null?void 0:i.id)===kt.CONNECTOR_ID.AUTH;n.length>1&&i?r.push({name:i.name,imageUrl:i.imageUrl,imageId:i.imageId,connectors:[...n],type:s?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(i==null?void 0:i.id)||""}):i&&r.push(i)}),r},generateConnectorMapByName(t){const e=new Map;return t.forEach(r=>{const{name:n}=r,i=this.getConnectorName(n);if(!i)return;const s=e.get(i)||[];s.find(c=>c.chain===r.chain)||s.push(r),e.set(i,s)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(r=>{e.find(n=>n.chain===r.chain)||e.push(r)}),e},addConnector(t){var e,r,n;if(t.id===kt.CONNECTOR_ID.AUTH){const i=t,s=Xg(Ze.state),o=Bs.getSnapshot().themeMode,c=Bs.getSnapshot().themeVariables;(r=(e=i==null?void 0:i.provider)==null?void 0:e.syncDappData)==null||r.call(e,{metadata:s.metadata,sdkVersion:s.sdkVersion,projectId:s.projectId,sdkType:s.sdkType}),(n=i==null?void 0:i.provider)==null||n.syncTheme({themeMode:o,themeVariables:c,w3mThemeVariables:ou(c,o)}),this.setConnectors([t])}else this.setConnectors([t])},getAuthConnector(t){var n;const e=t||ue.state.activeChain,r=Jr.connectors.find(i=>i.id===kt.CONNECTOR_ID.AUTH);if(r)return(n=r==null?void 0:r.connectors)!=null&&n.length?r.connectors.find(s=>s.chain===e):r},getAnnouncedConnectorRdns(){return Jr.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Jr.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Jr.allConnectors.filter(n=>n.chain===ue.state.activeChain).find(n=>{var i;return n.explorerId===t||((i=n.info)==null?void 0:i.rdns)===e})},syncIfAuthConnector(t){var s,o;if(t.id!=="ID_AUTH")return;const e=t,r=Xg(Ze.state),n=Bs.getSnapshot().themeMode,i=Bs.getSnapshot().themeVariables;(o=(s=e==null?void 0:e.provider)==null?void 0:s.syncDappData)==null||o.call(s,{metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),e.provider.syncTheme({themeMode:n,themeVariables:i,w3mThemeVariables:ou(i,n)})},getConnectorsByNamespace(t){const e=Jr.allConnectors.filter(r=>r.chain===t);return this.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=nr.getConnector(t.id,t.rdns);ue.state.activeChain===kt.CHAIN.SOLANA&&kge.handleSolanaDeeplinkRedirect((e==null?void 0:e.name)||t.name||""),e?tn.push("ConnectingExternal",{connector:e}):tn.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?this.getConnectorsByNamespace(t):this.mergeMultiChainConnectors(Jr.allConnectors)},setFilterByNamespace(t){Jr.filterByNamespace=t,Jr.connectors=this.getConnectors(t),ur.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Jr.activeConnectorIds={...Jr.activeConnectorIds,[e]:t},Ot.setConnectedConnectorId(e,t))},removeConnectorId(t){Jr.activeConnectorIds={...Jr.activeConnectorIds,[t]:void 0},Ot.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Jr.activeConnectorIds[t]},isConnected(t){return t?!!Jr.activeConnectorIds[t]:Object.values(Jr.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Jr.activeConnectorIds={...zP}}};function Bb(t,e){return nr.getConnectorId(t)===e}function Hge(t){const e=Array.from(ue.state.chains.keys());let r=[];return t?(r.push([t,ue.state.chains.get(t)]),Bb(t,kt.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(n=>{n!==t&&Bb(n,kt.CONNECTOR_ID.WALLET_CONNECT)&&r.push([n,ue.state.chains.get(n)])}):Bb(t,kt.CONNECTOR_ID.AUTH)&&e.forEach(n=>{n!==t&&Bb(n,kt.CONNECTOR_ID.AUTH)&&r.push([n,ue.state.chains.get(n)])})):r=Array.from(ue.state.chains.entries()),r}var Wge=Object.defineProperty,Kge=(t,e,r)=>e in t?Wge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,eO=(t,e,r)=>Kge(t,typeof e!="symbol"?e+"":e,r);let Vge=class extends jo{constructor(e){super(),this.opts=e,eO(this,"protocol","wc"),eO(this,"version",2)}};var Gge=Object.defineProperty,Yge=(t,e,r)=>e in t?Gge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zge=(t,e,r)=>Yge(t,e+"",r);let Qge=class extends jo{constructor(e,r){super(),this.core=e,this.logger=r,Zge(this,"records",new Map)}},Xge=class{constructor(e,r){this.logger=e,this.core=r}},Jge=class extends jo{constructor(e,r){super(),this.relayer=e,this.logger=r}},eye=class extends jo{constructor(e){super()}},tye=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},rye=class extends jo{constructor(e,r){super(),this.relayer=e,this.logger=r}},nye=class extends jo{constructor(e,r){super(),this.core=e,this.logger=r}},iye=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},sye=class{constructor(e,r){this.projectId=e,this.logger=r}},oye=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var aye=Object.defineProperty,cye=(t,e,r)=>e in t?aye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tO=(t,e,r)=>cye(t,typeof e!="symbol"?e+"":e,r);let lye=class{constructor(e){this.opts=e,tO(this,"protocol","wc"),tO(this,"version",2)}},uye=class{constructor(e){this.client=e}};const Jl={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Xu=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),bi=Hn({...Xu}),rs={state:bi,subscribeKey(t,e){return zo(bi,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=or.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){bi.message=Xu.message,bi.variant=Xu.variant,bi.svg=Xu.svg,bi.open=Xu.open,bi.autoClose=Xu.autoClose},_showMessage({message:t,svg:e,variant:r="success",autoClose:n=Xu.autoClose}){bi.open?(bi.open=!1,setTimeout(()=>{bi.message=t,bi.variant=r,bi.svg=e,bi.open=!0,bi.autoClose=n},150)):(bi.message=t,bi.variant=r,bi.svg=e,bi.open=!0,bi.autoClose=n)}},Mg={getSIWX(){return Ze.state.siwx},async initializeIfEnabled(){var s;const t=Ze.state.siwx,e=ue.getActiveCaipAddress();if(!(t&&e))return;const[r,n,i]=e.split(":");if(ue.checkIfSupportedNetwork(r))try{if((await t.getSessions(`${r}:${n}`,i)).length)return;await pi.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),Tn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((s=Cn._getClient())==null?void 0:s.disconnect().catch(console.error)),tn.reset("Connect"),rs.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Ze.state.siwx,e=or.getPlainAddress(ue.getActiveCaipAddress()),r=ue.getActiveCaipNetwork(),n=Cn._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!n)throw new Error("No ConnectionController client found");try{const i=await t.createMessage({chainId:r.caipNetworkId,accountAddress:e}),s=i.toString();nr.getConnectorId(r.chainNamespace)===kt.CONNECTOR_ID.AUTH&&tn.pushTransactionStack({view:null,goBack:!1,replace:!0});const c=await n.signMessage(s);await t.addSession({data:i,message:s,signature:c}),pi.close(),Tn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(i){const s=this.getSIWXEventProperties();(!pi.state.open||tn.state.view==="ApproveTransaction")&&await pi.open({view:"SIWXSignMessage"}),s.isSmartAccount?rs.showError("This application might not support Smart Accounts"):rs.showError("Signature declined"),Tn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:s}),console.error("SWIXUtil:requestSignMessage",i)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await Cn.disconnect():pi.close(),tn.reset("Connect"),Tn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=Ze.state.siwx,e=or.getPlainAddress(ue.getActiveCaipAddress()),r=ue.getActiveCaipNetwork();return t&&e&&r?t.getSessions(r.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const r=tn.state.view==="ApproveTransaction",n=tn.state.view==="SIWXSignMessage";if(r||n)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:r}){var c,u,h;const n=Mg.getSIWX(),i=new Set(e.map(f=>f.split(":")[0]));if(!n||i.size!==1||!i.has("eip155"))return!1;const s=await n.createMessage({chainId:((c=ue.getActiveCaipNetwork())==null?void 0:c.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:s.nonce,domain:s.domain,uri:s.uri,exp:s.expirationTime,iat:s.issuedAt,nbf:s.notBefore,requestId:s.requestId,version:s.version,resources:s.resources,statement:s.statement,chainId:s.chainId,methods:r,chains:[s.chainId,...e.filter(f=>f!==s.chainId)]});if(rs.showLoading("Authenticating...",{autoClose:!1}),Lt.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(u=o.session.peer.metadata.icons)==null?void 0:u[0],type:"WALLET_CONNECT"},Array.from(i)[0]),(h=o==null?void 0:o.auths)!=null&&h.length){const f=o.auths.map(p=>{const E=t.client.formatAuthMessage({request:p.p,iss:p.p.iss});return{data:{...p.p,accountAddress:p.p.iss.split(":").slice(-1).join(""),chainId:p.p.iss.split(":").slice(2,4).join(":"),uri:p.p.aud,version:p.p.version||s.version,expirationTime:p.p.exp,issuedAt:p.p.iat,notBefore:p.p.nbf},message:E,signature:p.s.s,cacao:p}});try{await n.setSessions(f),Tn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Mg.getSIWXEventProperties()})}catch(p){throw console.error("SIWX:universalProviderAuth - failed to set sessions",p),Tn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Mg.getSIWXEventProperties()}),await t.disconnect().catch(console.error),p}finally{rs.hide()}}return!0},getSIWXEventProperties(){var t;return{network:((t=ue.state.activeCaipNetwork)==null?void 0:t.caipNetworkId)||"",isSmartAccount:Lt.state.preferredAccountType===Jl.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Sn=Hn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),hye={state:Sn,subscribe(t){return zs(Sn,()=>t(Sn))},setLastNetworkInView(t){Sn.lastNetworkInView=t},async fetchTransactions(t,e){var r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Sn.loading=!0;try{const n=await Wt.fetchTransactions({account:t,cursor:Sn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(r=ue.state.activeCaipNetwork)==null?void 0:r.caipNetworkId}),i=this.filterSpamTransactions(n.data),s=this.filterByConnectedChain(i),o=[...Sn.transactions,...s];Sn.loading=!1,e==="coinbase"?Sn.coinbaseTransactions=this.groupTransactionsByYearAndMonth(Sn.coinbaseTransactions,n.data):(Sn.transactions=o,Sn.transactionsByYear=this.groupTransactionsByYearAndMonth(Sn.transactionsByYear,s)),Sn.empty=o.length===0,Sn.next=n.next?n.next:void 0}catch{Tn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Ze.state.projectId,cursor:Sn.next,isSmartAccount:Lt.state.preferredAccountType===Jl.ACCOUNT_TYPES.SMART_ACCOUNT}}),rs.showError("Failed to fetch transactions"),Sn.loading=!1,Sn.empty=!0,Sn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const r=t;return e.forEach(n=>{const i=new Date(n.metadata.minedAt).getFullYear(),s=new Date(n.metadata.minedAt).getMonth(),o=r[i]??{},u=(o[s]??[]).filter(h=>h.id!==n.id);r[i]={...o,[s]:[...u,n].sort((h,f)=>new Date(f.metadata.minedAt).getTime()-new Date(h.metadata.minedAt).getTime())}}),r},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(n=>{var i;return((i=n.nft_info)==null?void 0:i.flags.is_spam)===!0}))},filterByConnectedChain(t){var n;const e=(n=ue.state.activeCaipNetwork)==null?void 0:n.caipNetworkId;return t.filter(i=>i.metadata.chain===e)},clearCursor(){Sn.next=void 0},resetTransactions(){Sn.transactions=[],Sn.transactionsByYear={},Sn.lastNetworkInView=void 0,Sn.loading=!1,Sn.empty=!1,Sn.next=void 0}},An=Hn({wcError:!1,buffering:!1,status:"disconnected"});let ef;const Cn={state:An,subscribeKey(t,e){return zo(An,t,e)},_getClient(){return An._client},setClient(t){An._client=Ch(t)},async connectWalletConnect(){var t,e,r,n;if(or.isTelegram()||or.isSafari()&&or.isIos()){if(ef){await ef,ef=void 0;return}if(!or.isPairingExpired(An==null?void 0:An.wcPairingExpiry)){const i=An.wcUri;An.wcUri=i;return}ef=(e=(t=this._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),this.state.status="connecting",await ef,ef=void 0,An.wcPairingExpiry=void 0,this.state.status="connected"}else await((n=(r=this._getClient())==null?void 0:r.connectWalletConnect)==null?void 0:n.call(r))},async connectExternal(t,e,r=!0){var n,i;await((i=(n=this._getClient())==null?void 0:n.connectExternal)==null?void 0:i.call(n,t)),r&&ue.setActiveNamespace(e)},async reconnectExternal(t){var r,n;await((n=(r=this._getClient())==null?void 0:r.reconnectExternal)==null?void 0:n.call(r,t));const e=t.chain||ue.state.activeChain;e&&nr.setConnectorId(t.id,e)},async setPreferredAccountType(t){var r;pi.setLoading(!0,ue.state.activeChain);const e=nr.getAuthConnector();e&&(await(e==null?void 0:e.provider.setPreferredAccount(t)),await this.reconnectExternal(e),pi.setLoading(!1,ue.state.activeChain),Tn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=ue.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=this._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.parseUnits(t,e)},formatUnits(t,e){var r;return(r=this._getClient())==null?void 0:r.formatUnits(t,e)},async sendTransaction(t){var e;return(e=this._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=this._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=this._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=this._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=this._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=this._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=this._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,r;return((r=(e=this._getClient())==null?void 0:e.checkInstalled)==null?void 0:r.call(e,t))||!1},resetWcConnection(){An.wcUri=void 0,An.wcPairingExpiry=void 0,An.wcLinking=void 0,An.recentWallet=void 0,An.status="disconnected",hye.resetTransactions(),Ot.deleteWalletConnectDeepLink()},resetUri(){An.wcUri=void 0,An.wcPairingExpiry=void 0},finalizeWcConnection(){var r,n;const{wcLinking:t,recentWallet:e}=Cn.state;t&&Ot.setWalletConnectDeepLink(t),e&&Ot.setAppKitRecent(e),Tn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((n=(r=tn.state.data)==null?void 0:r.wallet)==null?void 0:n.name)||"Unknown"}})},setWcBasic(t){An.wcBasic=t},setUri(t){An.wcUri=t,An.wcPairingExpiry=or.getPairingExpiry()},setWcLinking(t){An.wcLinking=t},setWcError(t){An.wcError=t,An.buffering=!1},setRecentWallet(t){An.recentWallet=t},setBuffering(t){An.buffering=t},setStatus(t){An.status=t},async disconnect(t){try{pi.setLoading(!0,t),await Mg.clearSessions(),await ue.disconnect(t),pi.setLoading(!1,t),nr.setFilterByNamespace(void 0)}catch{throw new Error("Failed to disconnect")}}},X0=Hn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),al={state:X0,subscribe(t){return zs(X0,()=>t(X0))},set(t){Object.assign(X0,{...X0,...t})}};function dye(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function rO(t){return dye(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const qP="2.31.4";let J0={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${qP}`},wc=class a4 extends Error{constructor(e,r={}){var c;const n=(()=>{var u;return r.cause instanceof a4?r.cause.details:(u=r.cause)!=null&&u.message?r.cause.message:r.details})(),i=r.cause instanceof a4&&r.cause.docsPath||r.docsPath,s=(c=J0.getDocsUrl)==null?void 0:c.call(J0,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...J0.version?[`Version: ${J0.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=qP}walk(e){return FP(this,e)}};function FP(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?FP(t.cause,e):e?null:t}let HP=class extends wc{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}};function GA(t,{dir:e,size:r=32}={}){return typeof t=="string"?fye(t,{dir:e,size:r}):pye(t,{dir:e,size:r})}function fye(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new HP({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function pye(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new HP({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}let gye=class extends wc{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}},yye=class extends wc{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function WP(t,{size:e}){if(rO(t)>e)throw new yye({givenSize:rO(t),maxSize:e})}const mye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nO(t,e={}){return typeof t=="number"||typeof t=="bigint"?wye(t,e):typeof t=="string"?VP(t,e):typeof t=="boolean"?bye(t,e):KP(t,e)}function bye(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(WP(r,{size:e.size}),GA(r,{size:e.size})):r}function KP(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=mye[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(WP(n,{size:e.size}),GA(n,{dir:"right",size:e.size})):n}function wye(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const u=typeof t=="bigint"?"n":"";throw new gye({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${t}${u}`})}const c=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?GA(c,{size:n}):c}const vye=new TextEncoder;function VP(t,e={}){const r=vye.encode(t);return KP(r,e)}let Eye=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}};const yh=(t,e,r)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,r);function _ye(t,e){let r=t.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(e,"0");let[i,s]=[r.slice(0,r.length-e),r.slice(r.length-e)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}const YA=t=>t;class Ng extends wc{constructor({body:e,cause:r,details:n,headers:i,status:s,url:o}){super("HTTP request failed.",{cause:r,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${YA(o)}`,e&&`Request body: ${yh(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=i,this.status=s,this.url=o}}class GP extends wc{constructor({body:e,error:r,url:n}){super("RPC Request failed.",{cause:r,details:r.message,metaMessages:[`URL: ${YA(n)}`,`Request body: ${yh(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r.code,this.data=r.data}}class iO extends wc{constructor({body:e,url:r}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${YA(r)}`,`Request body: ${yh(e)}`],name:"TimeoutError"})}}const Sye=-1;class po extends wc{constructor(e,{code:r,docsPath:n,metaMessages:i,name:s,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:i||(e==null?void 0:e.metaMessages),name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof GP?e.code:r??Sye}}class qo extends po{constructor(e,r){super(e,r),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=r.data}}class Jg extends po{constructor(e){super(e,{code:Jg.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Jg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class ey extends po{constructor(e){super(e,{code:ey.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(ey,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class ty extends po{constructor(e,{method:r}={}){super(e,{code:ty.code,name:"MethodNotFoundRpcError",shortMessage:`The method${r?` "${r}"`:""} does not exist / is not available.`})}}Object.defineProperty(ty,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class ry extends po{constructor(e){super(e,{code:ry.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ry,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class ip extends po{constructor(e){super(e,{code:ip.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(ip,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class ny extends po{constructor(e){super(e,{code:ny.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ny,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class iy extends po{constructor(e){super(e,{code:iy.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(iy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class sy extends po{constructor(e){super(e,{code:sy.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(sy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class sp extends po{constructor(e){super(e,{code:sp.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(sp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class fh extends po{constructor(e,{method:r}={}){super(e,{code:fh.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${r?` "${r}"`:""} is not supported.`})}}Object.defineProperty(fh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class op extends po{constructor(e){super(e,{code:op.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(op,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class oy extends po{constructor(e){super(e,{code:oy.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(oy,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class mh extends qo{constructor(e){super(e,{code:mh.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(mh,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class ay extends qo{constructor(e){super(e,{code:ay.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(ay,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class cy extends qo{constructor(e,{method:r}={}){super(e,{code:cy.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${r?` " ${r}"`:""}.`})}}Object.defineProperty(cy,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class ly extends qo{constructor(e){super(e,{code:ly.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(ly,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class uy extends qo{constructor(e){super(e,{code:uy.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(uy,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class hy extends qo{constructor(e){super(e,{code:hy.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(hy,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class dy extends qo{constructor(e){super(e,{code:dy.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(dy,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class fy extends qo{constructor(e){super(e,{code:fy.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(fy,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class py extends qo{constructor(e){super(e,{code:py.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(py,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class gy extends qo{constructor(e){super(e,{code:gy.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(gy,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class yy extends qo{constructor(e){super(e,{code:yy.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(yy,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class my extends qo{constructor(e){super(e,{code:my.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(my,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class by extends qo{constructor(e){super(e,{code:by.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(by,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Aye extends po{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class ZA extends wc{constructor({cause:e,message:r}={}){var i;const n=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(ZA,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(ZA,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});function Iye(){let t=()=>{},e=()=>{};return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}const S3=new Map;function xye({fn:t,id:e,shouldSplitBatch:r,wait:n=0,sort:i}){const s=async()=>{const f=u();o();const p=f.map(({args:E})=>E);p.length!==0&&t(p).then(E=>{i&&Array.isArray(E)&&E.sort(i);for(let S=0;S<f.length;S++){const{resolve:A}=f[S];A==null||A([E[S],E])}}).catch(E=>{for(let S=0;S<f.length;S++){const{reject:A}=f[S];A==null||A(E)}})},o=()=>S3.delete(e),c=()=>u().map(({args:f})=>f),u=()=>S3.get(e)||[],h=f=>S3.set(e,[...u(),f]);return{flush:o,async schedule(f){const{promise:p,resolve:E,reject:S}=Iye();return(r==null?void 0:r([...c(),f]))&&s(),u().length>0?(h({args:f,resolve:E,reject:S}),p):(h({args:f,resolve:E,reject:S}),setTimeout(s,n),p)}}}async function YP(t){return new Promise(e=>setTimeout(e,t))}const c4=256;let Lb=c4,Ub;function Cye(t=11){if(!Ub||Lb+t>c4*2){Ub="",Lb=0;for(let e=0;e<c4;e++)Ub+=(256+Math.random()*256|0).toString(16).substring(1)}return Ub.substring(Lb,Lb+++t)}const jb=new Eye(8192);function Tye(t,{enabled:e=!0,id:r}){if(!e||!r)return t();if(jb.get(r))return jb.get(r);const n=t().finally(()=>jb.delete(r));return jb.set(r,n),n}function Mye(t,{delay:e=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise((i,s)=>{const o=async({count:c=0}={})=>{const u=async({error:h})=>{const f=typeof e=="function"?e({count:c,error:h}):e;f&&await YP(f),o({count:c+1})};try{const h=await t();i(h)}catch(h){if(c<r&&await n({count:c,error:h}))return u({error:h});s(h)}};o()})}function Nye(t,e={}){return async(r,n={})=>{var p;const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:c=3,uid:u}={...e,...n},{method:h}=r;if((p=s==null?void 0:s.exclude)!=null&&p.includes(h))throw new fh(new Error("method not supported"),{method:h});if(s!=null&&s.include&&!s.include.includes(h))throw new fh(new Error("method not supported"),{method:h});const f=i?VP(`${u}.${yh(r)}`):void 0;return Tye(()=>Mye(async()=>{try{return await t(r)}catch(E){const S=E;switch(S.code){case Jg.code:throw new Jg(S);case ey.code:throw new ey(S);case ty.code:throw new ty(S,{method:r.method});case ry.code:throw new ry(S);case ip.code:throw new ip(S);case ny.code:throw new ny(S);case iy.code:throw new iy(S);case sy.code:throw new sy(S);case sp.code:throw new sp(S);case fh.code:throw new fh(S,{method:r.method});case op.code:throw new op(S);case oy.code:throw new oy(S);case mh.code:throw new mh(S);case ay.code:throw new ay(S);case cy.code:throw new cy(S);case ly.code:throw new ly(S);case uy.code:throw new uy(S);case hy.code:throw new hy(S);case dy.code:throw new dy(S);case fy.code:throw new fy(S);case py.code:throw new py(S);case gy.code:throw new gy(S);case yy.code:throw new yy(S);case my.code:throw new my(S);case by.code:throw new by(S);case 5e3:throw new mh(S);default:throw E instanceof wc?E:new Aye(S)}}},{delay:({count:E,error:S})=>{var A;if(S&&S instanceof Ng){const I=(A=S==null?void 0:S.headers)==null?void 0:A.get("Retry-After");if(I!=null&&I.match(/\d/))return Number.parseInt(I)*1e3}return~~(1<<E)*o},retryCount:c,shouldRetry:({error:E})=>Oye(E)}),{enabled:i,id:f})}}function Oye(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===op.code||t.code===ip.code:t instanceof Ng&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function ZP({key:t,methods:e,name:r,request:n,retryCount:i=3,retryDelay:s=150,timeout:o,type:c},u){const h=Cye();return{config:{key:t,methods:e,name:r,request:n,retryCount:i,retryDelay:s,timeout:o,type:c},request:Nye(n,{methods:e,retryCount:i,retryDelay:s,uid:h}),value:u}}function sO(t,e={}){const{key:r="fallback",name:n="Fallback",rank:i=!1,shouldThrow:s=Rye,retryCount:o,retryDelay:c}=e;return({chain:u,pollingInterval:h=4e3,timeout:f,...p})=>{let E=t,S=()=>{};const A=ZP({key:r,name:n,async request({method:I,params:$}){let L;const k=async(U=0)=>{const q=E[U]({...p,chain:u,retryCount:0,timeout:f});try{const j=await q.request({method:I,params:$});return S({method:I,params:$,response:j,transport:q,status:"success"}),j}catch(j){if(S({error:j,method:I,params:$,transport:q,status:"error"}),s(j)||U===E.length-1||(L??(L=E.slice(U+1).some(z=>{const{include:V,exclude:G}=z({chain:u}).config.methods||{};return V?V.includes(I):G?!G.includes(I):!0})),!L))throw j;return k(U+1)}};return k()},retryCount:o,retryDelay:c,type:"fallback"},{onResponse:I=>S=I,transports:E.map(I=>I({chain:u,retryCount:0}))});if(i){const I=typeof i=="object"?i:{};Dye({chain:u,interval:I.interval??h,onTransports:$=>E=$,ping:I.ping,sampleCount:I.sampleCount,timeout:I.timeout,transports:E,weights:I.weights})}return A}}function Rye(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===sp.code||t.code===mh.code||ZA.nodeMessage.test(t.message)||t.code===5e3))}function Dye({chain:t,interval:e=4e3,onTransports:r,ping:n,sampleCount:i=10,timeout:s=1e3,transports:o,weights:c={}}){const{stability:u=.7,latency:h=.3}=c,f=[],p=async()=>{const E=await Promise.all(o.map(async I=>{const $=I({chain:t,retryCount:0,timeout:s}),L=Date.now();let k,U;try{await(n?n({transport:$}):$.request({method:"net_listening"})),U=1}catch{U=0}finally{k=Date.now()}return{latency:k-L,success:U}}));f.push(E),f.length>i&&f.shift();const S=Math.max(...f.map(I=>Math.max(...I.map(({latency:$})=>$)))),A=o.map((I,$)=>{const L=f.map(z=>z[$].latency),U=1-L.reduce((z,V)=>z+V,0)/L.length/S,q=f.map(z=>z[$].success),j=q.reduce((z,V)=>z+V,0)/q.length;return j===0?[0,$]:[h*U+u*j,$]}).sort((I,$)=>$[0]-I[0]);r(A.map(([,I])=>o[I])),await YP(e),p()};p()}class $ye extends wc{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function kye(t,{errorInstance:e=new Error("timed out"),timeout:r,signal:n}){return new Promise((i,s)=>{(async()=>{let o;try{const c=new AbortController;r>0&&(o=setTimeout(()=>{n&&c.abort()},r)),i(await t({signal:(c==null?void 0:c.signal)||null}))}catch(c){(c==null?void 0:c.name)==="AbortError"&&s(e),s(c)}finally{clearTimeout(o)}})()})}function Pye(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const oO=Pye();function Bye(t,e={}){return{async request(r){var p;const{body:n,onRequest:i=e.onRequest,onResponse:s=e.onResponse,timeout:o=e.timeout??1e4}=r,c={...e.fetchOptions??{},...r.fetchOptions??{}},{headers:u,method:h,signal:f}=c;try{const E=await kye(async({signal:A})=>{const I={...c,body:Array.isArray(n)?yh(n.map(U=>({jsonrpc:"2.0",id:U.id??oO.take(),...U}))):yh({jsonrpc:"2.0",id:n.id??oO.take(),...n}),headers:{"Content-Type":"application/json",...u},method:h||"POST",signal:f||(o>0?A:null)},$=new Request(t,I),L=await(i==null?void 0:i($,I))??{...I,url:t};return await fetch(L.url??t,L)},{errorInstance:new iO({body:n,url:t}),timeout:o,signal:!0});s&&await s(E);let S;if((p=E.headers.get("Content-Type"))!=null&&p.startsWith("application/json"))S=await E.json();else{S=await E.text();try{S=JSON.parse(S||"{}")}catch(A){if(E.ok)throw A;S={error:S}}}if(!E.ok)throw new Ng({body:n,details:yh(S.error)||E.statusText,headers:E.headers,status:E.status,url:t});return S}catch(E){throw E instanceof Ng||E instanceof iO?E:new Ng({body:n,cause:E,url:t})}}}}function A3(t,e={}){const{batch:r,fetchOptions:n,key:i="http",methods:s,name:o="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:h,raw:f}=e;return({chain:p,retryCount:E,timeout:S})=>{const{batchSize:A=1e3,wait:I=0}=typeof r=="object"?r:{},$=e.retryCount??E,L=S??e.timeout??1e4,k=t||(p==null?void 0:p.rpcUrls.default.http[0]);if(!k)throw new $ye;const U=Bye(k,{fetchOptions:n,onRequest:c,onResponse:u,timeout:L});return ZP({key:i,methods:s,name:o,async request({method:q,params:j}){const z={method:q,params:j},{schedule:V}=xye({id:k,wait:I,shouldSplitBatch(D){return D.length>A},fn:D=>U.request({body:D}),sort:(D,_)=>D.id-_.id}),G=async D=>r?V(D):[await U.request({body:D})],[{error:B,result:W}]=await G(z);if(f)return{error:B,result:W};if(B)throw new GP({body:z,error:B,url:k});return W},retryCount:$,retryDelay:h,timeout:L,type:"http"},{fetchOptions:n,url:k})}}const I3={createBalance(t,e){const r={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return _ye(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const r=e[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(r=>this.isValidAsset(r)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},aO={async getMyTokensWithBalance(t){const e=Lt.state.address,r=ue.state.activeCaipNetwork;if(!e||!r)return[];if(r.chainNamespace==="eip155"){const i=await this.getEIP155Balances(e,r);if(i)return this.filterLowQualityTokens(i)}const n=await Wt.getBalance(e,r.caipNetworkId,t);return this.filterLowQualityTokens(n.balances)},async getEIP155Balances(t,e){var r,n;try{const i=I3.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),s=await Cn.getCapabilities(t);if(!((n=(r=s==null?void 0:s[i])==null?void 0:r.assetDiscovery)!=null&&n.supported))return null;const o=await Cn.walletGetAssets({account:t,chainFilter:[i]});return I3.isWalletGetAssetsResponse(o)?(o[i]||[]).map(u=>I3.createBalance(u,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:ue.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},xr=Hn({tokenBalances:[],loading:!1}),cO={state:xr,subscribe(t){return zs(xr,()=>t(xr))},subscribeKey(t,e){return zo(xr,t,e)},setToken(t){t&&(xr.token=Ch(t))},setTokenAmount(t){xr.sendTokenAmount=t},setReceiverAddress(t){xr.receiverAddress=t},setReceiverProfileImageUrl(t){xr.receiverProfileImageUrl=t},setReceiverProfileName(t){xr.receiverProfileName=t},setGasPrice(t){xr.gasPrice=t},setGasPriceInUsd(t){xr.gasPriceInUSD=t},setNetworkBalanceInUsd(t){xr.networkBalanceInUSD=t},setLoading(t){xr.loading=t},sendToken(){var t;switch((t=ue.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":this.sendEvmToken();return;case"solana":this.sendSolanaToken();return;default:throw new Error("Unsupported chain")}},sendEvmToken(){var t,e,r,n,i;(t=this.state.token)!=null&&t.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(Tn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:Lt.state.preferredAccountType===Jl.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:((e=ue.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&((r=this.state.token)!=null&&r.quantity.decimals)&&(Tn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:Lt.state.preferredAccountType===Jl.ACCOUNT_TYPES.SMART_ACCOUNT,token:(n=this.state.token)==null?void 0:n.symbol,amount:this.state.sendTokenAmount,network:((i=ue.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(t){var s,o;xr.loading=!0;const e=(s=ue.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,r=(o=ue.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=ue.state.activeCaipAddress,i=n?or.getPlainAddress(n):void 0;if(xr.lastRetry&&!or.isAllowedRetry(xr.lastRetry,30*ho.ONE_SEC_MS))return xr.loading=!1,[];try{if(i&&e&&r){const c=await aO.getMyTokensWithBalance();return xr.tokenBalances=c,xr.lastRetry=void 0,c}}catch(c){xr.lastRetry=Date.now(),t==null||t(c),rs.showError("Token Balance Unavailable")}finally{xr.loading=!1}return[]},fetchNetworkBalance(){if(xr.tokenBalances.length===0)return;const t=aO.mapBalancesToSwapTokens(xr.tokenBalances);if(!t)return;const e=t.find(r=>r.address===ue.getActiveNetworkTokenAddress());e&&(xr.networkBalanceInUSD=e?Pb.multiply(e.quantity.numeric,e.price).toString():"0")},isInsufficientNetworkTokenForGas(t,e){const r=e||"0";return Pb.bigNumber(t).eq(0)?!0:Pb.bigNumber(Pb.bigNumber(r)).gt(t)},hasInsufficientGasFunds(){let t=!0;return Lt.state.preferredAccountType===Jl.ACCOUNT_TYPES.SMART_ACCOUNT?t=!1:xr.networkBalanceInUSD&&(t=this.isInsufficientNetworkTokenForGas(xr.networkBalanceInUSD,xr.gasPriceInUSD)),t},async sendNativeToken(t){var s,o,c,u;tn.pushTransactionStack({view:"Account",goBack:!1});const e=t.receiverAddress,r=Lt.state.address,n=Cn.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals)),i="0x";try{await Cn.sendTransaction({chainNamespace:"eip155",to:e,address:r,data:i,value:n??BigInt(0),gasPrice:t.gasPrice}),rs.showSuccess("Transaction started"),Tn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Lt.state.preferredAccountType===Jl.ACCOUNT_TYPES.SMART_ACCOUNT,token:((s=this.state.token)==null?void 0:s.symbol)||"",amount:t.sendTokenAmount,network:((o=ue.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),this.resetSend()}catch(h){console.error("SendController:sendERC20Token - failed to send native token",h);const f=h instanceof Error?h.message:"Unknown error";Tn.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:f,isSmartAccount:Lt.state.preferredAccountType===Jl.ACCOUNT_TYPES.SMART_ACCOUNT,token:((c=this.state.token)==null?void 0:c.symbol)||"",amount:t.sendTokenAmount,network:((u=ue.state.activeCaipNetwork)==null?void 0:u.caipNetworkId)||""}}),rs.showError("Something went wrong")}},async sendERC20Token(t){var r,n;tn.pushTransactionStack({view:"Account",goBack:!1});const e=Cn.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));try{if(Lt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const i=or.getPlainAddress(t.tokenAddress);await Cn.writeContract({fromAddress:Lt.state.address,tokenAddress:i,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Tge.getERC20Abi(i),chainNamespace:"eip155"}),rs.showSuccess("Transaction started"),this.resetSend()}}catch(i){console.error("SendController:sendERC20Token - failed to send erc20 token",i);const s=i instanceof Error?i.message:"Unknown error";Tn.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:s,isSmartAccount:Lt.state.preferredAccountType===Jl.ACCOUNT_TYPES.SMART_ACCOUNT,token:((r=this.state.token)==null?void 0:r.symbol)||"",amount:t.sendTokenAmount,network:((n=ue.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)||""}}),rs.showError("Something went wrong")}},sendSolanaToken(){if(!this.state.sendTokenAmount||!this.state.receiverAddress){rs.showError("Please enter a valid amount and receiver address");return}tn.pushTransactionStack({view:"Account",goBack:!1}),Cn.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then(()=>{this.resetSend(),Lt.fetchTokenBalance()}).catch(t=>{rs.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",t)})},resetSend(){xr.token=void 0,xr.sendTokenAmount=void 0,xr.receiverAddress=void 0,xr.receiverProfileImageUrl=void 0,xr.receiverProfileName=void 0,xr.loading=!1,xr.tokenBalances=[]}},x3={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},zb={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ct=Hn({chains:$ge(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),ue={state:ct,subscribe(t){return zs(ct,()=>{t(ct)})},subscribeKey(t,e){return zo(ct,t,e)},subscribeChainProp(t,e,r){let n;return zs(ct.chains,()=>{var s;const i=r||ct.activeChain;if(i){const o=(s=ct.chains.get(i))==null?void 0:s[t];n!==o&&(n=o,e(o))}})},initialize(t,e,r){const{chainId:n,namespace:i}=Ot.getActiveNetworkProps(),s=e==null?void 0:e.find(h=>h.id.toString()===(n==null?void 0:n.toString())),c=t.find(h=>(h==null?void 0:h.namespace)===i)||(t==null?void 0:t[0]),u=new Set([...(e==null?void 0:e.map(h=>h.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!c)&&(ct.noAdapters=!0),ct.noAdapters||(ct.activeChain=c==null?void 0:c.namespace,ct.activeCaipNetwork=s,this.setChainNetworkData(c==null?void 0:c.namespace,{caipNetwork:s}),ct.activeChain&&al.set({activeChain:c==null?void 0:c.namespace})),u.forEach(h=>{const f=e==null?void 0:e.filter(p=>p.chainNamespace===h);ue.state.chains.set(h,{namespace:h,networkState:Hn({...zb,caipNetwork:f==null?void 0:f[0]}),accountState:Hn(x3),caipNetworks:f??[],...r}),this.setRequestedCaipNetworks(f??[],h)})},removeAdapter(t){var e,r;if(ct.activeChain===t){const n=Array.from(ct.chains.entries()).find(([i])=>i!==t);if(n){const i=(r=(e=n[1])==null?void 0:e.caipNetworks)==null?void 0:r[0];i&&this.setActiveCaipNetwork(i)}}ct.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:r},n){ct.chains.set(t.namespace,{namespace:t.namespace,networkState:{...zb,caipNetwork:n[0]},accountState:x3,caipNetworks:n,connectionControllerClient:r,networkControllerClient:e}),this.setRequestedCaipNetworks((n==null?void 0:n.filter(i=>i.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var r;const e=ct.chains.get(t.chainNamespace);if(e){const n=[...e.caipNetworks||[]];(r=e.caipNetworks)!=null&&r.find(i=>i.id===t.id)||n.push(t),ct.chains.set(t.chainNamespace,{...e,caipNetworks:n}),this.setRequestedCaipNetworks(n,t.chainNamespace)}},removeNetwork(t,e){var n,i,s;const r=ct.chains.get(t);if(r){const o=((n=ct.activeCaipNetwork)==null?void 0:n.id)===e,c=[...((i=r.caipNetworks)==null?void 0:i.filter(u=>u.id!==e))||[]];o&&((s=r==null?void 0:r.caipNetworks)!=null&&s[0])&&this.setActiveCaipNetwork(r.caipNetworks[0]),ct.chains.set(t,{...r,caipNetworks:c}),this.setRequestedCaipNetworks(c||[],t)}},setAdapterNetworkState(t,e){const r=ct.chains.get(t);r&&(r.networkState={...r.networkState||zb,...e},ct.chains.set(t,r))},setChainAccountData(t,e,r=!0){if(!t)throw new Error("Chain is required to update chain account data");const n=ct.chains.get(t);if(n){const i={...n.accountState||x3,...e};ct.chains.set(t,{...n,accountState:i}),(ct.chains.size===1||ct.activeChain===t)&&(e.caipAddress&&(ct.activeCaipAddress=e.caipAddress),Lt.replaceState(i))}},setChainNetworkData(t,e){if(!t)return;const r=ct.chains.get(t);if(r){const n={...r.networkState||zb,...e};ct.chains.set(t,{...r,networkState:n})}},setAccountProp(t,e,r,n=!0){this.setChainAccountData(r,{[t]:e},n),t==="status"&&e==="disconnected"&&r&&nr.removeConnectorId(r)},setActiveNamespace(t){var n,i;ct.activeChain=t;const e=t?ct.chains.get(t):void 0,r=(n=e==null?void 0:e.networkState)==null?void 0:n.caipNetwork;r!=null&&r.id&&t&&(ct.activeCaipAddress=(i=e==null?void 0:e.accountState)==null?void 0:i.caipAddress,ct.activeCaipNetwork=r,this.setChainNetworkData(t,{caipNetwork:r}),Ot.setActiveCaipNetworkId(r==null?void 0:r.caipNetworkId),al.set({activeChain:t,selectedNetworkId:r==null?void 0:r.caipNetworkId}))},setActiveCaipNetwork(t){var n,i,s;if(!t)return;ct.activeChain!==t.chainNamespace&&this.setIsSwitchingNamespace(!0);const e=ct.chains.get(t.chainNamespace);ct.activeChain=t.chainNamespace,ct.activeCaipNetwork=t,this.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(n=e==null?void 0:e.accountState)!=null&&n.address?ct.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(i=e==null?void 0:e.accountState)==null?void 0:i.address}`:ct.activeCaipAddress=void 0,this.setAccountProp("caipAddress",ct.activeCaipAddress,t.chainNamespace),e&&Lt.replaceState(e.accountState),cO.resetSend(),al.set({activeChain:ct.activeChain,selectedNetworkId:(s=ct.activeCaipNetwork)==null?void 0:s.caipNetworkId}),Ot.setActiveCaipNetworkId(t.caipNetworkId),!this.checkIfSupportedNetwork(t.chainNamespace)&&Ze.state.enableNetworkSwitch&&!Ze.state.allowUnsupportedChain&&!Cn.state.wcBasic&&this.showUnsupportedChainUI()},addCaipNetwork(t){var r;if(!t)return;const e=ct.chains.get(t.chainNamespace);e&&((r=e==null?void 0:e.caipNetworks)==null||r.push(t))},async switchActiveNamespace(t){var i;if(!t)return;const e=t!==ue.state.activeChain,r=(i=ue.getNetworkData(t))==null?void 0:i.caipNetwork,n=ue.getCaipNetworkByNamespace(t,r==null?void 0:r.id);e&&n&&await ue.switchActiveNetwork(n)},async switchActiveNetwork(t){var i;const e=ue.state.chains.get(ue.state.activeChain);!((i=e==null?void 0:e.caipNetworks)!=null&&i.some(s=>{var o;return s.id===((o=ct.activeCaipNetwork)==null?void 0:o.id)}))&&tn.goBack();const n=this.getNetworkControllerClient(t.chainNamespace);n&&(await n.switchCaipNetwork(t),Tn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}}))},getNetworkControllerClient(t){const e=t||ct.activeChain,r=ct.chains.get(e);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(t){const e=t||ct.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const r=ct.chains.get(e);if(!(r!=null&&r.connectionControllerClient))throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(t,e){var i;let r=ct.activeChain;if(e&&(r=e),!r)return;const n=(i=ct.chains.get(r))==null?void 0:i.accountState;if(n)return n[t]},getNetworkProp(t,e){var n;const r=(n=ct.chains.get(e))==null?void 0:n.networkState;if(r)return r[t]},getRequestedCaipNetworks(t){const e=ct.chains.get(t),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=(e==null?void 0:e.networkState)||{};return or.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const t=[];return ct.chains.forEach(e=>{const r=this.getRequestedCaipNetworks(e.namespace);t.push(...r)}),t},setRequestedCaipNetworks(t,e){this.setAdapterNetworkState(e,{requestedCaipNetworks:t})},getAllApprovedCaipNetworkIds(){const t=[];return ct.chains.forEach(e=>{const r=this.getApprovedCaipNetworkIds(e.namespace);t.push(...r)}),t},getActiveCaipNetwork(){return ct.activeCaipNetwork},getActiveCaipAddress(){return ct.activeCaipAddress},getApprovedCaipNetworkIds(t){var n;const e=ct.chains.get(t);return((n=e==null?void 0:e.networkState)==null?void 0:n.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=this.getNetworkControllerClient(),r=await(e==null?void 0:e.getApprovedCaipNetworksData());this.setAdapterNetworkState(t,{approvedCaipNetworkIds:r==null?void 0:r.approvedCaipNetworkIds,supportsAllNetworks:r==null?void 0:r.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const r=e||ct.activeCaipNetwork,n=this.getRequestedCaipNetworks(t);return n.length?n==null?void 0:n.some(i=>i.id===(r==null?void 0:r.id)):!0},checkIfSupportedChainId(t){if(!ct.activeChain)return!0;const e=this.getRequestedCaipNetworks(ct.activeChain);return e==null?void 0:e.some(r=>r.id===t)},setSmartAccountEnabledNetworks(t,e){this.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var n;const t=BP.caipNetworkIdToNumber((n=ct.activeCaipNetwork)==null?void 0:n.caipNetworkId),e=ct.activeChain;if(!e||!t)return!1;const r=this.getNetworkProp("smartAccountEnabledNetworks",e);return!!(r!=null&&r.includes(Number(t)))},getActiveNetworkTokenAddress(){var n,i;const t=((n=ct.activeCaipNetwork)==null?void 0:n.chainNamespace)||"eip155",e=((i=ct.activeCaipNetwork)==null?void 0:i.id)||1,r=ho.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${r}`},showUnsupportedChainUI(){pi.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ct.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ho.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){this.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");ct.activeCaipAddress=void 0,this.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),nr.removeConnectorId(e)},async disconnect(t){const e=Hge(t);try{cO.resetSend();const r=await Promise.allSettled(e.map(async([i,s])=>{var o;try{const{caipAddress:c}=this.getAccountData(i)||{};c&&((o=s.connectionControllerClient)!=null&&o.disconnect)&&await s.connectionControllerClient.disconnect(i),this.resetAccount(i),this.resetNetwork(i)}catch(c){throw new Error(`Failed to disconnect chain ${i}: ${c.message}`)}}));Cn.resetWcConnection();const n=r.filter(i=>i.status==="rejected");if(n.length>0)throw new Error(n.map(i=>i.reason.message).join(", "));Ot.deleteConnectedSocialProvider(),t?nr.removeConnectorId(t):nr.resetConnectorIds(),Tn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:t||"all"}})}catch(r){console.error(r.message||"Failed to disconnect chains"),Tn.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:r.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(t){ct.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var r,n;const t=[];let e;if(ct.chains.forEach(i=>{kt.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(s=>s===i.namespace)&&i.namespace&&t.push(i.namespace)}),t.length>0){const i=t[0];return e=i?(n=(r=ct.chains.get(i))==null?void 0:r.caipNetworks)==null?void 0:n[0]:void 0,e}},getAccountData(t){var e;return t?(e=ue.state.chains.get(t))==null?void 0:e.accountState:Lt.state},getNetworkData(t){var r;const e=t||ct.activeChain;if(e)return(r=ue.state.chains.get(e))==null?void 0:r.networkState},getCaipNetworkByNamespace(t,e){var i,s,o;if(!t)return;const r=ue.state.chains.get(t),n=(i=r==null?void 0:r.caipNetworks)==null?void 0:i.find(c=>c.id===e);return n||((s=r==null?void 0:r.networkState)==null?void 0:s.caipNetwork)||((o=r==null?void 0:r.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=nr.state.filterByNamespace;return(t?[ct.chains.get(t)]:Array.from(ct.chains.values())).flatMap(r=>(r==null?void 0:r.caipNetworks)||[]).map(r=>r.caipNetworkId)}},Lye={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},QP=or.getBlockchainApiUrl(),xo=Hn({clientId:null,api:new Hw({baseUrl:QP,clientId:null}),supportedChains:{http:[],ws:[]}}),Wt={state:xo,async get(t){const{st:e,sv:r}=Wt.getSdkProperties(),n=Ze.state.projectId,i={...t.params||{},st:e,sv:r,projectId:n};return xo.api.get({...t,params:i})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Ze.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{xo.supportedChains.http.length||await Wt.getSupportedNetworks()}catch{return!1}return xo.supportedChains.http.includes(t)},async getSupportedNetworks(){const t=await Wt.get({path:"v1/supported-chains"});return xo.supportedChains=t,t},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Wt.isNetworkSupported(e))return{avatar:"",name:""};const n=Ot.getIdentityFromCacheForAddress(t);if(n)return n;const i=await Wt.get({path:`/v1/identity/${t}`,params:{sender:ue.state.activeCaipAddress?or.getPlainAddress(ue.state.activeCaipAddress):void 0}});return Ot.updateIdentityCache({address:t,identity:i,timestamp:Date.now()}),i},async fetchTransactions({account:t,cursor:e,onramp:r,signal:n,cache:i,chainId:s}){var c;return await Wt.isNetworkSupported((c=ue.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)?Wt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:r,chainId:s},signal:n,cache:i}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:r,to:n,gasPrice:i}){var o;return await Wt.isNetworkSupported((o=ue.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Wt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:r,to:n,gasPrice:i}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var r;return await Wt.isNetworkSupported((r=ue.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Wt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var r;return await Wt.isNetworkSupported((r=ue.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?xo.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Ze.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var n;return await Wt.isNetworkSupported((n=ue.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Wt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var i;const{st:e,sv:r}=Wt.getSdkProperties();if(!await Wt.isNetworkSupported((i=ue.state.activeCaipNetwork)==null?void 0:i.caipNetworkId))throw new Error("Network not supported for Gas Price");return Wt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:r}})},async generateSwapCalldata({amount:t,from:e,to:r,userAddress:n,disableEstimate:i}){var o;if(!await Wt.isNetworkSupported((o=ue.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return xo.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ho.CONVERT_SLIPPAGE_TOLERANCE},projectId:Ze.state.projectId,from:e,to:r,userAddress:n,disableEstimate:i}})},async generateApproveCalldata({from:t,to:e,userAddress:r}){var o;const{st:n,sv:i}=Wt.getSdkProperties();if(!await Wt.isNetworkSupported((o=ue.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Wt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:t,to:e,st:n,sv:i}})},async getBalance(t,e,r){var h;const{st:n,sv:i}=Wt.getSdkProperties();if(!await Wt.isNetworkSupported((h=ue.state.activeCaipNetwork)==null?void 0:h.caipNetworkId))return rs.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,c=Ot.getBalanceCacheForCaipAddress(o);if(c)return c;const u=await Wt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:r,st:n,sv:i}});return Ot.updateBalanceCache({caipAddress:o,balance:u,timestamp:Date.now()}),u},async lookupEnsName(t){var r;return await Wt.isNetworkSupported((r=ue.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Wt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var r;return await Wt.isNetworkSupported((r=ue.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Wt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Lt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var r;return await Wt.isNetworkSupported((r=ue.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Wt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:r,signature:n}){var s;return await Wt.isNetworkSupported((s=ue.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?xo.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:r,purchaseAmount:n,paymentAmount:i}){var c;return await Wt.isNetworkSupported((c=ue.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)?(await xo.api.post({path:"/v1/generators/onrampurl",params:{projectId:Ze.state.projectId},body:{destinationWallets:t,defaultNetwork:r,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:i}})).url:""},async getOnrampOptions(){var e;if(!await Wt.isNetworkSupported((e=ue.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Wt.get({path:"/v1/onramp/options"})}catch{return Lye}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}){var i;try{return await Wt.isNetworkSupported((i=ue.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?await xo.api.post({path:"/v1/onramp/quote",params:{projectId:Ze.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:r,network:n}}):null}catch{return{coinbaseFee:{amount:r,currency:e.id},networkFee:{amount:r,currency:e.id},paymentSubtotal:{amount:r,currency:e.id},paymentTotal:{amount:r,currency:e.id},purchaseAmount:{amount:r,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var r;return await Wt.isNetworkSupported((r=ue.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Wt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,r){var i;return await Wt.isNetworkSupported((i=ue.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?xo.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Ze.state.projectId},body:{pci:e,signature:r}}):{success:!1}},setClientId(t){xo.clientId=t,xo.api=new Hw({baseUrl:QP,clientId:t})}},Xa=Hn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),Lt={state:Xa,replaceState(t){t&&Object.assign(Xa,Ch(t))},subscribe(t){return ue.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,r){let n;return ue.subscribeChainProp("accountState",i=>{if(i){const s=i[t];n!==s&&(n=s,e(s))}},r)},setStatus(t,e){ue.setAccountProp("status",t,e)},getCaipAddress(t){return ue.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const r=t?or.getPlainAddress(t):void 0;e===ue.state.activeChain&&(ue.state.activeCaipAddress=t),ue.setAccountProp("caipAddress",t,e),ue.setAccountProp("address",r,e)},setBalance(t,e,r){ue.setAccountProp("balance",t,r),ue.setAccountProp("balanceSymbol",e,r)},setProfileName(t,e){ue.setAccountProp("profileName",t,e)},setProfileImage(t,e){ue.setAccountProp("profileImage",t,e)},setUser(t,e){ue.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){ue.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){ue.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){ue.setAccountProp("currentTab",t,ue.state.activeChain)},setTokenBalance(t,e){t&&ue.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){ue.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){ue.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,r){const n=ue.getAccountProp("addressLabels",r)||new Map;n.set(t,e),ue.setAccountProp("addressLabels",n,r)},removeAddressLabel(t,e){const r=ue.getAccountProp("addressLabels",e)||new Map;r.delete(t),ue.setAccountProp("addressLabels",r,e)},setConnectedWalletInfo(t,e){ue.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){ue.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&ue.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){ue.setAccountProp("socialWindow",t?Ch(t):void 0,e)},setFarcasterUrl(t,e){ue.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var s,o;Xa.balanceLoading=!0;const e=(s=ue.state.activeCaipNetwork)==null?void 0:s.caipNetworkId,r=(o=ue.state.activeCaipNetwork)==null?void 0:o.chainNamespace,n=ue.state.activeCaipAddress,i=n?or.getPlainAddress(n):void 0;if(Xa.lastRetry&&!or.isAllowedRetry(Xa.lastRetry,30*ho.ONE_SEC_MS))return Xa.balanceLoading=!1,[];try{if(i&&e&&r){const u=(await Wt.getBalance(i,e)).balances.filter(h=>h.quantity.decimals!=="0");return this.setTokenBalance(u,r),Xa.lastRetry=void 0,Xa.balanceLoading=!1,u}}catch(c){Xa.lastRetry=Date.now(),t==null||t(c),rs.showError("Token Balance Unavailable")}finally{Xa.balanceLoading=!1}return[]},resetAccount(t){ue.resetAccount(t)}},eo=Hn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),pi={state:eo,subscribe(t){return zs(eo,()=>t(eo))},subscribeKey(t,e){return zo(eo,t,e)},async open(t){var i;const e=Lt.state.status==="connected";Cn.state.wcBasic?ur.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ur.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),t!=null&&t.namespace?(await ue.switchActiveNamespace(t.namespace),pi.setLoading(!0,t.namespace)):pi.setLoading(!0),nr.setFilterByNamespace(t==null?void 0:t.namespace);const r=(i=ue.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;ue.state.noAdapters&&!r?or.isMobile()?tn.reset("AllWallets"):tn.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?tn.reset(t.view):r?tn.reset("Account"):tn.reset("Connect"),eo.open=!0,al.set({open:!0}),Tn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!r}})},close(){const t=Ze.state.enableEmbedded,e=!!ue.state.activeCaipAddress;eo.open&&Tn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),eo.open=!1,pi.clearLoading(),t?e?tn.replace("Account"):tn.push("Connect"):al.set({open:!1}),Cn.resetUri()},setLoading(t,e){e&&eo.loadingNamespaceMap.set(e,t),eo.loading=t,al.set({loading:t})},clearLoading(){eo.loadingNamespaceMap.clear(),eo.loading=!1},shake(){eo.shake||(eo.shake=!0,setTimeout(()=>{eo.shake=!1},500))}},lO=2147483648,Uye={convertEVMChainIdToCoinType(t){if(t>=lO)throw new Error("Invalid chainId");return(lO|t)>>>0}},Xo=Hn({suggestions:[],loading:!1}),XP={state:Xo,subscribe(t){return zs(Xo,()=>t(Xo))},subscribeKey(t,e){return zo(Xo,t,e)},async resolveName(t){var e,r;try{return await Wt.lookupEnsName(t)}catch(n){const i=n;throw new Error(((r=(e=i==null?void 0:i.reasons)==null?void 0:e[0])==null?void 0:r.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Wt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Xo.loading=!0,Xo.suggestions=[];const e=await Wt.getEnsNameSuggestions(t);return Xo.suggestions=e.suggestions.map(r=>({...r,name:r.name}))||[],Xo.suggestions}catch(e){const r=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(r)}finally{Xo.loading=!1}},async getNamesForAddress(t){try{if(!ue.state.activeCaipNetwork)return[];const r=Ot.getEnsFromCacheForAddress(t);if(r)return r;const n=await Wt.reverseLookupEnsName({address:t});return Ot.updateEnsCache({address:t,ens:n,timestamp:Date.now()}),n}catch(e){const r=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(r)}},async registerName(t){const e=ue.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const r=Lt.state.address,n=nr.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");Xo.loading=!0;try{const i=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});tn.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){Xo.loading=!1}});const s=await Cn.signMessage(i),o=e.id;if(!o)throw new Error("Network not found");const c=Uye.convertEVMChainIdToCoinType(Number(o));await Wt.registerEnsName({coinType:c,address:r,signature:s,message:i}),Lt.setProfileName(t,e.chainNamespace),tn.replace("RegisterAccountNameSuccess")}catch(i){const s=this.parseEnsApiError(i,`Error registering name ${t}`);throw tn.replace("RegisterAccountName"),new Error(s)}finally{Xo.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var n,i;const r=t;return((i=(n=r==null?void 0:r.reasons)==null?void 0:n[0])==null?void 0:i.description)||e}};function wy(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function uO(t){return wy(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const JP="2.23.2";let eg={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:r})=>e?`${t??"https://viem.sh"}${e}${r?`#${r}`:""}`:void 0,version:`viem@${JP}`};class Th extends Error{constructor(e,r={}){var c;const n=(()=>{var u;return r.cause instanceof Th?r.cause.details:(u=r.cause)!=null&&u.message?r.cause.message:r.details})(),i=r.cause instanceof Th&&r.cause.docsPath||r.docsPath,s=(c=eg.getDocsUrl)==null?void 0:c.call(eg,{...r,docsPath:i}),o=[e||"An error occurred.","",...r.metaMessages?[...r.metaMessages,""]:[],...s?[`Docs: ${s}`]:[],...n?[`Details: ${n}`]:[],...eg.version?[`Version: ${eg.version}`]:[]].join(`
`);super(o,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=i,this.metaMessages=r.metaMessages,this.name=r.name??this.name,this.shortMessage=e,this.version=JP}walk(e){return eB(this,e)}}function eB(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?eB(t.cause,e):e?null:t}class tB extends Th{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${r}).`,{name:"SizeExceedsPaddingSizeError"})}}function xp(t,{dir:e,size:r=32}={}){return typeof t=="string"?jye(t,{dir:e,size:r}):zye(t,{dir:e,size:r})}function jye(t,{dir:e,size:r=32}={}){if(r===null)return t;const n=t.replace("0x","");if(n.length>r*2)throw new tB({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](r*2,"0")}`}function zye(t,{dir:e,size:r=32}={}){if(r===null)return t;if(t.length>r)throw new tB({size:t.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s=e==="right";n[s?i:r-i-1]=t[s?i:t.length-i-1]}return n}class qye extends Th{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number "${s}" is not in safe ${i?`${i*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${r} to ${e})`:`(above ${r})`}`,{name:"IntegerOutOfRangeError"})}}class Fye extends Th{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed ${r} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Cp(t,{size:e}){if(uO(t)>e)throw new Fye({givenSize:uO(t),maxSize:e})}function l4(t,e={}){const{signed:r}=e;e.size&&Cp(t,{size:e.size});const n=BigInt(t);if(!r)return n;const i=(t.length-2)/2,s=(1n<<BigInt(i)*8n-1n)-1n;return n<=s?n:n-BigInt(`0x${"f".padStart(i*2,"f")}`)-1n}function Hye(t,e={}){return Number(l4(t,e))}const Wye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function u4(t,e={}){return typeof t=="number"||typeof t=="bigint"?nB(t,e):typeof t=="string"?Gye(t,e):typeof t=="boolean"?Kye(t,e):rB(t,e)}function Kye(t,e={}){const r=`0x${Number(t)}`;return typeof e.size=="number"?(Cp(r,{size:e.size}),xp(r,{size:e.size})):r}function rB(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=Wye[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(Cp(n,{size:e.size}),xp(n,{dir:"right",size:e.size})):n}function nB(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const u=typeof t=="bigint"?"n":"";throw new qye({max:s?`${s}${u}`:void 0,min:`${o}${u}`,signed:r,size:n,value:`${t}${u}`})}const c=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?xp(c,{size:n}):c}const Vye=new TextEncoder;function Gye(t,e={}){const r=Vye.encode(t);return rB(r,e)}const Yye=new TextEncoder;function Zye(t,e={}){return typeof t=="number"||typeof t=="bigint"?Xye(t,e):typeof t=="boolean"?Qye(t,e):wy(t)?iB(t,e):sB(t,e)}function Qye(t,e={}){const r=new Uint8Array(1);return r[0]=Number(t),typeof e.size=="number"?(Cp(r,{size:e.size}),xp(r,{size:e.size})):r}const Yc={zero:48,nine:57,A:65,F:70,a:97,f:102};function hO(t){if(t>=Yc.zero&&t<=Yc.nine)return t-Yc.zero;if(t>=Yc.A&&t<=Yc.F)return t-(Yc.A-10);if(t>=Yc.a&&t<=Yc.f)return t-(Yc.a-10)}function iB(t,e={}){let r=t;e.size&&(Cp(r,{size:e.size}),r=xp(r,{dir:"right",size:e.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let o=0,c=0;o<i;o++){const u=hO(n.charCodeAt(c++)),h=hO(n.charCodeAt(c++));if(u===void 0||h===void 0)throw new Th(`Invalid byte sequence ("${n[c-2]}${n[c-1]}" in "${n}").`);s[o]=u*16+h}return s}function Xye(t,e){const r=nB(t,e);return iB(r)}function sB(t,e={}){const r=Yye.encode(t);return typeof e.size=="number"?(Cp(r,{size:e.size}),xp(r,{dir:"right",size:e.size})):r}function G1(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Jye(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ww(t,...e){if(!Jye(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function QAe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");G1(t.outputLen),G1(t.blockLen)}function dO(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function eme(t,e){Ww(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const qb=BigInt(2**32-1),fO=BigInt(32);function tme(t,e=!1){return e?{h:Number(t&qb),l:Number(t>>fO&qb)}:{h:Number(t>>fO&qb)|0,l:Number(t&qb)|0}}function rme(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=tme(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const nme=(t,e,r)=>t<<r|e>>>32-r,ime=(t,e,r)=>e<<r|t>>>32-r,sme=(t,e,r)=>e<<r-32|t>>>64-r,ome=(t,e,r)=>t<<r-32|e>>>64-r,tf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ame(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function XAe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function JAe(t,e){return t<<32-e|t>>>e}const pO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function cme(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function gO(t){for(let e=0;e<t.length;e++)t[e]=cme(t[e])}function lme(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function oB(t){return typeof t=="string"&&(t=lme(t)),Ww(t),t}function e5e(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Ww(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class ume{clone(){return this._cloneInto()}}function hme(t){const e=n=>t().update(oB(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function t5e(t=32){if(tf&&typeof tf.getRandomValues=="function")return tf.getRandomValues(new Uint8Array(t));if(tf&&typeof tf.randomBytes=="function")return tf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const aB=[],cB=[],lB=[],dme=BigInt(0),tg=BigInt(1),fme=BigInt(2),pme=BigInt(7),gme=BigInt(256),yme=BigInt(113);for(let t=0,e=tg,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],aB.push(2*(5*n+r)),cB.push((t+1)*(t+2)/2%64);let i=dme;for(let s=0;s<7;s++)e=(e<<tg^(e>>pme)*yme)%gme,e&fme&&(i^=tg<<(tg<<BigInt(s))-tg);lB.push(i)}const[mme,bme]=rme(lB,!0),yO=(t,e,r)=>r>32?sme(t,e,r):nme(t,e,r),mO=(t,e,r)=>r>32?ome(t,e,r):ime(t,e,r);function wme(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,h=r[u],f=r[u+1],p=yO(h,f,1)^r[c],E=mO(h,f,1)^r[c+1];for(let S=0;S<50;S+=10)t[o+S]^=p,t[o+S+1]^=E}let i=t[2],s=t[3];for(let o=0;o<24;o++){const c=cB[o],u=yO(i,s,c),h=mO(i,s,c),f=aB[o];i=t[f],s=t[f+1],t[f]=u,t[f+1]=h}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)r[c]=t[o+c];for(let c=0;c<10;c++)t[o+c]^=~r[(c+2)%10]&r[(c+4)%10]}t[0]^=mme[n],t[1]^=bme[n]}r.fill(0)}class QA extends ume{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,G1(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ame(this.state)}keccak(){pO||gO(this.state32),wme(this.state32,this.rounds),pO||gO(this.state32),this.posOut=0,this.pos=0}update(e){dO(this);const{blockLen:r,state:n}=this;e=oB(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let c=0;c<o;c++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){dO(this,!1),Ww(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return G1(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eme(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new QA(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const vme=(t,e,r)=>hme(()=>new QA(e,t,r)),Eme=vme(1,136,256/8);function uB(t,e){const r=e||"hex",n=Eme(wy(t,{strict:!1})?Zye(t):t);return r==="bytes"?n:u4(n)}class _me extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const C3=new _me(8192);function Sme(t,e){if(C3.has(`${t}.${e}`))return C3.get(`${t}.${e}`);const r=t.substring(2).toLowerCase(),n=uB(sB(r),"bytes"),i=r.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&i[o]&&(i[o]=i[o].toUpperCase()),(n[o>>1]&15)>=8&&i[o+1]&&(i[o+1]=i[o+1].toUpperCase());const s=`0x${i.join("")}`;return C3.set(`${t}.${e}`,s),s}function Ame(t){const e=uB(`0x${t.substring(4)}`).substring(26);return Sme(`0x${e}`)}async function Ime({hash:t,signature:e}){const r=wy(t)?t:u4(t),{secp256k1:n}=await Jf(async()=>{const{secp256k1:o}=await import("./secp256k1-B2lpO346.js");return{secp256k1:o}},__vite__mapDeps([4,1]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:h,s:f,v:p,yParity:E}=e,S=Number(E??p),A=bO(S);return new n.Signature(l4(h),l4(f)).addRecoveryBit(A)}const o=wy(e)?e:u4(e),c=Hye(`0x${o.slice(130)}`),u=bO(c);return n.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(u)})().recoverPublicKey(r.substring(2)).toHex(!1)}`}function bO(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function xme({hash:t,signature:e}){return Ame(await Ime({hash:t,signature:e}))}function Cme(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let h=0;h<e.length;h++)e[h]=255;for(let h=0;h<t.length;h++){const f=t.charAt(h),p=f.charCodeAt(0);if(e[p]!==255)throw new TypeError(f+" is ambiguous");e[p]=h}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";let f=0,p=0,E=0;const S=h.length;for(;E!==S&&h[E]===0;)E++,f++;const A=(S-E)*s+1>>>0,I=new Uint8Array(A);for(;E!==S;){let k=h[E],U=0;for(let q=A-1;(k!==0||U<p)&&q!==-1;q--,U++)k+=256*I[q]>>>0,I[q]=k%r>>>0,k=k/r>>>0;if(k!==0)throw new Error("Non-zero carry");p=U,E++}let $=A-p;for(;$!==A&&I[$]===0;)$++;let L=n.repeat(f);for(;$<A;++$)L+=t.charAt(I[$]);return L}function c(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;let f=0,p=0,E=0;for(;h[f]===n;)p++,f++;const S=(h.length-f)*i+1>>>0,A=new Uint8Array(S);for(;f<h.length;){const k=h.charCodeAt(f);if(k>255)return;let U=e[k];if(U===255)return;let q=0;for(let j=S-1;(U!==0||q<E)&&j!==-1;j--,q++)U+=r*A[j]>>>0,A[j]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");E=q,f++}let I=S-E;for(;I!==S&&A[I]===0;)I++;const $=new Uint8Array(p+(S-I));let L=p;for(;I!==S;)$[L++]=A[I++];return $}function u(h){const f=c(h);if(f)return f;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var Tme="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const hB=Cme(Tme);var Mme={};const Nme=":";function qf(t){const[e,r]=t.split(Nme);return{namespace:e,reference:r}}function dB(t,e){return t.includes(":")?[t]:e.chains||[]}const Ome="ReactNative",Bo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Rme="js";function Y1(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function wu(){return!fo.getDocument()&&!!fo.getNavigator()&&navigator.product===Ome}function Dme(){return wu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function $me(){return wu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ky(){return!Y1()&&!!fo.getNavigator()&&!!fo.getDocument()}function Vy(){return wu()?Bo.reactNative:Y1()?Bo.node:Ky()?Bo.browser:Bo.unknown}function wO(){var t;try{return wu()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function kme(t,e){const r=new URLSearchParams(t);for(const n of Object.keys(e).sort())if(e.hasOwnProperty(n)){const i=e[n];i!==void 0&&r.set(n,i)}return r.toString()}function fB(){return k$.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function Pme(){if(Vy()===Bo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=D$();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Bme(){var t;const e=Vy();return e===Bo.browser?[e,((t=fo.getLocation())==null?void 0:t.host)||"unknown"].join(":"):e}function pB(t,e,r){const n=Pme(),i=Bme();return[[t,e].join("-"),[Rme,r].join("-"),n,i].join("/")}function Lme({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:c,packageName:u}){const h=r.split("?"),f=pB(t,e,n),p={auth:i,ua:f,projectId:s,useOnCloseEvent:o,packageName:u||void 0,bundleId:c||void 0},E=kme(h[1]||"",p);return h[0]+"?"+E}function ph(t,e){return t.filter(r=>e.includes(r)).length===t.length}function h4(t){return Object.fromEntries(t.entries())}function d4(t){return new Map(Object.entries(t))}function Ju(t=ye.FIVE_MINUTES,e){const r=ye.toMiliseconds(t||ye.FIVE_MINUTES);let n,i,s,o;return{resolve:c=>{s&&n&&(clearTimeout(s),n(c),o=Promise.resolve(c))},reject:c=>{s&&i&&(clearTimeout(s),i(c))},done:()=>new Promise((c,u)=>{if(o)return c(o);s=setTimeout(()=>{const h=new Error(e);o=Promise.reject(h),u(h)},r),n=c,i=u})}}function au(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function gB(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Ume(t){return gB("topic",t)}function jme(t){return gB("id",t)}function yB(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function vi(t,e){return ye.fromMiliseconds(Date.now()+ye.toMiliseconds(t))}function eu(t){return Date.now()>=ye.toMiliseconds(t)}function Wr(t,e){return`${t}${e?`:${e}`:""}`}function g1(t=[],e=[]){return[...new Set([...t,...e])]}async function zme({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=qme(s,t,e),c=Vy();if(c===Bo.browser){if(!((n=fo.getDocument())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Fme(o)}else c===Bo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function qme(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${Vme(n,!0)}`}else i=`${i}/wc?${n}`;return i}function Fme(t){let e="_self";Kme()?e="_top":(Wme()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Hme(t,e){let r="";try{if(Ky()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function vO(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function EO(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function XA(){return typeof process<"u"&&Mme.IS_VITEST==="true"}function Wme(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Kme(){try{return window.self!==window.top}catch{return!1}}function Vme(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function mB(t){return Buffer.from(t,"base64").toString("utf-8")}function Gme(t){return new Promise(e=>setTimeout(e,t))}function vy(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Yme(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Kw(t,...e){if(!Yme(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function JA(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");vy(t.outputLen),vy(t.blockLen)}function ap(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function bB(t,e){Kw(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Fb=BigInt(2**32-1),_O=BigInt(32);function Zme(t,e=!1){return e?{h:Number(t&Fb),l:Number(t>>_O&Fb)}:{h:Number(t>>_O&Fb)|0,l:Number(t&Fb)|0}}function Qme(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=Zme(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const Xme=(t,e,r)=>t<<r|e>>>32-r,Jme=(t,e,r)=>e<<r|t>>>32-r,ebe=(t,e,r)=>e<<r-32|t>>>64-r,tbe=(t,e,r)=>t<<r-32|e>>>64-r,rf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function rbe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function T3(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ja(t,e){return t<<32-e|t>>>e}const SO=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function nbe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function AO(t){for(let e=0;e<t.length;e++)t[e]=nbe(t[e])}function ibe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function cp(t){return typeof t=="string"&&(t=ibe(t)),Kw(t),t}let e5=class{clone(){return this._cloneInto()}};function wB(t){const e=n=>t().update(cp(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function Gy(t=32){if(rf&&typeof rf.getRandomValues=="function")return rf.getRandomValues(new Uint8Array(t));if(rf&&typeof rf.randomBytes=="function")return rf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const vB=[],EB=[],_B=[],sbe=BigInt(0),rg=BigInt(1),obe=BigInt(2),abe=BigInt(7),cbe=BigInt(256),lbe=BigInt(113);for(let t=0,e=rg,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],vB.push(2*(5*n+r)),EB.push((t+1)*(t+2)/2%64);let i=sbe;for(let s=0;s<7;s++)e=(e<<rg^(e>>abe)*lbe)%cbe,e&obe&&(i^=rg<<(rg<<BigInt(s))-rg);_B.push(i)}const[ube,hbe]=Qme(_B,!0),IO=(t,e,r)=>r>32?ebe(t,e,r):Xme(t,e,r),xO=(t,e,r)=>r>32?tbe(t,e,r):Jme(t,e,r);function dbe(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,h=r[u],f=r[u+1],p=IO(h,f,1)^r[c],E=xO(h,f,1)^r[c+1];for(let S=0;S<50;S+=10)t[o+S]^=p,t[o+S+1]^=E}let i=t[2],s=t[3];for(let o=0;o<24;o++){const c=EB[o],u=IO(i,s,c),h=xO(i,s,c),f=vB[o];i=t[f],s=t[f+1],t[f]=u,t[f+1]=h}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)r[c]=t[o+c];for(let c=0;c<10;c++)t[o+c]^=~r[(c+2)%10]&r[(c+4)%10]}t[0]^=ube[n],t[1]^=hbe[n]}r.fill(0)}let fbe=class SB extends e5{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,vy(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=rbe(this.state)}keccak(){SO||AO(this.state32),dbe(this.state32,this.rounds),SO||AO(this.state32),this.posOut=0,this.pos=0}update(e){ap(this);const{blockLen:r,state:n}=this;e=cp(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let c=0;c<o;c++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ap(this,!1),Kw(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return vy(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(bB(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new SB(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const pbe=(t,e,r)=>wB(()=>new fbe(e,t,r)),gbe=pbe(1,136,256/8),ybe="https://rpc.walletconnect.org/v1";function AB(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(gbe(r)).toString("hex")}async function mbe(t,e,r,n,i,s){switch(r.t){case"eip191":return await bbe(t,e,r.s);case"eip1271":return await wbe(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}async function bbe(t,e,r){return(await xme({hash:AB(e),signature:r})).toLowerCase()===t.toLowerCase()}async function wbe(t,e,r,n,i,s){const o=qf(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const c="0x1626ba7e",u="0000000000000000000000000000000000000000000000000000000000000040",h="0000000000000000000000000000000000000000000000000000000000000041",f=r.substring(2),p=AB(e).substring(2),E=c+p+u+h+f,S=await fetch(`${s||ybe}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:vbe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:E},"latest"]})}),{result:A}=await S.json();return A?A.slice(0,c.length).toLowerCase()===c.toLowerCase():!1}catch(c){return console.error("isValidEip1271Signature: ",c),!1}}function vbe(){return Date.now()+Math.floor(Math.random()*1e3)}function Ebe(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return hB.encode(s)}var _be=Object.defineProperty,Sbe=Object.defineProperties,Abe=Object.getOwnPropertyDescriptors,CO=Object.getOwnPropertySymbols,Ibe=Object.prototype.hasOwnProperty,xbe=Object.prototype.propertyIsEnumerable,TO=(t,e,r)=>e in t?_be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Cbe=(t,e)=>{for(var r in e||(e={}))Ibe.call(e,r)&&TO(t,r,e[r]);if(CO)for(var r of CO(e))xbe.call(e,r)&&TO(t,r,e[r]);return t},Tbe=(t,e)=>Sbe(t,Abe(e));const Mbe="did:pkh:",t5=t=>t==null?void 0:t.split(":"),Nbe=t=>{const e=t&&t5(t);if(e)return t.includes(Mbe)?e[3]:e[1]},f4=t=>{const e=t&&t5(t);if(e)return e[2]+":"+e[3]},Z1=t=>{const e=t&&t5(t);if(e)return e.pop()};async function MO(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=IB(i,i.iss),o=Z1(i.iss);return await mbe(o,s,n,f4(i.iss),r)}const IB=(t,e)=>{const r=`${t.domain} wants you to sign in with your Ethereum account:`,n=Z1(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=t.statement||void 0;const s=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,c=`Chain ID: ${Nbe(e)}`,u=`Nonce: ${t.nonce}`,h=`Issued At: ${t.iat}`,f=t.exp?`Expiration Time: ${t.exp}`:void 0,p=t.nbf?`Not Before: ${t.nbf}`:void 0,E=t.requestId?`Request ID: ${t.requestId}`:void 0,S=t.resources?`Resources:${t.resources.map(I=>`
- ${I}`).join("")}`:void 0,A=y1(t.resources);if(A){const I=Ey(A);i=Ube(i,I)}return[r,n,"",i,"",s,o,c,u,h,f,p,E,S].filter(I=>I!=null).join(`
`)};function Obe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Rbe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Mh(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function Dbe(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:$be(e,r,n)}}}function $be(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function xB(t){return Mh(t),`urn:recap:${Obe(t).replace(/=/g,"")}`}function Ey(t){const e=Rbe(t.replace("urn:recap:",""));return Mh(e),e}function kbe(t,e,r){const n=Dbe(t,e,r);return xB(n)}function Pbe(t){return t&&t.includes("urn:recap:")}function Bbe(t,e){const r=Ey(t),n=Ey(e),i=Lbe(r,n);return xB(i)}function Lbe(t,e){Mh(t),Mh(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((c,u)=>c.localeCompare(u)).forEach(c=>{var u,h;n.att[i]=Tbe(Cbe({},n.att[i]),{[c]:((u=t.att[i])==null?void 0:u[c])||((h=e.att[i])==null?void 0:h[c])})})}),n}function Ube(t="",e){Mh(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(c=>{const u=Object.keys(e.att[c]).map(p=>({ability:p.split("/")[0],action:p.split("/")[1]}));u.sort((p,E)=>p.action.localeCompare(E.action));const h={};u.forEach(p=>{h[p.ability]||(h[p.ability]=[]),h[p.ability].push(p.action)});const f=Object.keys(h).map(p=>(i++,`(${i}) '${p}': '${h[p].join("', '")}' for '${c}'.`));n.push(f.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function NO(t){var e;const r=Ey(t);Mh(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function OO(t){const e=Ey(t);Mh(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function y1(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Pbe(e)?e:void 0}function M3(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function CB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Do(t,...e){if(!CB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function RO(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jbe(t,e){Do(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function DO(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const hu=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),zbe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),qbe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!qbe)throw new Error("Non little-endian hardware is not supported");function Fbe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function p4(t){if(typeof t=="string")t=Fbe(t);else if(CB(t))t=g4(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Hbe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Wbe(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const Kbe=(t,e)=>{function r(n,...i){if(Do(n),t.nonceLength!==void 0){const h=i[0];if(!h)throw new Error("nonce / iv required");t.varSizeNonce?Do(h):Do(h,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&Do(i[1]);const o=e(n,...i),c=(h,f)=>{if(f!==void 0){if(h!==2)throw new Error("cipher output not supported");Do(f)}};let u=!1;return{encrypt(h,f){if(u)throw new Error("cannot encrypt() twice with same key + nonce");return u=!0,Do(h),c(o.encrypt.length,f),o.encrypt(h,f)},decrypt(h,f){if(Do(h),s&&h.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return c(o.decrypt.length,f),o.decrypt(h,f)}}}return Object.assign(r,t),r};function $O(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!Vbe(e))throw new Error("invalid output, must be aligned");return e}function kO(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),c=Number(r&s);t.setUint32(e+4,o,n),t.setUint32(e+0,c,n)}function Vbe(t){return t.byteOffset%4===0}function g4(t){return Uint8Array.from(t)}function lp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const TB=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Gbe=TB("expand 16-byte k"),Ybe=TB("expand 32-byte k"),Zbe=hu(Gbe),Qbe=hu(Ybe);function Dr(t,e){return t<<e|t>>>32-e}function y4(t){return t.byteOffset%4===0}const Hb=64,Xbe=16,MB=2**32-1,PO=new Uint32Array;function Jbe(t,e,r,n,i,s,o,c){const u=i.length,h=new Uint8Array(Hb),f=hu(h),p=y4(i)&&y4(s),E=p?hu(i):PO,S=p?hu(s):PO;for(let A=0;A<u;o++){if(t(e,r,n,f,o,c),o>=MB)throw new Error("arx: counter overflow");const I=Math.min(Hb,u-A);if(p&&I===Hb){const $=A/4;if(A%4!==0)throw new Error("arx: invalid block position");for(let L=0,k;L<Xbe;L++)k=$+L,S[k]=E[k]^f[L];A+=Hb;continue}for(let $=0,L;$<I;$++)L=A+$,s[L]=i[L]^h[$];A+=I}}function e1e(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=Hbe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return M3(i),M3(o),DO(s),DO(r),(c,u,h,f,p=0)=>{Do(c),Do(u),Do(h);const E=h.length;if(f===void 0&&(f=new Uint8Array(E)),Do(f),M3(p),p<0||p>=MB)throw new Error("arx: counter overflow");if(f.length<E)throw new Error(`arx: output (${f.length}) is shorter than data (${E})`);const S=[];let A=c.length,I,$;if(A===32)S.push(I=g4(c)),$=Qbe;else if(A===16&&r)I=new Uint8Array(32),I.set(c),I.set(c,16),$=Zbe,S.push(I);else throw new Error(`arx: invalid 32-byte key, got length=${A}`);y4(u)||S.push(u=g4(u));const L=hu(I);if(n){if(u.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n($,L,hu(u.subarray(0,16)),L),u=u.subarray(16)}const k=16-i;if(k!==u.length)throw new Error(`arx: nonce must be ${k} or 16 bytes`);if(k!==12){const q=new Uint8Array(12);q.set(u,s?0:12-u.length),u=q,S.push(u)}const U=hu(u);return Jbe(t,$,L,U,h,f,p,o),lp(...S),f}}const Qi=(t,e)=>t[e++]&255|(t[e++]&255)<<8;let t1e=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=p4(e),Do(e,32);const r=Qi(e,0),n=Qi(e,2),i=Qi(e,4),s=Qi(e,6),o=Qi(e,8),c=Qi(e,10),u=Qi(e,12),h=Qi(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|c<<2)&8191,this.r[7]=(c>>>11|u<<5)&8065,this.r[8]=(u>>>8|h<<8)&8191,this.r[9]=h>>>5&127;for(let f=0;f<8;f++)this.pad[f]=Qi(e,16+2*f)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,c=o[0],u=o[1],h=o[2],f=o[3],p=o[4],E=o[5],S=o[6],A=o[7],I=o[8],$=o[9],L=Qi(e,r+0),k=Qi(e,r+2),U=Qi(e,r+4),q=Qi(e,r+6),j=Qi(e,r+8),z=Qi(e,r+10),V=Qi(e,r+12),G=Qi(e,r+14);let B=s[0]+(L&8191),W=s[1]+((L>>>13|k<<3)&8191),D=s[2]+((k>>>10|U<<6)&8191),_=s[3]+((U>>>7|q<<9)&8191),w=s[4]+((q>>>4|j<<12)&8191),g=s[5]+(j>>>1&8191),b=s[6]+((j>>>14|z<<2)&8191),m=s[7]+((z>>>11|V<<5)&8191),M=s[8]+((V>>>8|G<<8)&8191),R=s[9]+(G>>>5|i),C=0,v=C+B*c+W*(5*$)+D*(5*I)+_*(5*A)+w*(5*S);C=v>>>13,v&=8191,v+=g*(5*E)+b*(5*p)+m*(5*f)+M*(5*h)+R*(5*u),C+=v>>>13,v&=8191;let O=C+B*u+W*c+D*(5*$)+_*(5*I)+w*(5*A);C=O>>>13,O&=8191,O+=g*(5*S)+b*(5*E)+m*(5*p)+M*(5*f)+R*(5*h),C+=O>>>13,O&=8191;let x=C+B*h+W*u+D*c+_*(5*$)+w*(5*I);C=x>>>13,x&=8191,x+=g*(5*A)+b*(5*S)+m*(5*E)+M*(5*p)+R*(5*f),C+=x>>>13,x&=8191;let N=C+B*f+W*h+D*u+_*c+w*(5*$);C=N>>>13,N&=8191,N+=g*(5*I)+b*(5*A)+m*(5*S)+M*(5*E)+R*(5*p),C+=N>>>13,N&=8191;let H=C+B*p+W*f+D*h+_*u+w*c;C=H>>>13,H&=8191,H+=g*(5*$)+b*(5*I)+m*(5*A)+M*(5*S)+R*(5*E),C+=H>>>13,H&=8191;let Y=C+B*E+W*p+D*f+_*h+w*u;C=Y>>>13,Y&=8191,Y+=g*c+b*(5*$)+m*(5*I)+M*(5*A)+R*(5*S),C+=Y>>>13,Y&=8191;let Q=C+B*S+W*E+D*p+_*f+w*h;C=Q>>>13,Q&=8191,Q+=g*u+b*c+m*(5*$)+M*(5*I)+R*(5*A),C+=Q>>>13,Q&=8191;let ee=C+B*A+W*S+D*E+_*p+w*f;C=ee>>>13,ee&=8191,ee+=g*h+b*u+m*c+M*(5*$)+R*(5*I),C+=ee>>>13,ee&=8191;let re=C+B*I+W*A+D*S+_*E+w*p;C=re>>>13,re&=8191,re+=g*f+b*h+m*u+M*c+R*(5*$),C+=re>>>13,re&=8191;let oe=C+B*$+W*I+D*A+_*S+w*E;C=oe>>>13,oe&=8191,oe+=g*p+b*f+m*h+M*u+R*c,C+=oe>>>13,oe&=8191,C=(C<<2)+C|0,C=C+v|0,v=C&8191,C=C>>>13,O+=C,s[0]=v,s[1]=O,s[2]=x,s[3]=N,s[4]=H,s[5]=Y,s[6]=Q,s[7]=ee,s[8]=re,s[9]=oe}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=i,i=e[c]>>>13,e[c]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let c=1;c<10;c++)n[c]=e[c]+i,i=n[c]>>>13,n[c]&=8191;n[9]-=8192;let s=(i^1)-1;for(let c=0;c<10;c++)n[c]&=s;s=~s;for(let c=0;c<10;c++)e[c]=e[c]&s|n[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let c=1;c<8;c++)o=(e[c]+r[c]|0)+(o>>>16)|0,e[c]=o&65535;lp(n)}update(e){RO(this);const{buffer:r,blockLen:n}=this;e=p4(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){lp(this.h,this.r,this.buffer,this.pad)}digestInto(e){RO(this),jbe(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}};function r1e(t){const e=(n,i)=>t(i).update(p4(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const n1e=r1e(t=>new t1e(t));function i1e(t,e,r,n,i,s=20){let o=t[0],c=t[1],u=t[2],h=t[3],f=e[0],p=e[1],E=e[2],S=e[3],A=e[4],I=e[5],$=e[6],L=e[7],k=i,U=r[0],q=r[1],j=r[2],z=o,V=c,G=u,B=h,W=f,D=p,_=E,w=S,g=A,b=I,m=$,M=L,R=k,C=U,v=q,O=j;for(let N=0;N<s;N+=2)z=z+W|0,R=Dr(R^z,16),g=g+R|0,W=Dr(W^g,12),z=z+W|0,R=Dr(R^z,8),g=g+R|0,W=Dr(W^g,7),V=V+D|0,C=Dr(C^V,16),b=b+C|0,D=Dr(D^b,12),V=V+D|0,C=Dr(C^V,8),b=b+C|0,D=Dr(D^b,7),G=G+_|0,v=Dr(v^G,16),m=m+v|0,_=Dr(_^m,12),G=G+_|0,v=Dr(v^G,8),m=m+v|0,_=Dr(_^m,7),B=B+w|0,O=Dr(O^B,16),M=M+O|0,w=Dr(w^M,12),B=B+w|0,O=Dr(O^B,8),M=M+O|0,w=Dr(w^M,7),z=z+D|0,O=Dr(O^z,16),m=m+O|0,D=Dr(D^m,12),z=z+D|0,O=Dr(O^z,8),m=m+O|0,D=Dr(D^m,7),V=V+_|0,R=Dr(R^V,16),M=M+R|0,_=Dr(_^M,12),V=V+_|0,R=Dr(R^V,8),M=M+R|0,_=Dr(_^M,7),G=G+w|0,C=Dr(C^G,16),g=g+C|0,w=Dr(w^g,12),G=G+w|0,C=Dr(C^G,8),g=g+C|0,w=Dr(w^g,7),B=B+W|0,v=Dr(v^B,16),b=b+v|0,W=Dr(W^b,12),B=B+W|0,v=Dr(v^B,8),b=b+v|0,W=Dr(W^b,7);let x=0;n[x++]=o+z|0,n[x++]=c+V|0,n[x++]=u+G|0,n[x++]=h+B|0,n[x++]=f+W|0,n[x++]=p+D|0,n[x++]=E+_|0,n[x++]=S+w|0,n[x++]=A+g|0,n[x++]=I+b|0,n[x++]=$+m|0,n[x++]=L+M|0,n[x++]=k+R|0,n[x++]=U+C|0,n[x++]=q+v|0,n[x++]=j+O|0}const s1e=e1e(i1e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),o1e=new Uint8Array(16),BO=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(o1e.subarray(r))},a1e=new Uint8Array(32);function LO(t,e,r,n,i){const s=t(e,r,a1e),o=n1e.create(s);i&&BO(o,i),BO(o,n);const c=new Uint8Array(16),u=zbe(c);kO(u,0,BigInt(i?i.length:0),!0),kO(u,8,BigInt(n.length),!0),o.update(c);const h=o.digest();return lp(s,c),h}const c1e=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=$O(o+16,s,!1),s.set(i);const c=s.subarray(0,-16);t(e,r,c,c,1);const u=LO(t,e,r,c,n);return s.set(u,o),lp(u),s},decrypt(i,s){s=$O(i.length-16,s,!1);const o=i.subarray(0,-16),c=i.subarray(-16),u=LO(t,e,r,o,n);if(!Wbe(c,u))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),lp(u),s}}),NB=Kbe({blockSize:64,nonceLength:12,tagLength:16},c1e(s1e));let OB=class extends e5{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,JA(e);const n=cp(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return ap(this),this.iHash.update(e),this}digestInto(e){ap(this),Kw(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const r5=(t,e,r)=>new OB(t,e).update(r).digest();r5.create=(t,e)=>new OB(t,e);function l1e(t,e,r){return JA(t),r===void 0&&(r=new Uint8Array(t.outputLen)),r5(t,cp(r),cp(e))}const N3=new Uint8Array([0]),UO=new Uint8Array;function u1e(t,e,r,n=32){if(JA(t),vy(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/t.outputLen);r===void 0&&(r=UO);const s=new Uint8Array(i*t.outputLen),o=r5.create(t,e),c=o._cloneInto(),u=new Uint8Array(o.outputLen);for(let h=0;h<i;h++)N3[0]=h+1,c.update(h===0?UO:u).update(r).update(N3).digestInto(u),s.set(u,t.outputLen*h),o._cloneInto(c);return o.destroy(),c.destroy(),u.fill(0),N3.fill(0),s.slice(0,n)}const h1e=(t,e,r,n,i)=>u1e(t,l1e(t,e,r),n,i);function d1e(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),c=Number(r&s),u=n?4:0,h=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+h,c,n)}function f1e(t,e,r){return t&e^~t&r}function p1e(t,e,r){return t&e^t&r^e&r}class g1e extends e5{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=T3(this.buffer)}update(e){ap(this);const{view:r,buffer:n,blockLen:i}=this;e=cp(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const u=T3(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ap(this),bB(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let p=o;p<i;p++)r[p]=0;d1e(n,i-8,BigInt(this.length*8),s),this.process(n,0);const c=T3(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=u/4,f=this.get();if(h>f.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<h;p++)c.setUint32(4*p,f[p],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}}const y1e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Vl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Gl=new Uint32Array(64);let m1e=class extends g1e{constructor(){super(64,32,8,!1),this.A=Vl[0]|0,this.B=Vl[1]|0,this.C=Vl[2]|0,this.D=Vl[3]|0,this.E=Vl[4]|0,this.F=Vl[5]|0,this.G=Vl[6]|0,this.H=Vl[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:c,H:u}=this;return[e,r,n,i,s,o,c,u]}set(e,r,n,i,s,o,c,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=u|0}process(e,r){for(let p=0;p<16;p++,r+=4)Gl[p]=e.getUint32(r,!1);for(let p=16;p<64;p++){const E=Gl[p-15],S=Gl[p-2],A=Ja(E,7)^Ja(E,18)^E>>>3,I=Ja(S,17)^Ja(S,19)^S>>>10;Gl[p]=I+Gl[p-7]+A+Gl[p-16]|0}let{A:n,B:i,C:s,D:o,E:c,F:u,G:h,H:f}=this;for(let p=0;p<64;p++){const E=Ja(c,6)^Ja(c,11)^Ja(c,25),S=f+E+f1e(c,u,h)+y1e[p]+Gl[p]|0,A=(Ja(n,2)^Ja(n,13)^Ja(n,22))+p1e(n,i,s)|0;f=h,h=u,u=c,c=o+S|0,o=s,s=i,i=n,n=S+A|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(n,i,s,o,c,u,h,f)}roundClean(){Gl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Vw=wB(()=>new m1e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RB=BigInt(0);function n5(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function DB(t){if(!n5(t))throw new Error("Uint8Array expected")}const b1e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function w1e(t){DB(t);let e="";for(let r=0;r<t.length;r++)e+=b1e[t[r]];return e}function v1e(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?RB:BigInt("0x"+t)}const Zc={_0:48,_9:57,A:65,F:70,a:97,f:102};function jO(t){if(t>=Zc._0&&t<=Zc._9)return t-Zc._0;if(t>=Zc.A&&t<=Zc.F)return t-(Zc.A-10);if(t>=Zc.a&&t<=Zc.f)return t-(Zc.a-10)}function $B(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=jO(t.charCodeAt(s)),c=jO(t.charCodeAt(s+1));if(o===void 0||c===void 0){const u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+c}return n}function zO(t){return DB(t),v1e(w1e(Uint8Array.from(t).reverse()))}function E1e(t,e){return $B(t.toString(16).padStart(e*2,"0"))}function _1e(t,e){return E1e(t,e).reverse()}function qO(t,e,r){let n;if(typeof e=="string")try{n=$B(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(n5(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const O3=t=>typeof t=="bigint"&&RB<=t;function S1e(t,e,r){return O3(t)&&O3(e)&&O3(r)&&e<=t&&t<r}function FO(t,e,r,n){if(!S1e(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}const A1e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||n5(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function I1e(t,e,r={}){const n=(i,s,o)=>{const c=A1e[s];if(typeof c!="function")throw new Error("invalid validator function");const u=t[i];if(!(o&&u===void 0)&&!c(u,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+u)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}const Df=BigInt(0),Wb=BigInt(1);function kB(t,e){const r=t%e;return r>=Df?r:e+r}function x1e(t,e,r){if(e<Df)throw new Error("invalid exponent, negatives unsupported");if(r<=Df)throw new Error("invalid modulus");if(r===Wb)return Df;let n=Wb;for(;e>Df;)e&Wb&&(n=n*t%r),t=t*t%r,e>>=Wb;return n}function xa(t,e,r){let n=t;for(;e-- >Df;)n*=n,n%=r;return n}BigInt(0),BigInt(1),BigInt(0),BigInt(1),BigInt(2),BigInt(8);const nf=BigInt(0),R3=BigInt(1);function C1e(t){return I1e(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function T1e(t){const e=C1e(t),{P:r}=e,n=k=>kB(k,r),i=e.montgomeryBits,s=Math.ceil(i/8),o=e.nByteLength,c=e.adjustScalarBytes||(k=>k),u=e.powPminus2||(k=>x1e(k,r-BigInt(2),r));function h(k,U,q){const j=n(k*(U-q));return U=n(U-j),q=n(q+j),[U,q]}const f=(e.a-BigInt(2))/BigInt(4);function p(k,U){FO("u",k,nf,r),FO("scalar",U,nf,r);const q=U,j=k;let z=R3,V=nf,G=k,B=R3,W=nf,D;for(let w=BigInt(i-1);w>=nf;w--){const g=q>>w&R3;W^=g,D=h(W,z,G),z=D[0],G=D[1],D=h(W,V,B),V=D[0],B=D[1],W=g;const b=z+V,m=n(b*b),M=z-V,R=n(M*M),C=m-R,v=G+B,O=G-B,x=n(O*b),N=n(v*M),H=x+N,Y=x-N;G=n(H*H),B=n(j*n(Y*Y)),z=n(m*R),V=n(C*(m+n(f*C)))}D=h(W,z,G),z=D[0],G=D[1],D=h(W,V,B),V=D[0],B=D[1];const _=u(V);return n(z*_)}function E(k){return _1e(n(k),s)}function S(k){const U=qO("u coordinate",k,s);return o===32&&(U[31]&=127),zO(U)}function A(k){const U=qO("scalar",k),q=U.length;if(q!==s&&q!==o){let j=""+s+" or "+o;throw new Error("invalid scalar, expected "+j+" bytes, got "+q)}return zO(c(U))}function I(k,U){const q=S(U),j=A(k),z=p(q,j);if(z===nf)throw new Error("invalid private or public key received");return E(z)}const $=E(e.Gu);function L(k){return I(k,$)}return{scalarMult:I,scalarMultBase:L,getSharedSecret:(k,U)=>I(k,U),getPublicKey:k=>L(k),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:$}}const m4=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const M1e=BigInt(1),HO=BigInt(2),N1e=BigInt(3),O1e=BigInt(5);BigInt(8);function R1e(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=m4,o=t*t%s*t%s,c=xa(o,HO,s)*o%s,u=xa(c,M1e,s)*t%s,h=xa(u,O1e,s)*u%s,f=xa(h,e,s)*h%s,p=xa(f,r,s)*f%s,E=xa(p,n,s)*p%s,S=xa(E,i,s)*E%s,A=xa(S,i,s)*E%s,I=xa(A,e,s)*h%s;return{pow_p_5_8:xa(I,HO,s)*t%s,b2:o}}function D1e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const b4=T1e({P:m4,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=m4,{pow_p_5_8:r,b2:n}=R1e(t);return kB(xa(r,N1e,e)*n,e)},adjustScalarBytes:D1e,randomBytes:Gy}),PB="base10",Cs="base16",cu="base64pad",ng="base64url",Yy="utf8",BB=0,cl=1,Zy=2,$1e=0,WO=1,Og=12,i5=32;function k1e(){const t=b4.utils.randomPrivateKey(),e=b4.getPublicKey(t);return{privateKey:Vr(t,Cs),publicKey:Vr(e,Cs)}}function w4(){const t=Gy(i5);return Vr(t,Cs)}function P1e(t,e){const r=b4.getSharedSecret(Pn(t,Cs),Pn(e,Cs)),n=h1e(Vw,r,void 0,void 0,i5);return Vr(n,Cs)}function m1(t){const e=Vw(Pn(t,Cs));return Vr(e,Cs)}function oc(t){const e=Vw(Pn(t,Yy));return Vr(e,Cs)}function LB(t){return Pn(`${t}`,PB)}function Nh(t){return Number(Vr(t,PB))}function B1e(t){const e=LB(typeof t.type<"u"?t.type:BB);if(Nh(e)===cl&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Pn(t.senderPublicKey,Cs):void 0,n=typeof t.iv<"u"?Pn(t.iv,Cs):Gy(Og),i=Pn(t.symKey,Cs),s=NB(i,n).encrypt(Pn(t.message,Yy));return UB({type:e,sealed:s,iv:n,senderPublicKey:r,encoding:t.encoding})}function L1e(t){const e=Pn(t.symKey,Cs),{sealed:r,iv:n}=_y(t),i=NB(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return Vr(i,Yy)}function U1e(t,e){const r=LB(Zy),n=Gy(Og),i=Pn(t,Yy);return UB({type:r,sealed:i,iv:n,encoding:e})}function j1e(t,e){const{sealed:r}=_y({encoded:t,encoding:e});return Vr(r,Yy)}function UB(t){const{encoding:e=cu}=t;if(Nh(t.type)===Zy)return Vr(jf([t.type,t.sealed]),e);if(Nh(t.type)===cl){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Vr(jf([t.type,t.senderPublicKey,t.iv,t.sealed]),e)}return Vr(jf([t.type,t.iv,t.sealed]),e)}function _y(t){const{encoded:e,encoding:r=cu}=t,n=Pn(e,r),i=n.slice($1e,WO),s=WO;if(Nh(i)===cl){const h=s+i5,f=h+Og,p=n.slice(s,h),E=n.slice(h,f),S=n.slice(f);return{type:i,sealed:S,iv:E,senderPublicKey:p}}if(Nh(i)===Zy){const h=n.slice(s),f=Gy(Og);return{type:i,sealed:h,iv:f}}const o=s+Og,c=n.slice(s,o),u=n.slice(o);return{type:i,sealed:u,iv:c}}function z1e(t,e){const r=_y({encoded:t,encoding:e==null?void 0:e.encoding});return jB({type:Nh(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Vr(r.senderPublicKey,Cs):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function jB(t){const e=(t==null?void 0:t.type)||BB;if(e===cl){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function KO(t){return t.type===cl&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function VO(t){return t.type===Zy}function q1e(t){return new ok.ec("p256").keyFromPublic({x:Buffer.from(t.x,"base64").toString("hex"),y:Buffer.from(t.y,"base64").toString("hex")},"hex")}function F1e(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const r=e.length%4;return r>0&&(e+="=".repeat(4-r)),e}function H1e(t){return Buffer.from(F1e(t),"base64")}function W1e(t,e){const[r,n,i]=t.split("."),s=H1e(i);if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32).toString("hex"),c=s.slice(32,64).toString("hex"),u=`${r}.${n}`,h=Vw(u),f=q1e(e),p=Vr(h,Cs);if(!f.verify(p,{r:o,s:c}))throw new Error("Invalid signature");return ep(t).payload}const K1e="irn";function Q1(t){return(t==null?void 0:t.relay)||{protocol:K1e}}function yg(t){const e=ak[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function V1e(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function GO(t){if(!t.includes("wc:")){const h=mB(t);h!=null&&h.includes("wc:")&&(t=h)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),c={};o.forEach((h,f)=>{c[f]=h});const u=typeof c.methods=="string"?c.methods.split(","):void 0;return{protocol:n,topic:G1e(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:V1e(c),methods:u,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function G1e(t){return t.startsWith("//")?t.substring(2):t}function Y1e(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function YO(t){const e=new URLSearchParams,r=Y1e(t.relay);Object.keys(r).sort().forEach(i=>{e.set(i,r[i])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const n=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${n}`}function Kb(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}function Tp(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function Z1e(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Tp(r.accounts))}),e}function Q1e(t,e){const r=[];return Object.values(t).forEach(n=>{Tp(n.accounts).includes(e)&&r.push(...n.methods)}),r}function X1e(t,e){const r=[];return Object.values(t).forEach(n=>{Tp(n.accounts).includes(e)&&r.push(...n.events)}),r}function s5(t){return t.includes(":")}function mg(t){return s5(t)?t.split(":")[0]:t}function J1e(t){const e={};return t==null||t.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function ZO(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=J1e(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=g1(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}const ewe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},twe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Xe(t,e){const{message:r,code:n}=twe[t];return{message:e?`${r} ${e}`:r,code:n}}function hn(t,e){const{message:r,code:n}=ewe[t];return{message:e?`${r} ${e}`:r,code:n}}function Oh(t,e){return!!Array.isArray(t)}function Sy(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ns(t){return typeof t>"u"}function fi(t,e){return e&&ns(t)?!0:typeof t=="string"&&!!t.trim().length}function o5(t,e){return e&&ns(t)?!0:typeof t=="number"&&!isNaN(t)}function rwe(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return ph(i,n)?(n.forEach(o=>{const{accounts:c,methods:u,events:h}=t.namespaces[o],f=Tp(c),p=r[o];(!ph(dB(o,p),f)||!ph(p.methods,u)||!ph(p.events,h))&&(s=!1)}),s):!1}function X1(t){return fi(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function nwe(t){if(fi(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&X1(r)}}return!1}function iwe(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(fi(t,!1)){if(e(t))return!0;const r=mB(t);return e(r)}}catch{}return!1}function swe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function owe(t){return t==null?void 0:t.topic}function awe(t,e){let r=null;return fi(t==null?void 0:t.publicKey,!1)||(r=Xe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function QO(t){let e=!0;return Oh(t)?t.length&&(e=t.every(r=>fi(r,!1))):e=!1,e}function cwe(t,e,r){let n=null;return Oh(e)&&e.length?e.forEach(i=>{n||X1(i)||(n=hn("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):X1(t)||(n=hn("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function lwe(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=cwe(i,dB(i,s),`${e} ${r}`);o&&(n=o)}),n}function uwe(t,e){let r=null;return Oh(t)?t.forEach(n=>{r||nwe(n)||(r=hn("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=hn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function hwe(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=uwe(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function dwe(t,e){let r=null;return QO(t==null?void 0:t.methods)?QO(t==null?void 0:t.events)||(r=hn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=hn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function zB(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=dwe(n,`${e}, namespace`);i&&(r=i)}),r}function fwe(t,e,r){let n=null;if(t&&Sy(t)){const i=zB(t,e);i&&(n=i);const s=lwe(t,e,r);s&&(n=s)}else n=Xe("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function D3(t,e){let r=null;if(t&&Sy(t)){const n=zB(t,e);n&&(r=n);const i=hwe(t,e);i&&(r=i)}else r=Xe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function qB(t){return fi(t.protocol,!0)}function pwe(t,e){let r=!1;return t?t&&Oh(t)&&t.length&&t.forEach(n=>{r=qB(n)}):r=!0,r}function gwe(t){return typeof t=="number"}function so(t){return typeof t<"u"&&typeof t!==null}function ywe(t){return!(!t||typeof t!="object"||!t.code||!o5(t.code,!1)||!t.message||!fi(t.message,!1))}function mwe(t){return!(ns(t)||!fi(t.method,!1))}function bwe(t){return!(ns(t)||ns(t.result)&&ns(t.error)||!o5(t.id,!1)||!fi(t.jsonrpc,!1))}function wwe(t){return!(ns(t)||!fi(t.name,!1))}function XO(t,e){return!(!X1(e)||!Z1e(t).includes(e))}function vwe(t,e,r){return fi(r,!1)?Q1e(t,e).includes(r):!1}function Ewe(t,e,r){return fi(r,!1)?X1e(t,e).includes(r):!1}function JO(t,e,r){let n=null;const i=_we(t),s=Swe(e),o=Object.keys(i),c=Object.keys(s),u=e7(Object.keys(t)),h=e7(Object.keys(e)),f=u.filter(p=>!h.includes(p));return f.length&&(n=Xe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(e).toString()}`)),ph(o,c)||(n=Xe("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${c.toString()}`)),Object.keys(e).forEach(p=>{if(!p.includes(":")||n)return;const E=Tp(e[p].accounts);E.includes(p)||(n=Xe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${p}
        Required: ${p}
        Approved: ${E.toString()}`))}),o.forEach(p=>{n||(ph(i[p].methods,s[p].methods)?ph(i[p].events,s[p].events)||(n=Xe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${p}`)):n=Xe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${p}`))}),n}function _we(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function e7(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Swe(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=Tp(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function Awe(t,e){return o5(t,!1)&&t<=e.max&&t>=e.min}function t7(){const t=Vy();return new Promise(e=>{switch(t){case Bo.browser:e(Iwe());break;case Bo.reactNative:e(xwe());break;case Bo.node:e(Cwe());break;default:e(!0)}})}function Iwe(){return Ky()&&(navigator==null?void 0:navigator.onLine)}async function xwe(){if(wu()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function Cwe(){return!0}function Twe(t){switch(Vy()){case Bo.browser:Mwe(t);break;case Bo.reactNative:Nwe(t);break}}function Mwe(t){!wu()&&Ky()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function Nwe(t){wu()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}const $3={};class ig{static get(e){return $3[e]}static set(e,r){$3[e]=r}static delete(e){delete $3[e]}}const FB="wc",HB=2,v4="core",gc=`${FB}@2:${v4}:`,Owe={logger:"error"},Rwe={database:":memory:"},Dwe="crypto",r7="client_ed25519_seed",$we=ye.ONE_DAY,kwe="keychain",Pwe="0.3",Bwe="messages",Lwe="0.3",n7=ye.SIX_HOURS,Uwe="publisher",WB="irn",jwe="error",KB="wss://relay.walletconnect.org",zwe="relayer",ji={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},qwe="_subscription",Jo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Fwe=.1,E4="2.19.1",Dn={link_mode:"link_mode",relay:"relay"},b1={inbound:"inbound",outbound:"outbound"},Hwe="0.3",Wwe="WALLETCONNECT_CLIENT_ID",i7="WALLETCONNECT_LINK_MODE_APPS",Mo={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Kwe="subscription",Vwe="0.3",Gwe="pairing",Ywe="0.3",sg={wc_pairingDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ye.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:0},res:{ttl:ye.ONE_DAY,prompt:!1,tag:0}}},nh={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},_a={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Zwe="history",Qwe="0.3",Xwe="expirer",na={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Jwe="0.3",eve="verify-api",tve="https://verify.walletconnect.com",VB="https://verify.walletconnect.org",Rg=VB,rve=`${Rg}/v3`,nve=[tve,VB],ive="echo",sve="https://echo.walletconnect.com",ic={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Jc={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Sa={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Vu={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Gu={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},og={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},ove=.1,ave="event-client",cve=86400,lve="https://pulse.walletconnect.org/batch";function uve(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var c=t.length,u=t.charAt(0),h=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function p(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var I=0,$=0,L=0,k=A.length;L!==k&&A[L]===0;)L++,I++;for(var U=(k-L)*f+1>>>0,q=new Uint8Array(U);L!==k;){for(var j=A[L],z=0,V=U-1;(j!==0||z<$)&&V!==-1;V--,z++)j+=256*q[V]>>>0,q[V]=j%c>>>0,j=j/c>>>0;if(j!==0)throw new Error("Non-zero carry");$=z,L++}for(var G=U-$;G!==U&&q[G]===0;)G++;for(var B=u.repeat(I);G<U;++G)B+=t.charAt(q[G]);return B}function E(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var I=0;if(A[I]!==" "){for(var $=0,L=0;A[I]===u;)$++,I++;for(var k=(A.length-I)*h+1>>>0,U=new Uint8Array(k);A[I];){var q=r[A.charCodeAt(I)];if(q===255)return;for(var j=0,z=k-1;(q!==0||j<L)&&z!==-1;z--,j++)q+=c*U[z]>>>0,U[z]=q%256>>>0,q=q/256>>>0;if(q!==0)throw new Error("Non-zero carry");L=j,I++}if(A[I]!==" "){for(var V=k-L;V!==k&&U[V]===0;)V++;for(var G=new Uint8Array($+(k-V)),B=$;V!==k;)G[B++]=U[V++];return G}}}function S(A){var I=E(A);if(I)return I;throw new Error(`Non-${e} character`)}return{encode:p,decodeUnsafe:E,decode:S}}var hve=uve,dve=hve;const GB=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fve=t=>new TextEncoder().encode(t),pve=t=>new TextDecoder().decode(t);class gve{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class yve{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return YB(this,e)}}class mve{constructor(e){this.decoders=e}or(e){return YB(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const YB=(t,e)=>new mve({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class bve{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new gve(e,r,n),this.decoder=new yve(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Gw=({name:t,prefix:e,encode:r,decode:n})=>new bve(t,e,r,n),Qy=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=dve(r,e);return Gw({prefix:t,name:e,encode:n,decode:s=>GB(i(s))})},wve=(t,e,r,n)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let c=0,u=0,h=0;for(let f=0;f<s;++f){const p=i[t[f]];if(p===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|p,c+=r,c>=8&&(c-=8,o[h++]=255&u>>c)}if(c>=r||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return o},vve=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,c=0;for(let u=0;u<t.length;++u)for(c=c<<8|t[u],o+=8;o>r;)o-=r,s+=e[i&c>>o];if(o&&(s+=e[i&c<<r-o]),n)for(;s.length*r&7;)s+="=";return s},ls=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Gw({prefix:e,name:t,encode(i){return vve(i,n,r)},decode(i){return wve(i,n,r,t)}}),Eve=Gw({prefix:"\0",name:"identity",encode:t=>pve(t),decode:t=>fve(t)});var _ve=Object.freeze({__proto__:null,identity:Eve});const Sve=ls({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ave=Object.freeze({__proto__:null,base2:Sve});const Ive=ls({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var xve=Object.freeze({__proto__:null,base8:Ive});const Cve=Qy({prefix:"9",name:"base10",alphabet:"0123456789"});var Tve=Object.freeze({__proto__:null,base10:Cve});const Mve=ls({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nve=ls({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ove=Object.freeze({__proto__:null,base16:Mve,base16upper:Nve});const Rve=ls({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Dve=ls({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),$ve=ls({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kve=ls({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Pve=ls({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Bve=ls({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Lve=ls({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Uve=ls({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),jve=ls({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var zve=Object.freeze({__proto__:null,base32:Rve,base32upper:Dve,base32pad:$ve,base32padupper:kve,base32hex:Pve,base32hexupper:Bve,base32hexpad:Lve,base32hexpadupper:Uve,base32z:jve});const qve=Qy({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Fve=Qy({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Hve=Object.freeze({__proto__:null,base36:qve,base36upper:Fve});const Wve=Qy({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Kve=Qy({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Vve=Object.freeze({__proto__:null,base58btc:Wve,base58flickr:Kve});const Gve=ls({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Yve=ls({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Zve=ls({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Qve=ls({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Xve=Object.freeze({__proto__:null,base64:Gve,base64pad:Yve,base64url:Zve,base64urlpad:Qve});const ZB=Array.from(""),Jve=ZB.reduce((t,e,r)=>(t[r]=e,t),[]),e2e=ZB.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function t2e(t){return t.reduce((e,r)=>(e+=Jve[r],e),"")}function r2e(t){const e=[];for(const r of t){const n=e2e[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const n2e=Gw({prefix:"",name:"base256emoji",encode:t2e,decode:r2e});var i2e=Object.freeze({__proto__:null,base256emoji:n2e}),s2e=QB,s7=128,o2e=-128,a2e=Math.pow(2,31);function QB(t,e,r){e=e||[],r=r||0;for(var n=r;t>=a2e;)e[r++]=t&255|s7,t/=128;for(;t&o2e;)e[r++]=t&255|s7,t>>>=7;return e[r]=t|0,QB.bytes=r-n+1,e}var c2e=_4,l2e=128,o7=127;function _4(t,n){var r=0,n=n||0,i=0,s=n,o,c=t.length;do{if(s>=c)throw _4.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&o7)<<i:(o&o7)*Math.pow(2,i),i+=7}while(o>=l2e);return _4.bytes=s-n,r}var u2e=Math.pow(2,7),h2e=Math.pow(2,14),d2e=Math.pow(2,21),f2e=Math.pow(2,28),p2e=Math.pow(2,35),g2e=Math.pow(2,42),y2e=Math.pow(2,49),m2e=Math.pow(2,56),b2e=Math.pow(2,63),w2e=function(t){return t<u2e?1:t<h2e?2:t<d2e?3:t<f2e?4:t<p2e?5:t<g2e?6:t<y2e?7:t<m2e?8:t<b2e?9:10},v2e={encode:s2e,decode:c2e,encodingLength:w2e},XB=v2e;const a7=(t,e,r=0)=>(XB.encode(t,e,r),e),c7=t=>XB.encodingLength(t),S4=(t,e)=>{const r=e.byteLength,n=c7(t),i=n+c7(r),s=new Uint8Array(i+r);return a7(t,s,0),a7(r,s,n),s.set(e,i),new E2e(t,r,e,s)};class E2e{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const JB=({name:t,code:e,encode:r})=>new _2e(t,e,r);class _2e{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?S4(this.code,r):r.then(n=>S4(this.code,n))}else throw Error("Unknown type, must be binary type")}}const eL=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),S2e=JB({name:"sha2-256",code:18,encode:eL("SHA-256")}),A2e=JB({name:"sha2-512",code:19,encode:eL("SHA-512")});var I2e=Object.freeze({__proto__:null,sha256:S2e,sha512:A2e});const tL=0,x2e="identity",rL=GB,C2e=t=>S4(tL,rL(t)),T2e={code:tL,name:x2e,encode:rL,digest:C2e};var M2e=Object.freeze({__proto__:null,identity:T2e});new TextEncoder,new TextDecoder;const l7={..._ve,...Ave,...xve,...Tve,...Ove,...zve,...Hve,...Vve,...Xve,...i2e};({...I2e,...M2e});function N2e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function nL(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const u7=nL("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),k3=nL("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=N2e(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),O2e={utf8:u7,"utf-8":u7,hex:l7.base16,latin1:k3,ascii:k3,binary:k3,...l7};function R2e(t,e="utf8"){const r=O2e[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):r.decoder.decode(`${r.prefix}${t}`)}var D2e=Object.defineProperty,$2e=(t,e,r)=>e in t?D2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ec=(t,e,r)=>$2e(t,typeof e!="symbol"?e+"":e,r);class k2e{constructor(e,r){this.core=e,this.logger=r,ec(this,"keychain",new Map),ec(this,"name",kwe),ec(this,"version",Pwe),ec(this,"initialized",!1),ec(this,"storagePrefix",gc),ec(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),ec(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),ec(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),ec(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=Xe("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),ec(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=Gr(r,this.name)}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,h4(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?d4(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var P2e=Object.defineProperty,B2e=(t,e,r)=>e in t?P2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Xi=(t,e,r)=>B2e(t,typeof e!="symbol"?e+"":e,r);class L2e{constructor(e,r,n){this.core=e,this.logger=r,Xi(this,"name",Dwe),Xi(this,"keychain"),Xi(this,"randomSessionIdentifier",w4()),Xi(this,"initialized",!1),Xi(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Xi(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Xi(this,"getClientId",async()=>{this.isInitialized();const i=await this.getClientSeed(),s=j1(i);return MA(s.publicKey)}),Xi(this,"generateKeyPair",()=>{this.isInitialized();const i=k1e();return this.setPrivateKey(i.publicKey,i.privateKey)}),Xi(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=j1(s),c=this.randomSessionIdentifier;return await R$(c,i,$we,o)}),Xi(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const c=this.getPrivateKey(i),u=P1e(c,s);return this.setSymKey(u,o)}),Xi(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||m1(i);return await this.keychain.set(o,i),o}),Xi(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Xi(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Xi(this,"encode",async(i,s,o)=>{this.isInitialized();const c=jB(o),u=fc(s);if(VO(c))return U1e(u,o==null?void 0:o.encoding);if(KO(c)){const E=c.senderPublicKey,S=c.receiverPublicKey;i=await this.generateSharedKey(E,S)}const h=this.getSymKey(i),{type:f,senderPublicKey:p}=c;return B1e({type:f,symKey:h,message:u,senderPublicKey:p,encoding:o==null?void 0:o.encoding})}),Xi(this,"decode",async(i,s,o)=>{this.isInitialized();const c=z1e(s,o);if(VO(c)){const u=j1e(s,o==null?void 0:o.encoding);return ll(u)}if(KO(c)){const u=c.receiverPublicKey,h=c.senderPublicKey;i=await this.generateSharedKey(u,h)}try{const u=this.getSymKey(i),h=L1e({symKey:u,encoded:s,encoding:o==null?void 0:o.encoding});return ll(h)}catch(u){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(u)}}),Xi(this,"getPayloadType",(i,s=cu)=>{const o=_y({encoded:i,encoding:s});return Nh(o.type)}),Xi(this,"getPayloadSenderPublicKey",(i,s=cu)=>{const o=_y({encoded:i,encoding:s});return o.senderPublicKey?Vr(o.senderPublicKey,Cs):void 0}),this.core=e,this.logger=Gr(r,this.name),this.keychain=n||new k2e(this.core,this.logger)}get context(){return bn(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(r7)}catch{e=w4(),await this.keychain.set(r7,e)}return R2e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var U2e=Object.defineProperty,j2e=Object.defineProperties,z2e=Object.getOwnPropertyDescriptors,h7=Object.getOwnPropertySymbols,q2e=Object.prototype.hasOwnProperty,F2e=Object.prototype.propertyIsEnumerable,A4=(t,e,r)=>e in t?U2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,H2e=(t,e)=>{for(var r in e||(e={}))q2e.call(e,r)&&A4(t,r,e[r]);if(h7)for(var r of h7(e))F2e.call(e,r)&&A4(t,r,e[r]);return t},W2e=(t,e)=>j2e(t,z2e(e)),Co=(t,e,r)=>A4(t,typeof e!="symbol"?e+"":e,r);class K2e extends Xge{constructor(e,r){super(e,r),this.logger=e,this.core=r,Co(this,"messages",new Map),Co(this,"messagesWithoutClientAck",new Map),Co(this,"name",Bwe),Co(this,"version",Lwe),Co(this,"initialized",!1),Co(this,"storagePrefix",gc),Co(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),Co(this,"set",async(n,i,s)=>{this.isInitialized();const o=oc(i);let c=this.messages.get(n);if(typeof c>"u"&&(c={}),typeof c[o]<"u")return o;if(c[o]=i,this.messages.set(n,c),s===b1.inbound){const u=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,W2e(H2e({},u),{[o]:i}))}return await this.persist(),o}),Co(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),Co(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),Co(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=oc(i);return typeof s[o]<"u"}),Co(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=oc(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),Co(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=Gr(e,this.name),this.core=r}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,h4(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,h4(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?d4(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?d4(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var V2e=Object.defineProperty,G2e=Object.defineProperties,Y2e=Object.getOwnPropertyDescriptors,d7=Object.getOwnPropertySymbols,Z2e=Object.prototype.hasOwnProperty,Q2e=Object.prototype.propertyIsEnumerable,I4=(t,e,r)=>e in t?V2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vb=(t,e)=>{for(var r in e||(e={}))Z2e.call(e,r)&&I4(t,r,e[r]);if(d7)for(var r of d7(e))Q2e.call(e,r)&&I4(t,r,e[r]);return t},P3=(t,e)=>G2e(t,Y2e(e)),Aa=(t,e,r)=>I4(t,typeof e!="symbol"?e+"":e,r);class X2e extends Jge{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Aa(this,"events",new Ii.EventEmitter),Aa(this,"name",Uwe),Aa(this,"queue",new Map),Aa(this,"publishTimeout",ye.toMiliseconds(ye.ONE_MINUTE)),Aa(this,"initialPublishTimeout",ye.toMiliseconds(ye.ONE_SECOND*15)),Aa(this,"needsTransportRestart",!1),Aa(this,"publish",async(n,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const c=(s==null?void 0:s.ttl)||n7,u=Q1(s),h=(s==null?void 0:s.prompt)||!1,f=(s==null?void 0:s.tag)||0,p=(s==null?void 0:s.id)||Po().toString(),E={topic:n,message:i,opts:{ttl:c,relay:u,prompt:h,tag:f,id:p,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}},S=`Failed to publish payload, please try again. id:${p} tag:${f}`;try{const A=new Promise(async I=>{const $=({id:k})=>{E.opts.id===k&&(this.removeRequestFromQueue(k),this.relayer.events.removeListener(ji.publish,$),I(E))};this.relayer.events.on(ji.publish,$);const L=au(new Promise((k,U)=>{this.rpcPublish({topic:n,message:i,ttl:c,prompt:h,tag:f,id:p,attestation:s==null?void 0:s.attestation,tvf:s==null?void 0:s.tvf}).then(k).catch(q=>{this.logger.warn(q,q==null?void 0:q.message),U(q)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${p} tag:${f}`);try{await L,this.events.removeListener(ji.publish,$)}catch(k){this.queue.set(p,P3(Vb({},E),{attempt:1})),this.logger.warn(k,k==null?void 0:k.message)}});this.logger.trace({type:"method",method:"publish",params:{id:p,topic:n,message:i,opts:s}}),await au(A,this.publishTimeout,S)}catch(A){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(A),(o=s==null?void 0:s.internal)!=null&&o.throwOnFailedPublish)throw A}finally{this.queue.delete(p)}}),Aa(this,"on",(n,i)=>{this.events.on(n,i)}),Aa(this,"once",(n,i)=>{this.events.once(n,i)}),Aa(this,"off",(n,i)=>{this.events.off(n,i)}),Aa(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=Gr(r,this.name),this.registerEventListeners()}get context(){return bn(this.logger)}async rpcPublish(e){var r,n,i,s;const{topic:o,message:c,ttl:u=n7,prompt:h,tag:f,id:p,attestation:E,tvf:S}=e,A={method:yg(Q1().protocol).publish,params:Vb({topic:o,message:c,ttl:u,prompt:h,tag:f,attestation:E},S),id:p};ns((r=A.params)==null?void 0:r.prompt)&&((n=A.params)==null||delete n.prompt),ns((i=A.params)==null?void 0:i.tag)&&((s=A.params)==null||delete s.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:A});const I=await this.relayer.request(A);return this.relayer.events.emit(ji.publish,e),this.logger.debug("Successfully Published Payload"),I}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{const n=e.attempt+1;this.queue.set(r,P3(Vb({},e),{attempt:n}));const{topic:i,message:s,opts:o,attestation:c}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${n}`),await this.rpcPublish(P3(Vb({},e),{topic:i,message:s,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:c,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ra.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ji.connection_stalled);return}this.checkQueue()}),this.relayer.on(ji.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var J2e=Object.defineProperty,eEe=(t,e,r)=>e in t?J2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,sf=(t,e,r)=>eEe(t,typeof e!="symbol"?e+"":e,r);class tEe{constructor(){sf(this,"map",new Map),sf(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),sf(this,"get",e=>this.map.get(e)||[]),sf(this,"exists",(e,r)=>this.get(e).includes(r)),sf(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),sf(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var rEe=Object.defineProperty,nEe=Object.defineProperties,iEe=Object.getOwnPropertyDescriptors,f7=Object.getOwnPropertySymbols,sEe=Object.prototype.hasOwnProperty,oEe=Object.prototype.propertyIsEnumerable,x4=(t,e,r)=>e in t?rEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ag=(t,e)=>{for(var r in e||(e={}))sEe.call(e,r)&&x4(t,r,e[r]);if(f7)for(var r of f7(e))oEe.call(e,r)&&x4(t,r,e[r]);return t},B3=(t,e)=>nEe(t,iEe(e)),gn=(t,e,r)=>x4(t,typeof e!="symbol"?e+"":e,r);class aEe extends rye{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,gn(this,"subscriptions",new Map),gn(this,"topicMap",new tEe),gn(this,"events",new Ii.EventEmitter),gn(this,"name",Kwe),gn(this,"version",Vwe),gn(this,"pending",new Map),gn(this,"cached",[]),gn(this,"initialized",!1),gn(this,"storagePrefix",gc),gn(this,"subscribeTimeout",ye.toMiliseconds(ye.ONE_MINUTE)),gn(this,"initialSubscribeTimeout",ye.toMiliseconds(ye.ONE_SECOND*15)),gn(this,"clientId"),gn(this,"batchSubscribeTopicsLimit",500),gn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),gn(this,"subscribe",async(n,i)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Q1(i),o={topic:n,relay:s,transportType:i==null?void 0:i.transportType};this.pending.set(n,o);const c=await this.rpcSubscribe(n,s,i);return typeof c=="string"&&(this.onSubscribe(c,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),c}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}}),gn(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),gn(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),gn(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),gn(this,"on",(n,i)=>{this.events.on(n,i)}),gn(this,"once",(n,i)=>{this.events.once(n,i)}),gn(this,"off",(n,i)=>{this.events.off(n,i)}),gn(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),gn(this,"start",async()=>{await this.onConnect()}),gn(this,"stop",async()=>{await this.onDisconnect()}),gn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),gn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),gn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Ra.pulse,async()=>{await this.checkPending()}),this.events.on(Mo.created,async n=>{const i=Mo.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(Mo.deleted,async n=>{const i=Mo.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=Gr(r,this.name),this.clientId=""}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Q1(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=hn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i;(!n||(n==null?void 0:n.transportType)===Dn.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const s={method:yg(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});const o=(i=n==null?void 0:n.internal)==null?void 0:i.throwOnFailedPublish;try{const c=await this.getSubscriptionId(e);if((n==null?void 0:n.transportType)===Dn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(s).catch(f=>this.logger.warn(f))},ye.toMiliseconds(ye.ONE_SECOND)),c;const u=new Promise(async f=>{const p=E=>{E.topic===e&&(this.events.removeListener(Mo.created,p),f(E.id))};this.events.on(Mo.created,p);try{const E=await au(new Promise((S,A)=>{this.relayer.request(s).catch(I=>{this.logger.warn(I,I==null?void 0:I.message),A(I)}).then(S)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Mo.created,p),f(E)}catch{}}),h=await au(u,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!h&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return h?c:null}catch(c){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ji.connection_stalled),o)throw c}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:yg(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await au(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ji.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:yg(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await au(new Promise((s,o)=>{this.relayer.request(n).catch(c=>{this.logger.warn(c),o(c)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ji.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:yg(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,B3(ag({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,ag({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,ag({},r)),this.topicMap.set(r.topic,e),this.events.emit(Mo.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=Xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Mo.deleted,B3(ag({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Mo.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Mo.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>B3(ag({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await Gme(ye.toMiliseconds(ye.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return oc(e+await this.getClientId())}}var cEe=Object.defineProperty,p7=Object.getOwnPropertySymbols,lEe=Object.prototype.hasOwnProperty,uEe=Object.prototype.propertyIsEnumerable,C4=(t,e,r)=>e in t?cEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,g7=(t,e)=>{for(var r in e||(e={}))lEe.call(e,r)&&C4(t,r,e[r]);if(p7)for(var r of p7(e))uEe.call(e,r)&&C4(t,r,e[r]);return t},$r=(t,e,r)=>C4(t,typeof e!="symbol"?e+"":e,r);class hEe extends eye{constructor(e){super(e),$r(this,"protocol","wc"),$r(this,"version",2),$r(this,"core"),$r(this,"logger"),$r(this,"events",new Ii.EventEmitter),$r(this,"provider"),$r(this,"messages"),$r(this,"subscriber"),$r(this,"publisher"),$r(this,"name",zwe),$r(this,"transportExplicitlyClosed",!1),$r(this,"initialized",!1),$r(this,"connectionAttemptInProgress",!1),$r(this,"relayUrl"),$r(this,"projectId"),$r(this,"packageName"),$r(this,"bundleId"),$r(this,"hasExperiencedNetworkDisruption",!1),$r(this,"pingTimeout"),$r(this,"heartBeatTimeout",ye.toMiliseconds(ye.THIRTY_SECONDS+ye.FIVE_SECONDS)),$r(this,"reconnectTimeout"),$r(this,"connectPromise"),$r(this,"reconnectInProgress",!1),$r(this,"requestsInFlight",[]),$r(this,"connectTimeout",ye.toMiliseconds(ye.ONE_SECOND*15)),$r(this,"request",async r=>{var n,i;this.logger.debug("Publishing Request Payload");const s=r.id||Po().toString();await this.toEstablishConnection();try{this.logger.trace({id:s,method:r.method,topic:(n=r.params)==null?void 0:n.topic},"relayer.request - publishing...");const o=`${s}:${((i=r.params)==null?void 0:i.tag)||""}`;this.requestsInFlight.push(o);const c=await this.provider.request(r);return this.requestsInFlight=this.requestsInFlight.filter(u=>u!==o),c}catch(o){throw this.logger.debug(`Failed to Publish Request: ${s}`),o}}),$r(this,"resetPingTimeout",()=>{Y1()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var r,n,i,s;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(s=(i=(n=(r=this.provider)==null?void 0:r.connection)==null?void 0:n.socket)==null?void 0:i.terminate)==null||s.call(i)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),$r(this,"onPayloadHandler",r=>{this.onProviderPayload(r),this.resetPingTimeout()}),$r(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(ji.connect)}),$r(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),$r(this,"onProviderErrorHandler",r=>{this.logger.fatal(`Fatal socket error: ${r.message}`),this.events.emit(ji.error,r),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),$r(this,"registerProviderListeners",()=>{this.provider.on(Jo.payload,this.onPayloadHandler),this.provider.on(Jo.connect,this.onConnectHandler),this.provider.on(Jo.disconnect,this.onDisconnectHandler),this.provider.on(Jo.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Gr(e.logger,this.name):yu(ul({level:e.logger||jwe})),this.messages=new K2e(this.logger,e.core),this.subscriber=new aEe(this,this.logger),this.publisher=new X2e(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||KB,this.projectId=e.projectId,Dme()?this.packageName=wO():$me()&&(this.bundleId=wO()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return bn(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:Dn.relay},b1.outbound)}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let c=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",u;const h=f=>{f.topic===e&&(this.subscriber.off(Mo.created,h),u())};return await Promise.all([new Promise(f=>{u=f,this.subscriber.on(Mo.created,h)}),new Promise(async(f,p)=>{c=await this.subscriber.subscribe(e,g7({internal:{throwOnFailedPublish:o}},r)).catch(E=>{o&&p(E)})||c,f()})]),c}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await au(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await t7())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=vi(ye.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(ji.message,e),await this.recordMessageEvent(e,b1.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Jo.disconnect,s),await au(new Promise((o,c)=>{this.provider.connect().then(o).catch(c)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Jo.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,c)=>{const u=()=>{c(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Jo.disconnect,u),await this.subscriber.start().then(o).catch(c).finally(()=>{this.provider.off(Jo.disconnect,u)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,ye.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(Y1())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Bn(new Gk(Lme({sdkVersion:E4,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:i}=e;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ap(e)){if(!e.method.endsWith(qwe))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,c={topic:n,message:i,publishedAt:s,transportType:Dn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(g7({type:"event",event:r.id},c)),this.events.emit(r.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}else zh(e)&&this.events.emit(ji.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,b1.inbound),this.events.emit(ji.message,e))}async acknowledgePayload(e){const r=bu(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Jo.payload,this.onPayloadHandler),this.provider.off(Jo.connect,this.onConnectHandler),this.provider.off(Jo.disconnect,this.onDisconnectHandler),this.provider.off(Jo.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await t7();Twe(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(ji.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ye.toMiliseconds(Fwe)))))}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function dEe(){}function y7(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function m7(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function b7(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const fEe="[object RegExp]",pEe="[object String]",gEe="[object Number]",yEe="[object Boolean]",w7="[object Arguments]",mEe="[object Symbol]",bEe="[object Date]",wEe="[object Map]",vEe="[object Set]",EEe="[object Array]",_Ee="[object Function]",SEe="[object ArrayBuffer]",L3="[object Object]",AEe="[object Error]",IEe="[object DataView]",xEe="[object Uint8Array]",CEe="[object Uint8ClampedArray]",TEe="[object Uint16Array]",MEe="[object Uint32Array]",NEe="[object BigUint64Array]",OEe="[object Int8Array]",REe="[object Int16Array]",DEe="[object Int32Array]",$Ee="[object BigInt64Array]",kEe="[object Float32Array]",PEe="[object Float64Array]";function BEe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function LEe(t,e,r){return bg(t,e,void 0,void 0,void 0,void 0,r)}function bg(t,e,r,n,i,s,o){const c=o(t,e,r,n,i,s);if(c!==void 0)return c;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Dg(t,e,s,o)}return Dg(t,e,s,o)}function Dg(t,e,r,n){if(Object.is(t,e))return!0;let i=b7(t),s=b7(e);if(i===w7&&(i=L3),s===w7&&(s=L3),i!==s)return!1;switch(i){case pEe:return t.toString()===e.toString();case gEe:{const u=t.valueOf(),h=e.valueOf();return BEe(u,h)}case yEe:case bEe:case mEe:return Object.is(t.valueOf(),e.valueOf());case fEe:return t.source===e.source&&t.flags===e.flags;case _Ee:return t===e}r=r??new Map;const o=r.get(t),c=r.get(e);if(o!=null&&c!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(i){case wEe:{if(t.size!==e.size)return!1;for(const[u,h]of t.entries())if(!e.has(u)||!bg(h,e.get(u),u,t,e,r,n))return!1;return!0}case vEe:{if(t.size!==e.size)return!1;const u=Array.from(t.values()),h=Array.from(e.values());for(let f=0;f<u.length;f++){const p=u[f],E=h.findIndex(S=>bg(p,S,void 0,t,e,r,n));if(E===-1)return!1;h.splice(E,1)}return!0}case EEe:case xEe:case CEe:case TEe:case MEe:case NEe:case OEe:case REe:case DEe:case $Ee:case kEe:case PEe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let u=0;u<t.length;u++)if(!bg(t[u],e[u],u,t,e,r,n))return!1;return!0}case SEe:return t.byteLength!==e.byteLength?!1:Dg(new Uint8Array(t),new Uint8Array(e),r,n);case IEe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Dg(new Uint8Array(t),new Uint8Array(e),r,n);case AEe:return t.name===e.name&&t.message===e.message;case L3:{if(!(Dg(t.constructor,e.constructor,r,n)||y7(t)&&y7(e)))return!1;const u=[...Object.keys(t),...m7(t)],h=[...Object.keys(e),...m7(e)];if(u.length!==h.length)return!1;for(let f=0;f<u.length;f++){const p=u[f],E=t[p];if(!Object.hasOwn(e,p))return!1;const S=e[p];if(!bg(E,S,p,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function UEe(t,e){return LEe(t,e,dEe)}var jEe=Object.defineProperty,v7=Object.getOwnPropertySymbols,zEe=Object.prototype.hasOwnProperty,qEe=Object.prototype.propertyIsEnumerable,T4=(t,e,r)=>e in t?jEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,E7=(t,e)=>{for(var r in e||(e={}))zEe.call(e,r)&&T4(t,r,e[r]);if(v7)for(var r of v7(e))qEe.call(e,r)&&T4(t,r,e[r]);return t},to=(t,e,r)=>T4(t,typeof e!="symbol"?e+"":e,r);class Gh extends tye{constructor(e,r,n,i=gc,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,to(this,"map",new Map),to(this,"version",Hwe),to(this,"cached",[]),to(this,"initialized",!1),to(this,"getKey"),to(this,"storagePrefix",gc),to(this,"recentlyDeleted",[]),to(this,"recentlyDeletedLimit",200),to(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!ns(o)?this.map.set(this.getKey(o),o):swe(o)?this.map.set(o.id,o):owe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),to(this,"set",async(o,c)=>{this.isInitialized(),this.map.has(o)?await this.update(o,c):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:c}),this.map.set(o,c),await this.persist())}),to(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),to(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(c=>Object.keys(o).every(u=>UEe(c[u],o[u]))):this.values)),to(this,"update",async(o,c)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:c});const u=E7(E7({},this.getData(o)),c);this.map.set(o,u),await this.persist()}),to(this,"delete",async(o,c)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:c}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Gr(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=Xe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=Xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var FEe=Object.defineProperty,HEe=(t,e,r)=>e in t?FEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_r=(t,e,r)=>HEe(t,typeof e!="symbol"?e+"":e,r);class WEe{constructor(e,r){this.core=e,this.logger=r,_r(this,"name",Gwe),_r(this,"version",Ywe),_r(this,"events",new bp),_r(this,"pairings"),_r(this,"initialized",!1),_r(this,"storagePrefix",gc),_r(this,"ignoredPayloadTypes",[cl]),_r(this,"registeredMethods",[]),_r(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),_r(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),_r(this,"create",async n=>{this.isInitialized();const i=w4(),s=await this.core.crypto.setSymKey(i),o=vi(ye.FIVE_MINUTES),c={protocol:WB},u={topic:s,expiry:o,relay:c,active:!1,methods:n==null?void 0:n.methods},h=YO({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:c,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(nh.create,u),this.core.expirer.set(s,o),await this.pairings.set(s,u),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType}),{topic:s,uri:h}}),_r(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[ic.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:c,expiryTimestamp:u,methods:h}=GO(n.uri);i.props.properties.topic=s,i.addTrace(ic.pairing_uri_validation_success),i.addTrace(ic.pairing_uri_not_expired);let f;if(this.pairings.keys.includes(s)){if(f=this.pairings.get(s),i.addTrace(ic.existing_pairing),f.active)throw i.setError(Jc.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(ic.pairing_not_expired)}const p=u||vi(ye.FIVE_MINUTES),E={topic:s,relay:c,expiry:p,active:!1,methods:h};this.core.expirer.set(s,p),await this.pairings.set(s,E),i.addTrace(ic.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(nh.create,E),i.addTrace(ic.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(ic.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(Jc.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:c})}catch(S){throw i.setError(Jc.subscribe_pairing_topic_failure),S}return i.addTrace(ic.subscribe_pairing_topic_success),E}),_r(this,"activate",async({topic:n})=>{this.isInitialized();const i=vi(ye.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),_r(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:c,reject:u}=Ju();this.events.once(Wr("pairing_ping",s),({error:h})=>{h?u(h):c()}),await o()}}),_r(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),_r(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),_r(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),_r(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",hn("USER_DISCONNECTED")),await this.deletePairing(i))}),_r(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:c}=n,u=this.core.crypto.keychain.get(i);return YO({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:u,relay:s,expiryTimestamp:o,methods:c})}),_r(this,"sendRequest",async(n,i,s)=>{const o=Us(i,s),c=await this.core.crypto.encode(n,o),u=sg[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,c,u),o.id}),_r(this,"sendResult",async(n,i,s)=>{const o=bu(n,s),c=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,n)).request.method,h=sg[u].res;await this.core.relayer.publish(i,c,h),await this.core.history.resolve(o)}),_r(this,"sendError",async(n,i,s)=>{const o=Sp(n,s),c=await this.core.crypto.encode(i,o),u=(await this.core.history.get(i,n)).request.method,h=sg[u]?sg[u].res:sg.unregistered_method.res;await this.core.relayer.publish(i,c,h),await this.core.history.resolve(o)}),_r(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,hn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),_r(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>eu(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),_r(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),_r(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),_r(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(nh.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),_r(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Si(i)?this.events.emit(Wr("pairing_ping",s),{}):Yn(i)&&this.events.emit(Wr("pairing_ping",s),{error:i.error})},500)}),_r(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(nh.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),_r(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const c=hn("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,c),this.logger.error(c)}catch(c){await this.sendError(s,n,c),this.logger.error(c)}}),_r(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(hn("WC_METHOD_UNSUPPORTED",n))}),_r(this,"isValidPair",(n,i)=>{var s;if(!so(n)){const{message:c}=Xe("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(Jc.malformed_pairing_uri),new Error(c)}if(!iwe(n.uri)){const{message:c}=Xe("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(Jc.malformed_pairing_uri),new Error(c)}const o=GO(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:c}=Xe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(Jc.malformed_pairing_uri),new Error(c)}if(!(o!=null&&o.symKey)){const{message:c}=Xe("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(Jc.malformed_pairing_uri),new Error(c)}if(o!=null&&o.expiryTimestamp&&ye.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(Jc.pairing_expired);const{message:c}=Xe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(c)}}),_r(this,"isValidPing",async n=>{if(!so(n)){const{message:s}=Xe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),_r(this,"isValidDisconnect",async n=>{if(!so(n)){const{message:s}=Xe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),_r(this,"isValidPairingTopic",async n=>{if(!fi(n,!1)){const{message:i}=Xe("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=Xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(eu(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=Xe("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=Gr(r,this.name),this.pairings=new Gh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return bn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ji.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(this.pairings.keys.includes(r)&&i!==Dn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);Ap(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):zh(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(na.expired,async e=>{const{topic:r}=yB(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(nh.expire,{topic:r}))})}}var KEe=Object.defineProperty,VEe=(t,e,r)=>e in t?KEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ji=(t,e,r)=>VEe(t,typeof e!="symbol"?e+"":e,r);class GEe extends Qge{constructor(e,r){super(e,r),this.core=e,this.logger=r,Ji(this,"records",new Map),Ji(this,"events",new Ii.EventEmitter),Ji(this,"name",Zwe),Ji(this,"version",Qwe),Ji(this,"cached",[]),Ji(this,"initialized",!1),Ji(this,"storagePrefix",gc),Ji(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ji(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:vi(ye.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(_a.created,o)}),Ji(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Yn(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(_a.updated,i))}),Ji(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),Ji(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(_a.deleted,s)}}),this.persist()}),Ji(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),Ji(this,"on",(n,i)=>{this.events.on(n,i)}),Ji(this,"once",(n,i)=>{this.events.once(n,i)}),Ji(this,"off",(n,i)=>{this.events.off(n,i)}),Ji(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Gr(r,this.name)}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Us(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=Xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(_a.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(_a.created,e=>{const r=_a.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(_a.updated,e=>{const r=_a.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(_a.deleted,e=>{const r=_a.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Ra.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{ye.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(_a.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var YEe=Object.defineProperty,ZEe=(t,e,r)=>e in t?YEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,As=(t,e,r)=>ZEe(t,typeof e!="symbol"?e+"":e,r);class QEe extends nye{constructor(e,r){super(e,r),this.core=e,this.logger=r,As(this,"expirations",new Map),As(this,"events",new Ii.EventEmitter),As(this,"name",Xwe),As(this,"version",Jwe),As(this,"cached",[]),As(this,"initialized",!1),As(this,"storagePrefix",gc),As(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),As(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),As(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(na.created,{target:s,expiration:o})}),As(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),As(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(na.deleted,{target:i,expiration:s})}}),As(this,"on",(n,i)=>{this.events.on(n,i)}),As(this,"once",(n,i)=>{this.events.once(n,i)}),As(this,"off",(n,i)=>{this.events.off(n,i)}),As(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=Gr(r,this.name)}get context(){return bn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Ume(e);if(typeof e=="number")return jme(e);const{message:r}=Xe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(na.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=Xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;ye.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(na.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Ra.pulse,()=>this.checkExpirations()),this.events.on(na.created,e=>{const r=na.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(na.expired,e=>{const r=na.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(na.deleted,e=>{const r=na.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var XEe=Object.defineProperty,JEe=(t,e,r)=>e in t?XEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hi=(t,e,r)=>JEe(t,typeof e!="symbol"?e+"":e,r);class e_e extends iye{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,hi(this,"name",eve),hi(this,"abortController"),hi(this,"isDevEnv"),hi(this,"verifyUrlV3",rve),hi(this,"storagePrefix",gc),hi(this,"version",HB),hi(this,"publicKey"),hi(this,"fetchPromise"),hi(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ye.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),hi(this,"register",async i=>{if(!Ky()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:c}=i,u=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${c}`;try{const h=fo.getDocument(),f=this.startAbortTimer(ye.ONE_SECOND*5),p=await new Promise((E,S)=>{const A=()=>{window.removeEventListener("message",$),h.body.removeChild(I),S("attestation aborted")};this.abortController.signal.addEventListener("abort",A);const I=h.createElement("iframe");I.src=u,I.style.display="none",I.addEventListener("error",A,{signal:this.abortController.signal});const $=L=>{if(L.data&&typeof L.data=="string")try{const k=JSON.parse(L.data);if(k.type==="verify_attestation"){if(ep(k.attestation).payload.id!==o)return;clearInterval(f),h.body.removeChild(I),this.abortController.signal.removeEventListener("abort",A),window.removeEventListener("message",$),E(k.attestation===null?"":k.attestation)}}catch(k){this.logger.warn(k)}};h.body.appendChild(I),window.addEventListener("message",$,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",p),p}catch(h){this.logger.warn(h)}return""}),hi(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:c}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(ep(s).payload.id!==c)return;const h=await this.isValidJwtAttestation(s);if(h){if(!h.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return h}}if(!o)return;const u=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,u)}),hi(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(ye.ONE_SECOND*5),c=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),c.status===200?await c.json():void 0}),hi(this,"getVerifyUrl",i=>{let s=i||Rg;return nve.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Rg}`),s=Rg),s}),hi(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(ye.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),hi(this,"persistPublicKey",async i=>{this.logger.debug("persisting public key to local storage",i),await this.store.setItem(this.storeKey,i),this.publicKey=i}),hi(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),hi(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(c){this.logger.error(c),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(c){this.logger.error(c),this.logger.warn("error validating attestation")}}),hi(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),hi(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),hi(this,"validateAttestation",(i,s)=>{const o=W1e(i,s.publicKey),c={hasExpired:ye.toMiliseconds(o.exp)<Date.now(),payload:o};if(c.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:c.payload.origin,isScam:c.payload.isScam,isVerified:c.payload.isVerified}}),this.logger=Gr(r,this.name),this.abortController=new AbortController,this.isDevEnv=XA(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return bn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ye.toMiliseconds(e))}}var t_e=Object.defineProperty,r_e=(t,e,r)=>e in t?t_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_7=(t,e,r)=>r_e(t,typeof e!="symbol"?e+"":e,r);class n_e extends sye{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,_7(this,"context",ive),_7(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:c=!1}=n,u=`${sve}/${this.projectId}/clients`;await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:c})})}),this.logger=Gr(r,this.context)}}var i_e=Object.defineProperty,S7=Object.getOwnPropertySymbols,s_e=Object.prototype.hasOwnProperty,o_e=Object.prototype.propertyIsEnumerable,M4=(t,e,r)=>e in t?i_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cg=(t,e)=>{for(var r in e||(e={}))s_e.call(e,r)&&M4(t,r,e[r]);if(S7)for(var r of S7(e))o_e.call(e,r)&&M4(t,r,e[r]);return t},Di=(t,e,r)=>M4(t,typeof e!="symbol"?e+"":e,r);class a_e extends oye{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Di(this,"context",ave),Di(this,"storagePrefix",gc),Di(this,"storageVersion",ove),Di(this,"events",new Map),Di(this,"shouldPersist",!1),Di(this,"init",async()=>{if(!XA())try{const i={eventId:EO(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:pB(this.core.relayer.protocol,this.core.relayer.version,E4)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Di(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:c,trace:u}}=i,h=EO(),f=this.core.projectId||"",p=Date.now(),E=cg({eventId:h,timestamp:p,props:{event:s,type:o,properties:{topic:c,trace:u}},bundleId:f,domain:this.getAppDomain()},this.setMethods(h));return this.telemetryEnabled&&(this.events.set(h,E),this.shouldPersist=!0),E}),Di(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const c=Array.from(this.events.values()).find(u=>u.props.properties.topic===o);if(c)return cg(cg({},c),this.setMethods(c.eventId))}),Di(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Di(this,"setEventListeners",()=>{this.core.heartbeat.on(Ra.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{ye.fromMiliseconds(Date.now())-ye.fromMiliseconds(i.timestamp)>cve&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Di(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Di(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Di(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Di(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Di(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,cg(cg({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Di(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Di(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${lve}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${E4}${s}`,{method:"POST",body:JSON.stringify(i)})}),Di(this,"getAppDomain",()=>fB().url),this.logger=Gr(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var c_e=Object.defineProperty,A7=Object.getOwnPropertySymbols,l_e=Object.prototype.hasOwnProperty,u_e=Object.prototype.propertyIsEnumerable,N4=(t,e,r)=>e in t?c_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,I7=(t,e)=>{for(var r in e||(e={}))l_e.call(e,r)&&N4(t,r,e[r]);if(A7)for(var r of A7(e))u_e.call(e,r)&&N4(t,r,e[r]);return t},In=(t,e,r)=>N4(t,typeof e!="symbol"?e+"":e,r);let h_e=class iL extends Vge{constructor(e){var r;super(e),In(this,"protocol",FB),In(this,"version",HB),In(this,"name",v4),In(this,"relayUrl"),In(this,"projectId"),In(this,"customStoragePrefix"),In(this,"events",new Ii.EventEmitter),In(this,"logger"),In(this,"heartbeat"),In(this,"relayer"),In(this,"crypto"),In(this,"storage"),In(this,"history"),In(this,"expirer"),In(this,"pairing"),In(this,"verify"),In(this,"echoClient"),In(this,"linkModeSupportedApps"),In(this,"eventClient"),In(this,"initialized",!1),In(this,"logChunkController"),In(this,"on",(o,c)=>this.events.on(o,c)),In(this,"once",(o,c)=>this.events.once(o,c)),In(this,"off",(o,c)=>this.events.off(o,c)),In(this,"removeListener",(o,c)=>this.events.removeListener(o,c)),In(this,"dispatchEnvelope",({topic:o,message:c,sessionExists:u})=>{if(!o||!c)return;const h={topic:o,message:c,publishedAt:Date.now(),transportType:Dn.link_mode};this.relayer.onLinkMessageEvent(h,{sessionExists:u})}),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||KB,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=ul({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:Owe.logger,name:v4}),{logger:i,chunkLoggerController:s}=EA({opts:n,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,c;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Gr(i,this.name),this.heartbeat=new JD,this.crypto=new L2e(this,this.logger,e==null?void 0:e.keychain),this.history=new GEe(this,this.logger),this.expirer=new QEe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new r$(I7(I7({},Rwe),e==null?void 0:e.storageOptions)),this.relayer=new hEe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new WEe(this,this.logger),this.verify=new e_e(this,this.logger,this.storage),this.echoClient=new n_e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new a_e(this,this.logger,e==null?void 0:e.telemetryEnabled)}static async init(e){const r=new iL(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(Wwe,n),r}get context(){return bn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(i7,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(i7)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const d_e=h_e,sL="wc",oL=2,aL="client",a5=`${sL}@${oL}:${aL}:`,U3={name:aL,logger:"error"},x7="WALLETCONNECT_DEEPLINK_CHOICE",f_e="proposal",C7="Proposal expired",p_e="session",of=ye.SEVEN_DAYS,g_e="engine",$i={wc_sessionPropose:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ye.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ye.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ye.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ye.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ye.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ye.FIVE_MINUTES,prompt:!1,tag:1119}}},j3={min:ye.FIVE_MINUTES,max:ye.SEVEN_DAYS},tc={idle:"IDLE",active:"ACTIVE"},T7={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},y_e="request",m_e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],b_e="wc",w_e="auth",v_e="authKeys",E_e="pairingTopics",__e="requests",Yw=`${b_e}@${1.5}:${w_e}:`,w1=`${Yw}:PUB_KEY`;var S_e=Object.defineProperty,A_e=Object.defineProperties,I_e=Object.getOwnPropertyDescriptors,M7=Object.getOwnPropertySymbols,x_e=Object.prototype.hasOwnProperty,C_e=Object.prototype.propertyIsEnumerable,O4=(t,e,r)=>e in t?S_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yn=(t,e)=>{for(var r in e||(e={}))x_e.call(e,r)&&O4(t,r,e[r]);if(M7)for(var r of M7(e))C_e.call(e,r)&&O4(t,r,e[r]);return t},Ps=(t,e)=>A_e(t,I_e(e)),Ue=(t,e,r)=>O4(t,typeof e!="symbol"?e+"":e,r);class T_e extends uye{constructor(e){super(e),Ue(this,"name",g_e),Ue(this,"events",new bp),Ue(this,"initialized",!1),Ue(this,"requestQueue",{state:tc.idle,queue:[]}),Ue(this,"sessionRequestQueue",{state:tc.idle,queue:[]}),Ue(this,"requestQueueDelay",ye.ONE_SECOND),Ue(this,"expectedPairingMethodMap",new Map),Ue(this,"recentlyDeletedMap",new Map),Ue(this,"recentlyDeletedLimit",200),Ue(this,"relayMessageCache",[]),Ue(this,"pendingSessions",new Map),Ue(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys($i)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay)))}),Ue(this,"connect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const n=Ps(yn({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:c,scopedProperties:u,relays:h}=n;let f=i,p,E=!1;try{if(f){const z=this.client.core.pairing.pairings.get(f);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),E=z.active}}catch(z){throw this.client.logger.error(`connect() -> pairing.get(${f}) failed`),z}if(!f||!E){const{topic:z,uri:V}=await this.client.core.pairing.create();f=z,p=V}if(!f){const{message:z}=Xe("NO_MATCHING_KEY",`connect() pairing topic: ${f}`);throw new Error(z)}const S=await this.client.core.crypto.generateKeyPair(),A=$i.wc_sessionPropose.req.ttl||ye.FIVE_MINUTES,I=vi(A),$=Ps(yn(yn({requiredNamespaces:s,optionalNamespaces:o,relays:h??[{protocol:WB}],proposer:{publicKey:S,metadata:this.client.metadata},expiryTimestamp:I,pairingTopic:f},c&&{sessionProperties:c}),u&&{scopedProperties:u}),{id:Li()}),L=Wr("session_connect",$.id),{reject:k,resolve:U,done:q}=Ju(A,C7),j=({id:z})=>{z===$.id&&(this.client.events.off("proposal_expire",j),this.pendingSessions.delete($.id),this.events.emit(L,{error:{message:C7,code:0}}))};return this.client.events.on("proposal_expire",j),this.events.once(L,({error:z,session:V})=>{this.client.events.off("proposal_expire",j),z?k(z):V&&U(V)}),await this.sendRequest({topic:f,method:"wc_sessionPropose",params:$,throwOnFailedPublish:!0,clientRpcId:$.id}),await this.setProposal($.id,$),{uri:p,approval:q}}),Ue(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),Ue(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[Sa.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(B){throw o.setError(Vu.no_internet_connection),B}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(B){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(Vu.proposal_not_found),B}try{await this.isValidApprove(r)}catch(B){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Vu.session_approve_namespace_validation_failure),B}const{id:c,relayProtocol:u,namespaces:h,sessionProperties:f,scopedProperties:p,sessionConfig:E}=r,S=this.client.proposal.get(c);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:A,proposer:I,requiredNamespaces:$,optionalNamespaces:L}=S;let k=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:A});k||(k=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Sa.session_approve_started,properties:{topic:A,trace:[Sa.session_approve_started,Sa.session_namespaces_validation_success]}}));const U=await this.client.core.crypto.generateKeyPair(),q=I.publicKey,j=await this.client.core.crypto.generateSharedKey(U,q),z=yn(yn(yn({relay:{protocol:u??"irn"},namespaces:h,controller:{publicKey:U,metadata:this.client.metadata},expiry:vi(of)},f&&{sessionProperties:f}),p&&{scopedProperties:p}),E&&{sessionConfig:E}),V=Dn.relay;k.addTrace(Sa.subscribing_session_topic);try{await this.client.core.relayer.subscribe(j,{transportType:V})}catch(B){throw k.setError(Vu.subscribe_session_topic_failure),B}k.addTrace(Sa.subscribe_session_topic_success);const G=Ps(yn({},z),{topic:j,requiredNamespaces:$,optionalNamespaces:L,pairingTopic:A,acknowledged:!1,self:z.controller,peer:{publicKey:I.publicKey,metadata:I.metadata},controller:U,transportType:Dn.relay});await this.client.session.set(j,G),k.addTrace(Sa.store_session);try{k.addTrace(Sa.publishing_session_settle),await this.sendRequest({topic:j,method:"wc_sessionSettle",params:z,throwOnFailedPublish:!0}).catch(B=>{throw k==null||k.setError(Vu.session_settle_publish_failure),B}),k.addTrace(Sa.session_settle_publish_success),k.addTrace(Sa.publishing_session_approve),await this.sendResult({id:c,topic:A,result:{relay:{protocol:u??"irn"},responderPublicKey:U},throwOnFailedPublish:!0}).catch(B=>{throw k==null||k.setError(Vu.session_approve_publish_failure),B}),k.addTrace(Sa.session_approve_publish_success)}catch(B){throw this.client.logger.error(B),this.client.session.delete(j,hn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(j),B}return this.client.core.eventClient.deleteEvent({eventId:k.eventId}),await this.client.core.pairing.updateMetadata({topic:A,metadata:I.metadata}),await this.client.proposal.delete(c,hn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:A}),await this.setExpiry(j,vi(of)),{topic:j,acknowledged:()=>Promise.resolve(this.client.session.get(j))}}),Ue(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&(await this.sendError({id:n,topic:s,error:i,rpcOpts:$i.wc_sessionPropose.reject}),await this.client.proposal.delete(n,hn("USER_DISCONNECTED")))}),Ue(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(p){throw this.client.logger.error("update() -> isValidUpdate() failed"),p}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:c}=Ju(),u=Li(),h=Po().toString(),f=this.client.session.get(n).namespaces;return this.events.once(Wr("session_update",u),({error:p})=>{p?c(p):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:u,relayRpcId:h}).catch(p=>{this.client.logger.error(p),this.client.session.update(n,{namespaces:f}),c(p)}),{acknowledged:s}}),Ue(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(u){throw this.client.logger.error("extend() -> isValidExtend() failed"),u}const{topic:n}=r,i=Li(),{done:s,resolve:o,reject:c}=Ju();return this.events.once(Wr("session_extend",i),({error:u})=>{u?c(u):o()}),await this.setExpiry(n,vi(of)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(u=>{c(u)}),{acknowledged:s}}),Ue(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(L){throw this.client.logger.error("request() -> isValidRequest() failed"),L}const{chainId:n,request:i,topic:s,expiry:o=$i.wc_sessionRequest.req.ttl}=r,c=this.client.session.get(s);(c==null?void 0:c.transportType)===Dn.relay&&await this.confirmOnlineStateOrThrow();const u=Li(),h=Po().toString(),{done:f,resolve:p,reject:E}=Ju(o,"Request expired. Please try again.");this.events.once(Wr("session_request",u),({error:L,result:k})=>{L?E(L):p(k)});const S="wc_sessionRequest",A=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);if(A)return await this.sendRequest({clientRpcId:u,relayRpcId:h,topic:s,method:S,params:{request:Ps(yn({},i),{expiryTimestamp:vi(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:A}).catch(L=>E(L)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:u}),await f();const I={request:Ps(yn({},i),{expiryTimestamp:vi(o)}),chainId:n},$=this.shouldSetTVF(S,I);return await Promise.all([new Promise(async L=>{await this.sendRequest(yn({clientRpcId:u,relayRpcId:h,topic:s,method:S,params:I,expiry:o,throwOnFailedPublish:!0},$&&{tvf:this.getTVFParams(u,I)})).catch(k=>E(k)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:u}),L()}),new Promise(async L=>{var k;if(!((k=c.sessionConfig)!=null&&k.disableDeepLink)){const U=await Hme(this.client.core.storage,x7);await zme({id:u,topic:s,wcDeepLink:U})}L()}),f()]).then(L=>L[2])}),Ue(this,"respond",async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i,o=this.client.session.get(n);o.transportType===Dn.relay&&await this.confirmOnlineStateOrThrow();const c=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Si(i)?await this.sendResult({id:s,topic:n,result:i.result,throwOnFailedPublish:!0,appLink:c}):Yn(i)&&await this.sendError({id:s,topic:n,error:i.error,appLink:c}),this.cleanupAfterResponse(r)}),Ue(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Li(),s=Po().toString(),{done:o,resolve:c,reject:u}=Ju();this.events.once(Wr("session_ping",i),({error:h})=>{h?u(h):c()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),Ue(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=Po().toString(),c=Li();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:c})}),Ue(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:hn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=Xe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),Ue(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>rwe(n,r)))),Ue(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Ue(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?Dn.link_mode:Dn.relay;o===Dn.relay&&await this.confirmOnlineStateOrThrow();const{chains:c,statement:u="",uri:h,domain:f,nonce:p,type:E,exp:S,nbf:A,methods:I=[],expiry:$}=r,L=[...r.resources||[]],{topic:k,uri:U}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:k,uri:U}});const q=await this.client.core.crypto.generateKeyPair(),j=m1(q);if(await Promise.all([this.client.auth.authKeys.set(w1,{responseTopic:j,publicKey:q}),this.client.auth.pairingTopics.set(j,{topic:j,pairingTopic:k})]),await this.client.core.relayer.subscribe(j,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${k}`),I.length>0){const{namespace:C}=qf(c[0]);let v=kbe(C,"request",I);y1(L)&&(v=Bbe(v,L.pop())),L.push(v)}const z=$&&$>$i.wc_sessionAuthenticate.req.ttl?$:$i.wc_sessionAuthenticate.req.ttl,V={authPayload:{type:E??"caip122",chains:c,statement:u,aud:h,domain:f,version:"1",nonce:p,iat:new Date().toISOString(),exp:S,nbf:A,resources:L},requester:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:vi(z)},G={eip155:{chains:c,methods:[...new Set(["personal_sign",...I])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:G,relays:[{protocol:"irn"}],pairingTopic:k,proposer:{publicKey:q,metadata:this.client.metadata},expiryTimestamp:vi($i.wc_sessionPropose.req.ttl),id:Li()},{done:W,resolve:D,reject:_}=Ju(z,"Request expired"),w=Li(),g=Wr("session_connect",B.id),b=Wr("session_request",w),m=async({error:C,session:v})=>{this.events.off(b,M),C?_(C):v&&D({session:v})},M=async C=>{var v,O,x;if(await this.deletePendingAuthRequest(w,{message:"fulfilled",code:0}),C.error){const oe=hn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return C.error.code===oe.code?void 0:(this.events.off(g,m),_(C.error.message))}await this.deleteProposal(B.id),this.events.off(g,m);const{cacaos:N,responder:H}=C.result,Y=[],Q=[];for(const oe of N){await MO({cacao:oe,projectId:this.client.core.projectId})||(this.client.logger.error(oe,"Signature verification failed"),_(hn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:be}=oe,Ce=y1(be.resources),Se=[f4(be.iss)],xe=Z1(be.iss);if(Ce){const ze=NO(Ce),Be=OO(Ce);Y.push(...ze),Se.push(...Be)}for(const ze of Se)Q.push(`${ze}:${xe}`)}const ee=await this.client.core.crypto.generateSharedKey(q,H.publicKey);let re;Y.length>0&&(re={topic:ee,acknowledged:!0,self:{publicKey:q,metadata:this.client.metadata},peer:H,controller:H.publicKey,expiry:vi(of),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:k,namespaces:ZO([...new Set(Y)],[...new Set(Q)]),transportType:o},await this.client.core.relayer.subscribe(ee,{transportType:o}),await this.client.session.set(ee,re),k&&await this.client.core.pairing.updateMetadata({topic:k,metadata:H.metadata}),re=this.client.session.get(ee)),(v=this.client.metadata.redirect)!=null&&v.linkMode&&(O=H.metadata.redirect)!=null&&O.linkMode&&(x=H.metadata.redirect)!=null&&x.universal&&n&&(this.client.core.addLinkModeSupportedApp(H.metadata.redirect.universal),this.client.session.update(ee,{transportType:Dn.link_mode})),D({auths:N,session:re})};this.events.once(g,m),this.events.once(b,M);let R;try{if(s){const C=Us("wc_sessionAuthenticate",V,w);this.client.core.history.set(k,C);const v=await this.client.core.crypto.encode("",C,{type:Zy,encoding:ng});R=Kb(n,k,v)}else await Promise.all([this.sendRequest({topic:k,method:"wc_sessionAuthenticate",params:V,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:w}),this.sendRequest({topic:k,method:"wc_sessionPropose",params:B,expiry:$i.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(C){throw this.events.off(g,m),this.events.off(b,M),C}return await this.setProposal(B.id,B),await this.setAuthRequest(w,{request:Ps(yn({},V),{verifyContext:{}}),pairingTopic:k,transportType:o}),{uri:R??U,response:W}}),Ue(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[Gu.authenticated_session_approve_started]}});try{this.isInitialized()}catch($){throw s.setError(og.no_internet_connection),$}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(og.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const c=o.transportType||Dn.relay;c===Dn.relay&&await this.confirmOnlineStateOrThrow();const u=o.requester.publicKey,h=await this.client.core.crypto.generateKeyPair(),f=m1(u),p={type:cl,receiverPublicKey:u,senderPublicKey:h},E=[],S=[];for(const $ of i){if(!await MO({cacao:$,projectId:this.client.core.projectId})){s.setError(og.invalid_cacao);const j=hn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:f,error:j,encodeOpts:p}),new Error(j.message)}s.addTrace(Gu.cacaos_verified);const{p:L}=$,k=y1(L.resources),U=[f4(L.iss)],q=Z1(L.iss);if(k){const j=NO(k),z=OO(k);E.push(...j),U.push(...z)}for(const j of U)S.push(`${j}:${q}`)}const A=await this.client.core.crypto.generateSharedKey(h,u);s.addTrace(Gu.create_authenticated_session_topic);let I;if((E==null?void 0:E.length)>0){I={topic:A,acknowledged:!0,self:{publicKey:h,metadata:this.client.metadata},peer:{publicKey:u,metadata:o.requester.metadata},controller:u,expiry:vi(of),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:ZO([...new Set(E)],[...new Set(S)]),transportType:c},s.addTrace(Gu.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(A,{transportType:c})}catch($){throw s.setError(og.subscribe_authenticated_session_topic_failure),$}s.addTrace(Gu.subscribe_authenticated_session_topic_success),await this.client.session.set(A,I),s.addTrace(Gu.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(Gu.publishing_authenticated_session_approve);try{await this.sendResult({topic:f,id:n,result:{cacaos:i,responder:{publicKey:h,metadata:this.client.metadata}},encodeOpts:p,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,c)})}catch($){throw s.setError(og.authenticated_session_approve_publish_failure),$}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:I}}),Ue(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===Dn.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),u=m1(o),h={type:cl,receiverPublicKey:o,senderPublicKey:c};await this.sendError({id:n,topic:u,error:i,encodeOpts:h,rpcOpts:$i.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,hn("USER_DISCONNECTED"))}),Ue(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return IB(n,i)}),Ue(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),Ue(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,c;return((o=s.peerMetadata)==null?void 0:o.url)&&((c=s.peerMetadata)==null?void 0:c.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),Ue(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:c=0}=r,{self:u}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,hn("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(u.publicKey)&&await this.client.core.crypto.deleteKeyPair(u.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(x7).catch(h=>this.client.logger.warn(h)),this.getPendingSessionRequests().forEach(h=>{h.topic===i&&this.deletePendingSessionRequest(h.id,hn("USER_DISCONNECTED"))}),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=tc.idle),o&&this.client.events.emit("session_delete",{id:c,topic:i})}),Ue(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(Vu.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,hn("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),Ue(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=tc.idle,this.client.events.emit("session_request_expire",{id:r}))}),Ue(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),Ue(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),Ue(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,vi($i.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),Ue(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=Dn.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),Ue(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,c=s.request.expiryTimestamp||vi($i.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,c),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),Ue(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:c,clientRpcId:u,throwOnFailedPublish:h,appLink:f,tvf:p}=r,E=Us(i,s,u);let S;const A=!!f;try{const L=A?ng:cu;S=await this.client.core.crypto.encode(n,E,{encoding:L})}catch(L){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),L}let I;if(m_e.includes(i)){const L=oc(JSON.stringify(E)),k=oc(S);I=await this.client.core.verify.register({id:k,decryptedId:L})}const $=$i[i].req;if($.attestation=I,o&&($.ttl=o),c&&($.id=c),this.client.core.history.set(n,E),A){const L=Kb(f,n,S);await global.Linking.openURL(L,this.client.name)}else{const L=$i[i].req;o&&(L.ttl=o),c&&(L.id=c),L.tvf=Ps(yn({},p),{correlationId:E.id}),h?(L.internal=Ps(yn({},L.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,S,L)):this.client.core.relayer.publish(n,S,L).catch(k=>this.client.logger.error(k))}return E.id}),Ue(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:c,appLink:u}=r,h=bu(n,s);let f;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const A=p?ng:cu;f=await this.client.core.crypto.encode(i,h,Ps(yn({},c||{}),{encoding:A}))}catch(A){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),A}let E,S;try{E=await this.client.core.history.get(i,n);const A=E.request;try{this.shouldSetTVF(A.method,A.params)&&(S=this.getTVFParams(n,A.params,s))}catch(I){this.client.logger.warn("sendResult() -> getTVFParams() failed",I)}}catch(A){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),A}if(p){const A=Kb(u,i,f);await global.Linking.openURL(A,this.client.name)}else{const A=E.request.method,I=$i[A].res;I.tvf=Ps(yn({},S),{correlationId:n}),o?(I.internal=Ps(yn({},I.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,f,I)):this.client.core.relayer.publish(i,f,I).catch($=>this.client.logger.error($))}await this.client.core.history.resolve(h)}),Ue(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:c,appLink:u}=r,h=Sp(n,s);let f;const p=u&&typeof(global==null?void 0:global.Linking)<"u";try{const S=p?ng:cu;f=await this.client.core.crypto.encode(i,h,Ps(yn({},o||{}),{encoding:S}))}catch(S){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),S}let E;try{E=await this.client.core.history.get(i,n)}catch(S){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),S}if(p){const S=Kb(u,i,f);await global.Linking.openURL(S,this.client.name)}else{const S=E.request.method,A=c||$i[S].res;this.client.core.relayer.publish(i,f,A)}await this.client.core.history.resolve(h)}),Ue(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;eu(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{eu(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),Ue(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),Ue(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),Ue(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===tc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=tc.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=tc.idle}),Ue(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:c}=r,u=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:u}))switch(u){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:c});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:c,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:c,transportType:o});default:return this.client.logger.info(`Unsupported request method ${u}`)}}),Ue(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),Ue(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=Xe("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),Ue(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Ue(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:c,id:u}=i;try{const h=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),h==null||h.setError(Jc.proposal_listener_not_found)),this.isValidConnect(yn({},i.params));const f=c.expiryTimestamp||vi($i.wc_sessionPropose.req.ttl),p=yn({id:u,pairingTopic:n,expiryTimestamp:f},c);await this.setProposal(u,p);const E=await this.getVerifyContext({attestationId:s,hash:oc(JSON.stringify(i)),encryptedId:o,metadata:p.proposer.metadata});h==null||h.addTrace(ic.emit_session_proposal),this.client.events.emit("session_proposal",{id:u,params:p,verifyContext:E})}catch(h){await this.sendError({id:u,topic:n,error:h,rpcOpts:$i.wc_sessionPropose.autoReject}),this.client.logger.error(h)}}),Ue(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Si(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const c=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const u=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const h=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const f=await this.client.core.crypto.generateSharedKey(u,h);this.pendingSessions.set(s,{sessionTopic:f,pairingTopic:r,proposalId:s,publicKey:u});const p=await this.client.core.relayer.subscribe(f,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:p}),await this.client.core.pairing.activate({topic:r})}else if(Yn(n)){await this.client.proposal.delete(s,hn("USER_DISCONNECTED"));const o=Wr("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),Ue(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:c,expiry:u,namespaces:h,sessionProperties:f,scopedProperties:p,sessionConfig:E}=n.params,S=[...this.pendingSessions.values()].find($=>$.sessionTopic===r);if(!S)return this.client.logger.error(`Pending session not found for topic ${r}`);const A=this.client.proposal.get(S.proposalId),I=Ps(yn(yn(yn({topic:r,relay:o,expiry:u,namespaces:h,acknowledged:!0,pairingTopic:S.pairingTopic,requiredNamespaces:A.requiredNamespaces,optionalNamespaces:A.optionalNamespaces,controller:c.publicKey,self:{publicKey:S.publicKey,metadata:this.client.metadata},peer:{publicKey:c.publicKey,metadata:c.metadata}},f&&{sessionProperties:f}),p&&{scopedProperties:p}),E&&{sessionConfig:E}),{transportType:Dn.relay});await this.client.session.set(I.topic,I),await this.setExpiry(I.topic,I.expiry),await this.client.core.pairing.updateMetadata({topic:S.pairingTopic,metadata:I.peer.metadata}),this.client.events.emit("session_connect",{session:I}),this.events.emit(Wr("session_connect",S.proposalId),{session:I}),this.pendingSessions.delete(S.proposalId),this.deleteProposal(S.proposalId,!1),this.cleanupDuplicatePairings(I),await this.sendResult({id:n.id,topic:r,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),Ue(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Si(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Wr("session_approve",i),{})):Yn(n)&&(await this.client.session.delete(r,hn("USER_DISCONNECTED")),this.events.emit(Wr("session_approve",i),{error:n.error}))}),Ue(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,c=ig.get(o);if(c&&this.isRequestOutOfSync(c,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:hn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(yn({topic:r},i));try{ig.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0,throwOnFailedPublish:!0})}catch(u){throw ig.delete(o),u}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),Ue(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),Ue(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=Wr("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Si(n)?this.events.emit(Wr("session_update",i),{}):Yn(n)&&this.events.emit(Wr("session_update",i),{error:n.error})}),Ue(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,vi(of)),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),Ue(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=Wr("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Si(n)?this.events.emit(Wr("session_extend",i),{}):Yn(n)&&this.events.emit(Wr("session_extend",i),{error:n.error})}),Ue(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),Ue(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=Wr("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Si(n)?this.events.emit(Wr("session_ping",i),{}):Yn(n)&&this.events.emit(Wr("session_ping",i),{error:n.error})},500)}),Ue(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),Promise.all([new Promise(s=>{this.client.core.relayer.once(ji.publish,async()=>{s(await this.deleteSession({topic:r,id:i}))})}),this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:hn("USER_DISCONNECTED")})]).catch(s=>this.client.logger.error(s))}catch(s){this.client.logger.error(s)}}),Ue(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:c,attestation:u,encryptedId:h,transportType:f}=r,{id:p,params:E}=c;try{await this.isValidRequest(yn({topic:o},E));const S=this.client.session.get(o),A=await this.getVerifyContext({attestationId:u,hash:oc(JSON.stringify(Us("wc_sessionRequest",E,p))),encryptedId:h,metadata:S.peer.metadata,transportType:f}),I={id:p,topic:o,params:E,verifyContext:A};await this.setPendingSessionRequest(I),f===Dn.link_mode&&(n=S.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=S.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(I):(this.addSessionRequestToSessionRequestQueue(I),this.processSessionRequestQueue())}catch(S){await this.sendError({id:p,topic:o,error:S}),this.client.logger.error(S)}}),Ue(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=Wr("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Si(n)?this.events.emit(Wr("session_request",i),{result:n.result}):Yn(n)&&this.events.emit(Wr("session_request",i),{error:n.error})}),Ue(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,c=ig.get(o);if(c&&this.isRequestOutOfSync(c,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(yn({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),ig.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),Ue(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Si(n)?this.events.emit(Wr("session_request",i),{result:n.result}):Yn(n)&&this.events.emit(Wr("session_request",i),{error:n.error})}),Ue(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:c,transportType:u}=r;try{const{requester:h,authPayload:f,expiryTimestamp:p}=s.params,E=await this.getVerifyContext({attestationId:o,hash:oc(JSON.stringify(s)),encryptedId:c,metadata:h.metadata,transportType:u}),S={requester:h,pairingTopic:i,id:s.id,authPayload:f,verifyContext:E,expiryTimestamp:p};await this.setAuthRequest(s.id,{request:S,pairingTopic:i,transportType:u}),u===Dn.link_mode&&(n=h.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(h.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:E})}catch(h){this.client.logger.error(h);const f=s.params.requester.publicKey,p=await this.client.core.crypto.generateKeyPair(),E=this.getAppLinkIfEnabled(s.params.requester.metadata,u),S={type:cl,receiverPublicKey:f,senderPublicKey:p};await this.sendError({id:s.id,topic:i,error:h,encodeOpts:S,rpcOpts:$i.wc_sessionAuthenticate.autoReject,appLink:E})}}),Ue(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),Ue(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=tc.idle,this.processSessionRequestQueue()},ye.toMiliseconds(this.requestQueueDelay))}),Ue(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{const o=s.request.id,c=Wr("session_request",o);if(this.events.listenerCount(c)===0)throw new Error(`emitting ${c} without any listeners`);this.events.emit(Wr("session_request",s.request.id),{error:n})})}),Ue(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===tc.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=tc.active,this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),Ue(this,"emitSessionRequest",r=>{this.client.events.emit("session_request",r)}),Ue(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:Us("wc_sessionPropose",Ps(yn({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id)})}),Ue(this,"isValidConnect",async r=>{if(!so(r)){const{message:h}=Xe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(h)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:c,relays:u}=r;if(ns(n)||await this.isValidPairingTopic(n),!pwe(u)){const{message:h}=Xe("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(h)}if(!ns(i)&&Sy(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!ns(s)&&Sy(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),ns(o)||this.validateSessionProps(o,"sessionProperties"),!ns(c)){this.validateSessionProps(c,"scopedProperties");const h=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(c).every(f=>h.includes(f)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(c)}, required/optional namespaces: ${JSON.stringify(h)}`)}}),Ue(this,"validateNamespaces",(r,n)=>{const i=fwe(r,"connect()",n);if(i)throw new Error(i.message)}),Ue(this,"isValidApprove",async r=>{if(!so(r))throw new Error(Xe("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:c}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const u=this.client.proposal.get(n),h=D3(i,"approve()");if(h)throw new Error(h.message);const f=JO(u.requiredNamespaces,i,"approve()");if(f)throw new Error(f.message);if(!fi(s,!0)){const{message:p}=Xe("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(p)}if(ns(o)||this.validateSessionProps(o,"sessionProperties"),!ns(c)){this.validateSessionProps(c,"scopedProperties");const p=new Set(Object.keys(i));if(!Object.keys(c).every(E=>p.has(E)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(c)}, approved namespaces: ${Array.from(p).join(", ")}`)}}),Ue(this,"isValidReject",async r=>{if(!so(r)){const{message:s}=Xe("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!ywe(i)){const{message:s}=Xe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),Ue(this,"isValidSessionSettleRequest",r=>{if(!so(r)){const{message:h}=Xe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(h)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!qB(n)){const{message:h}=Xe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const c=awe(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);const u=D3(s,"onSessionSettleRequest()");if(u)throw new Error(u.message);if(eu(o)){const{message:h}=Xe("EXPIRED","onSessionSettleRequest()");throw new Error(h)}}),Ue(this,"isValidUpdate",async r=>{if(!so(r)){const{message:u}=Xe("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(u)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=D3(i,"update()");if(o)throw new Error(o.message);const c=JO(s.requiredNamespaces,i,"update()");if(c)throw new Error(c.message)}),Ue(this,"isValidExtend",async r=>{if(!so(r)){const{message:i}=Xe("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),Ue(this,"isValidRequest",async r=>{if(!so(r)){const{message:u}=Xe("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(u)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!XO(c,s)){const{message:u}=Xe("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(u)}if(!mwe(i)){const{message:u}=Xe("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(u)}if(!vwe(c,s,i.method)){const{message:u}=Xe("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(u)}if(o&&!Awe(o,j3)){const{message:u}=Xe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${j3.min} and ${j3.max}`);throw new Error(u)}}),Ue(this,"isValidRespond",async r=>{var n;if(!so(r)){const{message:o}=Xe("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(o){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),o}if(!bwe(s)){const{message:o}=Xe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}}),Ue(this,"isValidPing",async r=>{if(!so(r)){const{message:i}=Xe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Ue(this,"isValidEmit",async r=>{if(!so(r)){const{message:c}=Xe("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(c)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!XO(o,s)){const{message:c}=Xe("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(c)}if(!wwe(i)){const{message:c}=Xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}if(!Ewe(o,s,i.name)){const{message:c}=Xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}}),Ue(this,"isValidDisconnect",async r=>{if(!so(r)){const{message:i}=Xe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),Ue(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!fi(i,!1))throw new Error("uri is required parameter");if(!fi(s,!1))throw new Error("domain is required parameter");if(!fi(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(u=>qf(u).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:c}=qf(n[0]);if(c!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Ue(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:c}=r,u={verified:{verifyUrl:o.verifyUrl||Rg,validation:"UNKNOWN",origin:o.url||""}};try{if(c===Dn.link_mode){const f=this.getAppLinkIfEnabled(o,c);return u.verified.validation=f&&new URL(f).origin===new URL(o.url).origin?"VALID":"INVALID",u}const h=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});h&&(u.verified.origin=h.origin,u.verified.isScam=h.isScam,u.verified.validation=h.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(h){this.client.logger.warn(h)}return this.client.logger.debug(`Verify context: ${JSON.stringify(u)}`),u}),Ue(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=Xe("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),Ue(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),Ue(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),Ue(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=Xe("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),Ue(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,c,u,h,f,p,E;return!r||n!==Dn.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((c=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:c.universal)!==void 0&&((h=(u=this.client.metadata)==null?void 0:u.redirect)==null?void 0:h.universal)!==""&&((f=r==null?void 0:r.redirect)==null?void 0:f.universal)!==void 0&&((p=r==null?void 0:r.redirect)==null?void 0:p.universal)!==""&&((E=r==null?void 0:r.redirect)==null?void 0:E.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Ue(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0}),Ue(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=vO(r,"topic")||"",i=decodeURIComponent(vO(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:Dn.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),Ue(this,"registerLinkModeListeners",async()=>{var r;if(XA()||wu()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),Ue(this,"shouldSetTVF",(r,n)=>{if(!n||r!=="wc_sessionRequest")return!1;const{request:i}=n;return Object.keys(T7).includes(i.method)}),Ue(this,"getTVFParams",(r,n,i)=>{var s,o;try{const c=n.request.method,u=this.extractTxHashesFromResult(c,i);return Ps(yn({correlationId:r,rpcMethods:[c],chainId:n.chainId},this.isValidContractData(n.request.params)&&{contractAddresses:[(o=(s=n.request.params)==null?void 0:s[0])==null?void 0:o.to]}),{txHashes:u})}catch(c){this.client.logger.warn("Error getting TVF params",c)}return{}}),Ue(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),Ue(this,"extractTxHashesFromResult",(r,n)=>{try{const i=T7[r];if(typeof n=="string")return[n];const s=n[i.key];if(Oh(s))return r==="solana_signAllTransactions"?s.map(o=>Ebe(o)):s;if(typeof s=="string")return[s]}catch(i){this.client.logger.warn("Error extracting tx hashes from result",i)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ji.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(w1)?this.client.auth.authKeys.get(w1):{publicKey:void 0};try{const c=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===Dn.link_mode?ng:cu});Ap(c)?(this.client.core.history.set(r,c),await this.onRelayEventRequest({topic:r,payload:c,attestation:i,transportType:s,encryptedId:oc(n)})):zh(c)?(await this.client.core.history.resolve(c),await this.onRelayEventResponse({topic:r,payload:c,transportType:s}),this.client.core.history.delete(r,c.id)):await this.onRelayEventUnknownPayload({topic:r,payload:c,transportType:s}),await this.client.core.relayer.messages.ack(r,n)}catch(c){this.client.logger.error(c)}}registerExpirerEvents(){this.client.core.expirer.on(na.expired,async e=>{const{topic:r,id:n}=yB(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,Xe("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,Xe("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(nh.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(nh.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!fi(e,!1)){const{message:r}=Xe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(eu(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Xe("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!fi(e,!1)){const{message:r}=Xe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=Xe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(eu(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=Xe("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=Xe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(fi(e,!1)){const{message:r}=Xe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Xe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!gwe(e)){const{message:r}=Xe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Xe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(eu(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=Xe("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class M_e extends Gh{constructor(e,r){super(e,r,f_e,a5),this.core=e,this.logger=r}}let N_e=class extends Gh{constructor(e,r){super(e,r,p_e,a5),this.core=e,this.logger=r}};class O_e extends Gh{constructor(e,r){super(e,r,y_e,a5,n=>n.id),this.core=e,this.logger=r}}class R_e extends Gh{constructor(e,r){super(e,r,v_e,Yw,()=>w1),this.core=e,this.logger=r}}class D_e extends Gh{constructor(e,r){super(e,r,E_e,Yw),this.core=e,this.logger=r}}class $_e extends Gh{constructor(e,r){super(e,r,__e,Yw,n=>n.id),this.core=e,this.logger=r}}var k_e=Object.defineProperty,P_e=(t,e,r)=>e in t?k_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,z3=(t,e,r)=>P_e(t,typeof e!="symbol"?e+"":e,r);class B_e{constructor(e,r){this.core=e,this.logger=r,z3(this,"authKeys"),z3(this,"pairingTopics"),z3(this,"requests"),this.authKeys=new R_e(this.core,this.logger),this.pairingTopics=new D_e(this.core,this.logger),this.requests=new $_e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var L_e=Object.defineProperty,U_e=(t,e,r)=>e in t?L_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Sr=(t,e,r)=>U_e(t,typeof e!="symbol"?e+"":e,r);let j_e=class cL extends lye{constructor(e){super(e),Sr(this,"protocol",sL),Sr(this,"version",oL),Sr(this,"name",U3.name),Sr(this,"metadata"),Sr(this,"core"),Sr(this,"logger"),Sr(this,"events",new Ii.EventEmitter),Sr(this,"engine"),Sr(this,"session"),Sr(this,"proposal"),Sr(this,"pendingRequest"),Sr(this,"auth"),Sr(this,"signConfig"),Sr(this,"on",(n,i)=>this.events.on(n,i)),Sr(this,"once",(n,i)=>this.events.once(n,i)),Sr(this,"off",(n,i)=>this.events.off(n,i)),Sr(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),Sr(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Sr(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Sr(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),Sr(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),Sr(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||U3.name,this.metadata=(e==null?void 0:e.metadata)||fB(),this.signConfig=e==null?void 0:e.signConfig;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:yu(ul({level:(e==null?void 0:e.logger)||U3.logger}));this.core=(e==null?void 0:e.core)||new d_e(e),this.logger=Gr(r,this.name),this.session=new N_e(this.core,this.logger),this.proposal=new M_e(this.core,this.logger),this.pendingRequest=new O_e(this.core,this.logger),this.engine=new T_e(this),this.auth=new B_e(this.core,this.logger)}static async init(e){const r=new cL(e);return await r.initialize(),r}get context(){return bn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ye.toMiliseconds(ye.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const N7="error",z_e="wss://relay.walletconnect.org",q_e="wc",F_e="universal_provider",Gb=`${q_e}@2:${F_e}:`,lL="https://rpc.walletconnect.org/v1/",If="generic",H_e=`${lL}bundler`,ca={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function W_e(){}function c5(t){return t==null||typeof t!="object"&&typeof t!="function"}function l5(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function K_e(t){if(c5(t))return t;if(Array.isArray(t)||l5(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function O7(t){return typeof t=="object"&&t!==null}function uL(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function hL(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const V_e="[object RegExp]",dL="[object String]",fL="[object Number]",pL="[object Boolean]",gL="[object Arguments]",G_e="[object Symbol]",Y_e="[object Date]",Z_e="[object Map]",Q_e="[object Set]",X_e="[object Array]",J_e="[object ArrayBuffer]",e3e="[object Object]",t3e="[object DataView]",r3e="[object Uint8Array]",n3e="[object Uint8ClampedArray]",i3e="[object Uint16Array]",s3e="[object Uint32Array]",o3e="[object Int8Array]",a3e="[object Int16Array]",c3e="[object Int32Array]",l3e="[object Float32Array]",u3e="[object Float64Array]";function h3e(t,e){return $f(t,void 0,t,new Map,e)}function $f(t,e,r,n=new Map,i=void 0){const s=i==null?void 0:i(t,e,r,n);if(s!=null)return s;if(c5(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let c=0;c<t.length;c++)o[c]=$f(t[c],c,r,n,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[c,u]of t)o.set(c,$f(u,c,r,n,i));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const c of t)o.add($f(c,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(l5(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let c=0;c<t.length;c++)o[c]=$f(t[c],c,r,n,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),ih(o,t,r,n,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),ih(o,t,r,n,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),ih(o,t,r,n,i),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,ih(o,t,r,n,i),o}if(typeof t=="object"&&d3e(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),ih(o,t,r,n,i),o}return t}function ih(t,e,r=t,n,i){const s=[...Object.keys(e),...uL(e)];for(let o=0;o<s.length;o++){const c=s[o],u=Object.getOwnPropertyDescriptor(t,c);(u==null||u.writable)&&(t[c]=$f(e[c],c,r,n,i))}}function d3e(t){switch(hL(t)){case gL:case X_e:case J_e:case t3e:case pL:case Y_e:case l3e:case u3e:case o3e:case a3e:case c3e:case Z_e:case fL:case e3e:case V_e:case Q_e:case dL:case G_e:case r3e:case n3e:case i3e:case s3e:return!0;default:return!1}}function f3e(t,e){return h3e(t,(r,n,i,s)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case fL:case dL:case pL:{const o=new t.constructor(t==null?void 0:t.valueOf());return ih(o,t),o}case gL:{const o={};return ih(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function R7(t){return f3e(t)}function D7(t){return t!==null&&typeof t=="object"&&hL(t)==="[object Arguments]"}function p3e(t){return l5(t)}function g3e(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function y3e(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let i=t;for(let s=0;s<r.length;s++){const o=r[s];i=R4(i,o,n,new Map)}return i}function R4(t,e,r,n){if(c5(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return K_e(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...uL(e)];for(let s=0;s<i.length;s++){const o=i[s];let c=e[o],u=t[o];if(D7(c)&&(c={...c}),D7(u)&&(u={...u}),typeof Buffer<"u"&&Buffer.isBuffer(c)&&(c=R7(c)),Array.isArray(c))if(typeof u=="object"&&u!=null){const f=[],p=Reflect.ownKeys(u);for(let E=0;E<p.length;E++){const S=p[E];f[S]=u[S]}u=f}else u=[];const h=r(u,c,o,t,e,n);h!=null?t[o]=h:Array.isArray(c)||O7(u)&&O7(c)?t[o]=R4(u,c,r,n):u==null&&g3e(c)?t[o]=R4({},c,r,n):u==null&&p3e(c)?t[o]=R7(c):(u===void 0||c!==void 0)&&(t[o]=c)}return t}function m3e(t,...e){return y3e(t,...e,W_e)}var b3e=Object.defineProperty,w3e=Object.defineProperties,v3e=Object.getOwnPropertyDescriptors,$7=Object.getOwnPropertySymbols,E3e=Object.prototype.hasOwnProperty,_3e=Object.prototype.propertyIsEnumerable,k7=(t,e,r)=>e in t?b3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yb=(t,e)=>{for(var r in e||(e={}))E3e.call(e,r)&&k7(t,r,e[r]);if($7)for(var r of $7(e))_3e.call(e,r)&&k7(t,r,e[r]);return t},S3e=(t,e)=>w3e(t,v3e(e));function Uo(t,e,r){var n;const i=qf(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${lL}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function Yh(t){return t.includes(":")?t.split(":")[1]:t}function yL(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function A3e(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function q3(t={},e={}){const r=P7(t),n=P7(e);return m3e(r,n)}function P7(t){var e,r,n,i;const s={};if(!Sy(t))return s;for(const[o,c]of Object.entries(t)){const u=s5(o)?[o]:c.chains,h=c.methods||[],f=c.events||[],p=c.rpcMap||{},E=mg(o);s[E]=S3e(Yb(Yb({},s[E]),c),{chains:g1(u,(e=s[E])==null?void 0:e.chains),methods:g1(h,(r=s[E])==null?void 0:r.methods),events:g1(f,(n=s[E])==null?void 0:n.events),rpcMap:Yb(Yb({},p),(i=s[E])==null?void 0:i.rpcMap)})}return s}function I3e(t){return t.includes(":")?t.split(":")[2]:t}function B7(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],c=s5(r)?[r]:n.chains?n.chains:yL(n.accounts);e[r]={chains:c,methods:i,events:s,accounts:o}}return e}function F3(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const mL={},Lr=t=>mL[t],H3=(t,e)=>{mL[t]=e};var x3e=Object.defineProperty,C3e=(t,e,r)=>e in t?x3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,af=(t,e,r)=>C3e(t,typeof e!="symbol"?e+"":e,r);class T3e{constructor(e){af(this,"name","polkadot"),af(this,"client"),af(this,"httpProviders"),af(this,"events"),af(this,"namespace"),af(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Yh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Uo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Lr("disableProviderPing")))}}var M3e=Object.defineProperty,N3e=Object.defineProperties,O3e=Object.getOwnPropertyDescriptors,L7=Object.getOwnPropertySymbols,R3e=Object.prototype.hasOwnProperty,D3e=Object.prototype.propertyIsEnumerable,D4=(t,e,r)=>e in t?M3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U7=(t,e)=>{for(var r in e||(e={}))R3e.call(e,r)&&D4(t,r,e[r]);if(L7)for(var r of L7(e))D3e.call(e,r)&&D4(t,r,e[r]);return t},j7=(t,e)=>N3e(t,O3e(e)),cf=(t,e,r)=>D4(t,typeof e!="symbol"?e+"":e,r);class $3e{constructor(e){cf(this,"name","eip155"),cf(this,"client"),cf(this,"chainId"),cf(this,"namespace"),cf(this,"httpProviders"),cf(this,"events"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||Uo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Lr("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(Yh(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i;const s=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0];if(!s)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const o=this.client.session.get(e.topic),c=((i=o==null?void 0:o.sessionProperties)==null?void 0:i.capabilities)||{};if(c!=null&&c[s])return c==null?void 0:c[s];const u=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:j7(U7({},o.sessionProperties||{}),{capabilities:j7(U7({},c||{}),{[s]:u})})})}catch(h){console.warn("Failed to update session with capabilities",h)}return u}async getCallStatus(e){var r,n;const i=this.client.session.get(e.topic),s=(r=i.sessionProperties)==null?void 0:r.bundler_name;if(s){const c=this.getBundlerUrl(e.chainId,s);try{return await this.getUserOperationReceipt(c,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,c)}}const o=(n=i.sessionProperties)==null?void 0:n.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(c){console.warn("Failed to fetch call status from custom bundler",c,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Us("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${H_e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}}var k3e=Object.defineProperty,P3e=(t,e,r)=>e in t?k3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lf=(t,e,r)=>P3e(t,typeof e!="symbol"?e+"":e,r);class B3e{constructor(e){lf(this,"name","solana"),lf(this,"client"),lf(this,"httpProviders"),lf(this,"events"),lf(this,"namespace"),lf(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Yh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Uo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Lr("disableProviderPing")))}}var L3e=Object.defineProperty,U3e=(t,e,r)=>e in t?L3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,uf=(t,e,r)=>U3e(t,typeof e!="symbol"?e+"":e,r);class j3e{constructor(e){uf(this,"name","cosmos"),uf(this,"client"),uf(this,"httpProviders"),uf(this,"events"),uf(this,"namespace"),uf(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Yh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Uo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Lr("disableProviderPing")))}}var z3e=Object.defineProperty,q3e=(t,e,r)=>e in t?z3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,hf=(t,e,r)=>q3e(t,typeof e!="symbol"?e+"":e,r);class F3e{constructor(e){hf(this,"name","algorand"),hf(this,"client"),hf(this,"httpProviders"),hf(this,"events"),hf(this,"namespace"),hf(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||Uo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Uo(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new Bn(new Zn(n,Lr("disableProviderPing")))}}var H3e=Object.defineProperty,W3e=(t,e,r)=>e in t?H3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,df=(t,e,r)=>W3e(t,typeof e!="symbol"?e+"":e,r);class K3e{constructor(e){df(this,"name","cip34"),df(this,"client"),df(this,"httpProviders"),df(this,"events"),df(this,"namespace"),df(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const n=this.getCardanoRPCUrl(r),i=Yh(r);e[i]=this.createHttpProvider(i,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Lr("disableProviderPing")))}}var V3e=Object.defineProperty,G3e=(t,e,r)=>e in t?V3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ff=(t,e,r)=>G3e(t,typeof e!="symbol"?e+"":e,r);class Y3e{constructor(e){ff(this,"name","elrond"),ff(this,"client"),ff(this,"httpProviders"),ff(this,"events"),ff(this,"namespace"),ff(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Yh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Uo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Lr("disableProviderPing")))}}var Z3e=Object.defineProperty,Q3e=(t,e,r)=>e in t?Z3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pf=(t,e,r)=>Q3e(t,typeof e!="symbol"?e+"":e,r);class X3e{constructor(e){pf(this,"name","multiversx"),pf(this,"client"),pf(this,"httpProviders"),pf(this,"events"),pf(this,"namespace"),pf(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=Yh(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Uo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Lr("disableProviderPing")))}}var J3e=Object.defineProperty,eSe=(t,e,r)=>e in t?J3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gf=(t,e,r)=>eSe(t,typeof e!="symbol"?e+"":e,r);class tSe{constructor(e){gf(this,"name","near"),gf(this,"client"),gf(this,"httpProviders"),gf(this,"events"),gf(this,"namespace"),gf(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Uo(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Uo(e,this.namespace);return typeof n>"u"?void 0:new Bn(new Zn(n,Lr("disableProviderPing")))}}var rSe=Object.defineProperty,nSe=(t,e,r)=>e in t?rSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,yf=(t,e,r)=>nSe(t,typeof e!="symbol"?e+"":e,r);class iSe{constructor(e){yf(this,"name","tezos"),yf(this,"client"),yf(this,"httpProviders"),yf(this,"events"),yf(this,"namespace"),yf(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||Uo(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{e[r]=this.createHttpProvider(r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Uo(e,this.namespace);return typeof n>"u"?void 0:new Bn(new Zn(n))}}var sSe=Object.defineProperty,oSe=(t,e,r)=>e in t?sSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,mf=(t,e,r)=>oSe(t,typeof e!="symbol"?e+"":e,r);class aSe{constructor(e){mf(this,"name",If),mf(this,"client"),mf(this,"httpProviders"),mf(this,"events"),mf(this,"namespace"),mf(this,"chainId"),this.namespace=e.namespace,this.events=Lr("events"),this.client=Lr("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(ca.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{const s=qf(i);n[`${s.namespace}:${s.reference}`]=this.createHttpProvider(i)}),n}getHttpProvider(e){const r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||Uo(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new Bn(new Zn(n,Lr("disableProviderPing")))}}var cSe=Object.defineProperty,lSe=Object.defineProperties,uSe=Object.getOwnPropertyDescriptors,z7=Object.getOwnPropertySymbols,hSe=Object.prototype.hasOwnProperty,dSe=Object.prototype.propertyIsEnumerable,$4=(t,e,r)=>e in t?cSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zb=(t,e)=>{for(var r in e||(e={}))hSe.call(e,r)&&$4(t,r,e[r]);if(z7)for(var r of z7(e))dSe.call(e,r)&&$4(t,r,e[r]);return t},W3=(t,e)=>lSe(t,uSe(e)),ea=(t,e,r)=>$4(t,typeof e!="symbol"?e+"":e,r);let fSe=class bL{constructor(e){ea(this,"client"),ea(this,"namespaces"),ea(this,"optionalNamespaces"),ea(this,"sessionProperties"),ea(this,"scopedProperties"),ea(this,"events",new bp),ea(this,"rpcProviders",{}),ea(this,"session"),ea(this,"providerOpts"),ea(this,"logger"),ea(this,"uri"),ea(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:yu(ul({level:(e==null?void 0:e.logger)||N7})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new bL(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Zb({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,bu(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:hn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=B7(this.session.namespaces);this.namespaces=q3(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){const{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();this.session=i;const s=B7(i.namespaces);return this.namespaces=q3(this.namespaces,s),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e),s=this.getProvider(n);s.name===If?s.setDefaultChain(`${n}:${i}`,r):s.setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Oh(r)){for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await j_e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||N7,relayUrl:this.providerOpts.relayUrl||z_e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error("Failed to get session",n),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>mg(r)))];H3("client",this.client),H3("events",this.events),H3("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=A3e(r,this.session),i=yL(n),s=q3(this.namespaces,this.optionalNamespaces),o=W3(Zb({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new $3e({namespace:o});break;case"algorand":this.rpcProviders[r]=new F3e({namespace:o});break;case"solana":this.rpcProviders[r]=new B3e({namespace:o});break;case"cosmos":this.rpcProviders[r]=new j3e({namespace:o});break;case"polkadot":this.rpcProviders[r]=new T3e({namespace:o});break;case"cip34":this.rpcProviders[r]=new K3e({namespace:o});break;case"elrond":this.rpcProviders[r]=new Y3e({namespace:o});break;case"multiversx":this.rpcProviders[r]=new X3e({namespace:o});break;case"near":this.rpcProviders[r]=new tSe({namespace:o});break;case"tezos":this.rpcProviders[r]=new iSe({namespace:o});break;default:this.rpcProviders[If]?this.rpcProviders[If].updateNamespace(o):this.rpcProviders[If]=new aSe({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:i}=e;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&Oh(o)&&this.events.emit("accountsChanged",o.map(I3e))}else if(s.name==="chainChanged"){const o=n.chainId,c=n.event.data,u=mg(o),h=F3(o)!==F3(c)?`${u}:${F3(c)}`:o;this.onChainChanged(h)}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(e);this.session=W3(Zb({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",W3(Zb({},hn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ca.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[If]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s}=e;r&&Object.keys(r).length&&(this.namespaces=r),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>mg(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=mg(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,r=!1){if(!this.namespaces)return;const[n,i]=this.validateChain(e);i&&(r||this.getProvider(n).setDefaultChain(i),this.namespaces[n]?this.namespaces[n].defaultChain=i:this.namespaces[`${n}:${i}`]?this.namespaces[`${n}:${i}`].defaultChain=i:this.namespaces[`${n}:${i}`]={defaultChain:i},this.events.emit("chainChanged",i),await this.persist("namespaces",this.namespaces))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${Gb}/${e}${i}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${Gb}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${Gb}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(Gb)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn("Failed to cleanup storage",r)}}};const Zl={EIP155:"eip155",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED"},J1={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[kt.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[kt.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[kt.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[kt.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[kt.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[kt.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[kt.CONNECTOR_ID.INJECTED]:"Browser Wallet",[kt.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[kt.CONNECTOR_ID.COINBASE]:"Coinbase",[kt.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[kt.CONNECTOR_ID.LEDGER]:"Ledger",[kt.CONNECTOR_ID.SAFE]:"Safe"}},wL={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([r,n])=>{e[`${Zl.EIP155}:${r}`]=n}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},Qb={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${pSe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function pSe(){return typeof window<"u"}const gSe={createLogger(t,e="error"){const r=ul({level:e}),{logger:n}=EA({opts:r});return n.error=(...i)=>{for(const s of i)if(s instanceof Error){t(s,...i);return}t(void 0,...i)},n}},ySe="rpc.walletconnect.org";function mSe(t,e){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",t),r.searchParams.set("projectId",e),r.toString()}const K3=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],xf={extendRpcUrlWithProjectId(t,e){let r=!1;try{r=new URL(t).host===ySe}catch{r=!1}if(r){const n=new URL(t);return n.searchParams.has("projectId")||n.searchParams.set("projectId",e),n.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:kt.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${kt.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,r){var i,s,o;const n=(o=(s=(i=t.rpcUrls)==null?void 0:i.default)==null?void 0:s.http)==null?void 0:o[0];return K3.includes(e)?mSe(e,r):n||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){var E,S,A,I,$;const i=this.getChainNamespace(t),s=this.getCaipNetworkId(t),o=(E=t.rpcUrls.default.http)==null?void 0:E[0],c=this.getDefaultRpcUrl(t,s,r),u=((I=(A=(S=t==null?void 0:t.rpcUrls)==null?void 0:S.chainDefault)==null?void 0:A.http)==null?void 0:I[0])||o,h=(($=n==null?void 0:n[s])==null?void 0:$.map(L=>L.url))||[],f=[...h,c],p=[...h];return u&&!p.includes(u)&&p.push(u),{...t,chainNamespace:i,caipNetworkId:s,assets:{imageId:J1.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:f},chainDefault:{http:p}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:r,customRpcUrls:n}){return t.map(i=>xf.extendCaipNetwork(i,{customNetworkImageUrls:e,customRpcUrls:n,projectId:r}))},getViemTransport(t,e,r){const n=[];if(r==null||r.forEach(i=>{n.push(A3(i.url,i.config))}),K3.includes(t.caipNetworkId)){const i=this.getDefaultRpcUrl(t,t.caipNetworkId,e);n.push(A3(i,{fetchOptions:{headers:{"Content-Type":"text/plain"}}}))}return sO(n)},extendWagmiTransports(t,e,r){if(K3.includes(t.caipNetworkId)){const n=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return sO([r,A3(n)])}return r},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:kt.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var u;const e=Ot.getActiveCaipNetworkId(),r=ue.getAllRequestedCaipNetworks(),n=Array.from(((u=ue.state.chains)==null?void 0:u.keys())||[]),i=e==null?void 0:e.split(":")[0],s=i?n.includes(i):!1,o=r==null?void 0:r.find(h=>h.caipNetworkId===e);return s&&!o&&e?this.getUnsupportedNetwork(e):o||t||(r==null?void 0:r[0])}},ew={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},ro=Hn({providers:{...ew},providerIds:{...ew}}),zn={state:ro,subscribeKey(t,e){return zo(ro,t,e)},subscribe(t){return zs(ro,()=>{t(ro)})},subscribeProviders(t){return zs(ro.providers,()=>t(ro.providers))},setProvider(t,e){e&&(ro.providers[t]=Ch(e))},getProvider(t){return ro.providers[t]},setProviderId(t,e){e&&(ro.providerIds[t]=e)},getProviderId(t){if(t)return ro.providerIds[t]},reset(){ro.providers={...ew},ro.providerIds={...ew}},resetChain(t){ro.providers[t]=void 0,ro.providerIds[t]=void 0}},bSe={VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},k4={filterOutDuplicatesByRDNS(t){const e=Ze.state.enableEIP6963?nr.state.connectors:[],r=Ot.getRecentWallets(),n=e.map(c=>{var u;return(u=c.info)==null?void 0:u.rdns}).filter(Boolean),i=r.map(c=>c.rdns).filter(Boolean),s=n.concat(i);if(s.includes("io.metamask.mobile")&&or.isMobile()){const c=s.indexOf("io.metamask.mobile");s[c]="io.metamask"}return t.filter(c=>!s.includes(String(c==null?void 0:c.rdns)))},filterOutDuplicatesByIds(t){const e=nr.state.connectors.filter(c=>c.type==="ANNOUNCED"||c.type==="INJECTED"),r=Ot.getRecentWallets(),n=e.map(c=>c.explorerId),i=r.map(c=>c.id),s=n.concat(i);return t.filter(c=>!s.includes(c==null?void 0:c.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=nr.state,r=e.filter(s=>s.type==="ANNOUNCED").reduce((s,o)=>{var c;return(c=o.info)!=null&&c.rdns&&(s[o.info.rdns]=!0),s},{});return t.map(s=>({...s,installed:!!s.rdns&&!!r[s.rdns??""]})).sort((s,o)=>Number(o.installed)-Number(s.installed))},getConnectOrderMethod(t,e){var u;const r=(t==null?void 0:t.connectMethodsOrder)||((u=Ze.state.features)==null?void 0:u.connectMethodsOrder),n=e||nr.state.connectors;if(r)return r;const{injected:i,announced:s}=v1.getConnectorsByType(n,ur.state.recommended,ur.state.featured),o=i.filter(v1.showConnector),c=s.filter(v1.showConnector);return o.length||c.length?["wallet","email","social"]:bSe.DEFAULT_CONNECT_METHOD_ORDER}},v1={getConnectorsByType(t,e,r){const{customWallets:n}=Ze.state,i=Ot.getRecentWallets(),s=k4.filterOutDuplicateWallets(e),o=k4.filterOutDuplicateWallets(r),c=t.filter(p=>p.type==="MULTI_CHAIN"),u=t.filter(p=>p.type==="ANNOUNCED"),h=t.filter(p=>p.type==="INJECTED"),f=t.filter(p=>p.type==="EXTERNAL");return{custom:n,recent:i,external:f,multiChain:c,announced:u,injected:h,recommended:s,featured:o}},showConnector(t){var i;const e=(i=t.info)==null?void 0:i.rdns,r=!!e&&ur.state.excludedWallets.some(s=>s.rdns===e),n=!!t.name&&ur.state.excludedWallets.some(s=>wL.isLowerCaseMatch(s.name,t.name));return!(t.type==="INJECTED"&&(!or.isMobile()&&t.name==="Browser Wallet"||!e&&!Cn.checkInstalled()||r||n)||t.type==="ANNOUNCED"&&(r||n))},getIsConnectedWithWC(){return Array.from(ue.state.chains.values()).some(r=>nr.getConnectorId(r.namespace)===kt.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:r,recent:n,announced:i,injected:s,multiChain:o,external:c,overriddenConnectors:u=(h=>(h=Ze.state.features)==null?void 0:h.connectorTypeOrder)()??[]}){const f=v1.getIsConnectedWithWC(),S=[{type:"walletConnect",isEnabled:Ze.state.enableWalletConnect&&!f},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...s,...i,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:c.length>0},{type:"recommended",isEnabled:t.length>0}].filter(L=>L.isEnabled),A=new Set(S.map(L=>L.type)),I=u.filter(L=>A.has(L)).map(L=>({type:L,isEnabled:!0})),$=S.filter(({type:L})=>!I.some(({type:U})=>U===L));return Array.from(new Set([...I,...$].map(({type:L})=>L)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const E1=globalThis,u5=E1.ShadowRoot&&(E1.ShadyCSS===void 0||E1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,h5=Symbol(),q7=new WeakMap;let vL=class{constructor(e,r,n){if(this._$cssResult$=!0,n!==h5)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(u5&&e===void 0){const n=r!==void 0&&r.length===1;n&&(e=q7.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&q7.set(r,e))}return e}toString(){return this.cssText}};const ta=t=>new vL(typeof t=="string"?t:t+"",void 0,h5),Ff=(t,...e)=>{const r=t.length===1?t[0]:e.reduce((n,i,s)=>n+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1],t[0]);return new vL(r,t,h5)},wSe=(t,e)=>{if(u5)t.adoptedStyleSheets=e.map(r=>r instanceof CSSStyleSheet?r:r.styleSheet);else for(const r of e){const n=document.createElement("style"),i=E1.litNonce;i!==void 0&&n.setAttribute("nonce",i),n.textContent=r.cssText,t.appendChild(n)}},F7=u5?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const n of e.cssRules)r+=n.cssText;return ta(r)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:vSe,defineProperty:ESe,getOwnPropertyDescriptor:_Se,getOwnPropertyNames:SSe,getOwnPropertySymbols:ASe,getPrototypeOf:ISe}=Object,du=globalThis,H7=du.trustedTypes,xSe=H7?H7.emptyScript:"",V3=du.reactiveElementPolyfillSupport,$g=(t,e)=>t,P4={toAttribute(t,e){switch(e){case Boolean:t=t?xSe:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},EL=(t,e)=>!vSe(t,e),W7={attribute:!0,type:String,converter:P4,reflect:!1,useDefault:!1,hasChanged:EL};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),du.litPropertyMetadata??(du.litPropertyMetadata=new WeakMap);let Cf=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=W7){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const n=Symbol(),i=this.getPropertyDescriptor(e,n,r);i!==void 0&&ESe(this.prototype,e,i)}}static getPropertyDescriptor(e,r,n){const{get:i,set:s}=_Se(this.prototype,e)??{get(){return this[r]},set(o){this[r]=o}};return{get:i,set(o){const c=i==null?void 0:i.call(this);s==null||s.call(this,o),this.requestUpdate(e,c,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??W7}static _$Ei(){if(this.hasOwnProperty($g("elementProperties")))return;const e=ISe(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty($g("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty($g("properties"))){const r=this.properties,n=[...SSe(r),...ASe(r)];for(const i of n)this.createProperty(i,r[i])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[n,i]of r)this.elementProperties.set(n,i)}this._$Eh=new Map;for(const[r,n]of this.elementProperties){const i=this._$Eu(r,n);i!==void 0&&this._$Eh.set(i,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const i of n)r.unshift(F7(i))}else e!==void 0&&r.push(F7(e));return r}static _$Eu(e,r){const n=r.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(r=>this.enableUpdating=r),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(r=>r(this))}addController(e){var r;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)==null||r.call(e))}removeController(e){var r;(r=this._$EO)==null||r.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const n of r.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return wSe(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostConnected)==null?void 0:n.call(r)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(r=>{var n;return(n=r.hostDisconnected)==null?void 0:n.call(r)})}attributeChangedCallback(e,r,n){this._$AK(e,n)}_$ET(e,r){var s;const n=this.constructor.elementProperties.get(e),i=this.constructor._$Eu(e,n);if(i!==void 0&&n.reflect===!0){const o=(((s=n.converter)==null?void 0:s.toAttribute)!==void 0?n.converter:P4).toAttribute(r,n.type);this._$Em=e,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$Em=null}}_$AK(e,r){var s,o;const n=this.constructor,i=n._$Eh.get(e);if(i!==void 0&&this._$Em!==i){const c=n.getPropertyOptions(i),u=typeof c.converter=="function"?{fromAttribute:c.converter}:((s=c.converter)==null?void 0:s.fromAttribute)!==void 0?c.converter:P4;this._$Em=i,this[i]=u.fromAttribute(r,c.type)??((o=this._$Ej)==null?void 0:o.get(i))??null,this._$Em=null}}requestUpdate(e,r,n){var i;if(e!==void 0){const s=this.constructor,o=this[e];if(n??(n=s.getPropertyOptions(e)),!((n.hasChanged??EL)(o,r)||n.useDefault&&n.reflect&&o===((i=this._$Ej)==null?void 0:i.get(e))&&!this.hasAttribute(s._$Eu(e,n))))return;this.C(e,r,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:n,reflect:i,wrapped:s},o){n&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??r??this[e]),s!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(r=void 0),this._$AL.set(e,r)),i===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var n;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[s,o]of i){const{wrapped:c}=o,u=this[s];c!==!0||this._$AL.has(s)||u===void 0||this.C(s,void 0,o,u)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),(n=this._$EO)==null||n.forEach(i=>{var s;return(s=i.hostUpdate)==null?void 0:s.call(i)}),this.update(r)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(r)}willUpdate(e){}_$AE(e){var r;(r=this._$EO)==null||r.forEach(n=>{var i;return(i=n.hostUpdated)==null?void 0:i.call(n)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};Cf.elementStyles=[],Cf.shadowRootOptions={mode:"open"},Cf[$g("elementProperties")]=new Map,Cf[$g("finalized")]=new Map,V3==null||V3({ReactiveElement:Cf}),(du.reactiveElementVersions??(du.reactiveElementVersions=[])).push("2.1.0");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const kg=globalThis,tw=kg.trustedTypes,K7=tw?tw.createPolicy("lit-html",{createHTML:t=>t}):void 0,_L="$lit$",tu=`lit$${Math.random().toFixed(9).slice(2)}$`,SL="?"+tu,CSe=`<${SL}>`,Rh=document,Ay=()=>Rh.createComment(""),Iy=t=>t===null||typeof t!="object"&&typeof t!="function",d5=Array.isArray,TSe=t=>d5(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",G3=`[ 	
\f\r]`,lg=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,V7=/-->/g,G7=/>/g,Yu=RegExp(`>|${G3}(?:([^\\s"'>=/]+)(${G3}*=${G3}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Y7=/'/g,Z7=/"/g,AL=/^(?:script|style|textarea|title)$/i,IL=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),l5e=IL(1),u5e=IL(2),up=Symbol.for("lit-noChange"),zi=Symbol.for("lit-nothing"),Q7=new WeakMap,gh=Rh.createTreeWalker(Rh,129);function xL(t,e){if(!d5(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return K7!==void 0?K7.createHTML(e):e}const MSe=(t,e)=>{const r=t.length-1,n=[];let i,s=e===2?"<svg>":e===3?"<math>":"",o=lg;for(let c=0;c<r;c++){const u=t[c];let h,f,p=-1,E=0;for(;E<u.length&&(o.lastIndex=E,f=o.exec(u),f!==null);)E=o.lastIndex,o===lg?f[1]==="!--"?o=V7:f[1]!==void 0?o=G7:f[2]!==void 0?(AL.test(f[2])&&(i=RegExp("</"+f[2],"g")),o=Yu):f[3]!==void 0&&(o=Yu):o===Yu?f[0]===">"?(o=i??lg,p=-1):f[1]===void 0?p=-2:(p=o.lastIndex-f[2].length,h=f[1],o=f[3]===void 0?Yu:f[3]==='"'?Z7:Y7):o===Z7||o===Y7?o=Yu:o===V7||o===G7?o=lg:(o=Yu,i=void 0);const S=o===Yu&&t[c+1].startsWith("/>")?" ":"";s+=o===lg?u+CSe:p>=0?(n.push(h),u.slice(0,p)+_L+u.slice(p)+tu+S):u+tu+(p===-2?c:S)}return[xL(t,s+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]};class xy{constructor({strings:e,_$litType$:r},n){let i;this.parts=[];let s=0,o=0;const c=e.length-1,u=this.parts,[h,f]=MSe(e,r);if(this.el=xy.createElement(h,n),gh.currentNode=this.el.content,r===2||r===3){const p=this.el.content.firstChild;p.replaceWith(...p.childNodes)}for(;(i=gh.nextNode())!==null&&u.length<c;){if(i.nodeType===1){if(i.hasAttributes())for(const p of i.getAttributeNames())if(p.endsWith(_L)){const E=f[o++],S=i.getAttribute(p).split(tu),A=/([.?@])?(.*)/.exec(E);u.push({type:1,index:s,name:A[2],strings:S,ctor:A[1]==="."?OSe:A[1]==="?"?RSe:A[1]==="@"?DSe:Zw}),i.removeAttribute(p)}else p.startsWith(tu)&&(u.push({type:6,index:s}),i.removeAttribute(p));if(AL.test(i.tagName)){const p=i.textContent.split(tu),E=p.length-1;if(E>0){i.textContent=tw?tw.emptyScript:"";for(let S=0;S<E;S++)i.append(p[S],Ay()),gh.nextNode(),u.push({type:2,index:++s});i.append(p[E],Ay())}}}else if(i.nodeType===8)if(i.data===SL)u.push({type:2,index:s});else{let p=-1;for(;(p=i.data.indexOf(tu,p+1))!==-1;)u.push({type:7,index:s}),p+=tu.length-1}s++}}static createElement(e,r){const n=Rh.createElement("template");return n.innerHTML=e,n}}function hp(t,e,r=t,n){var o,c;if(e===up)return e;let i=n!==void 0?(o=r._$Co)==null?void 0:o[n]:r._$Cl;const s=Iy(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==s&&((c=i==null?void 0:i._$AO)==null||c.call(i,!1),s===void 0?i=void 0:(i=new s(t),i._$AT(t,r,n)),n!==void 0?(r._$Co??(r._$Co=[]))[n]=i:r._$Cl=i),i!==void 0&&(e=hp(t,i._$AS(t,e.values),i,n)),e}class NSe{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:n}=this._$AD,i=((e==null?void 0:e.creationScope)??Rh).importNode(r,!0);gh.currentNode=i;let s=gh.nextNode(),o=0,c=0,u=n[0];for(;u!==void 0;){if(o===u.index){let h;u.type===2?h=new Xy(s,s.nextSibling,this,e):u.type===1?h=new u.ctor(s,u.name,u.strings,this,e):u.type===6&&(h=new $Se(s,this,e)),this._$AV.push(h),u=n[++c]}o!==(u==null?void 0:u.index)&&(s=gh.nextNode(),o++)}return gh.currentNode=Rh,i}p(e){let r=0;for(const n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,r),r+=n.strings.length-2):n._$AI(e[r])),r++}}class Xy{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,r,n,i){this.type=2,this._$AH=zi,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=n,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=hp(this,e,r),Iy(e)?e===zi||e==null||e===""?(this._$AH!==zi&&this._$AR(),this._$AH=zi):e!==this._$AH&&e!==up&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):TSe(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==zi&&Iy(this._$AH)?this._$AA.nextSibling.data=e:this.T(Rh.createTextNode(e)),this._$AH=e}$(e){var s;const{values:r,_$litType$:n}=e,i=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=xy.createElement(xL(n.h,n.h[0]),this.options)),n);if(((s=this._$AH)==null?void 0:s._$AD)===i)this._$AH.p(r);else{const o=new NSe(i,this),c=o.u(this.options);o.p(r),this.T(c),this._$AH=o}}_$AC(e){let r=Q7.get(e.strings);return r===void 0&&Q7.set(e.strings,r=new xy(e)),r}k(e){d5(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let n,i=0;for(const s of e)i===r.length?r.push(n=new Xy(this.O(Ay()),this.O(Ay()),this,this.options)):n=r[i],n._$AI(s),i++;i<r.length&&(this._$AR(n&&n._$AB.nextSibling,i),r.length=i)}_$AR(e=this._$AA.nextSibling,r){var n;for((n=this._$AP)==null?void 0:n.call(this,!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var r;this._$AM===void 0&&(this._$Cv=e,(r=this._$AP)==null||r.call(this,e))}}class Zw{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,n,i,s){this.type=1,this._$AH=zi,this._$AN=void 0,this.element=e,this.name=r,this._$AM=i,this.options=s,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=zi}_$AI(e,r=this,n,i){const s=this.strings;let o=!1;if(s===void 0)e=hp(this,e,r,0),o=!Iy(e)||e!==this._$AH&&e!==up,o&&(this._$AH=e);else{const c=e;let u,h;for(e=s[0],u=0;u<s.length-1;u++)h=hp(this,c[n+u],r,u),h===up&&(h=this._$AH[u]),o||(o=!Iy(h)||h!==this._$AH[u]),h===zi?e=zi:e!==zi&&(e+=(h??"")+s[u+1]),this._$AH[u]=h}o&&!i&&this.j(e)}j(e){e===zi?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class OSe extends Zw{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===zi?void 0:e}}class RSe extends Zw{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==zi)}}class DSe extends Zw{constructor(e,r,n,i,s){super(e,r,n,i,s),this.type=5}_$AI(e,r=this){if((e=hp(this,e,r,0)??zi)===up)return;const n=this._$AH,i=e===zi&&n!==zi||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==zi&&(n===zi||i);i&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r;typeof this._$AH=="function"?this._$AH.call(((r=this.options)==null?void 0:r.host)??this.element,e):this._$AH.handleEvent(e)}}class $Se{constructor(e,r,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){hp(this,e)}}const Y3=kg.litHtmlPolyfillSupport;Y3==null||Y3(xy,Xy),(kg.litHtmlVersions??(kg.litHtmlVersions=[])).push("3.3.0");const kSe=(t,e,r)=>{const n=(r==null?void 0:r.renderBefore)??e;let i=n._$litPart$;if(i===void 0){const s=(r==null?void 0:r.renderBefore)??null;n._$litPart$=i=new Xy(e.insertBefore(Ay(),s),s,void 0,r??{})}return i._$AI(t),i};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const bh=globalThis;class _1 extends Cf{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var r;const e=super.createRenderRoot();return(r=this.renderOptions).renderBefore??(r.renderBefore=e.firstChild),e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=kSe(r,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return up}}var tR;_1._$litElement$=!0,_1.finalized=!0,(tR=bh.litElementHydrateSupport)==null||tR.call(bh,{LitElement:_1});const Z3=bh.litElementPolyfillSupport;Z3==null||Z3({LitElement:_1});(bh.litElementVersions??(bh.litElementVersions=[])).push("4.2.0");let Pg,fu,pu;function h5e(t,e){Pg=document.createElement("style"),fu=document.createElement("style"),pu=document.createElement("style"),Pg.textContent=Hf(t).core.cssText,fu.textContent=Hf(t).dark.cssText,pu.textContent=Hf(t).light.cssText,document.head.appendChild(Pg),document.head.appendChild(fu),document.head.appendChild(pu),CL(e)}function CL(t){fu&&pu&&(t==="light"?(fu.removeAttribute("media"),pu.media="enabled"):(pu.removeAttribute("media"),fu.media="enabled"))}function PSe(t){Pg&&fu&&pu&&(Pg.textContent=Hf(t).core.cssText,fu.textContent=Hf(t).dark.cssText,pu.textContent=Hf(t).light.cssText)}function Hf(t){return{core:Ff`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ta(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ta((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ta((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ta((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ta((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Ff`
      :root {
        --w3m-color-mix: ${ta((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ta(ou(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ta(ou(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Ff`
      :root {
        --w3m-color-mix: ${ta((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ta(ou(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ta(ou(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const d5e=Ff`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,f5e=Ff`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,p5e=Ff`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Xb={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603};function Jy(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const B4=Jy({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),L4=Jy({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),BSe=Jy({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});Jy({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});Jy({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const LSe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},TL={getMethodsByChainNamespace(t){return LSe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const r={...t},n=new Set;if(e.methods&&Object.keys(e.methods).forEach(i=>n.add(i)),e.chains&&Object.keys(e.chains).forEach(i=>n.add(i)),e.events&&Object.keys(e.events).forEach(i=>n.add(i)),e.rpcMap&&Object.keys(e.rpcMap).forEach(i=>{const[s]=i.split(":");s&&n.add(s)}),n.forEach(i=>{r[i]||(r[i]=this.createDefaultNamespace(i))}),e.methods&&Object.entries(e.methods).forEach(([i,s])=>{r[i]&&(r[i].methods=s)}),e.chains&&Object.entries(e.chains).forEach(([i,s])=>{r[i]&&(r[i].chains=s)}),e.events&&Object.entries(e.events).forEach(([i,s])=>{r[i]&&(r[i].events=s)}),e.rpcMap){const i=new Set;Object.entries(e.rpcMap).forEach(([s,o])=>{const[c,u]=s.split(":");!c||!u||!r[c]||(r[c].rpcMap||(r[c].rpcMap={}),i.has(c)||(r[c].rpcMap={},i.add(c)),r[c].rpcMap[u]=o)})}return r},createNamespaces(t,e){const r=t.reduce((n,i)=>{const{id:s,chainNamespace:o,rpcUrls:c}=i,u=c.default.http[0];n[o]||(n[o]=this.createDefaultNamespace(o));const h=`${o}:${s}`,f=n[o];switch(f.chains.push(h),h){case B4.caipNetworkId:f.chains.push(B4.deprecatedCaipNetworkId);break;case L4.caipNetworkId:f.chains.push(L4.deprecatedCaipNetworkId);break}return f!=null&&f.rpcMap&&u&&(f.rpcMap[s]=u),n},{});return this.applyNamespaceOverrides(r,e)},resolveReownName:async t=>{var n;const e=await XP.resolveName(t);return((n=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:n.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const r=e.chains||[],n=e.accounts.map(i=>{const[s,o]=i.split(":");return`${s}:${o}`});return Array.from(new Set([...r,...n]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null}};class ML{constructor({provider:e,caipNetworks:r,namespace:n}){this.id=kt.CONNECTOR_ID.WALLET_CONNECT,this.name=J1.ConnectorNamesMap[kt.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=J1.ConnectorImageIds[kt.CONNECTOR_ID.WALLET_CONNECT],this.caipNetworks=r,this.provider=e,this.chain=n}get chains(){return this.caipNetworks}async connectWalletConnect(){if(!await this.authenticate()){const r=Ze.state.universalProviderConfigOverride,n=TL.createNamespaces(this.caipNetworks,r);await this.provider.connect({optionalNamespaces:n})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(r=>r.caipNetworkId);return Mg.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:USe})}}const USe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class jSe{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,e&&this.construct(e)}construct(e){this.caipNetworks=e.networks,this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.caipNetworks||[]}setAuthProvider(e){this.addConnector({id:kt.CONNECTOR_ID.AUTH,type:"AUTH",name:kt.CONNECTOR_NAMES.AUTH,provider:e,imageId:J1.ConnectorImageIds[kt.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const r=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(n=>r.has(n.id)?!1:(r.add(n.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,r){Lt.setStatus(e,r)}on(e,r){var n;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(n=this.eventListeners.get(e))==null||n.add(r)}off(e,r){const n=this.eventListeners.get(e);n&&n.delete(r)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,r){const n=this.eventListeners.get(e);n&&n.forEach(i=>i(r))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:r,providerType:n}=e;if(!e.provider)return;const i="provider"in e.provider?e.provider.provider:e.provider;if(n==="WALLET_CONNECT"){i.setDefaultChain(r.caipNetworkId);return}if(i&&n==="AUTH"){const s=i;await s.switchNetwork(r.caipNetworkId);const o=await s.getUser({chainId:r.caipNetworkId,preferredAccountType:Ze.state.defaultAccountTypes[r.chainNamespace]});this.emit("switchNetwork",o)}}getWalletConnectConnector(){const e=this.connectors.find(r=>r instanceof ML);if(!e)throw new Error("WalletConnectConnector not found");return e}}class zSe extends jSe{setUniversalProvider(e){this.addConnector(new ML({provider:e,caipNetworks:this.caipNetworks||[],namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var i,s,o,c;const r=this.provider,n=((c=(o=(s=(i=r==null?void 0:r.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:c.map(u=>{const[,,h]=u.split(":");return h}).filter((u,h,f)=>f.indexOf(u)===h))||[];return Promise.resolve({accounts:n.map(u=>or.createAccount(e,u,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var s,o,c,u,h;if(!(e.caipNetwork&&ho.BALANCE_SUPPORTED_CHAINS.includes((s=e.caipNetwork)==null?void 0:s.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((c=e.caipNetwork)==null?void 0:c.nativeCurrency.symbol)||""};if(Lt.state.balanceLoading&&e.chainId===((u=ue.state.activeCaipNetwork)==null?void 0:u.id))return{balance:Lt.state.balance||"0.00",symbol:Lt.state.balanceSymbol||""};const i=(await Lt.fetchTokenBalance()).find(f=>{var p,E;return f.chainId===`${(p=e.caipNetwork)==null?void 0:p.chainNamespace}:${e.chainId}`&&f.symbol===((E=e.caipNetwork)==null?void 0:E.nativeCurrency.symbol)});return{balance:(i==null?void 0:i.quantity.numeric)||"0.00",symbol:(i==null?void 0:i.symbol)||((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)||""}}async signMessage(e){var o,c,u;const{provider:r,message:n,address:i}=e;if(!r)throw new Error("UniversalAdapter:signMessage - provider is undefined");let s="";return((o=ue.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===kt.CHAIN.SOLANA?s=(await r.request({method:"solana_signMessage",params:{message:hB.encode(new TextEncoder().encode(n)),pubkey:i}},(c=ue.state.activeCaipNetwork)==null?void 0:c.caipNetworkId)).signature:s=await r.request({method:"personal_sign",params:[n,i]},(u=ue.state.activeCaipNetwork)==null?void 0:u.caipNetworkId),{signature:s}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var i,s,o,c,u,h;const{caipNetwork:r}=e,n=this.getWalletConnectConnector();if(r.chainNamespace===kt.CHAIN.EVM)try{await((i=n.provider)==null?void 0:i.request({method:"wallet_switchEthereumChain",params:[{chainId:nO(r.id)}]}))}catch(f){if(f.code===Xb.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||f.code===Xb.ERROR_INVALID_CHAIN_ID||f.code===Xb.ERROR_CODE_DEFAULT||((o=(s=f==null?void 0:f.data)==null?void 0:s.originalError)==null?void 0:o.code)===Xb.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((h=n.provider)==null?void 0:h.request({method:"wallet_addEthereumChain",params:[{chainId:nO(r.id),rpcUrls:[(c=r==null?void 0:r.rpcUrls.chainDefault)==null?void 0:c.http],chainName:r.name,nativeCurrency:r.nativeCurrency,blockExplorerUrls:[(u=r.blockExplorers)==null?void 0:u.default.url]}]}))}catch{throw new Error("Chain is not supported")}}n.provider.setDefaultChain(r.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(n=>n.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}class qSe{constructor(e){var r;this.hasSwitchedToPreferredAccountTypeOnConnect=!1,this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=n=>{var i,s;if(n){const o=(i=ue.getNetworkData(n))==null?void 0:i.caipNetwork;return o||((s=ue.getRequestedCaipNetworks(n).filter(c=>c.chainNamespace===n))==null?void 0:s[0])}return ue.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>ue.getRequestedCaipNetworks(n),this.getActiveChainNamespace=()=>ue.state.activeChain,this.setRequestedCaipNetworks=(n,i)=>{ue.setRequestedCaipNetworks(n,i)},this.getApprovedCaipNetworkIds=()=>ue.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>ue.state.activeChain===n||!n?ue.state.activeCaipAddress:ue.getAccountProp("caipAddress",n),this.setClientId=n=>{Wt.setClientId(n)},this.getProvider=n=>zn.getProvider(n),this.getProviderType=n=>zn.getProviderId(n),this.getPreferredAccountType=()=>Lt.state.preferredAccountType,this.setCaipAddress=(n,i)=>{Lt.setCaipAddress(n,i)},this.setBalance=(n,i,s)=>{Lt.setBalance(n,i,s)},this.setProfileName=(n,i)=>{Lt.setProfileName(n,i)},this.setProfileImage=(n,i)=>{Lt.setProfileImage(n,i)},this.setUser=(n,i)=>{Lt.setUser(n,i),Ze.state.enableEmbedded&&pi.close()},this.resetAccount=n=>{Lt.resetAccount(n)},this.setCaipNetwork=n=>{ue.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,i)=>{ue.setChainNetworkData(i,{caipNetwork:n})},this.setAllAccounts=(n,i)=>{Lt.setAllAccounts(n,i),Ze.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,i)=>{Lt.setStatus(n,i),nr.isConnected()?Ot.setConnectionStatus("connected"):Ot.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>ue.getAccountProp("address",n),this.setConnectors=n=>{const i=[...nr.getConnectors(),...n];nr.setConnectors(i)},this.fetchIdentity=n=>Wt.fetchIdentity(n),this.getReownName=n=>XP.getNamesForAddress(n),this.getConnectors=()=>nr.getConnectors(),this.getConnectorImage=n=>jP.getConnectorImage(n),this.setConnectedWalletInfo=(n,i)=>{const s=zn.getProviderId(i),o=n?{...n,type:s}:void 0;Lt.setConnectedWalletInfo(o,i)},this.getIsConnectedState=()=>!!ue.state.activeCaipAddress,this.addAddressLabel=(n,i,s)=>{Lt.addAddressLabel(n,i,s)},this.removeAddressLabel=(n,i)=>{Lt.removeAddressLabel(n,i)},this.getAddress=n=>ue.state.activeChain===n||!n?Lt.state.address:ue.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>ue.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{ue.resetNetwork(n)},this.addConnector=n=>{nr.addConnector(n)},this.resetWcConnection=()=>{Cn.resetWcConnection()},this.setAddressExplorerUrl=(n,i)=>{Lt.setAddressExplorerUrl(n,i)},this.setSmartAccountDeployed=(n,i)=>{Lt.setSmartAccountDeployed(n,i)},this.setSmartAccountEnabledNetworks=(n,i)=>{ue.setSmartAccountEnabledNetworks(n,i)},this.setPreferredAccountType=(n,i)=>{Lt.setPreferredAccountType(n,i)},this.setEIP6963Enabled=n=>{Ze.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=[...new Set((r=this.caipNetworks)==null?void 0:r.map(n=>n.chainNamespace))],this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e),this.sendInitializeEvent(e)}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),await this.syncExistingConnection(),al.set({initialized:!0})}sendInitializeEvent(e){var n;const{...r}=e;delete r.adapters,Tn.sendEvent({type:"track",event:"INITIALIZE",properties:{...r,networks:e.networks.map(i=>i.id),siweConfig:{options:((n=e.siweConfig)==null?void 0:n.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Bs.setThemeMode(e.themeMode),e.themeVariables&&Bs.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");ue.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const r=this.getDefaultNetwork();r&&ue.setActiveCaipNetwork(r)}initializeConnectionController(e){Cn.setWcBasic(e.basic??!1)}initializeConnectorController(){nr.initialize(this.chainNamespaces)}initializeOptionsController(e){var i;Ze.setDebug(e.debug!==!1),Ze.setEnableWalletConnect(e.enableWalletConnect!==!1),Ze.setEnableWalletGuide(e.enableWalletGuide!==!1),Ze.setEnableWallets(e.enableWallets!==!1),Ze.setEIP6963Enabled(e.enableEIP6963!==!1),Ze.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),Ze.setEnableAuthLogger(e.enableAuthLogger!==!1),Ze.setCustomRpcUrls(e.customRpcUrls),Ze.setSdkVersion(e.sdkVersion),Ze.setProjectId(e.projectId),Ze.setEnableEmbedded(e.enableEmbedded),Ze.setAllWallets(e.allWallets),Ze.setIncludeWalletIds(e.includeWalletIds),Ze.setExcludeWalletIds(e.excludeWalletIds),Ze.setFeaturedWalletIds(e.featuredWalletIds),Ze.setTokens(e.tokens),Ze.setTermsConditionsUrl(e.termsConditionsUrl),Ze.setPrivacyPolicyUrl(e.privacyPolicyUrl),Ze.setCustomWallets(e.customWallets),Ze.setFeatures(e.features),Ze.setAllowUnsupportedChain(e.allowUnsupportedChain),Ze.setDefaultAccountTypes(e.defaultAccountTypes),Ze.setUniversalProviderConfigOverride(e.universalProviderConfigOverride);const r=this.getDefaultMetaData();if(!e.metadata&&r&&(e.metadata=r),Ze.setMetadata(e.metadata),Ze.setDisableAppend(e.disableAppend),Ze.setEnableEmbedded(e.enableEmbedded),Ze.setSIWX(e.siwx),!e.projectId){p1.open(Qb.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((i=e.adapters)==null?void 0:i.find(s=>s.namespace===kt.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");Ze.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,r,n,i;return typeof window<"u"&&typeof document<"u"?{name:((r=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:r.textContent)||"",description:((n=document.querySelector('meta[property="og:description"]'))==null?void 0:n.content)||"",url:window.location.origin,icons:[((i=document.querySelector('link[rel~="icon"]'))==null?void 0:i.href)||""]}:null}setUnsupportedNetwork(e){const r=this.getActiveChainNamespace();if(r){const n=xf.getUnsupportedNetwork(`${r}:${e}`);ue.setActiveCaipNetwork(n)}}getDefaultNetwork(){return xf.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,r){return xf.extendCaipNetwork(e,{customNetworkImageUrls:r.chainImages,projectId:r.projectId})}extendCaipNetworks(e){return xf.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const r=e.networks.find(i=>{var s;return i.id===((s=e.defaultNetwork)==null?void 0:s.id)});return r?xf.extendCaipNetwork(r,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var s;const e=ue.state.activeChain,r=this.getAdapter(e),n=(s=this.getCaipNetwork(e))==null?void 0:s.id;if(!r)throw new Error("Adapter not found");const i=await r.connectWalletConnect(n);this.close(),this.setClientId((i==null?void 0:i.clientId)||null),Ot.setConnectedNamespaces([...ue.state.chains.keys()]),this.chainNamespaces.forEach(o=>{nr.setConnectorId(Zl.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:r,type:n,provider:i,chain:s,caipNetwork:o})=>{var S,A,I,$,L,k,U;const c=ue.state.activeChain,u=s||c,h=this.getAdapter(u);if(s&&s!==c&&!o){const q=(S=this.caipNetworks)==null?void 0:S.find(j=>j.chainNamespace===s);q&&this.setCaipNetwork(q)}if(!h)throw new Error("Adapter not found");const f=this.getCaipNetwork(u),p=await h.connect({id:e,info:r,type:n,provider:i,chainId:(o==null?void 0:o.id)||(f==null?void 0:f.id),rpcUrl:(($=(I=(A=o==null?void 0:o.rpcUrls)==null?void 0:A.default)==null?void 0:I.http)==null?void 0:$[0])||((U=(k=(L=f==null?void 0:f.rpcUrls)==null?void 0:L.default)==null?void 0:k.http)==null?void 0:U[0])});if(!p)return;Ot.addConnectedNamespace(u),this.syncProvider({...p,chainNamespace:u}),await this.syncAccount({...p,chainNamespace:u});const{accounts:E}=await h.getAccounts({namespace:u,id:e});this.setAllAccounts(E,u)},reconnectExternal:async({id:e,info:r,type:n,provider:i})=>{var c;const s=ue.state.activeChain,o=this.getAdapter(s);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:r,type:n,provider:i,chainId:(c=this.getCaipNetwork())==null?void 0:c.id})),Ot.addConnectedNamespace(s))},disconnect:async e=>{const r=e||ue.state.activeChain,n=this.getAdapter(r),i=zn.getProvider(r),s=zn.getProviderId(r);await(n==null?void 0:n.disconnect({provider:i,providerType:s})),Ot.removeConnectedNamespace(r),zn.resetChain(r),this.setUser(void 0,r),this.setStatus("disconnected",r),this.hasSwitchedToPreferredAccountTypeOnConnect=!1},checkInstalled:e=>e?e.some(r=>{var n;return!!((n=window.ethereum)!=null&&n[String(r)])}):!!window.ethereum,signMessage:async e=>{const r=this.getAdapter(ue.state.activeChain),n=await(r==null?void 0:r.signMessage({message:e,address:Lt.state.address,provider:zn.getProvider(ue.state.activeChain)}));return(n==null?void 0:n.signature)||""},sendTransaction:async e=>{if(e.chainNamespace===kt.CHAIN.EVM){const r=this.getAdapter(ue.state.activeChain),n=zn.getProvider(ue.state.activeChain),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:n}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===kt.CHAIN.EVM){const r=this.getAdapter(ue.state.activeChain),n=zn.getProvider(ue.state.activeChain),i=this.getCaipNetwork();if(!i)throw new Error("CaipNetwork is undefined");const s=await(r==null?void 0:r.estimateGas({...e,provider:n,caipNetwork:i}));return(s==null?void 0:s.gas)||0n}return 0n},getEnsAvatar:async()=>{var n;const e=this.getAdapter(ue.state.activeChain),r=await(e==null?void 0:e.getProfile({address:Lt.state.address,chainId:Number((n=this.getCaipNetwork())==null?void 0:n.id)}));return(r==null?void 0:r.profileImage)||!1},getEnsAddress:async e=>{const r=this.getAdapter(ue.state.activeChain),n=this.getCaipNetwork();if(!n)return!1;const i=await(r==null?void 0:r.getEnsAddress({name:e,caipNetwork:n}));return(i==null?void 0:i.address)||!1},writeContract:async e=>{const r=this.getAdapter(ue.state.activeChain),n=this.getCaipNetwork(),i=this.getCaipAddress(),s=zn.getProvider(ue.state.activeChain);if(!n||!i)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(r==null?void 0:r.writeContract({...e,caipNetwork:n,provider:s,caipAddress:i}));return o==null?void 0:o.hash},parseUnits:(e,r)=>{const n=this.getAdapter(ue.state.activeChain);return(n==null?void 0:n.parseUnits({value:e,decimals:r}))??0n},formatUnits:(e,r)=>{const n=this.getAdapter(ue.state.activeChain);return(n==null?void 0:n.formatUnits({value:e,decimals:r}))??"0"},getCapabilities:async e=>{const r=this.getAdapter(ue.state.activeChain);return await(r==null?void 0:r.getCapabilities(e))},grantPermissions:async e=>{const r=this.getAdapter(ue.state.activeChain);return await(r==null?void 0:r.grantPermissions(e))},revokePermissions:async e=>{const r=this.getAdapter(ue.state.activeChain);return r!=null&&r.revokePermissions?await r.revokePermissions(e):"0x"},walletGetAssets:async e=>{const r=this.getAdapter(ue.state.activeChain);return await(r==null?void 0:r.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},Cn.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var r,n,i,s,o;if(zn.getProviderId(ue.state.activeChain)===Zl.CONNECTOR_TYPE_WALLET_CONNECT){const c=(n=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:n.namespaces;return{supportsAllNetworks:((o=(s=(i=this.universalProvider)==null?void 0:i.session)==null?void 0:s.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(c)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const r=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const i=zn.getProvider(r),s=zn.getProviderId(r);if(e.chainNamespace===ue.state.activeChain){const o=this.getAdapter(r);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:i,providerType:s}))}else if(this.setCaipNetwork(e),s===Zl.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(r);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:r})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(r=>{const n=r.chains||[],i=r.accounts.map(s=>{const{chainId:o,chainNamespace:c}=Wl.parseCaipAddress(s);return`${c}:${o}`});return Array.from(new Set([...n,...i]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((r,n)=>{var s;const i=e==null?void 0:e.find(o=>o.namespace===n);return i?(r[n]=i,r[n].namespace=n,r[n].construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.caipNetworks})):r[n]=new zSe({namespace:n,networks:this.caipNetworks}),r},{})}async initChainAdapter(e){var r;this.onConnectors(e),this.listenAdapter(e),(r=this.chainAdapters)==null||r[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const r=this.getAdapter(e);r==null||r.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const r=this.getAdapter(e);if(!r)return;const n=Ot.getConnectionStatus();n==="connected"?this.setStatus("connecting",e):n==="disconnected"?(Ot.clearAddressCache(),this.setStatus(n,e)):this.setStatus(n,e),r.on("switchNetwork",({address:i,chainId:s})=>{var h;const o=(h=this.caipNetworks)==null?void 0:h.find(f=>f.id===s||f.caipNetworkId===s),c=ue.state.activeChain===e,u=ue.getAccountProp("address",e);if(o){const f=c&&i?i:u;f&&this.syncAccount({address:f,chainId:s,chainNamespace:e})}else this.setUnsupportedNetwork(s)}),r.on("disconnect",this.disconnect.bind(this,e)),r.on("pendingTransactions",()=>{const i=Lt.state.address,s=ue.state.activeCaipNetwork;!i||!(s!=null&&s.id)||this.updateNativeBalance(i,s.id,s.chainNamespace)}),r.on("accountChanged",({address:i,chainId:s})=>{var c,u;const o=ue.state.activeChain===e;o&&s?this.syncAccount({address:i,chainId:s,chainNamespace:e}):o&&((c=ue.state.activeCaipNetwork)!=null&&c.id)?this.syncAccount({address:i,chainId:(u=ue.state.activeCaipNetwork)==null?void 0:u.id,chainNamespace:e}):this.syncAccountInfo(i,s,e)})}async createUniversalProviderForAdapter(e){var r,n,i;await this.getUniversalProvider(),this.universalProvider&&((i=(n=(r=this.chainAdapters)==null?void 0:r[e])==null?void 0:n.setUniversalProvider)==null||i.call(n,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{const r=nr.getConnectorId(e);switch(this.setStatus("connecting",e),r){case kt.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case kt.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(r){console.warn("AppKit couldn't sync existing connection",r),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var o,c,u;const r=this.getAdapter(e),n=nr.getConnectorId(e),i=this.getCaipNetwork(e),s=nr.getConnectors(e).find(h=>h.id===n);try{if(!r||!s)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(i!=null&&i.id))throw new Error("CaipNetwork not found");const h=await(r==null?void 0:r.syncConnection({namespace:e,id:s.id,chainId:i.id,rpcUrl:(u=(c=(o=i==null?void 0:i.rpcUrls)==null?void 0:o.default)==null?void 0:c.http)==null?void 0:u[0]}));if(h){const f=await(r==null?void 0:r.getAccounts({namespace:e,id:s.id}));f&&f.accounts.length>0?this.setAllAccounts(f.accounts,e):this.setAllAccounts([or.createAccount(e,h.address,"eoa")],e),this.syncProvider({...h,chainNamespace:e}),await this.syncAccount({...h,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async r=>{var c,u,h,f,p;const n=this.getAdapter(r),i=((f=(h=(u=(c=this.universalProvider)==null?void 0:c.session)==null?void 0:u.namespaces)==null?void 0:h[r])==null?void 0:f.accounts)||[],s=(p=ue.state.activeCaipNetwork)==null?void 0:p.id,o=i.find(E=>{const{chainId:S}=Wl.parseCaipAddress(E);return S===(s==null?void 0:s.toString())})||i[0];if(o){const E=Wl.validateCaipAddress(o),{chainId:S,address:A}=Wl.parseCaipAddress(E);if(zn.setProviderId(r,Zl.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&ue.state.activeCaipNetwork&&(n==null?void 0:n.namespace)!==kt.CHAIN.EVM){const I=n==null?void 0:n.getWalletConnectProvider({caipNetworks:this.caipNetworks,provider:this.universalProvider,activeCaipNetwork:ue.state.activeCaipNetwork});zn.setProvider(r,I)}else zn.setProvider(r,this.universalProvider);nr.setConnectorId(kt.CONNECTOR_ID.WALLET_CONNECT,r),Ot.addConnectedNamespace(r),this.syncWalletConnectAccounts(r),await this.syncAccount({address:A,chainId:S,chainNamespace:r})}else this.setStatus("disconnected",r);await ue.setApprovedCaipNetworksData(r)});await Promise.all(e)}syncWalletConnectAccounts(e){var n,i,s,o,c;const r=(c=(o=(s=(i=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:i.namespaces)==null?void 0:s[e])==null?void 0:o.accounts)==null?void 0:c.map(u=>{const{address:h}=Wl.parseCaipAddress(u);return h}).filter((u,h,f)=>f.indexOf(u)===h);r&&this.setAllAccounts(r.map(u=>or.createAccount(e,u,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:r,id:n,chainNamespace:i}){zn.setProviderId(i,e),zn.setProvider(i,r),nr.setConnectorId(n,i)}async syncAccount(e){var p,E,S,A,I,$;const r=e.chainNamespace===ue.state.activeChain,n=ue.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:i,chainId:s,chainNamespace:o}=e,{chainId:c}=Ot.getActiveNetworkProps(),u=s||c,h=((p=ue.state.activeCaipNetwork)==null?void 0:p.name)===kt.UNSUPPORTED_NETWORK_NAME,f=ue.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(h&&!f)&&u){let L=(E=this.caipNetworks)==null?void 0:E.find(q=>q.id.toString()===u.toString()),k=(S=this.caipNetworks)==null?void 0:S.find(q=>q.chainNamespace===o);if(!f&&!L&&!k){const q=this.getApprovedCaipNetworkIds()||[],j=q.find(V=>{var G;return((G=Wl.parseCaipNetworkId(V))==null?void 0:G.chainId)===u.toString()}),z=q.find(V=>{var G;return((G=Wl.parseCaipNetworkId(V))==null?void 0:G.chainNamespace)===o});L=(A=this.caipNetworks)==null?void 0:A.find(V=>V.caipNetworkId===j),k=(I=this.caipNetworks)==null?void 0:I.find(V=>V.caipNetworkId===z||"deprecatedCaipNetworkId"in V&&V.deprecatedCaipNetworkId===z)}const U=L||k;(U==null?void 0:U.chainNamespace)===ue.state.activeChain?Ze.state.enableNetworkSwitch&&!Ze.state.allowUnsupportedChain&&(($=ue.state.activeCaipNetwork)==null?void 0:$.name)===kt.UNSUPPORTED_NETWORK_NAME?ue.showUnsupportedChainUI():this.setCaipNetwork(U):r||n&&this.setCaipNetworkOfNamespace(n,o),this.syncConnectedWalletInfo(o),wL.isLowerCaseMatch(i,Lt.state.address)||this.syncAccountInfo(i,U==null?void 0:U.id,o),r?await this.syncBalance({address:i,chainId:U==null?void 0:U.id,chainNamespace:o}):await this.syncBalance({address:i,chainId:n==null?void 0:n.id,chainNamespace:o})}}async syncAccountInfo(e,r,n){const i=this.getCaipAddress(n),s=r||(i==null?void 0:i.split(":")[1]);if(!s)return;const o=`${n}:${s}:${e}`;this.setCaipAddress(o,n),await this.syncIdentity({address:e,chainId:s,chainNamespace:n})}async syncReownName(e,r){try{const n=await this.getReownName(e);if(n[0]){const i=n[0];this.setProfileName(i.name,r)}else this.setProfileName(null,r)}catch{this.setProfileName(null,r)}}syncConnectedWalletInfo(e){var i;const r=nr.getConnectorId(e),n=zn.getProviderId(e);if(n===Zl.CONNECTOR_TYPE_ANNOUNCED||n===Zl.CONNECTOR_TYPE_INJECTED){if(r){const s=this.getConnectors().find(o=>o.id===r);if(s){const{info:o,name:c,imageUrl:u}=s,h=u||this.getConnectorImage(s);this.setConnectedWalletInfo({name:c,icon:h,...o},e)}}}else if(n===Zl.CONNECTOR_TYPE_WALLET_CONNECT){const s=zn.getProvider(e);s!=null&&s.session&&this.setConnectedWalletInfo({...s.session.peer.metadata,name:s.session.peer.metadata.name,icon:(i=s.session.peer.metadata.icons)==null?void 0:i[0]},e)}else if(r)if(r===kt.CONNECTOR_ID.COINBASE){const s=this.getConnectors().find(o=>o.id===kt.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(s)},e)}else this.setConnectedWalletInfo({name:r},e)}async syncBalance(e){!BP.getNetworksByNamespace(this.caipNetworks,e.chainNamespace).find(n=>{var i;return n.id.toString()===((i=e.chainId)==null?void 0:i.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,r,n){const i=this.getAdapter(n);if(i){const s=await i.getBalance({address:e,chainId:r,caipNetwork:this.getCaipNetwork(n),tokens:this.options.tokens});this.setBalance(s.balance,s.symbol,n)}}async initializeUniversalAdapter(){var n,i,s,o,c,u,h,f,p,E;const e=gSe.createLogger((S,...A)=>{S&&this.handleAlertError(S),console.error(...A)}),r={projectId:(n=this.options)==null?void 0:n.projectId,metadata:{name:(i=this.options)!=null&&i.metadata?(s=this.options)==null?void 0:s.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(c=this.options)==null?void 0:c.metadata.description:"",url:(u=this.options)!=null&&u.metadata?(h=this.options)==null?void 0:h.metadata.url:"",icons:(f=this.options)!=null&&f.metadata?(p=this.options)==null?void 0:p.metadata.icons:[""]},logger:e};Ze.setManualWCControl(!!((E=this.options)!=null&&E.manualWCControl)),this.universalProvider=this.options.universalProvider??await fSe.init(r),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{Cn.setUri(e)}),this.universalProvider.on("connect",Cn.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),Cn.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{var i;const r=(i=this.caipNetworks)==null?void 0:i.find(s=>s.id==e),n=this.getCaipNetwork();if(!r){this.setUnsupportedNetwork(e);return}(n==null?void 0:n.id)!==(r==null?void 0:r.id)&&this.setCaipNetwork(r)}),this.universalProvider.on("session_event",e=>{if(TL.isSessionEventData(e)){const{name:r,data:n}=e.params.event;r==="accountsChanged"&&Array.isArray(n)&&or.isCaipAddress(n[0])&&this.syncAccount(Wl.parseCaipAddress(n[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&or.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){Tn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const r=Object.entries(Qb.UniversalProviderErrors).find(([,{message:c}])=>e.message.includes(c)),[n,i]=r??[],{message:s,alertErrorKey:o}=i??{};if(n&&s&&!this.reportedAlertErrors[n]){const c=Qb.ALERT_ERRORS[o];c&&(p1.open(c,"error"),this.reportedAlertErrors[n]=!0)}}getAdapter(e){var r;if(e)return(r=this.chainAdapters)==null?void 0:r[e]}createAdapter(e){var i;if(!e)return;const r=e.namespace;if(!r)return;this.createClients();const n=e;n.namespace=r,n.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.caipNetworks}),this.chainNamespaces.includes(r)||this.chainNamespaces.push(r),this.chainAdapters&&(this.chainAdapters[r]=n)}async open(e){await this.injectModalUi(),e!=null&&e.uri&&Cn.setUri(e.uri),await pi.open(e)}async close(){await this.injectModalUi(),pi.close()}setLoading(e,r){pi.setLoading(e,r)}async disconnect(e){await Cn.disconnect(e)}getError(){return""}getChainId(){var e;return(e=ue.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){var n;const r=(n=this.caipNetworks)==null?void 0:n.find(i=>i.id===e.id);if(!r){p1.open(Qb.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await ue.switchActiveNetwork(r)}getWalletProvider(){return ue.state.activeChain?zn.state.providers[ue.state.activeChain]:null}getWalletProviderType(){return zn.getProviderId(ue.state.activeChain)}subscribeProviders(e){return zn.subscribeProviders(e)}getThemeMode(){return Bs.state.themeMode}getThemeVariables(){return Bs.state.themeVariables}setThemeMode(e){Bs.setThemeMode(e),CL(Bs.state.themeMode)}setTermsConditionsUrl(e){Ze.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){Ze.setPrivacyPolicyUrl(e)}setThemeVariables(e){Bs.setThemeVariables(e),PSe(Bs.state.themeVariables)}subscribeTheme(e){return Bs.subscribe(e)}getWalletInfo(){return Lt.state.connectedWalletInfo}getAccount(e){const r=nr.getAuthConnector(e),n=ue.getAccountData(e);if(n)return{allAccounts:n.allAccounts,caipAddress:n.caipAddress,address:or.getPlainAddress(n.caipAddress),isConnected:!!n.caipAddress,status:n.status,embeddedWalletInfo:r?{user:n.user,authProvider:n.socialProvider||"email",accountType:n.preferredAccountType,isSmartAccountDeployed:!!n.smartAccountDeployed}:void 0}}subscribeAccount(e,r){const n=()=>{const i=this.getAccount(r);i&&e(i)};r?ue.subscribeChainProp("accountState",n,r):ue.subscribe(n),nr.subscribe(n)}subscribeNetwork(e){return ue.subscribe(({activeCaipNetwork:r})=>{e({caipNetwork:r,chainId:r==null?void 0:r.id,caipNetworkId:r==null?void 0:r.caipNetworkId})})}subscribeWalletInfo(e){return Lt.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Lt.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){ue.subscribeKey("activeCaipNetwork",e)}getState(){return al.state}subscribeState(e){return al.subscribe(e)}showErrorMessage(e){rs.showError(e)}showSuccessMessage(e){rs.showSuccess(e)}getEvent(){return{...Tn.state}}subscribeEvents(e){return Tn.subscribe(e)}replace(e){tn.replace(e)}redirect(e){tn.push(e)}popTransactionStack(e){tn.popTransactionStack(e)}isOpen(){return pi.state.open}isTransactionStackEmpty(){return tn.state.transactionStack.length===0}isTransactionShouldReplaceView(){var e;return(e=tn.state.transactionStack[tn.state.transactionStack.length-1])==null?void 0:e.replace}static getInstance(){return this.instance}updateFeatures(e){Ze.setFeatures(e)}updateOptions(e){const n={...Ze.state||{},...e};Ze.setOptions(n)}setConnectMethodsOrder(e){Ze.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){Ze.setWalletFeaturesOrder(e)}setCollapseWallets(e){Ze.setCollapseWallets(e)}setSocialsOrder(e){Ze.setSocialsOrder(e)}getConnectMethodsOrder(){return k4.getConnectOrderMethod(Ze.state.features,nr.getConnectors())}removeAdapter(e){var s;const r=this.getIsConnectedState(),n=this.getAdapter(e);if(!n||!this.chainAdapters||r)return;const i=(s=this.caipNetworks)==null?void 0:s.filter(o=>o.chainNamespace!==e);ue.removeAdapter(e),nr.removeAdapter(e),this.chainNamespaces=this.chainNamespaces.filter(o=>o!==e),this.caipNetworks=i,n.removeAllEventListeners(),Reflect.deleteProperty(this.chainAdapters,e)}addAdapter(e,r){const n=e.namespace;if(!this.connectionControllerClient||!this.networkControllerClient||!this.chainAdapters||!n)return;const i=this.extendCaipNetworks({...this.options,networks:r});this.caipNetworks=[...this.caipNetworks||[],...i],this.createAdapter(e),this.initChainAdapter(n),ue.addAdapter(e,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient},i)}addNetwork(e,r){var i;if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const n=this.extendCaipNetwork(r,this.options);ue.addNetwork(n),this.caipNetworks&&!((i=this.caipNetworks)!=null&&i.find(s=>s.id===n.id))&&this.caipNetworks.push(n)}removeNetwork(e,r){var s;if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);if(!((s=this.caipNetworks)==null?void 0:s.find(o=>o.id===r)))throw new Error(`Network with ID ${r} not found`);if(!this.caipNetworks)return;const i=this.caipNetworks.filter(o=>o.chainNamespace===e&&o.id!==r);if(!(i!=null&&i.length))throw new Error("Cannot remove last network for a namespace");ue.removeNetwork(e,r),this.caipNetworks=[...i]}}let X7=!1;class FSe extends qSe{async open(e){nr.isConnected()||await super.open(e)}async close(){await super.close(),this.options.manualWCControl&&Cn.finalizeWcConnection()}async syncIdentity(e){return Promise.resolve()}async syncBalance(e){return Promise.resolve()}async injectModalUi(){if(!X7&&or.isClient()){if(await Jf(()=>import("./basic-oEKE6nP4.js"),__vite__mapDeps([5,6,1])),await Jf(()=>import("./w3m-modal-SDsueuOS.js"),__vite__mapDeps([7,6,1])),!document.querySelector("w3m-modal")){const r=document.createElement("w3m-modal");!Ze.state.disableAppend&&!Ze.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",r)}X7=!0}}}const HSe="1.7.2";function WSe(t){return new FSe({...t,basic:!0,sdkVersion:`html-core-${HSe}`})}function KSe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let h=0;h<e.length;h++)e[h]=255;for(let h=0;h<t.length;h++){const f=t.charAt(h),p=f.charCodeAt(0);if(e[p]!==255)throw new TypeError(f+" is ambiguous");e[p]=h}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";let f=0,p=0,E=0;const S=h.length;for(;E!==S&&h[E]===0;)E++,f++;const A=(S-E)*s+1>>>0,I=new Uint8Array(A);for(;E!==S;){let k=h[E],U=0;for(let q=A-1;(k!==0||U<p)&&q!==-1;q--,U++)k+=256*I[q]>>>0,I[q]=k%r>>>0,k=k/r>>>0;if(k!==0)throw new Error("Non-zero carry");p=U,E++}let $=A-p;for(;$!==A&&I[$]===0;)$++;let L=n.repeat(f);for(;$<A;++$)L+=t.charAt(I[$]);return L}function c(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;let f=0,p=0,E=0;for(;h[f]===n;)p++,f++;const S=(h.length-f)*i+1>>>0,A=new Uint8Array(S);for(;f<h.length;){const k=h.charCodeAt(f);if(k>255)return;let U=e[k];if(U===255)return;let q=0;for(let j=S-1;(U!==0||q<E)&&j!==-1;j--,q++)U+=r*A[j]>>>0,A[j]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");E=q,f++}let I=S-E;for(;I!==S&&A[I]===0;)I++;const $=new Uint8Array(p+(S-I));let L=p;for(;I!==S;)$[L++]=A[I++];return $}function u(h){const f=c(h);if(f)return f;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:c,decode:u}}var VSe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const Q3=KSe(VSe);class kf extends Error{constructor(){super(),Object.setPrototypeOf(this,kf.prototype)}}class J7 extends Error{constructor(e){super(`WalletConnect Adapter - Method ${e} is not supported by the wallet`),this.name="WalletConnectFeatureNotSupportedError"}}function GSe(t){let e=[t];return t===Ei.Mainnet||t===Ei.Deprecated_Mainnet?(e=[Ei.Mainnet,Ei.Deprecated_Mainnet],t===Ei.Deprecated_Mainnet&&console.warn(rw.mainnet)):(t===Ei.Deprecated_Devnet||t===Ei.Devnet)&&(e=[Ei.Devnet,Ei.Deprecated_Devnet],console.warn(rw.devnet)),e}const rw={mainnet:`You are using a deprecated chain ID for Solana Mainnet, please use ${Ei.Mainnet} instead.`,devnet:`You are using a deprecated chain ID for Solana Devnet, please use ${Ei.Devnet} instead.`,wallet:"The connected wallet is using a deprecated chain ID for Solana. Please, contact them to upgrade. You can learn more at https://github.com/ChainAgnostic/namespaces/blob/main/solana/caip10.md#chain-ids"};function eR(t,e){var n;const r=(n=t.namespaces.solana)==null?void 0:n.accounts.map(i=>`solana:${i.split(":")[1]}`);if(e===Ei.Mainnet)return r!=null&&r.find(i=>i===Ei.Mainnet)?Ei.Mainnet:(console.warn(rw.wallet),Ei.Deprecated_Mainnet);if(e===Ei.Devnet)return r!=null&&r.find(i=>i===Ei.Devnet)?Ei.Devnet:(console.warn(rw.wallet),Ei.Deprecated_Devnet);throw Error("WalletConnect Solana Adapter: Unable to get a default chain from the session.")}function YSe(t){return{optionalNamespaces:{solana:{chains:GSe(t),methods:[ia.signTransaction,ia.signMessage],events:[]}}}}class f5 extends Error{constructor(){super("QR Code Modal was closed by user"),Object.setPrototypeOf(this,f5.prototype),this.name="QRCodeModalError"}}class ZSe{constructor(e){br(this,"_UniversalProvider");br(this,"_session");br(this,"_modal");br(this,"_projectId");br(this,"_network");br(this,"_ConnectQueueResolver");if(this.initClient(e.options),this._network=e.network,!e.options.projectId)throw Error("WalletConnect Adapter: Project ID is undefined");this._projectId=e.options.projectId}async connect(){var i,s,o,c,u,h;if(this._UniversalProvider||await new Promise(f=>{this._ConnectQueueResolver=f}),!this._UniversalProvider)throw new Error("WalletConnect Adapter - Universal Provider was undefined while calling 'connect()'");if(this._UniversalProvider.session){this._session=this._UniversalProvider.session;const f=eR(this._session,this._network);return this._network=f,this._UniversalProvider.setDefaultChain(f),{publicKey:this.publicKey}}await this.initModal();const e=YSe(this._network);(i=this._modal)==null||i.open();const r=new AbortController,n=r.signal;(s=this._modal)==null||s.subscribeState(f=>{f.open||r.abort(new f5)});try{const f=await Promise.race([(o=this._UniversalProvider)==null?void 0:o.connect(e),new Promise((E,S)=>{n.addEventListener("abort",()=>{S(n.reason)})})]);if((c=this._modal)==null||c.close(),this._session=f,!f)throw new qg;const p=eR(f,this._network);return this._network=p,(u=this._UniversalProvider)==null||u.setDefaultChain(p),{publicKey:this.publicKey}}catch(f){throw(h=this._modal)==null||h.close(),f}}async disconnect(){var e;if((e=this._UniversalProvider)!=null&&e.session){if(await this.initModal(),!this._modal)throw Error("WalletConnect Adapter -Modal is undefined: unable to disconnect");await this.client.disconnect(),this._session=void 0}else throw new kf}get client(){if(this._UniversalProvider)return this._UniversalProvider;throw new kf}get session(){if(!this._session)throw new kf;return this._session}get publicKey(){var e,r,n;if((e=this._UniversalProvider)!=null&&e.session&&this._session){const{address:i}=Qee(((n=(r=this._session)==null?void 0:r.namespaces.solana)==null?void 0:n.accounts[0])??"");return new Ke(i)}throw new kf}async signTransaction(e){this.checkIfWalletSupportsMethod(ia.signTransaction);const r=Ma(e),n=r?{}:e,{signature:i,transaction:s}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:ia.signTransaction,params:{...n,transaction:this.serialize(e)}}});return s?this.deserialize(s,r):(e.addSignature(this.publicKey,Buffer.from(Q3.decode(i))),e)}async signMessage(e){this.checkIfWalletSupportsMethod(ia.signMessage);const{signature:r}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:ia.signMessage,params:{pubkey:this.publicKey.toString(),message:Q3.encode(e)}}});return Q3.decode(r)}async signAndSendTransaction(e){this.checkIfWalletSupportsMethod(ia.signAndSendTransaction);const{signature:r}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:ia.signAndSendTransaction,params:{transaction:this.serialize(e)}}});return r}async signAllTransactions(e){try{this.checkIfWalletSupportsMethod(ia.signAllTransactions);const r=e.map(i=>this.serialize(i)),{transactions:n}=await this.client.client.request({chainId:this._network,topic:this.session.topic,request:{method:ia.signAllTransactions,params:{transactions:r}}});return e.map((i,s)=>Ma(i)?this.deserialize(n[s]??"",!0):this.deserialize(n[s]??""))}catch(r){if(r instanceof J7){const n=e.map(s=>this.signTransaction(s));return await Promise.all(n)}throw r}}async initClient(e){const r=await yge.init(e);this._UniversalProvider=r,this._ConnectQueueResolver&&this._ConnectQueueResolver(!0)}async initModal(){if(!this._modal){if(!this._UniversalProvider)throw new Error("WalletConnect Adapter - cannot init modal when Universal Provider is undefined");this._modal=WSe({projectId:this._projectId,universalProvider:this._UniversalProvider,networks:[B4,L4,BSe],manualWCControl:!0})}}serialize(e){return Buffer.from(e.serialize({verifySignatures:!1})).toString("base64")}deserialize(e,r=!1){return r?Eh.deserialize(Buffer.from(e,"base64")):Ar.from(Buffer.from(e,"base64"))}checkIfWalletSupportsMethod(e){var r;if(!((r=this.session.namespaces.solana)!=null&&r.methods.includes(e)))throw new J7(e)}}const QSe="WalletConnect";class XSe extends xD{constructor(r){super();br(this,"name",QSe);br(this,"url","https://walletconnect.org");br(this,"icon","data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjE4NSIgdmlld0JveD0iMCAwIDMwMCAxODUiIHdpZHRoPSIzMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYxLjQzODU0MjkgMzYuMjU2MjYxMmM0OC45MTEyMjQxLTQ3Ljg4ODE2NjMgMTI4LjIxMTk4NzEtNDcuODg4MTY2MyAxNzcuMTIzMjA5MSAwbDUuODg2NTQ1IDUuNzYzNDE3NGMyLjQ0NTU2MSAyLjM5NDQwODEgMi40NDU1NjEgNi4yNzY1MTEyIDAgOC42NzA5MjA0bC0yMC4xMzY2OTUgMTkuNzE1NTAzYy0xLjIyMjc4MSAxLjE5NzIwNTEtMy4yMDUzIDEuMTk3MjA1MS00LjQyODA4MSAwbC04LjEwMDU4NC03LjkzMTE0NzljLTM0LjEyMTY5Mi0zMy40MDc5ODE3LTg5LjQ0Mzg4Ni0zMy40MDc5ODE3LTEyMy41NjU1Nzg4IDBsLTguNjc1MDU2MiA4LjQ5MzYwNTFjLTEuMjIyNzgxNiAxLjE5NzIwNDEtMy4yMDUzMDEgMS4xOTcyMDQxLTQuNDI4MDgwNiAwbC0yMC4xMzY2OTQ5LTE5LjcxNTUwMzFjLTIuNDQ1NTYxMi0yLjM5NDQwOTItMi40NDU1NjEyLTYuMjc2NTEyMiAwLTguNjcwOTIwNHptMjE4Ljc2Nzc5NjEgNDAuNzczNzQ0OSAxNy45MjE2OTcgMTcuNTQ2ODk3YzIuNDQ1NTQ5IDIuMzk0Mzk2OSAyLjQ0NTU2MyA2LjI3NjQ3NjkuMDAwMDMxIDguNjcwODg5OWwtODAuODEwMTcxIDc5LjEyMTEzNGMtMi40NDU1NDQgMi4zOTQ0MjYtNi40MTA1ODIgMi4zOTQ0NTMtOC44NTYxNi4wMDAwNjItLjAwMDAxLS4wMDAwMS0uMDAwMDIyLS4wMDAwMjItLjAwMDAzMi0uMDAwMDMybC01Ny4zNTQxNDMtNTYuMTU0NTcyYy0uNjExMzktLjU5ODYwMi0xLjYwMjY1LS41OTg2MDItMi4yMTQwNCAwLS4wMDAwMDQuMDAwMDA0LS4wMDAwMDcuMDAwMDA4LS4wMDAwMTEuMDAwMDExbC01Ny4zNTI5MjEyIDU2LjE1NDUzMWMtMi40NDU1MzY4IDIuMzk0NDMyLTYuNDEwNTc1NSAyLjM5NDQ3Mi04Ljg1NjE2MTIuMDAwMDg3LS4wMDAwMTQzLS4wMDAwMTQtLjAwMDAyOTYtLjAwMDAyOC0uMDAwMDQ0OS0uMDAwMDQ0bC04MC44MTI0MTk0My03OS4xMjIxODVjLTIuNDQ1NTYwMjEtMi4zOTQ0MDgtMi40NDU1NjAyMS02LjI3NjUxMTUgMC04LjY3MDkxOTdsMTcuOTIxNzI5NjMtMTcuNTQ2ODY3M2MyLjQ0NTU2MDItMi4zOTQ0MDgyIDYuNDEwNTk4OS0yLjM5NDQwODIgOC44NTYxNjAyIDBsNTcuMzU0OTc3NSA1Ni4xNTUzNTdjLjYxMTM5MDguNTk4NjAyIDEuNjAyNjQ5LjU5ODYwMiAyLjIxNDAzOTggMCAuMDAwMDA5Mi0uMDAwMDA5LjAwMDAxNzQtLjAwMDAxNy4wMDAwMjY1LS4wMDAwMjRsNTcuMzUyMTAzMS01Ni4xNTUzMzNjMi40NDU1MDUtMi4zOTQ0NjMzIDYuNDEwNTQ0LTIuMzk0NTUzMSA4Ljg1NjE2MS0uMDAwMi4wMDAwMzQuMDAwMDMzNi4wMDAwNjguMDAwMDY3My4wMDAxMDEuMDAwMTAxbDU3LjM1NDkwMiA1Ni4xNTU0MzJjLjYxMTM5LjU5ODYwMSAxLjYwMjY1LjU5ODYwMSAyLjIxNDA0IDBsNTcuMzUzOTc1LTU2LjE1NDMyNDljMi40NDU1NjEtMi4zOTQ0MDkyIDYuNDEwNTk5LTIuMzk0NDA5MiA4Ljg1NjE2IDB6IiBmaWxsPSIjM2I5OWZjIi8+PC9zdmc+");br(this,"supportedTransactionVersions",new Set(["legacy",0]));br(this,"_publicKey");br(this,"_connecting");br(this,"_wallet");br(this,"_config");br(this,"_readyState");br(this,"_onDisconnect");this._publicKey=null,this._connecting=!1,this._config=r,this._wallet=null,this._readyState=typeof window>"u"?Tr.Unsupported:Tr.Loadable,this._onDisconnect=this.disconnect.bind(this)}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==Tr.Loadable)throw new Xf;this._connecting=!0,this._wallet=new ZSe({network:this._config.network===R1.Mainnet?k1.Mainnet:k1.Devnet,options:this._config.options});const{publicKey:r}=await this._wallet.connect();this._publicKey=r,this.emit("connect",r),this._wallet.client.on("session_delete",this._onDisconnect)}catch(r){throw r.constructor.name==="QRCodeModalError"||r instanceof Error&&r.name==="QRCodeModalError"?new HW:(this._connecting=!1,r)}finally{this._connecting=!1}}async disconnect(){const r=this._wallet;if(r){r.client.off("session_delete",this._onDisconnect),this._publicKey=null;try{r.client.session&&await r.disconnect()}catch(n){console.error("WalletConnectWalletAdapter: disconnect error",n),this.emit("error",new vw(n==null?void 0:n.message,n))}}this.emit("disconnect")}async signTransaction(r){try{const n=this._wallet;if(!n)throw new kn;try{return await n.signTransaction(r)}catch(i){throw new $o(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signMessage(r){try{const n=this._wallet;if(!n)throw new kn;try{return await n.signMessage(r)}catch(i){throw new Ew(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signAndSendTransaction(r){try{const n=this._wallet;if(!n)throw new kn;try{return await n.signAndSendTransaction(r)}catch(i){throw new $o(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(r){try{const n=this._wallet;if(!n)throw new kn;try{return await n.signAllTransactions(r)}catch(i){throw new $o(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}}console.log(" React bundle loaded, root node is:",document.getElementById("root"));const U4=R1.Mainnet,JSe=_D(U4),e4e=[new WV,new XV({network:U4}),new XSe({network:U4})];Oj.createRoot(document.getElementById("root")).render(qr.jsx(Ve.StrictMode,{children:qr.jsx(qW,{endpoint:JSe,children:qr.jsx(xV,{wallets:e4e,autoConnect:!0,children:qr.jsx(DV,{children:qr.jsx(jV,{})})})})}));export{yJ as $,ur as A,zo as B,nr as C,zs as D,J4 as E,p1 as F,bSe as G,Mg as H,Lt as I,h5e as J,EL as K,P4 as L,pi as M,up as N,Ze as O,Ke as P,gJ as Q,tn as R,il as S,Ar as T,j4e as U,Eh as V,k4 as W,lM as X,F$ as Y,sJ as Z,Jf as _,Bi as a,z4e as a0,U4e as a1,Mw as a2,H4e as a3,q4e as a4,ume as a5,XAe as a6,dO as a7,oB as a8,eme as a9,hme as aa,JAe as ab,QAe as ac,Ww as ad,t5e as ae,e5e as af,qK as b,bf as c,_1 as d,f5e as e,or as f,Tn as g,v1 as h,Ff as i,jP as j,Cn as k,Ot as l,kt as m,Ta as n,Bs as o,rs as p,ho as q,d5e as r,EK as s,yc as t,u5e as u,ue as v,zi as w,l5e as x,p5e as y,Hn as z};
